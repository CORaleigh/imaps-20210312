{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/views/3d/support/PropertiesPool.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3D.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DModel.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DView.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js","webpack://imaps/./node_modules/@arcgis/core/widgets/DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js","webpack://imaps/./node_modules/@arcgis/core/widgets/DirectLineMeasurement3D.js"],"names":["o","r","this","owner","properties","afterDispatchHandle","t","s","e","pool","acquired","release","remove","destroy","_get","acquire","push","length","i","super","arguments","type","visible","settings","n","measurement","_set","clone","prototype","value","unit","l","_handles","_propertiesPool","startPoint","endPoint","model","cursorPoint","state","active","geodesicMeasurementDistanceThreshold","sceneView","analyses","add","reset","startPointSurfaceLocation","endPointSurfaceLocation","horizontalDistance","clearMeasurement","_clearOverride","_isOverridden","measurementSurfaceLocation","camera","aboveGround","_override","constructOnly","readOnly","j","y","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","V","_state","_visible","_laserLine","_listenerHandles","_cursorPosition","c","_startPosition","_endPosition","_lastDraggedHandle","dataObjectView","_model","_view","_params","params","_intersector","mode","options","store","getAnalysisView","_initialize","whenAnalysisView","then","view","attached","_initializeListeners","hide","_destroyListeners","show","D","None","viewMode","Direct","Triangle","ProjectedGeodesic","testData","actualVisualizedMeasurement","direct","horizontalLabel","segmentLabel","horizontal","vertical","verticalLabel","labels","laserLineRenderer","heightManifoldEnabled","heightManifoldTarget","pointDistanceEnabled","pointDistanceOrigin","pointDistanceTarget","lineVerticalPlaneEnabled","stripeLength","_computeMeasurementArrowStripeLength","text","available","radius","location","grabbing","_updateLaserLine","events","on","start","end","style","innerColor","innerWidth","glowColor","glowWidth","glowFalloff","globalAlpha","_updateCursorPosition","_updateStartPosition","_updateEndPosition","cursor","spatialReference","screenPoint","sceneIntersectionHelper","intersectToolIntersectorScreen","results","min","getIntersectionPoint","PickResult","a","renderCoordsHelper","fromRenderCoords","intersector","basemapTerrain","ready","elevationProvider","directDistance","toUnit","geodesicAngle","metersPerDegree","toRenderCoords","visualizedMeasurement","_getFocusPosition","pointDistanceLine","origin","_getFocusSpherePosition","target","lineVerticalPlaneSegment","C","watch","allowVisualElementsOrientationChange","PickRequest","scenePoint","mapPoint","_cachedPickRequest","_cachedPickResult","_isAnyPointerDown","deferCreation","startManipulator","endManipulator","create","complete","directLineMeasurementView","createManipulators","next","action","mapEnd","M","_surfaceLocation","surfaceType","forEach","finishMeasurement","manipulators","isMeasuring","get","_updateManipulatorVisibility","_handleImmediateClick","_handlePointerMove","_handlePointerDown","_handlePointerUp","_clearCachedPickRequest","pointerType","_hoverAt","emit","stopPropagation","button","_","interactive","requiresCursorPoint","_pick","x","pick","z","getElevation","d","supportedViewType","_userUnitOptions","_userUnit","tool","isDisabled","verticalDistance","directLabelText","horizontalLabelText","verticalLabelText","_filteredOrAllUnits","_findSelectableUnit","notifyChange","defaultUnit","createTool","removeTool","toolConstructor","constructorArguments","error","unitOptions","indexOf","filter","iconClass","label","messages","messagesUnits","viewModel","isSupported","m","u","p","key","class","hint","v","unsupported","classes","h","b","id","g","for","w","onchange","_changeUnit","bind","map","systems","units","pluralCapitalized","disabled","onclick","_newMeasurement","newMeasurement","role","selectedIndex","aliasOf","source","overridable"],"mappings":"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","file":"chunks/2592.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{ReentrantObjectPool as e}from\"../../../core/ReentrantObjectPool.js\";import{afterDispatch as t,isValueInUse as r}from\"../../../core/accessorSupport/watch.js\";class o{constructor(r,o){this.owner=o,this.properties={},this.afterDispatchHandle=null;for(const t in r){const o=r[t],s=new e(o,null,null,2,2);this.properties[t]={pool:s,acquired:[]}}this.afterDispatchHandle=t((()=>this.release()))}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const e in this.properties){const t=this.properties[e];for(const e of t.acquired)r(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this.properties=null,this.owner=null}get(e){const t=this.owner._get(e),r=this.properties[e];let o=r.pool.acquire();for(r.acquired.push(o);o===t;)r.acquired.push(o),o=r.pool.acquire();return o}release(){for(const e in this.properties){const t=this.properties[e];let o=0;for(const e of t.acquired)r(e)?t.acquired[o++]=e:t.pool.release(e);t.acquired.length=o}}}export default o;export{o as PropertiesPool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import o from\"../../../../../core/Accessor.js\";let i=class extends o{constructor(){super(...arguments),this.type=\"DirectLineMeasurement3D\",this.visible=!0,this.settings=new n,this.measurement=null}destroy(){this.settings.destroy()}set startPoint(e){this.measurement=null,this._set(\"startPoint\",t(e)?e.clone():null)}set endPoint(e){this.measurement=null,this._set(\"endPoint\",t(e)?e.clone():null)}};e([s()],i.prototype,\"type\",void 0),e([s()],i.prototype,\"visible\",void 0),e([s()],i.prototype,\"settings\",void 0),e([s({value:null})],i.prototype,\"startPoint\",null),e([s({value:null})],i.prototype,\"endPoint\",null),e([s()],i.prototype,\"measurement\",void 0),i=e([r(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3D\")],i);let n=class extends o{constructor(){super(...arguments),this.unit=\"metric\"}};e([s({value:\"metric\"})],n.prototype,\"unit\",void 0),n=e([r(\"esri.views.3d.interactive.graphics.directLineMeasurement3D.Settings\")],n);export{i as DirectLineMeasurement3D,n as Settings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import{aliasOf as r}from\"../../../../../core/accessorSupport/decorators/aliasOf.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import i from\"../../../../../core/Accessor.js\";import a from\"../../../../../geometry/Point.js\";import n from\"../../../../../core/Handles.js\";import{PropertiesPool as c}from\"../../../support/PropertiesPool.js\";import{DirectLineMeasurement3D as u}from\"../../graphics/DirectLineMeasurement3D/DirectLineMeasurement3D.js\";let l=class extends i{constructor(){super(...arguments),this._handles=new n,this._propertiesPool=new c({startPoint:a,endPoint:a},this),this.model=new u,this.cursorPoint=null,this.state=\"initial\",this.active=!1,this.geodesicMeasurementDistanceThreshold=1e5}initialize(){this.sceneView.analyses.add(this.model),this.reset()}destroy(){this._handles.destroy(),this._handles=null,this.sceneView.analyses.remove(this.model),this._propertiesPool.destroy(),this._propertiesPool=null,this.model.destroy()}set startPointSurfaceLocation(e){this._set(\"startPointSurfaceLocation\",e)}set endPointSurfaceLocation(e){this._set(\"endPointSurfaceLocation\",e)}get measurementSurfaceLocation(){const e=this.startPointSurfaceLocation,t=this.endPointSurfaceLocation;return null==e||null==t||\"above-the-surface\"===e&&\"below-the-surface\"===t||\"below-the-surface\"===e&&\"above-the-surface\"===t||\"on-the-surface\"===e&&\"on-the-surface\"===t?\"camera-dependent\":\"above-the-surface\"===e||\"above-the-surface\"===t?\"above-the-surface\":\"below-the-surface\"}get validMeasurement(){return t(this.model.startPoint)&&t(this.model.endPoint)}get isMeasuring(){return!!this.startPoint}get geodesicDistanceExceeded(){return t(this.model.measurement)&&this.model.measurement.horizontalDistance&&this.model.measurement.horizontalDistance.value>this.geodesicMeasurementDistanceThreshold}reset(){this.clearMeasurement()}clearMeasurement(){this.state=\"initial\",this.startPoint=null,this.endPoint=null,this.cursorPoint=null,this._clearOverride(\"measurementSurfaceLocation\")}finishMeasurement(){if(!this._isOverridden(\"measurementSurfaceLocation\")){const e=this.measurementSurfaceLocation,t=\"camera-dependent\"===e?this.sceneView.state.camera.aboveGround?\"above-the-surface\":\"below-the-surface\":e;this._override(\"measurementSurfaceLocation\",t)}this.state=\"measured\"}};e([o()],l.prototype,\"messages\",void 0),e([o({constructOnly:!0})],l.prototype,\"sceneView\",void 0),e([o()],l.prototype,\"model\",void 0),e([r(\"model.startPoint\")],l.prototype,\"startPoint\",void 0),e([o({value:null})],l.prototype,\"startPointSurfaceLocation\",null),e([r(\"model.endPoint\")],l.prototype,\"endPoint\",void 0),e([o({value:null})],l.prototype,\"endPointSurfaceLocation\",null),e([o()],l.prototype,\"measurementSurfaceLocation\",null),e([o()],l.prototype,\"cursorPoint\",void 0),e([o()],l.prototype,\"state\",void 0),e([r(\"model.settings.unit\")],l.prototype,\"unit\",void 0),e([o()],l.prototype,\"active\",void 0),e([o({readOnly:!0})],l.prototype,\"validMeasurement\",null),e([o({readOnly:!0})],l.prototype,\"isMeasuring\",null),e([o()],l.prototype,\"geodesicMeasurementDistanceThreshold\",void 0),e([o({readOnly:!0})],l.prototype,\"geodesicDistanceExceeded\",null),l=e([s(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel\")],l);var m=l;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t,unwrap as i,isNone as s,unwrapOr as r,applySome as n}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import l from\"../../../../../core/Accessor.js\";import{nextHighestPowerOfTen as d}from\"../../../../../core/mathUtils.js\";import{screenPointObjectToArray as h}from\"../../../../../core/screenUtils.js\";import{c}from\"../../../../../chunks/vec3f64.js\";import u from\"../../../../../core/Handles.js\";import{getReferenceEllipsoid as _}from\"../../../../../geometry/projectionEllipsoid.js\";import{preferredImperialLengthUnit as m,convertUnit as p}from\"../../../../../core/unitUtils.js\";import{lineSegment as g}from\"../../../support/geometryUtils.js\";import{Intersector as b}from\"../../../webgl-engine/lib/Intersector.js\";import{getElevationAtPoint as w}from\"../../../support/ElevationProvider.js\";import{createSphereManipulator as v}from\"../../manipulatorUtils.js\";import{copyParameter as L,pointToPointScreenDistance as P}from\"../support/viewUtils.js\";import{LaserlineVisualElement as f}from\"../../visualElements/LaserlineVisualElement.js\";var j;const y={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5};let V=j=class extends l{constructor(e){super({}),this._state=\"pending\",this._visible=!1,this._laserLine=null,this._handles=new u,this._listenerHandles=null,this._cursorPosition=c(),this._startPosition=c(),this._endPosition=c(),this._lastDraggedHandle=null,this.dataObjectView=null,this._model=e.model,this._view=e.model.sceneView,this._params=e.params?L(y,e.params):L(y,{}),this._intersector=new b(this._view.state.mode),this._intersector.options.store=0}initialize(){const e=this._model.model,i=this._view.getAnalysisView(e);t(i)?this._initialize(i):this._view.whenAnalysisView(e).then((e=>this._initialize(e)))}_initialize(e){switch(this._state){case\"pending\":break;case\"destroyed\":return}this._set(\"dataObjectView\",e),this._laserLine=new f({view:this._view,attached:!0}),this._initializeListeners(),this._state=\"ready\"}destroy(){switch(this._state){case\"pending\":return void(this._state=\"destroyed\");case\"ready\":break;case\"destroyed\":default:return}this.hide(),this._destroyListeners(),this._handles.destroy(),this._handles=null,this._laserLine.destroy(),this._laserLine=null,this._state=\"destroyed\"}get requiresCursorPoint(){return\"initial\"===this._model.state&&this._model.active}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get viewMode(){const e=this.dataObjectView;if(!t(e))return D.None;switch(e.viewMode){default:case\"none\":return D.None;case\"segment\":return D.Direct;case\"segment-and-triangle\":return D.Triangle;case\"segment-and-projection\":return D.ProjectedGeodesic}}get testData(){const e=this._laserLine.testData;let i=null;const s=this.dataObjectView;if(t(s)){const e=\"geodesic\"===s.actualVisualizedMeasurement;i={direct:e?s.horizontalLabel:s.segmentLabel,horizontal:e?s.segmentLabel:s.horizontalLabel,vertical:s.verticalLabel}}else i={direct:null,horizontal:null,vertical:null};return{labels:i,laserLineRenderer:{heightManifoldEnabled:!!t(e)&&e.heightManifoldEnabled,heightManifoldTarget:t(e)?e.heightManifoldTarget:null,pointDistanceEnabled:!!t(e)&&e.pointDistanceEnabled,pointDistanceOrigin:t(e)?e.pointDistanceOrigin:null,pointDistanceTarget:t(e)?e.pointDistanceTarget:null,lineVerticalPlaneEnabled:!!t(e)&&e.lineVerticalPlaneEnabled},stripeLength:this._computeMeasurementArrowStripeLength(this._model.model)}}get directLabelText(){return t(this.dataObjectView)?this.dataObjectView.segmentLabel.text:null}get horizontalLabelText(){return t(this.dataObjectView)?this.dataObjectView.horizontalLabel.text:null}get verticalLabelText(){return t(this.dataObjectView)?this.dataObjectView.verticalLabel.text:null}createManipulators(){const e=()=>{const e=v(this._view,this._params.handleColor,this._params.handleOpacity);return e.available=!1,e.radius=this._params.handleRadius,e},t=e(),s=e();this._model.startPoint&&(t.location=i(this._model.startPoint),t.available=!0),this._model.endPoint&&(s.location=i(this._model.endPoint),s.available=!0);const r=()=>{let e=this._lastDraggedHandle;t.grabbing&&!s.grabbing&&(e=\"start\"),s.grabbing&&!t.grabbing&&(e=\"end\"),t.grabbing||s.grabbing||(e=null);const i=e!==this._lastDraggedHandle;this._lastDraggedHandle=e,i&&this.visible&&this._updateLaserLine()};return this._handles.add([t.events.on(\"grab-changed\",(()=>{r()})),s.events.on(\"grab-changed\",(()=>{r()}))]),{start:t,end:s}}show(){switch(this._state){case\"ready\":this._visible||(this._visible=!0,this._model.model.visible=!0,this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha},this._laserLine.visible=!0,this._updateCursorPosition(),this._updateStartPosition(),this._updateEndPosition(),this._updateLaserLine());break;case\"pending\":this._visible=!0;break;case\"destroyed\":default:return}}hide(){switch(this._state){case\"ready\":this._visible&&(this._visible=!1,this._model.model.visible=!1,this._laserLine.visible=!1,this._view.cursor=null);break;case\"pending\":this._visible=!1;break;case\"destroyed\":default:return}}pick(e){const t=this._view.spatialReference,i=h(e.screenPoint);this._view.sceneIntersectionHelper.intersectToolIntersectorScreen(i,this._intersector);const r=this._intersector.results.min,n=c();if(!r.getIntersectionPoint(n))return new j.PickResult;const a=this._view.renderCoordsHelper.fromRenderCoords(n,t);if(s(a))return new j.PickResult;const o=\"TerrainRenderer\"===r.intersector?\"ground\":\"feature\";return new j.PickResult(o,n,a)}getElevation(e){return this._view.basemapTerrain.ready?r(w(this._view.elevationProvider,e),0):0}overlappingHandles(e,t){return P(e,t,this._view)<=this._params.handleRadius}_computeMeasurementArrowStripeLength(e){let i=null;if(t(e.measurement)){const t=e.measurement.directDistance;switch(this._model.model.settings.unit){case\"metric\":i=t&&t.toUnit(\"meters\");break;case\"imperial\":i=t&&t.toUnit(m(t.value,t.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const t=e.measurement.geodesicAngle;i=t&&t.toUnit(\"degrees\");break}default:i=t&&t.toUnit(this._model.model.settings.unit)}}let s=1;return i&&(s=d(i.value/30),s*=\"degrees\"===i.unit?_(this._view.spatialReference).metersPerDegree:p(1,i.unit,\"meters\")),s}_updateCursorPosition(){this._model.cursorPoint&&this._view.renderCoordsHelper.toRenderCoords(this._model.cursorPoint,this._cursorPosition)}_updateStartPosition(){t(this._model.startPoint)&&this._view.renderCoordsHelper.toRenderCoords(this._model.startPoint,this._startPosition)}_updateEndPosition(){t(this._model.endPoint)&&this._view.renderCoordsHelper.toRenderCoords(this._model.endPoint,this._endPosition)}_getFocusPosition(){const e=this._model,i=this.viewMode===D.Direct&&t(this.dataObjectView)&&\"euclidean\"===this.dataObjectView.visualizedMeasurement;switch(e.state){case\"drawing\":return i?this._startPosition:e.endPoint?this._endPosition:this._startPosition;case\"editing\":return i?\"start\"===this._lastDraggedHandle?this._endPosition:this._startPosition:\"start\"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return e.cursorPoint?this._cursorPosition:null}}_getFocusSpherePosition(){return\"drawing\"===this._model.state||\"end\"===this._lastDraggedHandle?this._startPosition:this._endPosition}_updateLaserLine(){const e=this._model,i=this._getFocusPosition(),s=this.viewMode,r=this.dataObjectView,n=this._params.laserLineEnabled&&!!i&&\"measured\"!==e.state&&e.active;if(n&&t(r)){const t=\"euclidean\"===r.visualizedMeasurement;this._laserLine.heightManifoldTarget=t?i:null;const a=n&&!!e.startPoint&&\"geodesic\"===r.actualVisualizedMeasurement;this._laserLine.pointDistanceLine=a?{origin:this._getFocusSpherePosition(),target:i}:null;const o=n&&s===D.Triangle;this._laserLine.lineVerticalPlaneSegment=o?g.fromPoints(this._startPosition,this._endPosition,C):null}else this._laserLine.heightManifoldTarget=null,this._laserLine.pointDistanceLine=null,this._laserLine.lineVerticalPlaneSegment=null}_initializeListeners(){this._listenerHandles=new u,this._listenerHandles.add([this._model.watch(\"state\",(e=>{n(this.dataObjectView,(t=>{t.allowVisualElementsOrientationChange=\"measured\"!==e})),this._visible&&this._updateLaserLine()}),!0),this._model.watch(\"measurementMode\",(()=>{this._visible&&this._updateLaserLine()}),!0),this._model.watch(\"cursorPoint\",(()=>{this._updateCursorPosition(),this._visible&&this._updateLaserLine()}),!0),this._model.model.watch(\"startPoint\",(()=>{this._updateStartPosition(),this._visible&&this._updateLaserLine()}),!0),this._model.model.watch(\"endPoint\",(()=>{this._updateEndPosition(),this._visible&&this._updateLaserLine()}),!0),this._model.watch(\"active\",(()=>{this._visible&&this._updateLaserLine()}),!0)])}_destroyListeners(){this._listenerHandles.destroy(),this._listenerHandles=null}};var D;e([a({readOnly:!0})],V.prototype,\"dataObjectView\",void 0),V=j=e([o(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView\")],V),function(e){class t{}e.PickRequest=t;class i{constructor(e=null,t=null,i=null){this.type=e,this.scenePoint=t,this.mapPoint=i}}e.PickResult=i}(V||(V={})),function(e){e[e.Triangle=0]=\"Triangle\",e[e.ProjectedGeodesic=1]=\"ProjectedGeodesic\",e[e.Direct=2]=\"Direct\",e[e.None=3]=\"None\"}(D||(D={}));const C=g.create();var O=V;export default O;export{V as DirectLineMeasurement3DView,D as ViewMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{unwrap as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../../../../../core/accessorSupport/decorators/aliasOf.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import o from\"../../../../../geometry/Point.js\";import\"../../../../../geometry.js\";import n from\"../../../../../core/Handles.js\";import{init as a}from\"../../../../../core/watchUtils.js\";import{createScreenPointFromEvent as d}from\"../../../../support/screenUtils.js\";import{clonePoint as c}from\"../../../../../layers/graphics/hydratedFeatures.js\";import{createManipulatorDragEventPipeline as l,resetProperties as h}from\"../../../../interactive/dragEventPipeline.js\";import{InteractiveToolBase as u}from\"../../../../interactive/InteractiveToolBase.js\";import{screenToMap3D as m,hideManipulatorWhileDragging as p}from\"../../editingTools/dragEventPipeline3D.js\";import P from\"./DirectLineMeasurement3DModel.js\";import{DirectLineMeasurement3DView as v}from\"./DirectLineMeasurement3DView.js\";let y=class extends u{constructor(e){super(e),this._handles=new n,this._cachedPickRequest=new v.PickRequest,this._cachedPickResult=new v.PickResult,this._isAnyPointerDown=!1,this.deferCreation=!0,this.startManipulator=null,this.endManipulator=null,this.model=new P({sceneView:e.view})}initialize(){const e=new v({model:this.model});this._set(\"directLineMeasurementView\",e);const i=a(this,\"state\",(e=>{\"ready\"!==e&&this.create(),\"measured\"===e&&this.complete()}),!0);this._handles.add(i);const{start:s,end:r}=this.directLineMeasurementView.createManipulators(),o=(e,i,s)=>l(e,((e,r,o)=>{const n=p(e);r.next(n).next(m(this.view)).next((e=>\"start\"!==e.action?e:null)).next((t=>{const r=c(t.mapEnd,M);this.model[i]=r,e.location=r,this.model[s]=this._surfaceLocation(r,t.surfaceType)})),o.next(n).next(h(this.model,[i,s])).next((()=>{e.location=t(this.model[i])}))}));this._handles.add([o(s,\"startPoint\",\"startPointSurfaceLocation\"),o(r,\"endPoint\",\"endPointSurfaceLocation\")]),[s,r].forEach((e=>{this._handles.add([e.events.on(\"grab-changed\",(()=>{const e=s.grabbing||r.grabbing;e&&\"measured\"===this.model.state&&(this.model.state=\"editing\"),e||(this.model.finishMeasurement(),\"editing\"===this.model.state&&(this.model.state=\"measured\"))}))])})),this.manipulators.add(s),this.manipulators.add(r),this.startManipulator=s,this.endManipulator=r}destroy(){this.directLineMeasurementView.destroy(),this._set(\"directLineMeasurementView\",null),this.model.destroy(),this._set(\"model\",null),this._handles.destroy(),this._handles=null}get state(){var e;return null!=(e=this.model)&&e.isMeasuring?\"measured\"===this.model.state?\"measured\":\"measuring\":\"ready\"}get creating(){return\"initial\"===this.model.state||\"drawing\"===this.model.state}get isSupported(){return\"3d\"===this.get(\"view.type\")}get cursor(){var e;return null==(e=this.model)||!e.active||\"drawing\"!==this.model.state&&\"initial\"!==this.model.state?null:\"crosshair\"}activate(){this.model.active=!0}deactivate(){this.model.active=!1}onDetach(){this.model.reset()}onShow(){this.directLineMeasurementView.show(),this._updateManipulatorVisibility()}onHide(){this.directLineMeasurementView.hide()}onInputEvent(e){switch(e.type){case\"immediate-click\":this._handleImmediateClick(e);break;case\"pointer-move\":this._handlePointerMove(e);break;case\"pointer-down\":this._handlePointerDown();break;case\"pointer-up\":this._handlePointerUp()}this._updateManipulatorVisibility()}_handlePointerMove(e){this._clearCachedPickRequest();const t=d(e);\"mouse\"===e.pointerType&&(this._hoverAt(t),\"drawing\"===this.model.state&&(this.endManipulator.events.emit(\"drag\",{action:\"update\",start:t,screenPoint:t}),e.stopPropagation()))}_handlePointerDown(){this._isAnyPointerDown=!0}_handlePointerUp(){this._isAnyPointerDown=!1}_handleImmediateClick(e){if(this._clearCachedPickRequest(),!_(e))return;const t=d(e),i=e.pointerType;let s=!1;if(this.model.active)switch(this.model.state){case\"initial\":this.startManipulator.events.emit(\"drag\",{action:\"start\",pointerType:i,start:t,screenPoint:t}),this.startManipulator.events.emit(\"drag\",{action:\"end\",start:t,screenPoint:t}),this.model.startPoint&&(this.startManipulator.interactive=!1,this.endManipulator.interactive=!1,this.model.state=\"drawing\",this.endManipulator.events.emit(\"drag\",{action:\"start\",pointerType:i,start:t,screenPoint:t}),s=!0);break;case\"drawing\":this.endManipulator.events.emit(\"drag\",{action:\"update\",start:t,screenPoint:t}),null!=this.model.endPoint&&(this.endManipulator.events.emit(\"drag\",{action:\"end\",start:t,screenPoint:t}),this.startManipulator.interactive=!0,this.endManipulator.interactive=!0,this.model.finishMeasurement(),s=!0)}s&&e.stopPropagation(),\"mouse\"===e.pointerType&&this._hoverAt(t)}_hoverAt(e){const t=this._isAnyPointerDown&&\"drawing\"!==this.model.state&&\"editing\"!==this.model.state;if(this.directLineMeasurementView.requiresCursorPoint&&!t){const t=this._pick(e);t.mapPoint&&(this.model.cursorPoint=t.mapPoint)}else this.model.cursorPoint=null}_pick(e){const t=this._cachedPickRequest.screenPoint;return t&&t.x===e.x&&t.y===e.y||(this._cachedPickRequest.screenPoint=e,this._cachedPickResult=this.directLineMeasurementView.pick(this._cachedPickRequest)),this._cachedPickResult}_clearCachedPickRequest(){this._cachedPickRequest.screenPoint=null}_surfaceLocation(e,t){return 0===t?\"on-the-surface\":e.z>=this.directLineMeasurementView.getElevation(e)?\"above-the-surface\":\"below-the-surface\"}_updateManipulatorVisibility(){this.startManipulator.available=null!=this.model.startPoint,this.endManipulator.available=null!=this.model.endPoint}};function _(e){return\"mouse\"!==e.pointerType||0===e.button}e([i({readOnly:!0})],y.prototype,\"state\",null),e([i({readOnly:!0})],y.prototype,\"creating\",null),e([i({readOnly:!0})],y.prototype,\"isSupported\",null),e([i({readOnly:!0})],y.prototype,\"cursor\",null),e([i({constructOnly:!0})],y.prototype,\"model\",void 0),e([i({constructOnly:!0})],y.prototype,\"directLineMeasurementView\",void 0),e([s(\"model.mode\")],y.prototype,\"mode\",void 0),e([s(\"model.unit\")],y.prototype,\"unit\",void 0),e([s(\"model.validMeasurement\")],y.prototype,\"validMeasurement\",void 0),y=e([r(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool\")],y);const M=new o;var g=y;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isNone as e,isSome as i}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import n from\"../../core/Handles.js\";import{measurementLengthUnits as l}from\"../../core/unitUtils.js\";import{init as a}from\"../../core/watchUtils.js\";import{defaultUnitPropertyMetadata as u}from\"../support/commonProperties.js\";import{InteractiveToolViewModel as c}from\"../support/InteractiveToolViewModel.js\";import p from\"../../views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js\";const d=r.getLogger(\"esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel\");let m=class extends c{constructor(t){super(t),this.supportedViewType=\"3d\",this._handles=new n,this._userUnitOptions=null,this._userUnit=null}initialize(){this._handles.add([a(this,\"unit\",(t=>{this.tool&&(this.tool.model.unit=t)}))])}destroy(){this._handles.destroy(),this._handles=null}get state(){return this.isDisabled?\"disabled\":this.tool?this.tool.state:\"ready\"}get measurement(){if(!this.tool)return null;const t=this.tool.model,r=this.tool.directLineMeasurementView.dataObjectView;if(e(r))return{mode:\"euclidean\",directDistance:{text:null,state:\"unavailable\"},horizontalDistance:{text:null,state:\"unavailable\"},verticalDistance:{text:null,state:\"unavailable\"}};const s=r.actualVisualizedMeasurement,o=\"geodesic\"===s,n=i(t.model.measurement),l=this.tool.directLineMeasurementView;return{mode:s,directDistance:{text:o?null:l.directLabelText,state:n&&!o?\"available\":\"unavailable\"},horizontalDistance:{text:l.horizontalLabelText,state:n?\"available\":\"unavailable\"},verticalDistance:{text:l.verticalLabelText,state:n?\"available\":\"unavailable\"}}}set unitOptions(t){this._userUnitOptions=t,this._set(\"unitOptions\",this._filteredOrAllUnits(this._userUnitOptions))}get unitOptions(){return this._filteredOrAllUnits(this._userUnitOptions)}set unit(t){this._userUnit=t?this._findSelectableUnit(t,this._userUnit):null,this.notifyChange(\"unit\")}get unit(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)}start(){return this.createTool()}clear(){this.removeTool()}createToolParams(){return{toolConstructor:p,constructorArguments:()=>({unit:this.unit})}}logUnsupportedError(){d.error(\"DirectLineMeasurement3D widget is not implemented for MapView\")}logError(...t){d.error(...t)}_findSelectableUnit(t,e){const i=this.unitOptions;return-1!==i.indexOf(t)?t:e?this._findSelectableUnit(e):i[0]}_filteredOrAllUnits(t){if(!t)return l.slice();const e=t.filter((t=>-1!==l.indexOf(t)));return 0===e.length?l.slice():e}};t([s({readOnly:!0})],m.prototype,\"state\",null),t([s({readOnly:!0})],m.prototype,\"measurement\",null),t([s()],m.prototype,\"tool\",void 0),t([s(u)],m.prototype,\"defaultUnit\",void 0),t([s()],m.prototype,\"unitOptions\",null),t([s()],m.prototype,\"unit\",null),m=t([o(\"esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel\")],m);var h=m;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../core/accessorSupport/decorators/aliasOf.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{ignoreAbortErrors as r}from\"../core/promiseUtils.js\";import{isMeasurementSystem as n}from\"../core/unitUtils.js\";import\"./support/widgetUtils.js\";import{accessibleHandler as a}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as o}from\"./support/decorators/messageBundle.js\";import{j as l}from\"../chunks/index.js\";import m from\"./Widget.js\";import u from\"./DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js\";const c={button:\"esri-button esri-button--secondary\",buttonDisabled:\"esri-button--disabled\",base:\"esri-direct-line-measurement-3d\",widget:\"esri-widget\",panel:\"esri-widget--panel\",container:\"esri-direct-line-measurement-3d__container\",hint:\"esri-direct-line-measurement-3d__hint\",hintText:\"esri-direct-line-measurement-3d__hint-text\",panelError:\"esri-direct-line-measurement-3d__panel--error\",measurement:\"esri-direct-line-measurement-3d__measurement\",measurementItem:\"esri-direct-line-measurement-3d__measurement-item\",measurementItemDisabled:\"esri-direct-line-measurement-3d__measurement-item--disabled\",measurementItemTitle:\"esri-direct-line-measurement-3d__measurement-item-title\",measurementItemValue:\"esri-direct-line-measurement-3d__measurement-item-value\",settings:\"esri-direct-line-measurement-3d__settings\",units:\"esri-direct-line-measurement-3d__units\",unitsLabel:\"esri-direct-line-measurement-3d__units-label\",unitsSelect:\"esri-direct-line-measurement-3d__units-select esri-select\",unitsSelectWrapper:\"esri-direct-line-measurement-3d__units-select-wrapper\",actionSection:\"esri-direct-line-measurement-3d__actions\",clearButton:\"esri-direct-line-measurement-3d__clear-button\",widgetIcon:\"esri-icon-measure-line\"};let d=class extends m{constructor(e,t){super(e,t),this.view=null,this.visible=null,this.iconClass=c.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.viewModel=new u,this.unitOptions=null,this.unit=null}render(){const{isSupported:e,active:t,state:s,measurement:i,unit:r}=this.viewModel,a=\"disabled\"===s,o=\"ready\"===s,m=\"measuring\"===s||\"measured\"===s,{messages:u,messagesUnits:d}=this,p=t&&o?l(\"section\",{key:\"esri-direct-line-measurement-3d__hint\",class:c.hint},l(\"p\",{class:c.hintText},u.hint)):null,v=e?null:l(\"section\",{key:\"esri-direct-line-measurement-3d__unsupported\",class:c.panelError},l(\"p\",null,u.unsupported)),_=(e,t,s)=>{switch(t.state){case\"available\":return l(\"div\",{key:`${s}-enabled`,class:c.measurementItem},l(\"span\",{class:c.measurementItemTitle},e),l(\"span\",{class:c.measurementItemValue},t.text));case\"unavailable\":return l(\"div\",{key:`${s}-disabled`,class:this.classes(c.measurementItem,c.measurementItemDisabled)},l(\"span\",{class:c.measurementItemTitle},e))}},h=m?l(\"section\",{key:\"esri-direct-line-measurement-3d__measurement\",class:c.measurement},_(u.direct,i.directDistance,\"direct\"),_(u.horizontal,i.horizontalDistance,\"horizontal\"),_(u.vertical,i.verticalDistance,\"vertical\")):null,b=`${this.id}__units`,g=l(\"label\",{class:c.unitsLabel,for:b},u.unit),w=l(\"div\",{class:c.unitsSelectWrapper},l(\"select\",{class:c.unitsSelect,id:b,onchange:this._changeUnit,bind:this,value:r},this.viewModel.unitOptions.map((e=>{var t;return l(\"option\",{key:e,value:e},n(e)?d.systems[e]:null==(t=d.units[e])?void 0:t.pluralCapitalized)})))),y=l(\"section\",{key:\"esri-direct-line-measurement-3d__units\",class:c.units},g,w),M=m?l(\"div\",{key:\"settings\",class:c.settings},y):null,j=!e||t&&!m?null:l(\"div\",{class:c.actionSection},l(\"button\",{disabled:a,class:this.classes(c.button,c.clearButton,a&&c.buttonDisabled),bind:this,onclick:this._newMeasurement,type:\"button\"},u.newMeasurement)),D=this.visible?l(\"div\",{class:c.container},v,p,M,h,j):null;return l(\"div\",{key:\"\",class:this.classes(c.base,c.widget,c.panel),role:\"presentation\"},D)}_newMeasurement(){r(this.viewModel.start())}_changeUnit(e){const t=e.target,s=t.options[t.selectedIndex];s&&(this.unit=s.value)}};e([s(\"viewModel.view\")],d.prototype,\"view\",void 0),e([s(\"viewModel.visible\")],d.prototype,\"visible\",void 0),e([s(\"viewModel.active\")],d.prototype,\"active\",void 0),e([t()],d.prototype,\"iconClass\",void 0),e([t({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],d.prototype,\"label\",void 0),e([t(),o(\"esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D\")],d.prototype,\"messages\",void 0),e([t(),o(\"esri/core/t9n/Units\")],d.prototype,\"messagesUnits\",void 0),e([t({type:u})],d.prototype,\"viewModel\",void 0),e([s(\"viewModel.unitOptions\")],d.prototype,\"unitOptions\",void 0),e([s(\"viewModel.unit\")],d.prototype,\"unit\",void 0),e([a()],d.prototype,\"_newMeasurement\",null),e([a()],d.prototype,\"_changeUnit\",null),d=e([i(\"esri.widgets.DirectLineMeasurement3D\")],d);var p=d;export default p;\n"],"sourceRoot":""}