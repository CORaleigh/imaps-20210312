{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/core/JSONSupport.js","webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/read.js","webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/write.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityForm.js","webpack://imaps/./node_modules/focus-trap/dist/focus-trap.esm.js","webpack://imaps/./node_modules/tabbable/dist/index.esm.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityModal.js","webpack://imaps/./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack://imaps/./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack://imaps/./node_modules/@arcgis/core/identity/ServerInfo.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["i","s","r","super","t","this","write","c","call","prototype","toJSON","isDefaultToJSON","declaredClass","Error","read","a","e","o","enabled","source","n","indexOf","f","Object","getOwnPropertyNames","metadatas","default","set","origin","u","d","setDefaultOrigin","reader","ignoreDefaults","messages","forEach","type","loaded","push","loadWarnings","l","writer","get","overridePolicy","allowNull","isRequired","propertyName","target","error","name","message","defaultEquals","Array","isArray","ignoreOrigin","store","originOf","p","g","keys","length","resources","pendingOperations","Promise","all","then","writtenProperties","propName","oldOrigin","newOrigin","_usernameInputNode","_passwordInputNode","signingIn","server","resource","oAuthPrompt","class","oAuthInfo","info","test","lblItem","lblUser","value","required","autocomplete","spellcheck","bind","afterCreate","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","b","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","slice","apply","querySelectorAll","unshift","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","radioSet","radioScope","form","ownerDocument","queryRadios","window","CSS","escape","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","visibility","nodeUnderDetails","parentElement","display","isHidden","children","some","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","concat","isFocusable","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","createFocusTrap","elements","userOptions","doc","document","config","arguments","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","container","contains","getNodeForOption","optionName","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","options","regularTabbables","orderedTabbables","tabbableNodes","candidate","candidateTabindex","sort","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","shiftKey","startOfGroupIndex","_ref","destinationGroupIndex","lastOfGroupIndex","_ref2","_destinationGroupIndex","checkTab","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","undefined","previousActiveElement","updateContainerElements","containerElements","elementsAsArray","Boolean","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","close","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","Date","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","json","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","R","host","P","C","D","localStorage","sessionStorage","j","_portalConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","normalizeWebTierAuth","_appUrlObj","location","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","assign","q","scope","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","findCredential","destroy","resolve","_restInfoPms","_selfReq","selfDfd","_getPortalSelf","_enqueue","_isRESTService","_","isAdmin","serverUrl","customParameters","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","checkAppAccess","credential","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","_postMessageAuthHandle","endsWith","postMessage","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","path","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","headers","allSSL","portalMode","supportsOAuth","protocol","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_findOAuthInfo","parent","isValid","_pendingDfd","_exchangeToken","oAuthState","oAuthSignIn","_getPlatformSelf","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","urlKey","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"chunks/2128.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{subclass as t}from\"./accessorSupport/decorators/subclass.js\";import s from\"./Accessor.js\";import{read as e}from\"./accessorSupport/read.js\";import{write as o}from\"./accessorSupport/write.js\";const i=s=>{let i=class extends s{constructor(...r){super(...r)}read(r,t){e(this,r,t)}write(r={},t){return o(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c.call(this,r,t)}};return i=r([t(\"esri.core.JSONSupport\")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c(r,t){if(!r)return null;if(r.declaredClass)throw new Error(\"JSON object is already hydrated\");const s=new this;return s.read(r,t),s}function n(r){return r&&\"read\"in r&&\"write\"in r&&\"toJSON\"in r}let a=class extends(i(s)){};a=r([t(\"esri.core.JSONSupport\")],a);export{a as JSONSupport,i as JSONSupportMixin,n as isJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"./utils.js\";import{valueOf as t,exists as r}from\"./get.js\";import{originSpecificReadPropertyDefinition as o,originSpecificPropertyDefinition as n}from\"./extensions/serializableProperty.js\";function s(e,t,o){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if(\"string\"==typeof n){if(n===t)return!0;if(n.indexOf(\".\")>-1&&0===n.indexOf(t)&&r(n,o))return!0}else for(const s of n){if(s===t)return!0;if(s.indexOf(\".\")>-1&&0===s.indexOf(t)&&r(s,o))return!0}return!1}function i(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function f(e,t,r,n,f){let a=o(t[r],f);i(a)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))a=o(t[i],f),s(a,r,n)&&(e[i]=!0)}function a(e,t,r,o){const s=r.metadatas,i=n(s[t],\"any\",o),f=i&&i.default;if(void 0===f)return;const a=\"function\"==typeof f?f.call(e,t,o):f;void 0!==a&&r.set(t,a)}const c={origin:\"service\"};function u(r,n,s=c){if(!n||\"object\"!=typeof n)return;const i=e(r),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(n))f(d,u,e,n,s);i.setDefaultOrigin(s.origin);for(const e of Object.getOwnPropertyNames(d)){const f=o(u[e],s).read,a=f&&f.source;let c;c=a&&\"string\"==typeof a?t(n,a):n[e],f&&f.reader&&(c=f.reader.call(r,c,n,s)),void 0!==c&&i.set(e,c)}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||a(r,e,i,s);i.setDefaultOrigin(\"user\")}function d(e,t,r,o=c){var n;const s={...o,messages:[]};r(s),null==(n=s.messages)||n.forEach((t=>{\"warning\"!==t.type||e.loaded?o&&o.messages&&o.messages.push(t):e.loadWarnings.push(t)}))}export default u;export{u as read,d as readLoadable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport r from\"../Logger.js\";import{getProperties as e,merge as t}from\"./utils.js\";import{originSpecificWritePropertyDefinition as i}from\"./extensions/serializableProperty.js\";import o from\"../Error.js\";import{idToReadableName as n,nameToId as s}from\"./PropertyOrigin.js\";import{equals as u}from\"../arrayUtils.js\";const l=r.getLogger(\"esri.core.accessorSupport.write\");function a(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function f(r,e,t,i,n,u){if(!i||!i.write)return!1;const a=r.get(t);if(!n&&i.write.overridePolicy){const e=i.write.overridePolicy.call(r,a,t,u);void 0!==e&&(n=e)}if(n||(n=i.write),!n||!1===n.enabled)return!1;if((null===a&&!n.allowNull||void 0===a)&&n.isRequired){const e=new o(\"web-document-write:property-required\",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return e&&u&&u.messages?u.messages.push(e):e&&!u&&l.error(e.name,e.message),!1}if(void 0===a)return!1;if(null===a&&!n.allowNull)return!1;if(c(r,t,u,i,a))return!1;if(void 0!==i.default)return!0;if(!n.ignoreOrigin&&u&&u.origin){if(e.store.originOf(t)<s(u.origin))return!1}return!0}function c(r,e,t,i,o){const n=i.default;if(void 0===n)return!1;if(null!=i.defaultEquals)return i.defaultEquals(o);if(\"function\"==typeof n){if(Array.isArray(o)){const i=n.call(r,e,t);return u(i,o)}return!1}return n===o}function p(r,t,o,n){const s=e(r),u=s.metadatas,l=i(u[t],n);return!!l&&f(r,s,t,l,o,n)}function g(r,o,s){if(r&&\"function\"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return t(o,r.toJSON());const u=e(r),l=u.metadatas;for(const e in l){const c=i(l[e],s);if(!f(r,u,e,c,void 0,s))continue;const p=r.get(e),g=a(r,c,c.write&&\"string\"==typeof c.write.target?c.write.target:e,p,s);Object.keys(g).length>0&&(o=t(o,g),s&&s.resources&&s.resources.pendingOperations&&s.resources.pendingOperations.length&&Promise.all(s.resources.pendingOperations).then((()=>t(o,g))),s&&s.writtenProperties&&s.writtenProperties.push({target:r,propName:e,oldOrigin:n(u.store.originOf(e)),newOrigin:s.origin}))}return o}export default g;export{p as willPropertyWrite,g as write};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as n}from\"../chunks/index.js\";import u from\"../widgets/Widget.js\";const l={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},p=\"ArcGIS Online\";let a=class extends u{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:u,messages:a}=this,d=n(\"div\",{class:l.group},r(u?a.oAuthInfo:a.info,{server:/\\.arcgis\\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblUser,n(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:l.esriInput}))),m=u?null:n(\"div\",{class:l.group},n(\"label\",{class:l.label},a.lblPwd,n(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:l.esriInput}))),h=n(\"div\",{class:this.classes(l.group,l.footer)},n(\"input\",{type:\"submit\",disabled:!!i,value:i?a.lblSigning:a.lblOk,class:l.esriButton}),n(\"input\",{type:\"button\",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),b=s?n(\"div\",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return n(\"form\",{class:l.base,bind:this,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),i(\"esri/identity/t9n/identity\")],a.prototype,\"messages\",void 0),s([e()],a.prototype,\"signingIn\",void 0),s([e()],a.prototype,\"server\",void 0),s([e()],a.prototype,\"resource\",void 0),s([e()],a.prototype,\"error\",void 0),s([e()],a.prototype,\"oAuthPrompt\",void 0),a=s([t(\"esri.identity.IdentityForm\")],a);var d=a;export default d;\n","/*!\n* focus-trap 6.2.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref) {\n          var firstTabbableNode = _ref.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var lastTabbableNode = _ref2.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.1.5\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as n}from\"../widgets/support/widget.js\";import a from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const l={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let d=class extends a{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,n=e&&!!o,a={[l.open]:n,[l.closed]:!n},c=r(\"button\",{class:l.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?r(\"h1\",{id:d,class:l.title},s):null,m=n?r(\"div\",{bind:this,class:l.dialog,role:\"dialog\",\"aria-labelledby\":d,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return r(\"div\",{tabIndex:-1,class:this.classes(l.base,a)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:l.content,id:t,innerHTML:e}):n(e)?r(\"div\",{class:l.content,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:l.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],d.prototype,\"container\",void 0),t([o()],d.prototype,\"content\",void 0),t([o()],d.prototype,\"open\",void 0),t([o(),i(\"esri/t9n/common\")],d.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],d.prototype,\"title\",void 0),d=t([s(\"esri.identity.IdentityModal\")],d);var p=d;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{fixJson as s}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import i from\"../config.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"../core/Error.js\";import{urlToObject as h,hasSameOrigin as l,Url as c,queryToObject as d,normalize as u,getProxyRule as p,makeAbsolute as _,objectToQuery as f}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as g}from\"../core/events.js\";import{createAbortController as m,createResolver as v,onAbort as S,isAborted as w}from\"../core/promiseUtils.js\";import I from\"../core/Evented.js\";import{id as k}from\"../kernel.js\";import A from\"../request.js\";import y from\"./IdentityForm.js\";import U from\"./IdentityModal.js\";import x from\"./OAuthCredential.js\";import T from\"./OAuthInfo.js\";import O from\"./ServerInfo.js\";const R={},b=e=>{const t=new c(e.owningSystemUrl).host,s=new c(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},P=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let C=null,D=null;try{C=window.localStorage,D=window.sessionStorage}catch{}let j=class extends I{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=y,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appUrlObj=h(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),o=!0;i||(i=new O,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),o=!1):(r=new q({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),o||r.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new T(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new q(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,i=!0;t&&(s=!!t.token,r=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=m(),n=v();if(t.signal&&S(t.signal,(()=>{o.abort()})),S(o,(()=>{n.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))})),w(o))return n.promise;t.signal=o.signal;const h=this._isAdminResource(e),c=s?this.findCredential(e):null;let d;if(c&&r&&r.details&&498===r.details.httpStatus)c.destroy();else if(c)return d=new a(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+c.userId+\"'. You do not have access to this resource: \"+e,{error:r}),n.reject(d),n.promise;const u=this._findCredential(e,t);if(u)return n.resolve(u),n.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new a(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),n.reject(d),n.promise;p=new O,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return p.hasPortal&&void 0===p._selfReq&&(i||l(p.tokenServiceUrl,window.location.origin)||this._gwDomains.some((e=>e.tokenServiceUrl===p.tokenServiceUrl)))&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,n,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),i=new c(window.location.href.toLowerCase()),o=e.shortLivedTokenValidity;let n,h,d,u,p,_,f,g;t&&(g=this.tokenValidity||o||this.defaultTokenValidity,g>o&&o>0&&(g=o)),s&&(n=s.isAdmin,h=s.serverUrl,d=s.token,_=s.signal,f=s.ssl,e.customParameters=s.customParameters),n?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new c(u.toLowerCase()),e.webTierAuth&&s&&s.serverUrl&&!f&&\"http\"===i.scheme&&(l(i.uri,u,!0)||\"https\"===p.scheme&&i.host===p.host&&\"7080\"===i.port&&\"7443\"===p.port)&&(u=u.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const m={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:h,token:d,expiration:g,referer:n||r?window.location.host:null,client:n?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:_,...null==s?void 0:s.ioArgs};r||(m.withCredentials=!1);return A(u,m).then((s=>{const r=s.data;if(!r||!r.token)return new a(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return R[i]||(R[i]={}),t&&(R[i][t.username]=t.password),r.validity=g,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let r=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let o;const n={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))o=i.server+\"/sharing/rest/oauth2/validateAppAccess\",n.client_id=t;else{if(!i.token)return{credential:i};o=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};o=i.server+\"/rest/services\"}return i.token&&(n.token=i.token),A(o,{query:n,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new a(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return r=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new a(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new a(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:r})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=d(e);if(r.error){const e=\"access_denied\"===r.error,t=new a(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,o=new q({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=o.userId,i.storage=r.persist?C:D,i.token=o.token,i.expires=o.expires,i.userId=o.userId,i.ssl=o.ssl,i.save(),s.resolve(o)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=v(),i=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=l)||t.remove(),null==(s=c)||s.remove(),null==(r=n)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=n=h=l=c=null},o=()=>{i(),this._oAuthDfd=null,r.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&S(s.signal,(()=>{o()}));let n=new this.formConstructor;n.resource=this.getResourceName(e),n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");let h=n.on(\"cancel\",o),l=this.dialog.watch(\"open\",o),c=n.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((o=>{i();const n=new q({userId:e.username,server:t.server,token:o.token,expires:null!=o.expires?Number(o.expires):null,ssl:!!o.ssl,isAdmin:s.isAdmin,validity:o.validity});r.resolve(n)})).catch((e=>{n.error=e,n.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=v();const i=this._oAuthDfd;null!=r&&r.signal&&S(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),i.promise;const n=new this.formConstructor;n.oAuthPrompt=!0,n.server=t.server,this.dialog=new U,this.dialog.content=n,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{u(),this._oAuthDfd=null,i.reject(new a(\"identity-manager:user-aborted\",\"ABORTED\"))},l=n.on(\"cancel\",h),c=this.dialog.watch(\"open\",h),d=n.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,s)})),u=()=>{l.remove(),c.remove(),d.remove(),n.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=g(window,\"message\",(t=>{var s;if((t.origin===window.location.origin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=d(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new a(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,o,n=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],o=this.findServerInfo(s.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,s.userId),n=this._getIdenticalSvcIdx(e,s),!a)return-1===n&&s.resources.push(e),this._addResource(e,i),s;-1!==n&&(s.resources.splice(n,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,o=this.findServerInfo(t.server),r=o&&o.owningSystemUrl,i=r&&this.findCredential(r,t.userId),n=s,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!l(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!l(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(i.request.proxyUrl||\"\").toLowerCase(),s=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==s&&(e=e.substring(s+t.length+1)),e=u(e),h(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const t=new c(e.toLowerCase()),s=this._portalConfig;let r=this._gwDomains.some((e=>e.regex.test(t.uri)));return!r&&s&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),t.uri)),r||i.portalUrl&&(r=l(t,i.portalUrl,!0)),r||(r=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),r=r||this._agsPortal.test(t.path),r}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,o)=>{-1===s&&i.regex.test(e)&&(s=o),-1===r&&i.regex.test(t)&&(r=o)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&b(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,r;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return t=r+\"/admin/generateToken\",s=A(e=r+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(r=e.toLowerCase().indexOf(\"/sharing\"),-1!==r&&(t=e.substring(0,r)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return A(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return A(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return A(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||l(s,e,!0)))}_checkProtocol(e,t,s,r){let i=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===o.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&p(o)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){s(new a(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,s,r,i,o){return r||(r=v()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let o=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},i=(r,i,o,n)=>{var h,c;const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let _,f;if(r)t(new q({userId:r,server:d.server,token:o||null,expires:null!=n?Number(n):null,ssl:!!i}));else if(window!==window.parent&&null!=(h=this._appUrlObj.query)&&h[\"arcgis-auth-origin\"]&&null!=(c=this._appUrlObj.query)&&c[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var m;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=g(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),t(new q(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),s(a.fromJSON(e.data.error))))}));S(null==(m=e.options_)?void 0:m.signal,(()=>{r.remove()}))}else if(p){let r=p._oAuthCred;if(!r){const e=new x(p,C),t=new x(p,D);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,p._oAuthCred=r}if(r.isValid())_=new q({userId:r.userId,server:d.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),p.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(_.server,p.appId,_.token).then((e=>{_.token=e,r.token=e,r.save(),t(_)})).catch((()=>{t(_)})):t(_);else if(this._oAuthHash&&this._hasSameServerInstance(p.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;_=new q({userId:e.username,server:d.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),p.userId=_.userId,r.storage=e.persist?C:D,r.token=_.token,r.expires=_.expires,r.userId=_.userId,r.ssl=_.ssl,r.save(),this._oAuthHash=null,t(_)}else{const r=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,s):(f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((({portalUrl:e,token:s,username:i})=>{!e||l(e,window.location.origin,!0)?(_=new q({server:d.server,userId:i,token:s}),t(_)):r()})).catch(r):r()}}else if(u){if(this._checkProtocol(e.resUrl_,d,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,r).then(t,s)}}else f=new a(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(f)},o=()=>{const r=e.sinfo_,i=r.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(P(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new q(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new q({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{s(e)}))}};this._errbackFunc=s;const n=e.sinfo_.owningSystemUrl,h=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=r(\"authInfo.tokenServicesUrl\",t)||r(\"authInfo.tokenServiceUrl\",t)||r(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=r(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}h&&s.owningSystemUrl?o():i()}),(()=>{e.sinfo_._restInfoPms=null;const t=new a(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):h&&n?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,o,n;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,o=t.currentVersion,\"multitenant\"===t.portalMode&&(n=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(o)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:n,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?i(t.username,t.allSSL,t.portalToken,t.tokenExpiration):i()})):i()}_generateOAuthInfo(e){let t,s,r=e.portalUrl;const i=e.customBaseUrl,o=e.owningTenant,n=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(n){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return n&&s?(this._hasTestedIfAppIsOnPortal=!0,t=A(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new T({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return r=r.replace(/^http:/i,\"https:\"),A(r+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:_(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=r,t.popup=!(l(r,window.location.origin)||this._gwDomains.some((e=>e.regex.test(r)&&e.regex.test(window.location.origin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,s,r){const i={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const o={client_id:r.appId,response_type:\"token\",state:JSON.stringify(i),expiration:r.expiration,locale:r.locale,redirect_uri:r.popup?_(r.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0);const n=r.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",h=n+\"?\"+f(o);if(r.popup){const e=window.open(h,\"esriJSAPIOAuth\",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new a(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=g(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new a(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:n,resourceUrl:e,serverInfo:s,oAuthInfo:r}):window.location.href=h}};j=e([n(\"esri.identity.IdentityManagerBase\")],j);let q=class extends I.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=k.findServerInfo(this.server),t=e&&e.owningSystemUrl,s=!!t&&\"server\"===this.scope,r=s&&P(e,k._legacyFed),i=e.webTierAuth,o=i&&k.normalizeWebTierAuth,n=R[this.server],a=n&&n[this.userId];let h,l=this.resources&&this.resources[0],c=s&&k.findServerInfo(t),d={username:this.userId,password:a};if(i&&!o)return;s&&!c&&k.serverInfos.some((e=>(k._isIdProvider(t,e.server)&&(c=e),!!c)));const u=c&&k.findCredential(c.server,this.userId);if(!s||u){if(!r){if(s)h={serverUrl:l,token:u&&u.token,ssl:u&&u.ssl};else if(o)d=null,h={ssl:this.ssl};else{if(!a){let t;return l&&(l=k._sanitizeUrl(l),this._enqueued=1,t=k._enqueue(l,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(h={isAdmin:!0})}return k.generateToken(s?c:e,s?null:d,h).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}u.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&k.credentials.forEach((e=>{const t=k.findServerInfo(e.server),s=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&s&&\"server\"===e.scope&&(k._hasSameServerInstance(this.server,s)||k._isIdProvider(s,this.server))&&(P(t,k._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&k.findServerInfo(this.server),s=t&&t.owningSystemUrl,r=s&&k.findServerInfo(s);!1===e||s&&\"portal\"!==this.scope&&(!r||!r.webTierAuth||k.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=k.credentials.indexOf(this);e>-1&&k.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([o()],q.prototype,\"creationTime\",void 0),e([o()],q.prototype,\"expires\",void 0),e([o()],q.prototype,\"isAdmin\",void 0),e([o()],q.prototype,\"oAuthState\",void 0),e([o()],q.prototype,\"resources\",void 0),e([o()],q.prototype,\"scope\",void 0),e([o()],q.prototype,\"server\",void 0),e([o()],q.prototype,\"ssl\",void 0),e([o()],q.prototype,\"token\",void 0),e([o()],q.prototype,\"tokenRefreshBuffer\",void 0),e([o()],q.prototype,\"userId\",void 0),e([o()],q.prototype,\"validity\",void 0),q=e([n(\"esri.identity.Credential\")],q);export{q as Credential,j as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n"],"sourceRoot":""}