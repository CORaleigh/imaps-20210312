{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/kmlUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Path.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/LayerView.js"],"names":["a","n","H","u","t","r","i","e","m","f","Math","min","max","h","M","length","o","c","I","y","N","p","F","Y","_","q","w","A","B","D","O","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","P","k","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","folders","slice","s","Map","l","featureCollection","layers","forEach","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","id","networkLinkIds","some","parentFolderId","networkLink","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","map","type","fullExtent","j","sublayers","extent","g","token","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","read","indexOf","visible","unshift","attributes","async","b","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","geometry","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","x","target","pixelFormat","internalFormat","dataType","wrapMode","width","height","super","this","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","transforms","dvs","source","requestRender","bind","_texture","dispose","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","toScreenNoRotation","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","resize","getRenderedRasterPixels","setData","renderedRasterPixels","document","createElement","render","getContext","ready","registerRenderPass","name","brushes","children","drawPhase","prepareRenderPasses","pixelBlock","originalPixelBlock","filter","getAsRGBA","createImageData","data","putImageData","Uint8Array","buffer","arguments","_handles","_bitmapIndex","_mapImageContainer","_featuresMap","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","suspended","_pointsView","_polylinesView","_polygonsView","Promise","resolve","hitTest","all","then","layer","sourceLayer","processUpdate","add","on","added","_addMapImage","removed","_removeMapImage","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","watch","_refreshCollections","_fetchingPromise","_fetchService","notifyChange","removeAll","removeAllChildren","clear","destroy","viewChange","updating","isWGS84","isWebMercator","href","remove","_getParsedKML","_fetchSublayerService","load","_getGraphicsForSublayer","sourceJSON","refreshInterval","addMany","removeChild","delete","prototype","left","right","top","bottom","_get","String","json","write","readOnly","base","key","typeMap","polygon","clone","types","path","rect","clips","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","handles","blendMode","effect","whenLayerView","destroyed","attach","when","detach","isUpdating","minScale","maxScale","isFulfilled","isResolved","_set","update","canResume","isVisibleAtScale","scale","parent","catch","title","declaredClass","error","getSuspendInfo","legendEnabled","updatingHandles","_override","_clearOverride","suspendInfo","viewNotReady","loaded","layerNotLoaded","layerInvisible","Boolean"],"mappings":"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","file":"chunks/9362.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../core/maybe.js\";import t from\"../Extent.js\";import{create as r}from\"./aaBoundingRect.js\";function i(n){return n}function a(n=H){return i([n[0],n[1],n[2],n[3],n[4],n[5]])}function u(n,t,r,i,u,e,m=a()){return m[0]=n,m[1]=t,m[2]=r,m[3]=i,m[4]=u,m[5]=e,m}function e(n,t=a()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.zmin,t[3]=n.xmax,t[4]=n.ymax,t[5]=n.zmax,t}function m(n,r){const i=isFinite(n[2])||isFinite(n[5]);return new t(i?{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],zmin:n[2],zmax:n[5],spatialReference:r}:{xmin:n[0],xmax:n[3],ymin:n[1],ymax:n[4],spatialReference:r})}function o(n,t,r=a()){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r}function f(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[3]),n[4]=Math.max(n[4],t[4]),n[5]=Math.max(n[5],t[5])}function c(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[3]=Math.max(n[3],t[2]),n[4]=Math.max(n[4],t[3])}function h(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[0]),n[4]=Math.max(n[4],t[1]),n[5]=Math.max(n[5],t[2])}function M(n,t,r=0,i=t.length/3){let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];for(let c=0;c<i;c++)a=Math.min(a,t[r+3*c]),u=Math.min(u,t[r+3*c+1]),e=Math.min(e,t[r+3*c+2]),m=Math.max(m,t[r+3*c]),o=Math.max(o,t[r+3*c+1]),f=Math.max(f,t[r+3*c+2]);n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function x(n,t,r,i){n[0]=Math.min(n[0],n[0]+t),n[3]=Math.max(n[3],n[3]+t),n[1]=Math.min(n[1],n[1]+r),n[4]=Math.max(n[4],n[4]+r),n[2]=Math.min(n[2],n[2]+i),n[5]=Math.max(n[5],n[5]+i)}function s(n,t,r){const i=t.length;let a=n[0],u=n[1],e=n[2],m=n[3],o=n[4],f=n[5];if(r)for(let c=0;c<i;c++){const n=t[c];a=Math.min(a,n[0]),u=Math.min(u,n[1]),e=Math.min(e,n[2]),m=Math.max(m,n[0]),o=Math.max(o,n[1]),f=Math.max(f,n[2])}else for(let c=0;c<i;c++){const n=t[c];a=Math.min(a,n[0]),u=Math.min(u,n[1]),m=Math.max(m,n[0]),o=Math.max(o,n[1])}n[0]=a,n[1]=u,n[2]=e,n[3]=m,n[4]=o,n[5]=f}function l(n){for(let t=0;t<6;t++)if(!isFinite(n[t]))return!1;return!0}function I(n){return n[0]>=n[3]?0:n[3]-n[0]}function y(n){return n[1]>=n[4]?0:n[4]-n[1]}function N(n){return n[2]>=n[5]?0:n[5]-n[2]}function g(n){const t=I(n),r=N(n),i=y(n);return Math.sqrt(t*t+r*r+i*i)}function p(n,t=[0,0,0]){return t[0]=n[0]+I(n)/2,t[1]=n[1]+y(n)/2,t[2]=n[2]+N(n)/2,t}function F(n,t=[0,0,0]){return t[0]=I(n),t[1]=y(n),t[2]=N(n),t}function z(n){return Math.max(I(n),N(n),y(n))}function E(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[0]<=n[3]&&t[1]<=n[4]&&t[2]<=n[5]}function T(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[2]>=n[2]-r&&t[0]<=n[3]+r&&t[1]<=n[4]+r&&t[2]<=n[5]+r}function b(n,t){return t[0]>=n[0]&&t[1]>=n[1]&&t[2]>=n[2]&&t[3]<=n[3]&&t[4]<=n[4]&&t[5]<=n[5]}function j(n,t){return Math.max(t[0],n[0])<=Math.min(t[3],n[3])&&Math.max(t[1],n[1])<=Math.min(t[4],n[4])&&Math.max(t[2],n[2])<=Math.min(t[5],n[5])}function R(t,r){return!!n(r)||j(t,r)}function V(n,t,r,i,a=n){return a[0]=n[0]+t,a[1]=n[1]+r,a[2]=n[2]+i,a[3]=n[3]+t,a[4]=n[4]+r,a[5]=n[5]+i,a}function Y(n,t,r=n){const i=n[0]+I(n)/2,a=n[1]+y(n)/2,u=n[2]+N(n)/2;return r[0]=i+(n[0]-i)*t,r[1]=a+(n[1]-a)*t,r[2]=u+(n[2]-u)*t,r[3]=i+(n[3]-i)*t,r[4]=a+(n[4]-a)*t,r[5]=u+(n[5]-u)*t,r}function _(n,t){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function d(n,t){return t[0]=n[3],t[1]=n[4],t[2]=n[5],t}function q(n,t,r=n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==n&&(r[3]=n[3],r[4]=n[4],r[5]=n[5]),r}function w(n,t,r=n){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),n}function A(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function B(n){return n?A(n,D):a(D)}function G(n,t){return t||(t=r()),t[0]=n[0],t[1]=n[1],t[2]=n[3],t[3]=n[4],t}function O(n,t){return n[0]=t[0],n[1]=t[1],n[2]=Number.NEGATIVE_INFINITY,n[3]=t[2],n[4]=t[3],n[5]=Number.POSITIVE_INFINITY,n}function P(n){return 6===n.length}function S(n){return 0===I(n)&&0===y(n)&&0===N(n)}function k(t,r,i){if(n(t)||n(r))return t===r;if(!P(t)||!P(r))return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],r[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function v(n,t,r,i,a,e){return u(n,t,r,i,a,e,J)}const C=i([-1/0,-1/0,-1/0,1/0,1/0,1/0]),D=i([1/0,1/0,1/0,-1/0,-1/0,-1/0]),H=i([0,0,0,0,0,0]),J=a();export{D as NEGATIVE_INFINITY,C as POSITIVE_INFINITY,H as ZERO,l as allFinite,p as center,b as contains,E as containsPoint,T as containsPointWithMargin,a as create,y as depth,g as diameter,B as empty,k as equals,f as expandWithAABB,M as expandWithBuffer,s as expandWithNestedArray,x as expandWithOffset,c as expandWithRect,h as expandWithVec3,e as fromExtent,o as fromMinMax,O as fromRect,u as fromValues,d as getMax,_ as getMin,N as height,j as intersects,R as intersectsClippingArea,P as is,S as isPoint,z as maximumDimension,V as offset,Y as scale,A as set,w as setMax,q as setMin,F as size,m as toExtent,G as toRect,I as width,v as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../core/lang.js\";import o from\"../../config.js\";import{addQueryParameters as t}from\"../../core/urlUtils.js\";import r from\"../../geometry/SpatialReference.js\";import{getBoundsXYZ as s}from\"../../geometry/support/boundsUtils.js\";import n from\"../../PopupTemplate.js\";import{id as i}from\"../../kernel.js\";import a from\"../../request.js\";import{fromJSON as f}from\"../../renderers/support/jsonUtils.js\";import{equals as l,NEGATIVE_INFINITY as u,create as p,expandWithAABB as m}from\"../../geometry/support/aaBoundingBox.js\";import y from\"../../tasks/support/FeatureSet.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(o){const t=o.folders||[],r=t.slice(),s=new Map,n=new Map,i=new Map,a=new Map,f=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:a};(o.featureCollection&&o.featureCollection.layers||[]).forEach((o=>{const t=e(o);t.featureSet.features=[];const r=o.featureSet.geometryType;s.set(r,t);const f=o.layerDefinition.objectIdField;\"esriGeometryPoint\"===r?G(n,f,o.featureSet.features):\"esriGeometryPolyline\"===r?G(i,f,o.featureSet.features):\"esriGeometryPolygon\"===r&&G(a,f,o.featureSet.features)})),o.groundOverlays&&o.groundOverlays.forEach((e=>{f.set(e.id,e)})),t.forEach((e=>{e.networkLinkIds.forEach((t=>{const s=P(t,e.id,o.networkLinks);s&&r.push(s)}))})),r.forEach((o=>{o.featureInfos&&(o.points=e(s.get(\"esriGeometryPoint\")),o.polylines=e(s.get(\"esriGeometryPolyline\")),o.polygons=e(s.get(\"esriGeometryPolygon\")),o.mapImages=[],o.featureInfos.map((e=>{switch(e.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[e.type].get(e.id);t&&o[c[e.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=f.get(e.id);t&&o.mapImages.push(t);break}}})),o.fullExtent=j([o]))}));const u=j(r);return{folders:t,sublayers:r,extent:u}}function g(e,r,s,n){const f=i&&i.findCredential(e);e=t(e,{token:f&&f.token});const l=o.kmlServiceUrl;return a(l,{query:{url:e,model:\"simple\",folders:\"\",refresh:0!==s||void 0,outSR:JSON.stringify(r)},responseType:\"json\",signal:n})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,a=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&a.indexOf(i.id)>-1&&(i.visible=-1!==r.indexOf(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=y.fromJSON(e.featureSet).features,t=e.layerDefinition,r=f(t.drawingInfo.renderer),s=n.fromJSON(e.popupInfo),i=[];for(const n of o){const e=await r.getSymbolAsync(n);n.symbol=e,n.popupTemplate=s,n.visible=!0,i.push(n)}return i}function j(e){const o=p(),t=p(u);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)s(o,e.geometry),m(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)s(o,e.geometry),m(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)s(o,e.geometry),m(t,o);if(r.mapImages)for(const e of r.mapImages)s(o,e.extent),m(t,o)}return l(t,u)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:r.WGS84}}export{j as computeExtent,g as fetchService,b as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,b as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t){return t&&\"render\"in t}function c(t){return t&&!(\"render\"in t)}function l(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class _ extends u{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{_ as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./webgl/enums.js\";import{brushes as r}from\"./brushes.js\";import s from\"./webgl/WGLContainer.js\";class t extends s{prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[r.bitmap],target:()=>this.children,drawPhase:e.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{schedule as t}from\"../../../core/scheduling.js\";import{canProject as o,project as r}from\"../../../geometry/support/webMercatorUtils.js\";import l from\"../../../geometry/Extent.js\";import a from\"../../../core/Collection.js\";import n from\"../../../request.js\";import h from\"../../../core/Handles.js\";import{whenTrueOnce as p}from\"../../../core/watchUtils.js\";import{GraphicsCollection as m}from\"../../../support/GraphicsCollection.js\";import{fetchService as c,parseKML as d,getGraphics as y}from\"../../../layers/support/kmlUtils.js\";import w from\"../../layers/LayerView.js\";import _ from\"./graphics/GraphicsView2D.js\";import{Bitmap as g}from\"../engine/Bitmap.js\";import{BitmapContainer as u}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as V}from\"./LayerView2D.js\";let f=class extends(V(w)){constructor(){super(...arguments),this._handles=new h,this._bitmapIndex=new Map,this._mapImageContainer=new u,this._featuresMap=new Map,this.allVisiblePoints=new m,this.allVisiblePolylines=new m,this.allVisiblePolygons=new m,this.allVisibleMapImages=new a}hitTest(e,i){if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return Promise.resolve(null);const s=[this._pointsView.hitTest(e,i),this._polylinesView.hitTest(e,i),this._polygonsView.hitTest(e,i)];return Promise.all(s).then((e=>e.filter((e=>(e&&(e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))}))]),this.container.addChild(this._mapImageContainer),this._polygonsView=new _({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polylinesView.container),this._pointsView=new _({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._pointsView.container),this.watch(\"layer.visibleSublayers\",(()=>this._refreshCollections())),this._fetchingPromise=this._fetchService().then((()=>{this._fetchingPromise=null,this.notifyChange(\"updating\")}))}detach(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&n(e.href,{responseType:\"image\"}).then((({data:i})=>{let s=l.fromJSON(e.extent);o(s,this.view.spatialReference)&&(s=r(s,this.view.spatialReference));const t=new g(i);t.x=s.xmin,t.y=s.ymax,t.resolution=s.width/i.naturalWidth,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}_fetchService(){return this._handles.remove(\"refresh-collections\"),this._getParsedKML().then((e=>this._fetchSublayerService(this.layer,e)))}_fetchSublayerService(e,i){const s=e.sublayers;if(!s||0===s.length)return Promise.resolve();const o=[];return s.forEach((e=>{const s=p(e,\"visible\").then((()=>e.load())).then((()=>this._getGraphicsForSublayer(e,i))).then((i=>new Promise((s=>{e.networkLink?s():(this._featuresMap.set(e,i),this._handles.add(t((()=>{this._refreshCollections(),s()})),\"refresh-collections\"))})))).then((()=>this._fetchSublayerService(e,e.sourceJSON||i)));e.visible&&o.push(s)})),Promise.all(o).then((()=>{}))}_getParsedKML(){return c(this.layer.url,this.view.spatialReference,this.layer.refreshInterval).then((e=>d(e.data)))}async _getGraphicsForSublayer(e,i){let s=null;return i.sublayers.some((i=>(s=i,i.id===e.id)))?{points:s.points&&await y(s.points),polylines:s.polylines&&await y(s.polylines),polygons:s.polygons&&await y(s.polygons),mapImages:s.mapImages}:null}_refreshCollections(){const e=this.get(\"layer.visibleSublayers\");this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),e&&e.length&&e.forEach((e=>{const i=this._featuresMap.get(e);i&&(this.allVisiblePoints.addMany(i.points),this.allVisiblePolylines.addMany(i.polylines),this.allVisiblePolygons.addMany(i.polygons),this.allVisibleMapImages.addMany(i.mapImages))}))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([i()],f.prototype,\"_pointsView\",void 0),e([i()],f.prototype,\"_polylinesView\",void 0),e([i()],f.prototype,\"_polygonsView\",void 0),e([i()],f.prototype,\"_fetchingPromise\",void 0),e([i()],f.prototype,\"updating\",void 0),f=e([s(\"esri.views.2d.layers.KMLLayerView2D\")],f);var v=f;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n"],"sourceRoot":""}