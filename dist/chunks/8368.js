(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[8368],{94850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s,i=r(56140),a=(r(95830),r(36544)),n=r(79881),o=r(60263),l=r(87566),u=(r(10923),r(57002),r(86035),r(82677)),d=r(35470),y=r(22696),c=r(94588),p=r(82550),h=r(68055),b=r(60538),m=r(32656),g=r(39105),f=r(58385),v=r(83477),w=r(78745),_=r(3277),S=r(32105),C=r(809),x=r(1721),L=r(9870);let O=s=class extends f.wq{constructor(e){super(e),this.type="none"}clone(){return new s({type:this.type})}};var I;(0,i._)([(0,L.J)({none:"none",stayAbove:"stay-above"})],O.prototype,"type",void 0),O=s=(0,i._)([(0,l.j)("esri.ground.NavigationConstraint")],O);const T=a.Z.getLogger("esri.Ground");let M=I=class extends((0,f.eC)(C.Z)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new v.Z;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&T.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>{e.item.parent=null}))}initialize(){this.when().catch((e=>{T.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,S.Z)(e,this._get("layers")))}writeLayers(e,t,r,s){const i=[];e?(s={...s,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,c.sM)(e)().write(t,s)&&i.push(t)}else s&&s.messages&&s.messages.push(new m.Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),(0,g.resolve)(this)}loadAll(){return(0,x.GZ)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:s}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,g.throwIfAborted)(t);const i=new s,a=this.layers.filter(A).toArray();return i.queryAll(a,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:s}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,g.throwIfAborted)(t);const i=new s,a=this.layers.filter(A).toArray();return i.createSamplerAll(a,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,p.d9)(this.surfaceColor),navigationConstraint:(0,p.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new I({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):(0,g.resolve)(null)}_loadLayersFromJSON(e,t,s){const i=t&&t.origin||"web-scene",a=t&&t.portal||null,n=t&&t.url||null;return r.e(7254).then(r.bind(r,87254)).then((({populateOperationalLayers:t})=>{(0,g.throwIfAborted)(s);const r=[];if(e.layers&&Array.isArray(e.layers)){const s={context:{origin:i,url:n,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,s))}return(0,g.eachAlways)(r)})).then((()=>{}))}};function A(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,i._)([(0,n.Cb)({json:{read:!1}})],M.prototype,"layers",null),(0,i._)([(0,b.c)("layers")],M.prototype,"writeLayers",null),(0,i._)([(0,n.Cb)({readOnly:!0})],M.prototype,"resourceInfo",void 0),(0,i._)([(0,n.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:h.z8,read:{reader:_.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,_.a)(e)},target:"transparency"}}})],M.prototype,"opacity",void 0),(0,i._)([(0,n.Cb)({type:w.default,json:{type:[h.z8],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],M.prototype,"surfaceColor",void 0),(0,i._)([(0,n.Cb)({type:O,json:{write:!0}})],M.prototype,"navigationConstraint",void 0),M=I=(0,i._)([(0,l.j)("esri.Ground")],M);const E=M;var N=r(78452),Z=r(80882);const j=a.Z.getLogger("esri.support.groundUtils"),R={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var U=r(90921),D=r(16137);const F=a.Z.getLogger("esri.Map");let P=class extends((0,D.Q)((0,U.K)(d.Z.EventedMixin(u.default)))){constructor(e){super(e),this.allLayers=new N.Z({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:e=>e.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new E,this._basemapCache=(0,Z.Df)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),(0,Z.Bf)(this._basemapCache),this._basemapCache=null}castBasemap(e){return(0,Z.se)(e,this._basemapCache)}castGround(e){return function(e){let t;return"string"==typeof e?e in R?t=new E({resourceInfo:{data:{layers:[R[e]]}}}):j.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,h.se)(E,e),t}(e)||(F.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}_createTablesFlattener(e){return new N.Z({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:e=>e&&"group"===e.type?this._createTablesFlattener(e):null,itemFilterFunction:e=>this._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)})}_isMapOrGroupLayer(e){return e&&(e===this||this._isGroupLayer(e))}_isGroupLayer(e){return e&&"group"===e.type}};(0,i._)([(0,n.Cb)({readOnly:!0,dependsOn:[],autoTracked:!1})],P.prototype,"allLayers",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],P.prototype,"allTables",void 0),(0,i._)([(0,n.Cb)({type:y.default})],P.prototype,"basemap",void 0),(0,i._)([(0,o.p)("basemap")],P.prototype,"castBasemap",null),(0,i._)([(0,n.Cb)({type:E,nonNullable:!0})],P.prototype,"ground",void 0),(0,i._)([(0,o.p)("ground")],P.prototype,"castGround",null),P=(0,i._)([(0,l.j)("esri.Map")],P);const k=P},77204:(e,t,r)=>{"use strict";r.d(t,{r:()=>d,p:()=>u});var s=r(56140),i=r(79881),a=r(87566),n=r(82677),o=r(59691),l=r(45671);const u=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new o.Z}get updatingHandles(){return this._get("updatingHandles")||new l.t}};return(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,a.j)("esri.core.HandleOwner")],t),t};let d=class extends(u(n.default)){};d=(0,s._)([(0,a.j)("esri.core.HandleOwner")],d)},59351:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>i,UI:()=>a,q6:()=>n});var s=r(39105);function i(e,t,r){return(0,s.eachAlways)(e.map(((e,s)=>t.apply(r,[e,s]))))}function a(e,t,r){return(0,s.eachAlways)(e.map(((e,s)=>t.apply(r,[e,s])))).then((e=>e.map((e=>e.value))))}function n(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}},19048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var s,i=r(56140),a=(r(95830),r(36544),r(68055),r(79881)),n=r(56274),o=r(30590),l=r(15307),u=r(87566),d=r(60538),y=(r(10923),r(57002),r(86035),r(19677)),c=r(58385),p=r(93533);const h=(0,n.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),b=h.jsonValues.slice();(0,y.e$)(b,"orthometric");const m=(0,n.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let g=s=class extends c.wq{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return h.write(e,t,r)}readHeightModel(e,t,r){return h.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return m.read(e)||(r&&r.messages&&r.messages.push(f(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,p.$C)(e)||m.read(e)||(r&&r.messages&&r.messages.push(f(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new s({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,p.cM)(t);return new s({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new s;return t.read(e,{origin:"web-scene"}),t}};function f(e,t){return new l.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,i._)([(0,a.Cb)({type:h.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:b,default:"ellipsoidal"}}}})],g.prototype,"heightModel",void 0),(0,i._)([(0,d.c)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),(0,i._)([(0,o.r)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),(0,i._)([(0,a.Cb)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:m.write}}}})],g.prototype,"heightUnit",void 0),(0,i._)([(0,o.r)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),(0,i._)([(0,o.r)("service","heightUnit")],g.prototype,"readHeightUnitService",null),(0,i._)([(0,a.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),(0,i._)([(0,o.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null),g=s=(0,i._)([(0,u.j)("esri.geometry.HeightModelInfo")],g);const v=g},66002:(e,t,r)=>{"use strict";r.d(t,{D9:()=>a,yZ:()=>i});var s=r(93533);function i(e,t){const r=t||e.extent,i=e.width,a=(0,s.c9)(r&&r.spatialReference);return r&&i?r.width/i*a*s.hd*96:0}function a(e,t){const r=e.extent,i=e.width,a=function(e,t){return e/((0,s.c9)(t)*s.hd*96)}(t,r.spatialReference);return r.clone().expand(a*i/r.width)}},62933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var s=r(56140),i=(r(95830),r(59472)),a=(r(36544),r(68055)),n=r(79881),o=r(30590),l=r(87566),u=r(60538),d=r(32656),y=(r(10923),r(57002),r(9678)),c=(r(86035),r(39105)),p=r(52937),h=r(54721),b=r(1721),m=r(56700),g=r(87864),f=r(43072),v=r(18152),w=r(78910),_=r(48899),S=r(57407),C=r(63795),x=r(33716),L=r(2194),O=r(10113),I=r(2584),T=r(77204),M=r(66002),A=r(5698),E=r(41452),N=r(24681),Z=r(49708),j=r(11555);let R=class extends((0,S.h)((0,I.n)((0,O.M)((0,L.Q)((0,Z.x)((0,A.O)((0,_.Y)((0,w.q)((0,x.I)((0,f.R)((0,C.N)((0,T.p)(m.Z))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,i.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),(0,c.resolve)(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,r,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let a=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=(0,y.M9)(s.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;a=(0,N.QV)(i,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");a=(0,N.QV)(i,e.sublayers,(0,y.M9)(e.origin))}}const n=[],o={writeSublayerStructure:a,...s};let l=a;i.forEach((e=>{const t=e.write({},o);n.push(t),l=l||"user"===e.originOf("visible")})),n.some((e=>Object.keys(e).length>1))&&(t.layers=n),l&&(t.visibleLayers=i.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,t,r,s){const i=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const a=new j.R({layer:this,scale:(0,M.yZ)({extent:e,width:t})*i}),n=a.toJSON();a.destroy();const o=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=e&&e.spatialReference,u=l.wkid||JSON.stringify(l.toJSON());n.dpi*=i;const d={};if(null!=s&&s.timeExtent){const{start:e,end:t}=s.timeExtent.toJSON();d.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(d.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+r,...n,...o,...d}}async fetchImage(e,t,r,s){const i={responseType:"image"};s&&s.timestamp&&(i.query={...i.query,_ts:s.timestamp}),s&&s.signal&&(i.signal=s.signal),this.customParameters&&Object.keys(this.customParameters).length&&(i.query={...this.customParameters,...i.query});const a=this.parsedUrl.path+"/export",n={...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,s),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==n.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(i.query?i.query={...n,...i.query}:i.query=n,(0,h.default)(a,i).then((e=>e.data)).catch((e=>{if((0,c.isAbortError)(e))throw e;throw new d.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:e})}))):(0,c.reject)(new d.Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:r}=await(0,h.default)(this.url,t),{extent:s,fullExtent:i,timeExtent:a}=r,n=s||i;return{fullExtent:n&&p.Z.fromJSON(n),timeExtent:a&&g.Z.fromJSON({start:a[0],end:a[1]})}}loadAll(){return(0,b.GZ)(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await(0,h.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};(0,s._)([(0,n.Cb)()],R.prototype,"alwaysRefetch",void 0),(0,s._)([(0,n.Cb)()],R.prototype,"dpi",void 0),(0,s._)([(0,n.Cb)()],R.prototype,"gdbVersion",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],R.prototype,"popupEnabled",void 0),(0,s._)([(0,n.Cb)()],R.prototype,"imageFormat",void 0),(0,s._)([(0,o.r)("imageFormat",["supportedImageFormatTypes"])],R.prototype,"readImageFormat",null),(0,s._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],R.prototype,"imageMaxHeight",void 0),(0,s._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],R.prototype,"imageMaxWidth",void 0),(0,s._)([(0,n.Cb)()],R.prototype,"imageTransparency",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],R.prototype,"labelsVisible",void 0),(0,s._)([(0,n.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,"isReference",void 0),(0,s._)([(0,n.Cb)({type:["ArcGISMapServiceLayer"]})],R.prototype,"operationalLayerType",void 0),(0,s._)([(0,n.Cb)()],R.prototype,"sourceJSON",void 0),(0,s._)([(0,n.Cb)({json:{write:{ignoreOrigin:!0}}})],R.prototype,"sublayers",void 0),(0,s._)([(0,u.c)("sublayers",{layers:{type:[E.Z]},visibleLayers:{type:[a.z8]}})],R.prototype,"writeSublayers",null),(0,s._)([(0,n.Cb)({type:["show","hide","hide-children"]})],R.prototype,"listMode",void 0),(0,s._)([(0,n.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],R.prototype,"type",void 0),(0,s._)([(0,n.Cb)(v.HQ)],R.prototype,"url",void 0),R=(0,s._)([(0,l.j)("esri.layers.MapImageLayer")],R);const U=R},5698:(e,t,r)=>{"use strict";r.d(t,{O:()=>p});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),a=r(30590),n=r(87566),o=r(10923),l=(r(57002),r(86035),r(39105)),u=r(73032),d=r(52937),y=r(54721),c=r(18152);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,t){const r=t.capabilities&&t.capabilities.split(",").map((e=>e.toLowerCase().trim()));if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,i=-1!==r.indexOf("query"),a=-1!==r.indexOf("map"),n=!!t.exportTilesAllowed,o=-1!==r.indexOf("tilemap"),l="tile"!==s&&!!t.supportsDynamicLayers,u="tile"!==s&&(!t.tileInfo||l),d="tile"!==s&&(!t.tileInfo||l);return{operations:{supportsQuery:i,supportsExportMap:a,supportsExportTiles:n,supportsTileMap:o},exportMap:a?{supportsSublayersChanges:"tile"!==s,supportsDynamicLayers:l,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:d}:null,exportTiles:n?{maxExportTilesCount:+t.maxExportTilesCount}:null}}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}async fetchSublayerInfo(e,t){return await this.fetchAllLayersAndTables(t),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=(0,y.default)((0,o.mN)(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const t of e.data.layers)this._allLayersAndTablesMap.set(t.id,t);return{result:e.data}}),(e=>({error:e}))));const t=await this._allLayersAndTablesPromise;if((0,l.throwIfAborted)(e),"result"in t)return t.result;throw t.error}};return(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"capabilities",void 0),(0,s._)([(0,a.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),(0,s._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,s._)([(0,i.Cb)({type:d.Z})],t.prototype,"fullExtent",void 0),(0,s._)([(0,i.Cb)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),(0,s._)([(0,i.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),(0,s._)([(0,i.Cb)(c.C_)],t.prototype,"popupEnabled",void 0),(0,s._)([(0,i.Cb)({type:u.Z})],t.prototype,"spatialReference",void 0),(0,s._)([(0,i.Cb)()],t.prototype,"version",void 0),(0,s._)([(0,a.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=(0,s._)([(0,n.j)("esri.layers.mixins.ArcGISMapService")],t),t}},48899:(e,t,r)=>{"use strict";r.d(t,{Y:()=>u});var s=r(56140),i=(r(95830),r(59472)),a=r(36544),n=(r(68055),r(79881)),o=r(87566),l=(r(10923),r(57002),r(86035),r(97849));const u=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,l.Qc)(this.url);if((0,i.pC)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,l.Nm)(e,a.Z.getLogger(this.declaredClass)))}};return(0,s._)([(0,n.Cb)({dependsOn:["url"]})],t.prototype,"title",null),(0,s._)([(0,n.Cb)({type:String})],t.prototype,"url",null),t=(0,s._)([(0,o.j)("esri.layers.mixins.ArcGISService")],t),t}},63795:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),a=r(87566);r(10923),r(57002),r(86035);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,i.Cb)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=(0,s._)([(0,a.j)("esri.layers.mixins.CustomParametersMixin")],t),t}},49708:(e,t,r)=>{"use strict";r.d(t,{x:()=>g});var s=r(56140),i=(r(95830),r(36544)),a=(r(68055),r(65575)),n=r(79881),o=r(87566),l=r(32656),u=(r(10923),r(57002),r(9678)),d=(r(86035),r(83477)),y=r(78452),c=r(41452),p=r(24681);const h=i.Z.getLogger("esri.layers.TileLayer"),b=d.Z.ofType(c.Z);function m(e,t){e&&e.forEach((e=>{t(e),e.sublayers&&e.sublayers.length&&m(e.sublayers,t)}))}const g=e=>{let t=class extends e{constructor(...e){super(...e),this.allSublayers=new y.Z({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.watch("sublayers",((e,t)=>this._handleSublayersChange(e,t)),!0)}readSublayers(e,t){if(!t||!e)return;const{sublayersSourceJSON:r}=this,s=(0,u.M9)(t.origin);if(s<2)return;if(r[s]={context:t,visibleLayers:e.visibleLayers||r[s].visibleLayers,layers:e.layers||r[s].layers},s>2)return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:i,origin:n}=this.createSublayersForOrigin("web-document"),o=(0,a.vw)(this);o.setDefaultOrigin(n),this._set("sublayers",new b(i)),o.setDefaultOrigin("user")}findSublayerById(e){return this.allSublayers.find((t=>t.id===e))}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(e){const t=(0,u.M9)("web-document"===e?"web-map":e);let r=2,s=this.sublayersSourceJSON[2].layers,i=this.sublayersSourceJSON[2].context,a=null;const n=[3,4,5].filter((e=>e<=t));for(const e of n){const t=this.sublayersSourceJSON[e];(0,p.ac)(t.layers)&&(r=e,s=t.layers,i=t.context,t.visibleLayers&&(a={visibleLayers:t.visibleLayers,context:t.context}))}const o=[3,4,5].filter((e=>e>r&&e<=t));let l=null;for(const e of o){const{layers:t,visibleLayers:r,context:s}=this.sublayersSourceJSON[e];t&&(l={layers:t,context:s}),r&&(a={visibleLayers:r,context:s})}const d=function(e,t){const r=[],s={};return e?(e.forEach((e=>{const i=new c.Z;if(i.read(e,t),s[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){const t=s[e.parentLayerId];t.sublayers||(t.sublayers=[]),t.sublayers.unshift(i)}else r.unshift(i)})),r):r}(s,i),y=new Map,h=new Set;if(l)for(const e of l.layers)y.set(e.id,e);if(a)for(const e of a.visibleLayers)h.add(e);return m(d,(e=>{l&&e.read(y.get(e.id),l.context),a&&e.read({defaultVisibility:h.has(e.id)},a.context)})),{origin:(0,u.x3)(r),sublayers:new b({items:d})}}read(e,t){super.read(e,t),this.readSublayers(e,t)}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.handles.add([e.on("after-add",(({item:e})=>{e.parent=this,e.layer=this})),e.on("after-remove",(({item:e})=>{e.parent=null,e.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(e=>{h.error(new l.Z("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),e.preventDefault()})),"sublayers-owner"))}};return(0,s._)([(0,n.Cb)({readOnly:!0})],t.prototype,"allSublayers",void 0),(0,s._)([(0,n.Cb)({readOnly:!0,type:d.Z.ofType(c.Z)})],t.prototype,"serviceSublayers",void 0),(0,s._)([(0,n.Cb)({value:null,type:b,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=(0,s._)([(0,o.j)("esri.layers.mixins.SublayersOwner")],t),t}},11555:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),a=r(87566),n=(r(10923),r(57002),r(86035),r(82677)),o=r(18152),l=r(77204),u=r(24681),d=r(65287);const y={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let c=class extends((0,l.p)(n.default)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,u.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(y[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,t)=>(e[t.id]=t.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const t=e.layer;return t&&(t.dpi,t.imageFormat,t.imageTransparency,t.gdbVersion),(this._get("version")||0)+1}set version(e){this._set("version",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=t=>{const s=this.scale,i=0===s,a=0===t.minScale||s<=t.minScale,n=0===t.maxScale||s>=t.maxScale;t.visible&&(i||a&&n)&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some(((t,r)=>e[r]!==t))?e:s}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};(0,s._)([(0,i.Cb)({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],c.prototype,"dynamicLayers",null),(0,s._)([(0,i.Cb)({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],c.prototype,"hasDynamicLayers",null),(0,s._)([(0,i.Cb)()],c.prototype,"layer",null),(0,s._)([(0,i.Cb)({readOnly:!0,dependsOn:["visibleSublayers"]})],c.prototype,"layers",null),(0,s._)([(0,i.Cb)({readOnly:!0,dependsOn:["visibleSublayers"]})],c.prototype,"layerDefs",null),(0,s._)([(0,i.Cb)({type:Number,dependsOn:["view.scale"]})],c.prototype,"scale",null),(0,s._)([(0,i.Cb)(o.qG)],c.prototype,"timeExtent",void 0),(0,s._)([(0,i.Cb)({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],c.prototype,"version",null),(0,s._)([(0,i.Cb)({type:d.Z})],c.prototype,"view",void 0),(0,s._)([(0,i.Cb)({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],c.prototype,"visibleSublayers",null),c=(0,s._)([(0,a.j)("esri.layers.mixins.ExportImageParameters")],c)},24681:(e,t,r)=>{"use strict";function s(e,t,r){return t.flatten((({sublayers:e})=>e)).length!==e.length||(!!e.some((e=>e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r))||!a(e,t))}function i(e,t,r){return!!e.some((e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!a(e,t)}function a(e,t){if(!e||!e.length)return!0;const r=t.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let s=0;const i=r.length;for(const{id:t}of e){for(;s<i&&r[s]!==t;)s++;if(s>=i)return!1}return!0}function n(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}r.d(t,{FN:()=>i,ac:()=>n,QV:()=>s})},99322:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>c,JN:()=>d,$o:()=>y});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),a=r(87566),n=(r(10923),r(57002),r(86035),r(83477)),o=r(32105),l=r(15988);const u=n.Z.ofType(l.default);let d=class extends u{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new u(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};(0,s._)([(0,i.Cb)()],d.prototype,"owner",null),d=(0,s._)([(0,a.j)("esri.support.GraphicsCollection")],d);const y=(e="graphics")=>({type:d,cast:o.R,set(t){const r=(0,o.Z)(t,this._get(e),d);r.owner=this,this._set(e,r)}});const c=d},90921:(e,t,r)=>{"use strict";r.d(t,{K:()=>h});var s=r(56140),i=(r(95830),r(36544)),a=(r(68055),r(79881)),n=r(87566),o=(r(10923),r(57002),r(86035),r(39105)),l=r(83477),u=r(32105),d=r(56700);function y(e){return e&&"group"===e.type}function c(e,t,r){let s,i;if(e)for(let a=0,n=e.length;a<n;a++){if(s=e.getItemAt(a),s[t]===r)return s;if(y(s)&&(i=c(s.layers,t,r),i))return i}}const p=i.Z.getLogger("esri.support.LayersMixin"),h=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new l.Z;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||p.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>{var t;(t=e.item).parent&&"remove"in t.parent&&t.parent.remove(t)})),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,u.Z)(e,this._get("layers")))}add(e,t){const r=this.layers;t=r.getNextIndex(t),e instanceof d.Z?e.parent===this?this.reorder(e,t):r.add(e,t):(0,o.isPromiseLike)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):p.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return c(this.layers,"id",e)}findLayerByUid(e){return c(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,s._)([(0,a.Cb)()],t.prototype,"layers",null),t=(0,s._)([(0,n.j)("esri.support.LayersMixin")],t),t}},16137:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c});var s=r(56140),i=(r(95830),r(36544)),a=(r(68055),r(79881)),n=r(87566),o=(r(10923),r(57002),r(86035),r(83477)),l=r(32105);const u=i.Z.getLogger("esri.support.TablesMixin");function d(e){return e&&"group"===e.type}function y(e,t,r){if(e)for(let s=0,i=e.length;s<i;s++){const i=e.getItemAt(s);if(i[t]===r)return i;if(d(i)){const e=y(i.tables,t,r);if(e)return e}}}const c=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new o.Z,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,l.Z)(e,this._get("tables")))}findTableById(e){return y(this.tables,"id",e)}findTableByUid(e){return y(this.tables,"uid",e)}};return(0,s._)([(0,a.Cb)()],t.prototype,"tables",null),t=(0,s._)([(0,n.j)("esri.support.TablesMixin")],t),t}},80882:(e,t,r)=>{"use strict";r.d(t,{Bj:()=>h,Df:()=>d,Bf:()=>y,se:()=>c,tR:()=>p,zb:()=>b,aL:()=>m});var s=r(36544),i=r(68055),a=r(10923),n=r(83477),o=r(93776),l=r(22696);const u=s.Z.getLogger("esri.support.basemapUtils");function d(){return{}}function y(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function c(e,t){var r;let s;if("string"==typeof e){if(!(e in o.s)){const t=Object.keys(o.s).map((e=>`"${e}"`)).join(", ");return u.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=l.default.fromId(e),t&&(t[e]=s))}else s=(0,i.se)(l.default,e);return null!=(r=s)&&r.destroyed&&(u.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}function p(e){let t=null;const r=v(e),s=!r.baseLayers.length;for(const e in o.s){const i=x(r,S(o.s[e]),{mustMatchReferences:s});if("equal"===i){t=e;break}"base-layers-equal"===i&&(t=e)}return t}function h(e,t){return e===t||"equal"===x(v(e),v(t),{mustMatchReferences:!0})}function b(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(m))}function m(e){if(f(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(f(null==r?void 0:r.sourceUrl))return!0}return!1}const g=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function f(e){if(!e)return!1;const t=new a.R9((0,a.hF)(e));return g.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?S(e.resourceInfo.data):{baseLayers:w(e.baseLayers),referenceLayers:w(e.referenceLayers)}:null}function w(e){return(n.Z.isCollection(e)?e.toArray():e).map(_)}function _(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function S(e){return e?{baseLayers:C(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:C(e.baseMapLayers.filter((e=>e.isReference)))}:null}function C(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function x(e,t,r){return null!=e!=(null!=t)?"not-equal":e?L(e.baseLayers,t.baseLayers)?L(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function L(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!O(e[r],t[r]))return!1;return!0}function O(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?(0,a.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},45671:(e,t,r)=>{"use strict";r.d(t,{t:()=>c});var s=r(56140),i=r(95844),a=r(79881),n=r(87566),o=r(74386),l=r(3059),u=r(82677),d=r(59691),y=r(80621);let c=class extends u.default{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new d.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,s=0){const i=0!=(1&s),a=++this.handleId;i||this.installSyncUpdatingWatch(e,t,a);const n=0!=(2&s)?(0,y.init)(e,t,r,i):e.watch(t,r,i);return this.handles.add(n,a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionPropertyChange(e,t,r,s=0){const i=0!=(2&s),a=++this.handleId;return this.handles.add([(0,y.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,y.on)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],a),{remove:()=>{this.handles.remove(a)}}}addOnCollectionChange(e,t,r=0){const s=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),s&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const s=this.createSyncUpdatingCallback(),a=(0,l.QU)((()=>(0,i.$z)(e,t)),s);return this.handles.add(a,r),a}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,o.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};(0,s._)([(0,a.Cb)({readOnly:!0})],c.prototype,"updating",void 0),c=(0,s._)([(0,n.j)("esri.views.support.WatchUpdatingTracking")],c);const p=-42}}]);
//# sourceMappingURL=8368.js.map