{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/displayIdUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/Tile.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js"],"names":["f","i","t","c","Object","keys","items","u","e","l","declaredClass","s","n","o","diff","r","p","length","Array","isArray","type","oldValue","newValue","a","filter","indexOf","y","m","concat","sort","d","b","h","split","minDataValue","maxDataValue","minSize","maxSize","expression","valueExpression","stops","field","levels","valueUnit","error","k","D","U","R","C","M","sharedArrayBuffer","atomics","B","v","this","size","texelSize","pixelType","layout","textureOnly","_ctype","_resetRange","_shared","data","_initData","buffer","dirtyStart","dirtyEnd","Math","min","max","Atomics","store","set","slice","start","end","prototype","call","SharedArrayBuffer","ArrayBuffer","BYTES_PER_ELEMENT","_client","config","_attributeComputeMap","Map","_blocks","_filters","_targetType","_abortController","_hasScaleExpr","_size","_idsToHighlight","Set","supportsTextureFloat","_blockDescriptors","map","abort","signal","schema","processors","storage","_schema","targets","feature","aggregate","console","debug","clear","target","mapping","_bindAttribute","addOrUpdate","getCursor","next","getDisplayId","setAttributeData","_createResourcesPromise","_getBlock","lock","unsetComponentAllTexels","setComponent","unlock","add","sendUpdates","service","spatialReference","filters","_updateFilter","some","_ensureSizeForTexel","setData","getData","has","getFilterFlags","forEach","floor","round","_nextUpdate","promise","_currUpdate","blocks","toMessage","_createResources","then","resolve","update","_signal","catch","render","_expand","fieldIndex","normalizationField","warn","getComputedNumericAtIndex","readAttribute","valueRepresentation","binding","isNaN","shared","initialize","maxTextureSize","expand","hash","JSON","stringify","setComponentAllTexels","_getFilter","default","geometryType","hasM","hasZ","timeInfo","fieldsIndex","fields","check","getObjectId","getHighlightFlag","_freeIds","_idCounter","_getFreeId","push","pop","_mask","_buf","Uint32Array","ceil","_getIndex","forEachSet","_numerics","_strings","_idGenerator","_allocatedSize","_bitsets","_instanceIds","_bounds","resize","createId","unset","releaseId","setComputedNumericAtIndex","getComputedStringAtIndex","setComputedStringAtIndex","_ensureNumeric","_ensureInstanceId","_ensureString","readHydratedGeometry","coords","forEachVertex","seen","instance","_tx","_ty","_xmin","_xmax","_ymin","_ymax","_joined","Error","_storage","copy","_hasFilter","_readAttribute","setIndex","getIndex","_readAttributes","_arcadeSpatialReference","readUnquantizedGeometry","hasIndeterminateRingOrder","getQuantizationTransform","super","_featureIndex","_dateFields","_geometryType","_features","displayId","fromOptimizedFeatures","fromOptimizedFeatureSet","features","_exceededTransferLimit","exceededTransferLimit","_transform","transform","name","_current","attributes","objectId","groupId","copyInto","_passesFilter","readGeometry","x","readCentroid","geometry","clone","lengths","scale","translate","hasGeometry","isPoint","centroid","_computeCentroid","Date","readAttributes","toLocaleLowerCase","trim","key","bounds","objectIds","getLODInfoAt","tileInfoView","getTileBounds","resolution","level","needsClear","id","tileInfo","originPosition","minX","minY","maxX","maxY","getChildKeys","mode","tolerance","extent","xmin","ymin","xmax","ymax","added","removed","_tiles","_index","tiles","tileScheme","get","search","tile","insert","delete","remove","emit","getTileCoverage","spans","lodInfo","row","colFrom","colTo","normalizeCol","getWorldForColumn","splice"],"mappings":"mLAI0J,MAAMA,EAAE,CAAC,aAAa,qBAAqB,gDAAgD,iDAAiD,SAASC,EAAEC,GAAG,OAAOA,aAAa,UAAE,SAASC,EAAED,GAAG,OAAOA,aAAa,IAAEE,OAAOC,KAAKH,EAAEI,OAAOL,EAAEC,IAAG,QAAEA,GAAGG,OAAOH,EAAEE,OAAOC,KAAKH,GAAG,GAAG,SAASK,EAAEL,EAAEM,GAAG,OAAON,aAAa,IAAEA,EAAEI,MAAME,GAAGN,EAAEM,GAAG,SAASC,EAAEP,GAAG,OAAOA,EAAEA,EAAEQ,cAAc,KAAK,SAASC,EAAET,EAAEU,GAAG,MAAMC,EAAEX,EAAEY,KAAK,GAAGD,GAAG,mBAAmBA,EAAE,OAAOA,EAAEX,EAAEU,GAAG,MAAMG,EAAEZ,EAAED,GAAGc,EAAEb,EAAES,GAAG,GAAG,IAAIG,EAAEE,QAAQ,IAAID,EAAEC,OAAO,OAAO,IAAIF,EAAEE,SAASD,EAAEC,QAAQ,SAASf,EAAEM,GAAG,SAASU,MAAMC,QAAQjB,KAAKgB,MAAMC,QAAQX,KAAKN,EAAEe,SAAST,EAAES,OAA1E,CAAkFf,EAAEU,GAAG,MAAM,CAACQ,KAAK,WAAWC,SAASnB,EAAEoB,SAASV,GAAG,MAAMW,EAAEP,EAAEQ,QAAQtB,IAAI,IAAIa,EAAEU,QAAQvB,KAAKwB,EAAEX,EAAES,QAAQtB,IAAI,IAAIc,EAAES,QAAQvB,KAAKyB,EAAEZ,EAAES,QAAQhB,GAAGQ,EAAES,QAAQjB,IAAI,GAAGD,EAAEL,EAAEM,KAAKD,EAAEK,EAAEJ,KAAKoB,OAAOL,EAAEG,GAAGG,OAAOC,EAAErB,EAAEP,GAAG,GAAG4B,GAAG9B,EAAEyB,QAAQK,IAAI,GAAGH,EAAEV,OAAO,MAAM,CAACG,KAAK,WAAWC,SAASnB,EAAEoB,SAASV,GAAG,IAAImB,EAAE,MAAMC,EAAE/B,EAAEC,IAAID,EAAEW,GAAG,IAAI,MAAMG,KAAKY,EAAE,CAAC,MAAM3B,EAAEO,EAAEL,EAAEa,GAAGd,EAAEM,EAAEK,EAAEG,GAAG,IAAIZ,GAAG6B,GAAG,mBAAmBhC,GAAG,mBAAmBC,IAAKD,IAAIC,IAAI,MAAMD,GAAG,MAAMC,IAAIE,EAAEU,GAAGA,EAAEE,IAAI,mBAAmBF,EAAEE,GAAGF,EAAEE,GAAGf,EAAEC,GAAG,iBAAiBD,GAAG,iBAAiBC,GAAGQ,EAAET,KAAKS,EAAER,GAAGU,EAAEX,EAAEC,GAAG,CAACmB,KAAK,WAAWC,SAASrB,EAAEsB,SAASrB,IAAG,QAAEE,MAAK,QAAE4B,GAAGA,EAAEjB,KAAKC,GAAGZ,EAAE4B,EAAE,CAACX,KAAK,UAAUN,KAAK,CAAC,CAACC,GAAGZ,OAAQ,OAAO4B,EAAE,SAASf,EAAER,EAAEI,GAAG,IAAG,QAAEJ,GAAG,OAAM,EAAG,MAAMK,EAAED,EAAEqB,MAAM,KAAK,IAAIlB,EAAEP,EAAE,IAAI,MAAMN,KAAKW,EAAE,CAAC,GAAG,aAAaE,EAAEK,KAAK,OAAM,EAAG,GAAG,YAAYL,EAAEK,KAAK,OAAM,EAAG,CAAC,MAAMZ,EAAEO,EAAED,KAAKZ,GAAG,IAAIM,EAAE,OAAM,EAAGO,EAAEP,GAAG,OAAM,EAAG,SAASe,EAAErB,EAAEM,GAAG,IAAI,MAAMI,KAAKJ,EAAE,GAAGQ,EAAEd,EAAEU,GAAG,OAAM,EAAG,OAAM,EAAG,SAASc,EAAExB,EAAEM,GAAG,GAAG,mBAAmBN,GAAG,mBAAmBM,IAAIN,GAAGM,GAAG,OAAON,IAAIM,GAAG,iBAAiBN,GAAG,iBAAiBM,GAAGC,EAAEP,KAAKO,EAAED,GAAG,CAACY,KAAK,WAAWC,SAASnB,EAAEoB,SAASd,GAAGG,EAAET,EAAEM,K,8FCA1oD,MAAMC,EAAE,cAAY,8BAA8B,SAASI,EAAEL,GAAG,OAAO,QAAEA,EAAE0B,gBAAe,QAAE1B,EAAE2B,eAAe,MAAM3B,EAAE4B,SAAS,MAAM5B,EAAE6B,QAAQ,uBAAqB7B,EAAE8B,YAAY,eAAe9B,EAAE8B,YAAY9B,EAAE+B,iBAAiB,gBAAgB/B,EAAE+B,kBAAkBrB,MAAMC,QAAQX,EAAEgC,OAAO,sBAAoB,MAAMhC,EAAEiC,OAAOjC,EAAE8B,YAAY,eAAe9B,EAAE8B,YAAY9B,EAAE+B,iBAAiB,gBAAgB/B,EAAE+B,mBAAmBrB,MAAMC,QAAQX,EAAEgC,QAAQ,WAAWhC,GAAGA,EAAEkC,QAAQ,sBAAoB,MAAMlC,EAAEiC,OAAOjC,EAAE8B,YAAY,eAAe9B,EAAE8B,YAAY9B,EAAE+B,iBAAiB,gBAAgB/B,EAAE+B,kBAAkB,MAAM/B,EAAEmC,UAAU,qBAAmBlC,EAAEmC,MAAM,IAAI,IAAE,mBAAmB,oCAAoCpC,IAAI,Y,+LCAkJ,MAAMqC,EAAE,cAAY,wDAAwDC,GAAE,OAAE,IAAED,GAAWE,EAAE7C,IAAI,WAAWA,KAAK,GAAG8C,EAAE9C,GAAG,WAAWA,EAAE,SAAS+C,EAAE/C,GAAG,OAAO,IAAI6C,EAAE7C,GAAG,MAAMgD,EAAE,CAACC,mBAAkB,OAAE,4BAA4BC,SAAQ,OAAE,iBAAiB,SAASC,EAAEnD,EAAEM,GAAG,OAAOP,GAAGO,EAAEN,EAAED,IAAI,MAAMqD,EAAE,YAAYpD,EAAEM,EAAEP,EAAEU,GAAG4C,KAAKC,KAAK,EAAED,KAAKE,UAAU,EAAE,MAAMC,UAAU3C,EAAE4C,OAAOpC,EAAEqC,YAAY/C,GAAGF,EAAE4C,KAAKK,YAAY/C,IAAG,EAAG0C,KAAKG,UAAU3C,EAAEwC,KAAKM,OAAOrD,EAAE+C,KAAKI,OAAOpC,EAAEgC,KAAKO,cAAcP,KAAKQ,QAAQ7D,EAAEqD,KAAKC,KAAKvD,EAAEY,IAAI0C,KAAKS,KAAKT,KAAKU,UAAUlD,EAAEd,EAAEC,EAAEM,IAAI,aAAa,OAAO,QAAE+C,KAAKS,MAAM9D,GAAGA,EAAEgE,SAAS,wBAAwBhE,EAAEM,GAAG,MAAMP,GAAE,QAAEsD,KAAKS,MAAM,IAAI,IAAIrD,EAAE,EAAEA,EAAE4C,KAAKC,KAAKD,KAAKC,KAAK7C,IAAIV,EAAEU,EAAE4C,KAAKE,UAAUvD,KAAKM,EAAE+C,KAAKY,WAAW,EAAEZ,KAAKa,SAASb,KAAKC,KAAKD,KAAKC,KAAK,EAAE,sBAAsBtD,EAAEM,GAAG,MAAMP,GAAE,QAAEsD,KAAKS,MAAM,IAAI,IAAIrD,EAAE,EAAEA,EAAE4C,KAAKC,KAAKD,KAAKC,KAAK7C,IAAIV,EAAEU,EAAE4C,KAAKE,UAAUvD,IAAI,IAAIM,EAAE+C,KAAKY,WAAW,EAAEZ,KAAKa,SAASb,KAAKC,KAAKD,KAAKC,KAAK,EAAE,aAAatD,EAAEM,EAAEP,GAAG,MAAMU,GAAE,QAAE4C,KAAKS,MAAM,IAAI,MAAMjD,KAAKd,EAAEU,EAAEI,EAAEwC,KAAKE,UAAUvD,IAAIM,EAAE+C,KAAKY,WAAWE,KAAKC,IAAIf,KAAKY,WAAWpD,GAAGwC,KAAKa,SAASC,KAAKE,IAAIhB,KAAKa,SAASrD,GAAG,kBAAkBb,EAAEM,EAAEP,IAAG,QAAEsD,KAAKS,MAAM/D,EAAEsD,KAAKE,UAAUvD,IAAIM,EAAE+C,KAAKY,WAAWE,KAAKC,IAAIf,KAAKY,WAAWlE,GAAGsD,KAAKa,SAASC,KAAKE,IAAIhB,KAAKa,SAASnE,GAAG,oBAAoBC,EAAEM,EAAEP,IAAG,QAAEsD,KAAKS,MAAM/D,EAAEsD,KAAKE,UAAUvD,KAAKM,EAAE+C,KAAKY,WAAWE,KAAKC,IAAIf,KAAKY,WAAWlE,GAAGsD,KAAKa,SAASC,KAAKE,IAAIhB,KAAKa,SAASnE,GAAG,QAAQC,EAAEM,GAAG,MAAMP,EAAE+C,EAAE9C,GAAG,OAAO,QAAEqD,KAAKS,MAAM/D,EAAEsD,KAAKE,UAAUjD,GAAG,QAAQN,EAAEM,EAAEP,GAAG,MAAMU,EAAEqC,EAAE9C,GAAGa,EAAE,GAAGP,EAAE,IAAI+C,KAAKI,OAAO5C,IAAIwC,KAAKS,KAAKrD,EAAE4C,KAAKE,UAAUjD,GAAGP,EAAEsD,KAAKY,WAAWE,KAAKC,IAAIf,KAAKY,WAAWxD,GAAG4C,KAAKa,SAASC,KAAKE,IAAIhB,KAAKa,SAASzD,IAAIkC,EAAED,MAAM,2BAA2B,yDAAyD,OAAO,OAAOW,KAAKG,WAAWH,KAAKQ,SAASb,EAAEE,SAAS,UAAUG,KAAKM,QAAQW,QAAQC,MAAMlB,KAAKS,KAAK,EAAE,GAAG,SAAS,OAAOT,KAAKG,WAAWH,KAAKQ,SAASb,EAAEE,SAAS,UAAUG,KAAKM,QAAQW,QAAQC,MAAMlB,KAAKS,KAAK,EAAE,GAAG,OAAO9D,GAAG,GAAGqD,KAAKC,KAAKtD,GAAGqD,KAAKK,YAAY,CAAC,MAAMpD,EAAE+C,KAAKU,UAAUV,KAAKG,UAAUxD,EAAEqD,KAAKQ,QAAQR,KAAKM,QAAQ5D,GAAE,QAAEsD,KAAKS,MAAMxD,EAAEkE,IAAIzE,GAAGsD,KAAKS,KAAKxD,GAAG,YAAY,MAAMN,EAAEqD,KAAKY,WAAW3D,EAAE+C,KAAKa,SAASnE,EAAEsD,KAAKE,UAAU,GAAGvD,EAAEM,EAAE,OAAO,KAAK+C,KAAKO,cAAc,MAAMnD,IAAI4C,KAAKQ,SAAS,UAAUR,KAAKM,QAAQ9C,EAAEwC,KAAKG,UAAUnC,EAAEgC,KAAKI,OAAO/C,GAAE,QAAE2C,KAAKS,MAAM,OAAIpD,EAAE+D,MAAkM,CAACC,MAAM1E,EAAE2E,IAAIrE,EAAEwD,KAAKrD,GAAGC,EAAE+D,MAAMzE,EAAED,GAAGO,EAAE,GAAGP,IAAI,KAAKyD,UAAU3C,EAAE4C,OAAOpC,GAA5PZ,EAA6D,CAACiE,MAAM1E,EAAE2E,IAAIrE,EAAEwD,KAAK,KAAI,QAAET,KAAKG,WAAX,CAAuBxC,MAAM4D,UAAUH,MAAMI,KAAKxB,KAAKS,KAAK9D,EAAED,GAAGO,EAAE,GAAGP,IAAIyD,UAAU3C,EAAE4C,OAAOpC,GAAtK,CAACqD,MAAM1E,EAAE2E,IAAIrE,EAAEwD,KAAK,KAAKN,UAAU3C,EAAE4C,OAAOpC,GAA2M,UAAUrB,EAAEM,EAAEP,EAAEU,GAAG,MAAMI,EAAEd,GAAG,UAAUU,EAAEqE,kBAAkBC,YAAY1D,GAAE,QAAErB,GAAGW,EAAE,IAAIU,EAAE,IAAIR,EAAEP,EAAEA,EAAE,EAAEe,EAAE2D,oBAAoB,IAAI,IAAIhF,EAAE,EAAEA,EAAEW,EAAEI,OAAOf,GAAG,EAAEW,EAAEX,EAAE,GAAG,IAAI,OAAOW,EAAE,cAAc0C,KAAKY,WAAW,WAAWZ,KAAKa,SAAS,GAAG,cAAqB,YAAYlE,EAAEM,GAAG+C,KAAK4B,QAAQjF,EAAEqD,KAAK6B,OAAO5E,EAAE+C,KAAK8B,qBAAqB,IAAIC,IAAI/B,KAAKgC,QAAQ,IAAIrE,MAAMqC,KAAKiC,SAAS,IAAItE,MAAM,MAAGqC,KAAKkC,YAAY,EAAElC,KAAKmC,kBAAiB,6BAAInC,KAAKoC,eAAc,EAAGpC,KAAKqC,MAAM,GAAGrC,KAAKsC,gBAAgB,IAAIC,IAAI,MAAM7F,EAAEO,EAAEuF,qBAAqB,KAAK,KAAKjD,EAAE,2BAA2BI,EAAEC,kBAAkB,OAAO,2BAA2BI,KAAKyC,kBAAkB,CAAC,CAACtC,UAAU,KAAKC,OAAO,GAAG,CAACD,UAAU,KAAKC,OAAO,GAAGC,aAAY,GAAI,CAACF,UAAUzD,EAAE0D,OAAO,IAAI,CAACD,UAAUzD,EAAE0D,OAAO,KAAKJ,KAAKgC,QAAQhC,KAAKyC,kBAAkBC,KAAI,IAAK,OAAO,UAAU1C,KAAKmC,iBAAiBQ,QAAQ,mBAAmB,OAAO3C,KAAKoC,cAAc,cAAc,OAAOpC,KAAKmC,iBAAiBS,OAAO,OAAOlG,EAAEU,GAAG4C,KAAK6B,OAAOzE,EAAE,MAAMI,EAAEJ,EAAEyF,OAAOC,WAAW,GAAGC,QAAQ/E,GAAE,QAAEgC,KAAKgD,QAAQxF,GAAG,IAAId,EAAEuG,QAAQC,SAASxG,EAAEuG,QAAQE,aAAazG,EAAEqG,QAAQtC,MAAK,GAAIzC,KAAI,OAAE,yBAAyBoF,QAAQC,MAAM,oCAAoCrF,GAAGtB,EAAEqG,QAAQtC,MAAK,EAAGT,KAAKgD,QAAQxF,EAAEwC,KAAK8B,qBAAqBwB,UAAS,QAAE9F,IAAI,CAAC,OAAOA,EAAE+F,QAAQ,IAAI,UAAUvD,KAAKkC,YAAY,EAAE,MAAM,IAAI,YAAYlC,KAAKkC,YAAY,EAAE,IAAI,MAAMvF,KAAKa,EAAEgG,QAAQxD,KAAKyD,eAAe9G,IAAI,WAAWA,EAAED,GAAG,IAAG,QAAEA,EAAEgH,aAAa,OAAO,MAAMtG,EAAEV,EAAEgH,YAAYC,YAAY,KAAKvG,EAAEwG,QAAQ,CAAC,MAAMjH,EAAES,EAAEyG,eAAe7D,KAAK8D,iBAAiBnH,EAAES,IAAI,sBAAsB4C,KAAK+D,wBAAwB,KAAK/D,KAAKmC,iBAAiBQ,QAAQ3C,KAAKmC,kBAAiB,6BAAI,mBAAmBxF,EAAEM,GAAG,MAAMP,EAAEsD,KAAKgE,UAAU,GAAG5G,EAAEH,EAAEyF,KAAK/F,GAAG8C,EAAE9C,KAAKD,EAAEuH,OAAOvH,EAAEwH,wBAAwB,EAAE,GAAGxH,EAAEyH,aAAa,EAAE,EAAE/G,GAAGV,EAAE0H,SAASpE,KAAKsC,gBAAgBgB,QAAQ,IAAI,MAAMrG,KAAKN,EAAEqD,KAAKsC,gBAAgB+B,IAAIpH,SAAS+C,KAAKsE,cAAc,oBAAoBrH,EAAEP,GAAG,MAAMmF,OAAOzE,EAAEmH,QAAQ/G,EAAEgH,iBAAiBxG,GAAGtB,GAAG+H,QAAQnH,GAAGF,EAAEC,EAAEC,EAAEoF,KAAI,CAAE/F,EAAEM,IAAI+C,KAAK0E,cAAc/H,EAAEM,EAAEO,EAAEQ,YAAY,SAAEX,IAAIsH,MAAMhI,GAAGA,MAAMM,EAAE8F,QAAQ0B,SAAQ,GAAG,OAAE,yBAAyBrB,QAAQC,MAAM,oCAAoC,oBAAoB,QAAQ1G,EAAEM,EAAEP,EAAEU,GAAG,MAAMI,EAAEiC,EAAE9C,GAAGqD,KAAK4E,oBAAoBpH,GAAGwC,KAAKgE,UAAU/G,GAAG4H,QAAQlI,EAAED,EAAEU,GAAG,QAAQT,EAAEM,EAAEP,GAAG,OAAOsD,KAAKgE,UAAU/G,GAAG6H,QAAQnI,EAAED,GAAG,iBAAiBC,GAAG,OAAOqD,KAAKsC,gBAAgByC,IAAIpI,GAAG,KAAE,EAAE,mBAAmBA,GAAG,MAAMM,EAAEwC,EAAE9C,GAAGqD,KAAKgE,UAAU,GAAGa,QAAQ5H,EAAE,EAAE,GAAG,iBAAiBN,EAAEM,GAAG,MAAMP,EAAE+C,EAAE9C,GAAG,GAAGqD,KAAK4E,oBAAoBlI,GAAGsD,KAAKgE,UAAU,GAAGa,QAAQnI,EAAE,EAAEsD,KAAKgF,eAAe/H,IAAI+C,KAAKkC,cAAc1C,EAAE7C,GAAG,OAAO,MAAMS,EAAE4C,KAAK8B,qBAAqBtE,EAAEwC,KAAK6B,OAAOW,qBAAqB,EAAE,EAAEpF,EAAE6C,MAAM7C,EAAE6H,SAAQ,CAAEtI,EAAES,KAAK,MAAMY,EAAEZ,EAAEI,EAAE,EAAEF,EAAEwD,KAAKoE,MAAM9H,EAAEI,EAAE,GAAGH,EAAE2C,KAAKgE,UAAU1G,EAAE,MAAGJ,EAAEP,EAAEM,GAAG,GAAG+C,KAAK6B,OAAOW,qBAAqBnF,EAAEwH,QAAQnI,EAAEsB,EAAEd,QAAQ,GAAGA,IAAI,KAAEG,EAAEwH,QAAQnI,EAAEsB,EAAE,KAAKX,EAAEwH,QAAQnI,EAAEsB,EAAE,EAAE,SAAS,CAAC,MAAMrB,GAAE,QAAEmE,KAAKqE,MAAMjI,IAAI,MAAM,OAAO,MAAMD,EAAE,IAAIN,EAAES,GAAG,MAAMT,IAAI,EAAEU,EAAEwH,QAAQnI,EAAEsB,EAAEf,GAAGI,EAAEwH,QAAQnI,EAAEsB,EAAE,EAAEZ,OAAO,cAAc,GAAG4C,KAAKoF,YAAY,OAAOpF,KAAKoF,YAAYC,QAAQ,GAAGrF,KAAKsF,YAAY,OAAOtF,KAAKoF,aAAY,sBAAIpF,KAAKoF,YAAYC,QAAQ,MAAM1I,EAAE,CAAC4I,OAAOvF,KAAKgC,QAAQU,KAAK/F,IAAG,QAAEA,GAAGA,EAAE6I,YAAY,QAAQ,OAAOxF,KAAKsF,YAAYtF,KAAKyF,mBAAmBC,MAAK,KAAM,MAAMzI,EAAE,KAAK,GAAG+C,KAAKsF,YAAY,KAAKtF,KAAKoF,YAAY,CAAC,MAAMzI,EAAEqD,KAAKoF,YAAYpF,KAAKoF,YAAY,KAAKpF,KAAKsE,cAAcoB,MAAK,IAAK/I,EAAEgJ,cAAcjJ,EAAEsD,KAAK4B,QAAQgE,OAAOjJ,EAAEqD,KAAK6F,SAASH,KAAKzI,GAAG6I,MAAM7I,GAAG,OAAO+C,KAAK4B,QAAQmE,OAAO/F,KAAK6F,SAASnJ,KAAKoJ,OAAOnJ,IAAG,kBAAEA,IAAIqD,KAAK+D,wBAAwB,KAAK/D,KAAKyF,qBAAqBnG,EAAED,MAAM,IAAI,IAAE,0BAA0B,4CAA4C1C,KAAI,kBAAOqD,KAAKsF,YAAY,oBAAoB3I,GAAG,KAAKA,GAAGqD,KAAKqC,MAAMrC,KAAKqC,OAAO,GAAGrC,KAAKgG,UAAU,OAAO,eAAerJ,GAAG,IAAIM,EAAE,GAAG,MAAMN,EAAEsJ,WAAWtJ,EAAEuJ,oBAAoB5G,EAAE6G,KAAK,iBAAiB,2FAA2FlJ,EAAEA,GAAGA,EAAEmJ,0BAA0BzJ,EAAEsJ,gBAAgB,CAAC,IAAItJ,EAAEuC,MAAM,OAAOjC,EAAEN,EAAEuJ,mBAAmBjJ,IAAI,MAAMP,EAAEO,EAAEoJ,cAAc1J,EAAEuJ,oBAAoB,OAAOxJ,EAAEO,EAAEoJ,cAAc1J,EAAEuC,OAAOxC,EAAE,MAAMO,GAAGA,EAAEoJ,cAAc1J,EAAEuC,OAAUvC,EAAE2J,sBAAqBrJ,EAAE6C,EAAE7C,GAAGA,IAAG,QAAEA,EAAEN,EAAE2J,wBAAuBtG,KAAK8B,qBAAqBX,IAAIxE,EAAE4J,QAAQzG,EAAE7C,GAAGN,GAAG,OAAOA,GAAG6J,MAAM7J,IAAIA,IAAI,IAAI,KAAEA,KAAK,mBAAmB,IAAG,QAAEqD,KAAK+D,yBAAyB,OAAO/D,KAAK+D,wBAAwB/D,KAAKgE,UAAU,MAAGzE,EAAE,+BAA+B,MAAM5C,EAAE,CAAC8J,OAAO9G,EAAEC,qBAAqB,UAAUI,KAAK4B,QAAQ/D,MAAMoC,KAAKD,KAAKqC,MAAMkD,QAAO,QAAEvF,KAAKgC,SAASrF,IAAG,CAAE0D,YAAY1D,EAAE0D,YAAYM,OAAOhE,EAAEgE,OAAOR,UAAUxD,EAAEwD,eAAe3C,EAAEwC,KAAK4B,QAAQ8E,WAAW/J,EAAEqD,KAAK6F,SAASC,OAAOnJ,KAAI,kBAAEA,GAAGqD,KAAK+D,wBAAwB,KAAKzE,EAAED,MAAM,IAAI,IAAE,0BAA0B,oDAAoD1C,OAAO,OAAOqD,KAAK+D,wBAAwBvG,EAAEA,EAAEkI,MAAK,KAAK,QAAE1F,KAAK+D,yBAAyB/D,KAAKyF,wBAAmB,IAASjI,EAAE,UAAUb,GAAG,MAAMM,EAAE+C,KAAKgC,QAAQrF,GAAG,IAAG,QAAEM,GAAG,OAAOA,EAAEsC,EAAE,wCAAwC5C,KAAK,MAAMS,EAAEuC,EAAEC,kBAAkBpC,EAAEwC,KAAK4B,QAAQ/D,KAAKG,EAAE,IAAI+B,EAAE3C,EAAEI,EAAEwC,KAAKqC,MAAMrC,KAAKyC,kBAAkB9F,IAAI,OAAOqD,KAAKgC,QAAQrF,GAAGqB,EAAEgC,KAAK+D,wBAAwB,KAAK/F,EAAE,UAAU,GAAGgC,KAAKqC,MAAMrC,KAAK6B,OAAO8E,eAAe,CAAC,MAAMhK,EAAEqD,KAAKqC,QAAQ,EAAE,OAAO9C,EAAE,0BAA0B5C,EAAEqD,KAAKgC,UAAS,QAAEhC,KAAKgC,SAAS/E,GAAGA,EAAE2J,OAAOjK,KAAKqD,KAAK+D,wBAAwB,KAAK/D,KAAKqC,MAAM1F,EAAE,EAAE,OAAO2C,EAAED,MAAM,IAAI,IAAE,sBAAsB,mDAAmD,EAAE,oBAAoB1C,EAAES,EAAEI,EAAEQ,GAAG,MAAMV,EAAE0C,KAAKiC,SAAS7E,GAAGC,GAAE,QAAEC,IAAIA,EAAEuJ,KAAK,IAAIvJ,IAAIX,EAAE,OAAM,EAAG,GAAGU,IAAIyJ,KAAKC,UAAUpK,GAAG,OAAM,EAAG,IAAG,QAAEA,GAAG,CAAC,MAAMA,EAAE,GAAGS,EAAE,EAAEH,EAAE+C,KAAKgE,UAAU,GAAG,OAAOhE,KAAKiC,SAAS7E,GAAG,KAAKH,EAAE+J,sBAAsB,EAAErK,GAAGqD,KAAKsE,eAAc,EAAG,MAAMpH,QAAQ8C,KAAKiH,WAAW7J,EAAEI,GAAG,aAAaN,EAAE0I,OAAOjJ,EAAEqB,IAAG,EAAG,iBAAiBrB,EAAEM,GAAG,MAAMG,EAAE4C,KAAKiC,SAAStF,GAAG,IAAG,QAAES,GAAG,OAAOA,EAAE,MAAM8J,QAAQ1J,SAAS,gCAA+DQ,EAAE,IAAIR,EAAE,CAAC2J,aAAalK,EAAEkK,aAAaC,MAAK,EAAGC,MAAK,EAAGC,SAASrK,EAAEqK,SAASC,YAAY,IAAI,IAAEtK,EAAEuK,UAAU,OAAOxH,KAAKiC,SAAStF,GAAGqB,EAAEA,EAAE,UAAUrB,GAAG,SAAS,EAAEqD,KAAKgE,UAAU,GAAGc,QAAQnI,EAAE,IAAI,eAAeA,GAAG,IAAID,EAAE,EAAE,MAAMU,GAAGI,EAAEb,EAAEkH,eAAe,IAAIrE,EAAEhC,GAAG,IAAI,KAAK,IAAIA,EAAE,IAAI,IAAIA,EAAE,EAAEA,EAAEwC,KAAKiC,SAASvE,OAAOF,IAAI,CAAC,MAAMQ,KAAKZ,EAAE,GAAGI,GAAGF,EAAE0C,KAAKiC,SAASzE,GAAGd,KAAKsB,IAAG,QAAEV,IAAIA,EAAEmK,MAAM9K,GAAG,EAAE,IAAIa,EAAE,IAAIQ,EAAE,EAAE,GAAGgC,KAAKsC,gBAAgBrC,KAAK,CAAC,MAAMhD,EAAEN,EAAE+K,cAAc1J,EAAEgC,KAAK2H,iBAAiB1K,GAAG,OAAOP,GAAG,EAAEsB,K,8CCA5qT,MAAMX,EAAE,cAAc2C,KAAK4H,SAAS,GAAG5H,KAAK6H,WAAW,EAAE,SAAS5K,GAAE,GAAI,OAAO,SAASA,EAAEN,GAAG,QAAQA,EAAE,WAAW,GAAGM,KAAK,EAA3C,CAA8C+C,KAAK8H,aAAa7K,GAAG,UAAUA,GAAG+C,KAAK4H,SAASG,KAAK9K,GAAG,aAAa,OAAO+C,KAAK4H,SAASlK,OAAOsC,KAAK4H,SAASI,MAAMhI,KAAK6H,cCA/U,MAAM,EAAE,YAAYlL,EAAEM,GAAG+C,KAAKiI,MAAM,EAAEjI,KAAKkI,KAAKvL,EAAEqD,KAAKiI,MAAMhL,EAAE,kBAAkBA,EAAEG,GAAG,OAAO,IAAI,EAAEH,EAAEG,GAAG,cAAcH,EAAEG,EAAE,YAAY,MAAMqB,EAAE,IAAI0J,YAAYrH,KAAKsH,KAAKnL,EAAE,KAAK,OAAO,IAAI,EAAEwB,EAAErB,GAAG,UAAUT,GAAG,OAAOmE,KAAKoE,MAAMvI,EAAE,IAAI,IAAIA,GAAG,MAAMM,EAAE+C,KAAKiI,MAAMtL,EAAE,SAASqD,KAAKkI,KAAKlI,KAAKqI,UAAUpL,IAAI,GAAGA,EAAE,IAAI,IAAIN,GAAG,MAAMM,EAAE+C,KAAKiI,MAAMtL,EAAES,EAAE4C,KAAKqI,UAAUpL,GAAGwB,EAAE,GAAGxB,EAAE,GAAG+C,KAAKkI,KAAK9K,IAAIqB,EAAE,MAAM9B,GAAG,MAAMM,EAAE+C,KAAKiI,MAAMtL,EAAES,EAAE4C,KAAKqI,UAAUpL,GAAGwB,EAAE,GAAGxB,EAAE,GAAG+C,KAAKkI,KAAK9K,IAAI,WAAWqB,EAAE,OAAO9B,GAAG,MAAMM,EAAE+C,KAAKkI,KAAK9K,EAAE,IAAI+K,YAAYrH,KAAKsH,KAAKzL,EAAE,KAAKS,EAAE+D,IAAIlE,GAAG+C,KAAKkI,KAAK9K,EAAE,GAAGT,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,IAAIN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,IAAIrD,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,IAAIN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,IAAIrD,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,IAAIN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,IAAIrD,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,KAAKN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,KAAKrD,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,KAAKN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,KAAKrD,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,KAAKN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,MAAM,IAAI,IAAIrD,EAAE,EAAEA,EAAEqD,KAAKkI,KAAKxK,OAAOf,IAAI,GAAGqD,KAAKkI,KAAKvL,GAAG,OAAM,EAAG,OAAM,EAAG,KAAKA,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI+C,KAAKkI,KAAKjL,GAAGN,EAAEuL,KAAKjL,GAAG,OAAO+C,KAAK,QAAQ,OAAO,IAAI,EAAEA,KAAKkI,KAAK9G,QAAQpB,KAAKiI,OAAO,QAAQ,IAAI,IAAItL,EAAE,EAAEA,EAAEqD,KAAKkI,KAAKxK,OAAOf,IAAIqD,KAAKkI,KAAKvL,GAAG,EAAE,WAAWA,GAAG,IAAI,IAAIM,EAAE,EAAEA,EAAE+C,KAAKkI,KAAKxK,OAAOT,IAAI,CAAC,IAAIG,EAAE4C,KAAKkI,KAAKjL,GAAGwB,EAAE,GAAGxB,EAAE,GAAGG,EAAE,KAAKA,GAAI,EAAEA,GAAGT,EAAE8B,GAAGrB,KAAK,EAAEqB,KAAM,WAAW,IAAI9B,EAAE,EAAE,OAAOqD,KAAKsI,YAAYrL,IAAIN,OAAOA,GCAj0C,SAAS,EAAEA,EAAEM,EAAEG,GAAG,KAAKT,EAAEe,OAAOT,GAAG,KAAKN,EAAEe,QAAQT,GAAGN,EAAEoL,KAAK3K,GAAG,MAAMV,EAAE,cAAcsD,KAAKuI,UAAU,GAAGvI,KAAKwI,SAAS,GAAGxI,KAAKyI,aAAa,IAAI,EAAEzI,KAAK0I,eAAe,IAAI1I,KAAK2I,SAAS,GAAG3I,KAAK4I,aAAa,GAAG5I,KAAK6I,QAAQ,GAAG,eAAe,MAAMlM,EAAEqD,KAAK2I,SAASjL,OAAO,OAAOsC,KAAK2I,SAASZ,KAAK,SAAS/H,KAAK0I,eAAe,aAAa/L,EAAE,EAAE,UAAUA,GAAG,OAAOqD,KAAK2I,SAAShM,EAAE,GAAG,UAAUqD,KAAK0I,iBAAiB,EAAE,IAAI,MAAM/L,KAAKqD,KAAK2I,SAAShM,EAAEmM,OAAO9I,KAAK0I,gBAAgB,eAAe/L,EAAEM,GAAG+C,KAAKuI,UAAU5L,KAAKqD,KAAKuI,UAAU5L,GAAG,IAAI,EAAEqD,KAAKuI,UAAU5L,GAAGM,EAAE,GAAG,kBAAkBN,GAAG,EAAEqD,KAAK4I,aAAajM,EAAE,GAAG,cAAcA,EAAEM,GAAG+C,KAAKwI,SAAS7L,KAAKqD,KAAKwI,SAAS7L,GAAG,IAAI,EAAEqD,KAAKwI,SAAS7L,GAAGM,EAAE,MAAM,gBAAgBN,GAAE,GAAI,MAAMM,EAAE+C,KAAKyI,aAAaM,WAAW,OAAO9L,EAAE+C,KAAK0I,gBAAgB1I,KAAKgG,UAAU,EAAErJ,EAAEM,MAAMA,EAAE,WAAW,GAAGN,KAAK,EAA/B,CAAkCM,EAAEN,GAAG,iBAAiBA,GAAG,IAAI,MAAMM,KAAK+C,KAAK2I,SAAS1L,EAAE+L,MAAMrM,GAAG,OAAOqD,KAAKyI,aAAaQ,UAAU,WAAWtM,GAAG,mBAAmBA,EAAEM,GAAG,OAAO+C,KAAKoG,0BAA0B,WAAWzJ,EAAE,GAAG,mBAAmBA,EAAEM,EAAEG,GAAG,OAAO4C,KAAKkJ,0BAA0B,WAAWvM,EAAES,EAAE,GAAG,kBAAkBT,EAAEM,GAAG,OAAO+C,KAAKmJ,yBAAyB,WAAWxM,EAAE,GAAG,kBAAkBA,EAAEM,EAAEG,GAAG,OAAO4C,KAAKoJ,yBAAyB,WAAWzM,EAAE,EAAES,GAAG,0BAA0BT,EAAEM,GAAG,MAAMG,EAAE,WAAWT,EAAE,OAAOqD,KAAKqJ,eAAepM,EAAEG,GAAG4C,KAAKuI,UAAUtL,GAAGG,GAAG,0BAA0BT,EAAEM,EAAEG,GAAG,MAAMV,EAAE,WAAWC,EAAEqD,KAAKqJ,eAAepM,EAAEP,GAAGsD,KAAKuI,UAAUtL,GAAGP,GAAGU,EAAE,cAAcT,GAAG,MAAMM,EAAE,WAAWN,EAAE,OAAOqD,KAAKsJ,kBAAkBrM,GAAG+C,KAAK4I,aAAa3L,GAAG,cAAcN,EAAEM,GAAG,MAAMG,EAAE,WAAWT,EAAEqD,KAAKsJ,kBAAkBlM,GAAG4C,KAAK4I,aAAaxL,GAAGH,EAAE,yBAAyBN,EAAEM,GAAG,MAAMG,EAAE,WAAWT,EAAE,OAAOqD,KAAKuJ,cAActM,EAAEG,GAAG4C,KAAKwI,SAASvL,GAAGG,GAAG,yBAAyBT,EAAEM,EAAEG,GAAG,MAAMV,EAAE,WAAWC,EAAEqD,KAAKuJ,cAActM,EAAEP,GAAGsD,KAAKwI,SAASvL,GAAGP,GAAGU,EAAE,QAAQT,GAAG,OAAOqD,KAAK6I,QAAQ,GAAG,WAAWlM,IAAI,QAAQA,GAAG,OAAOqD,KAAK6I,QAAQ,GAAG,WAAWlM,GAAG,GAAG,QAAQA,GAAG,OAAOqD,KAAK6I,QAAQ,GAAG,WAAWlM,GAAG,GAAG,QAAQA,GAAG,OAAOqD,KAAK6I,QAAQ,GAAG,WAAWlM,GAAG,GAAG,UAAUA,EAAEM,GAAG,MAAMP,EAAEO,EAAEuM,uBAAuB,IAAI9M,IAAIA,EAAE+M,OAAO/L,OAAO,OAAM,EAAG,IAAIL,EAAE,IAAIG,EAAE,IAAIR,GAAE,IAAKyB,GAAE,IAAK/B,EAAEgN,eAAc,CAAE/M,EAAEM,KAAKI,EAAEyD,KAAKC,IAAI1D,EAAEV,GAAGa,EAAEsD,KAAKC,IAAIvD,EAAEP,GAAGD,EAAE8D,KAAKE,IAAIhE,EAAEL,GAAG8B,EAAEqC,KAAKE,IAAIvC,EAAExB,MAAM,MAAMsB,EAAE,WAAW5B,EAAE,OAAO,EAAEqD,KAAK6I,QAAQ,EAAEtK,EAAE,EAAE,GAAGyB,KAAK6I,QAAQ,EAAEtK,GAAGlB,EAAE2C,KAAK6I,QAAQ,EAAEtK,EAAE,GAAGf,EAAEwC,KAAK6I,QAAQ,EAAEtK,EAAE,GAAGvB,EAAEgD,KAAK6I,QAAQ,EAAEtK,EAAE,GAAGE,GAAE,K,yGCA1lE,IAAIrB,EAAE,EAAE,MAAMC,EAAE,YAAYV,GAAGqD,KAAKnC,KAAK,mBAAmBmC,KAAK2J,MAAK,EAAG3J,KAAK4J,SAAS,EAAE5J,KAAK6J,IAAI,EAAE7J,KAAK8J,IAAI,EAAE9J,KAAK+J,OAAO,EAAE/J,KAAKgK,MAAM,EAAEhK,KAAKiK,MAAM,EAAEjK,KAAKkK,MAAM,EAAElK,KAAKmK,QAAQ,GAAGnK,KAAK4J,SAASjN,EAAE,wBAAwB,OAAOS,IAAIA,EAAEA,EAAE,MAAM,EAAEA,EAAEA,EAAE,iBAAiB,OAAO,IAAI4C,KAAK+J,MAAM,2BAA2B,MAAM,IAAIK,MAAM,2CAA2C,aAAa,OAAOpK,KAAKqK,SAAS,mBAAmB1N,GAAG,OAAOqD,KAAKoG,0BAA0B,GAAG,mBAAmBzJ,EAAEM,GAAG,OAAO+C,KAAKkJ,0BAA0BjM,EAAE,GAAG,kBAAkBN,GAAG,OAAOqD,KAAKmJ,yBAAyB,GAAG,kBAAkBxM,EAAEM,GAAG,OAAO+C,KAAKoJ,yBAAyB,EAAEnM,GAAG,0BAA0BN,GAAG,OAAOqD,KAAKqK,SAASjE,0BAA0BpG,KAAK6D,eAAelH,GAAG,0BAA0BA,EAAEM,GAAG+C,KAAKqK,SAASnB,0BAA0BlJ,KAAK6D,eAAelH,EAAEM,GAAG,yBAAyBN,GAAG,OAAOqD,KAAKqK,SAASlB,yBAAyBnJ,KAAK6D,eAAelH,GAAG,yBAAyBA,EAAEM,GAAG,OAAO+C,KAAKqK,SAASjB,yBAAyBpJ,KAAK6D,eAAelH,EAAEM,GAAG,UAAUN,EAAEM,GAAG,MAAMO,EAAEwC,KAAKsK,OAAO,OAAO9M,EAAEqM,IAAIlN,EAAEa,EAAEsM,IAAI7M,EAAEO,EAAE,OAAOb,EAAEM,EAAEO,EAAEd,GAAG,MAAMU,EAAE4C,KAAKsK,OAAO,OAAOlN,EAAE2M,MAAMpN,EAAES,EAAE4M,MAAMxM,EAAEJ,EAAE6M,MAAMhN,EAAEG,EAAE8M,MAAMxN,EAAEU,EAAE,YAAY,OAAO4C,KAAKuK,WAAW,cAAc5N,EAAEM,GAAE,GAAI,MAAMO,EAAEwC,KAAKwK,eAAe7N,EAAEM,GAAG,QAAG,IAASO,EAAE,OAAOA,EAAE,IAAI,MAAMA,KAAKwC,KAAKmK,QAAQ,CAAC3M,EAAEiN,SAASzK,KAAK0K,YAAY,MAAMhO,EAAEc,EAAEgN,eAAe7N,EAAEM,GAAG,QAAG,IAASP,EAAE,OAAOA,GAAG,iBAAiB,OAAOsD,KAAK2K,kBAAkB,eAAehO,GAAGqD,KAAKmK,QAAQpC,KAAKpL,GAAG,oBAAoB,OAAOqD,KAAK,WAAW,MAAM/C,EAAE+C,KAAKwJ,uBAAuB9M,GAAE,QAAEO,EAAE+C,KAAKmH,aAAanH,KAAKqH,KAAKrH,KAAKoH,MAAMhK,GAAE,QAAEV,GAAG,OAAOU,EAAEoH,iBAAiBxE,KAAK4K,wBAAwBxN,EAAE,MAAMT,GAAG,OAAOqD,KAAKqG,cAAc1J,GAAE,GAAI,SAASA,GAAG,OAAM,EAAG,SAASA,EAAEM,IAAI,OAAO,MAAM,GAAG,aAAa,MAAM,GAAG,mBAAmB,GAAG,wBAAwB+C,KAAKmH,aAAa,OAAO,KAAK,MAAMxK,EAAEqD,KAAK6K,0BAA0B,IAAIlO,GAAGA,EAAEmO,0BAA0B,OAAO,KAAK,MAAMtN,EAAEwC,KAAK+K,2BAA2B,OAAO,OAAE,IAAI,IAAEpO,EAAEqD,KAAKoH,KAAKpH,KAAKqH,KAAK7J,GAAG,SAASb,GAAGA,EAAEgN,KAAK3J,KAAK2J,KAAKhN,EAAE0N,SAASrK,KAAKqK,SAAS1N,EAAEiO,wBAAwB5K,KAAK4K,wBAAwBjO,EAAEwN,QAAQnK,KAAKmK,QAAQxN,EAAEkN,IAAI7J,KAAK6J,IAAIlN,EAAEmN,IAAI9J,KAAK8J,IAAInN,EAAEoN,MAAM/J,KAAK+J,MAAMpN,EAAEqN,MAAMhK,KAAKgK,MAAMrN,EAAEsN,MAAMjK,KAAKiK,MAAMtN,EAAEuN,MAAMlK,KAAKkK,S,wECA7zE,MAAMlM,UAAU,IAAE,YAAYrB,EAAEM,EAAEO,GAAGwN,MAAMrO,GAAGqD,KAAKiL,eAAe,EAAEjL,KAAKkL,YAAY,IAAI3I,IAAIvC,KAAKmL,cAAc3N,EAAEwC,KAAKoL,UAAUnO,EAAE,oBAAoBA,EAAEO,EAAEJ,GAAG,MAAMV,GAAE,QAAE,GAAGO,EAAEO,GAAE,GAAG,EAAGJ,GAAG,IAAI,IAAIT,EAAE,EAAEA,EAAED,EAAEgB,OAAOf,IAAID,EAAEC,GAAG0O,UAAUpO,EAAEN,GAAG0O,UAAU,OAAOrN,EAAEsN,sBAAsB5O,EAAEc,GAAG,sBAAsBb,EAAEa,GAAG,MAAMJ,GAAE,QAAET,EAAEa,GAAG,OAAOQ,EAAEuN,wBAAwBnO,GAAG,+BAA+BT,GAAG,MAAM6O,SAASvO,EAAEkK,aAAa3J,GAAGb,EAAES,EAAEY,EAAEsN,sBAAsBrO,EAAEO,GAAGJ,EAAEqO,uBAAuB9O,EAAE+O,sBAAsBtO,EAAEuO,WAAWhP,EAAEiP,UAAU,IAAI,MAAM3O,KAAKN,EAAE6K,OAAO,sBAAsBvK,EAAEY,MAAMT,EAAE8N,YAAY7G,IAAIpH,EAAE4O,MAAM,OAAOzO,EAAE,6BAA6BT,EAAEM,EAAEO,GAAG,MAAMJ,EAAE,qBAAmBV,EAAE,IAAIsB,EAAEZ,EAAET,EAAEM,GAAG,OAAOP,EAAEiP,WAAWnO,EAAEd,EAAE,eAAe,OAAOsD,KAAKoL,UAAUpL,KAAKiL,eAAe,mBAAmB,OAAOjL,KAAKmL,cAAc,kBAAkB,QAAQnL,KAAKoL,UAAU1N,OAAO,cAAc,OAAOsC,KAAKiL,cAAc,EAAEjL,KAAKoL,UAAU1N,OAAO,4BAA4B,OAAOsC,KAAKyL,uBAAuB,WAAW,OAAM,EAAG,WAAW,OAAM,EAAG,qBAAqB,OAAOzL,KAAKoL,UAAU1N,OAAO,YAAY,OAAOsC,KAAKsK,OAAO,2BAA2B,OAAOtK,KAAK2L,WAAW,mBAAmB,IAAIhP,EAAE,GAAG,IAAI,MAAMM,KAAK+C,KAAK8L,SAASC,WAAWpP,GAAGqD,KAAK8L,SAASC,WAAW9O,GAAG,OAAON,EAAE,WAAW,OAAOqD,KAAKiL,cAAc,SAAStO,GAAGqD,KAAKiL,cAActO,EAAE,cAAc,OAAOqD,KAAK8L,SAASE,SAAS,eAAe,OAAOhM,KAAK8L,SAAST,UAAU,aAAa1O,GAAGqD,KAAK8L,SAAST,UAAU1O,EAAE,aAAa,OAAOqD,KAAK8L,SAASG,QAAQ,WAAWtP,GAAGqD,KAAK8L,SAASG,QAAQtP,EAAE,OAAO,MAAMA,EAAE,IAAIqB,EAAEgC,KAAK4J,SAAS5J,KAAKoL,UAAUpL,KAAKmH,cAAc,OAAOnH,KAAKkM,SAASvP,GAAGA,EAAE,OAAO,IAAIqD,KAAKuK,WAAW,QAAQvK,KAAKiL,cAAcjL,KAAKoL,UAAU1N,OAAO,OAAOsC,KAAKiL,cAAcjL,KAAKoL,UAAU1N,SAASsC,KAAKmM,kBAAkB,OAAOnM,KAAKiL,cAAcjL,KAAKoL,UAAU1N,OAAO,oBAAoB,OAAO,QAAEsC,KAAK8L,SAAS9L,KAAKmH,aAAanH,KAAKqH,KAAKrH,KAAKoH,MAAM,uBAAuB,OAAOpH,KAAK8L,SAAS,0BAA0B,MAAMnP,EAAEqD,KAAKoM,eAAe,OAAOzP,EAAE,CAAC0P,EAAE1P,EAAE8M,OAAO,GAAGtL,EAAExB,EAAE8M,OAAO,IAAI,KAAK,qBAAqB,MAAM9M,EAAEqD,KAAKoM,eAAe,OAAO,QAAEzP,EAAEqD,KAAKmH,aAAanH,KAAKqH,KAAKrH,KAAKoH,MAAM,qBAAqB,MAAMzK,EAAEqD,KAAKsM,eAAe,OAAO3P,EAAE,CAAC0P,EAAE1P,EAAE8M,OAAO,GAAGtL,EAAExB,EAAE8M,OAAO,IAAI,KAAK,mBAAmB,OAAO,QAAEzJ,KAAK8L,SAASS,SAAS,GAAG,0BAA0B,MAAM5P,EAAEqD,KAAKoM,eAAe,GAAG,sBAAsBpM,KAAKmH,eAAexK,EAAE,OAAOA,EAAE,MAAMM,EAAEN,EAAE6P,QAAQ,OAAO,UAAU/C,OAAO9M,EAAE8P,QAAQxP,IAAI,IAAIO,EAAE,EAAE,IAAI,MAAMJ,KAAKH,EAAE,CAAC,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEH,IAAIN,EAAE,GAAGa,EAAEP,KAAKN,EAAE,GAAGa,EAAEP,GAAG,GAAGN,EAAE,GAAGa,EAAEP,GAAG,IAAIN,EAAE,GAAGa,EAAEP,GAAG,GAAGO,GAAGJ,GAApI,CAAwIH,GAAGA,EAAE,uBAAuB,MAAMN,EAAEqD,KAAK8L,SAASS,SAAS,IAAI5P,EAAE,OAAO,KAAK,MAAMM,EAAEN,EAAE6P,QAAQ,OAAO,QAAEvP,EAAEA,EAAE+C,KAAKqH,KAAKrH,KAAKoH,KAAKpH,KAAK2L,YAAY1O,EAAE,cAAc,MAAMN,EAAEqD,KAAK8L,SAASS,SAAS9C,OAAO,GAAGzJ,KAAK6J,IAAI5M,EAAE+C,KAAK+K,2BAA2B,OAAOpO,EAAEM,EAAEyP,MAAM,GAAGzP,EAAE0P,UAAU,GAAG,cAAc,MAAMhQ,EAAEqD,KAAK8L,SAASS,SAAS9C,OAAO,GAAGzJ,KAAK8J,IAAI7M,EAAE+C,KAAK+K,2BAA2B,OAAO9N,EAAE0P,UAAU,GAAGhQ,EAAEM,EAAEyP,MAAM,GAAG,eAAe,IAAI1M,KAAK8L,SAASc,YAAY,OAAO,KAAK,MAAMjQ,EAAEqD,KAAK8L,SAASS,SAASC,QAAQ,GAAG7P,EAAEkQ,QAAQ,OAAOlQ,EAAE8M,OAAO,IAAIzJ,KAAK6J,IAAIlN,EAAE8M,OAAO,IAAIzJ,KAAK8J,IAAInN,EAAE,IAAIM,EAAE,EAAE,IAAI,MAAMO,KAAKb,EAAE8P,QAAQ9P,EAAE8M,OAAO,EAAExM,IAAI+C,KAAK6J,IAAIlN,EAAE8M,OAAO,EAAExM,EAAE,IAAI+C,KAAK8J,IAAI7M,GAAGO,EAAE,OAAOb,EAAE,eAAe,IAAIqD,KAAK8L,SAASc,YAAY,OAAO,KAAK,IAAI5M,KAAK8L,SAASgB,SAAS,CAAC,MAAMnQ,EAAEqD,KAAK+M,mBAAmB,IAAIpQ,EAAE,OAAO,KAAKA,EAAE8M,OAAO,IAAIzJ,KAAK6J,IAAIlN,EAAE8M,OAAO,IAAIzJ,KAAK8J,IAAI9J,KAAK8L,SAASgB,SAASnQ,EAAE,MAAMA,EAAEqD,KAAK8L,SAASgB,SAASN,QAAQ,OAAO7P,EAAE8M,OAAO,IAAIzJ,KAAK6J,IAAIlN,EAAE8M,OAAO,IAAIzJ,KAAK8J,IAAInN,EAAE,eAAeA,EAAEM,GAAG,MAAMO,EAAEwC,KAAK8L,SAASC,WAAWpP,GAAG,QAAG,IAASa,EAAE,OAAOP,GAAG+C,KAAKkL,YAAYnG,IAAIpI,GAAG,IAAIqQ,KAAKxP,GAAGA,EAAE,MAAMJ,EAAE4C,KAAKiN,iBAAiBvQ,EAAEC,EAAEuQ,oBAAoBC,OAAO,IAAI,MAAMxQ,KAAKS,EAAE,GAAGT,EAAEuQ,oBAAoBC,SAASzQ,EAAE,CAAC,MAAMO,EAAE+C,KAAK8L,SAASC,WAAWpP,GAAG,OAAOqD,KAAKkL,YAAYnG,IAAIpI,GAAG,IAAIqQ,KAAK/P,GAAGA,GAAG,SAASN,GAAGqO,MAAMkB,SAASvP,GAAGA,EAAEsO,cAAcjL,KAAKiL,cAActO,EAAEgP,WAAW3L,KAAK2L,WAAWhP,EAAEuO,YAAYlL,KAAKkL,YAAY,kBAAkB,OAAOlL,KAAK8L,SAASC,WAAW,gBAAgB,IAAI/L,KAAKuK,WAAW,OAAM,EAAG,IAAI5N,EAAE,EAAEM,EAAE,EAAE,OAAO+C,KAAKmH,cAAc,IAAI,oBAAoB,CAAC,MAAM3J,EAAEwC,KAAK8L,SAASS,SAAS,IAAI/O,EAAE,OAAM,GAAIb,EAAEM,GAAGO,EAAEiM,OAAO,MAAM,IAAI,sBAAsB,CAAC,MAAMjM,EAAEwC,KAAKsM,eAAe,IAAI9O,EAAE,OAAM,GAAIb,EAAEM,GAAGO,EAAEiM,OAAO9M,GAAGqD,KAAK6J,IAAI5M,GAAG+C,KAAK8J,IAAI,MAAM,QAAQ,OAAM,EAAG,OAAOnN,GAAGqD,KAAK+J,OAAOpN,GAAGqD,KAAKgK,OAAO/M,GAAG+C,KAAKiK,OAAOhN,GAAG+C,KAAKkK,S,yGCA3oI,MAAMhN,EAAE,YAAYD,EAAEN,GAAGqD,KAAKoN,IAAI,IAAI,IAAE,EAAE,EAAE,EAAE,GAAGpN,KAAKqN,QAAO,UAAIrN,KAAKsN,UAAU,IAAI/K,IAAIvC,KAAKoN,IAAIjM,IAAIxE,GAAG,MAAMS,EAAEH,EAAEsQ,aAAavN,KAAKoN,KAAKpN,KAAKwN,aAAavQ,EAAE+C,KAAKwN,aAAaC,cAAczN,KAAKqN,OAAOrN,KAAKoN,KAAI,GAAIpN,KAAK0N,WAAWtQ,EAAEsQ,WAAW1N,KAAK0M,MAAMtP,EAAEsP,MAAM1M,KAAK2N,MAAMvQ,EAAEuQ,MAAM3N,KAAK4N,YAAW,EAAG,SAAS,OAAO5N,KAAKoN,IAAIS,GAAG,aAAa,OAAO,eAAa7N,KAAKqN,OAAOrN,KAAKwN,aAAaM,SAAStJ,kBAAkB,gBAAgB,MAAM,CAACuJ,eAAe,YAAYrB,MAAM,CAAC1M,KAAK0N,WAAW1N,KAAK0N,YAAYf,UAAU,CAAC3M,KAAKqN,OAAO,GAAGrN,KAAKqN,OAAO,KAAK,WAAW,MAAMpQ,EAAE+C,KAAKqN,OAAO,MAAM,CAACW,KAAK/Q,EAAE,GAAGgR,KAAKhR,EAAE,GAAGiR,KAAKjR,EAAE,GAAGkR,KAAKlR,EAAE,IAAI,QAAQ,OAAO,IAAIC,EAAE8C,KAAKwN,aAAaxN,KAAKoN,KAAK,mBAAmB,MAAMzQ,EAAEqD,KAAKoN,IAAIgB,eAAe1R,EAAE,cAAY,IAAI,IAAIO,EAAE,EAAEA,EAAEN,EAAEe,OAAOT,IAAIP,EAAEO,GAAG,IAAIC,EAAE8C,KAAKwN,aAAa7Q,EAAEM,IAAI,OAAOP,EAAE,4BAA4B,OAAO,aAAW,CAAC2R,KAAK,OAAON,eAAe,YAAYO,UAAUtO,KAAK0N,WAAWa,OAAO,CAACC,KAAKxO,KAAKqN,OAAO,GAAGoB,KAAKzO,KAAKqN,OAAO,GAAGqB,KAAK1O,KAAKqN,OAAO,GAAGsB,KAAK3O,KAAKqN,OAAO,GAAG7I,iBAAiBxE,KAAKwN,aAAaM,SAAStJ,uB,mHCA1uC,MAAM/F,EAAE,CAACmQ,MAAM,GAAGC,QAAQ,IAAIrR,EAAE,IAAI+E,IAAIhE,EAAE,IAAI,IAAE,EAAE,EAAE,EAAE,GAAG,gBAA6B,IAAE,YAAY5B,GAAGqO,QAAQhL,KAAK8O,OAAO,IAAI/M,IAAI/B,KAAK+O,QAAO,OAAE,GAAE,OAAE,oBAAoB9R,IAAG,CAAE+Q,KAAK/Q,EAAEoQ,OAAO,GAAGY,KAAKhR,EAAEoQ,OAAO,GAAGa,KAAKjR,EAAEoQ,OAAO,GAAGc,KAAKlR,EAAEoQ,OAAO,KAAK,CAAC,aAAa,aAAa,aAAa,eAAerN,KAAKgP,MAAM,GAAGhP,KAAKiP,WAAWtS,EAAE,UAAUqD,KAAKsD,QAAQ,QAAQtD,KAAKgP,MAAMtR,OAAO,EAAEsC,KAAK8O,OAAOxL,QAAQtD,KAAK+O,OAAOzL,QAAQ,IAAIrG,GAAG,OAAO+C,KAAK8O,OAAO/J,IAAI9H,GAAG,IAAIA,GAAG,OAAO+C,KAAK8O,OAAOI,IAAIjS,GAAG,UAAUA,GAAG,OAAO+C,KAAK8O,OAAOI,IAAIjS,EAAE4Q,IAAI,cAAc5Q,EAAEN,GAAG,MAAMS,EAAE,iBAAiBH,EAAE+C,KAAKkP,IAAIjS,GAAGA,EAAE,IAAIG,EAAE,MAAM,GAAG,MAAMV,EAAEC,EAAES,EAAEsQ,WAAWpQ,EAAEF,EAAEiQ,OAAO,GAAG3Q,EAAEW,EAAED,EAAEiQ,OAAO,GAAG3Q,EAAE+B,EAAErB,EAAEiQ,OAAO,GAAG3Q,EAAEc,EAAEJ,EAAEiQ,OAAO,GAAG3Q,EAAE6B,EAAE,GAAG,IAAI,MAAMtB,KAAK+C,KAAK+O,OAAOI,OAAO,CAACnB,KAAK1Q,EAAE2Q,KAAK5Q,EAAE6Q,KAAKzP,EAAE0P,KAAK3Q,IAAI,CAAC,MAAMb,EAAEM,EAAEoQ,OAAOjM,QAAQzE,EAAE,GAAGmE,KAAKE,IAAIrE,EAAE,GAAGW,GAAGX,EAAE,GAAGmE,KAAKE,IAAIrE,EAAE,GAAGU,GAAGV,EAAE,GAAGmE,KAAKC,IAAIpE,EAAE,GAAG8B,GAAG9B,EAAE,GAAGmE,KAAKC,IAAIpE,EAAE,GAAGa,GAAGb,EAAE,GAAGA,EAAE,GAAG,GAAGA,EAAE,GAAGA,EAAE,GAAG,GAAG4B,EAAEwJ,KAAK,CAACsF,OAAO1Q,EAAEyS,KAAKnS,IAAI,OAAOsB,EAAE,oBAAoBtB,GAAG,OAAO+C,KAAK+O,OAAOI,OAAO,CAACnB,KAAK/Q,EAAE,GAAGgR,KAAKhR,EAAE,GAAGiR,KAAKjR,EAAE,GAAGkR,KAAKlR,EAAE,KAAK,YAAYA,GAAG,MAAMN,EAAE,CAACiS,MAAM,GAAGC,QAAQ,IAAI,IAAI,MAAMzR,KAAKH,EAAE2R,MAAM,IAAI5O,KAAK+E,IAAI3H,GAAG,CAAC,MAAMH,EAAE,IAAI,KAAE+C,KAAKiP,WAAW7R,GAAG4C,KAAK8O,OAAO3N,IAAI/D,EAAEH,GAAG+C,KAAK+O,OAAOM,OAAOpS,GAAGN,EAAEiS,MAAM7G,KAAK9K,GAAG,IAAI,MAAMG,KAAKH,EAAE4R,QAAQ,GAAG7O,KAAK+E,IAAI3H,GAAG,CAAC,MAAMH,EAAE+C,KAAKkP,IAAI9R,GAAG4C,KAAK8O,OAAOQ,OAAOlS,GAAG4C,KAAK+O,OAAOQ,OAAOtS,GAAGN,EAAEkS,QAAQ9G,KAAK9K,GAAG+C,KAAKgP,MAAMtR,OAAO,EAAEsC,KAAK8O,OAAO7J,SAAShI,GAAG+C,KAAKgP,MAAMjH,KAAK9K,MAAMN,EAAEiS,MAAMlR,QAAQf,EAAEkS,QAAQnR,SAASsC,KAAKwP,KAAK,SAAS7S,GAAG,aAAaM,GAAG,MAAMN,EAAEqD,KAAKiP,WAAWQ,gBAAgBxS,EAAE,GAAG,IAAIN,EAAE,OAAO,MAAM+S,MAAMtS,EAAEuS,QAAQrS,GAAGX,GAAGgR,MAAMzQ,GAAGI,EAAE,GAAGF,EAAEM,OAAO,EAAE,IAAI,MAAMkS,IAAI3S,EAAE4S,QAAQlT,EAAEmT,MAAMpT,KAAKU,EAAE,IAAI,IAAIA,EAAET,EAAES,GAAGV,EAAEU,IAAI,CAAC,MAAMT,EAAE4B,EAAE4C,IAAIjE,EAAED,EAAEK,EAAEyS,aAAa3S,GAAGE,EAAE0S,kBAAkB5S,IAAIyQ,GAAG,GAAGrQ,EAAE6G,IAAI1H,IAAIqD,KAAK+E,IAAIpI,GAAG,CAAC,MAAMM,EAAE,IAAI,KAAE+C,KAAKiP,WAAWtS,GAAGqD,KAAK8O,OAAO3N,IAAIxE,EAAEM,GAAG+C,KAAK+O,OAAOM,OAAOpS,GAAG+C,KAAKgP,MAAMjH,KAAK9K,GAAGwB,EAAEmQ,MAAM7G,KAAK9K,IAAI,IAAI,IAAIA,EAAE+C,KAAKgP,MAAMtR,OAAO,EAAET,GAAG,EAAEA,IAAI,CAAC,MAAMN,EAAEqD,KAAKgP,MAAM/R,GAAGO,EAAEuH,IAAIpI,EAAEkR,MAAM7N,KAAK8O,OAAOQ,OAAO3S,EAAEkR,IAAI7N,KAAKgP,MAAMiB,OAAOhT,EAAE,GAAG+C,KAAK+O,OAAOQ,OAAO5S,GAAG8B,EAAEoQ,QAAQ9G,KAAKpL,KAAK8B,EAAEmQ,MAAMlR,QAAQe,EAAEoQ,QAAQnR,SAASsC,KAAKwP,KAAK,SAAS/Q,GAAG,iBAAe9B,GAAGa,EAAE8F,QAAQ7E,EAAEmQ,MAAMlR,OAAO,EAAEe,EAAEoQ,QAAQnR,OAAO","file":"chunks/3628.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as e}from\"../maybe.js\";import{getProperties as n}from\"./utils.js\";import o from\"../Accessor.js\";import r from\"../Collection.js\";const f=[\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"];function i(t){return t instanceof o}function c(t){return t instanceof r?Object.keys(t.items):i(t)?n(t).keys():t?Object.keys(t):[]}function u(t,e){return t instanceof r?t.items[e]:t[e]}function l(t){return t?t.declaredClass:null}function s(t,n){const o=t.diff;if(o&&\"function\"==typeof o)return o(t,n);const r=c(t),p=c(n);if(0===r.length&&0===p.length)return;if(!r.length||!p.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,n))return{type:\"complete\",oldValue:t,newValue:n};const a=p.filter((t=>-1===r.indexOf(t))),y=r.filter((t=>-1===p.indexOf(t))),m=r.filter((e=>p.indexOf(e)>-1&&u(t,e)!==u(n,e))).concat(a,y).sort(),d=l(t);if(d&&f.indexOf(d)>-1&&m.length)return{type:\"complete\",oldValue:t,newValue:n};let b;const h=i(t)&&i(n);for(const r of m){const f=u(t,r),i=u(n,r);let c;(h||\"function\"!=typeof f&&\"function\"!=typeof i)&&(f!==i&&(null==f&&null==i||(c=o&&o[r]&&\"function\"==typeof o[r]?o[r](f,i):\"object\"==typeof f&&\"object\"==typeof i&&l(f)===l(i)?s(f,i):{type:\"complete\",oldValue:f,newValue:i},e(c)&&(e(b)?b.diff[r]=c:b={type:\"partial\",diff:{[r]:c}}))))}return b}function p(e,n){if(t(e))return!1;const o=n.split(\".\");let r=e;for(const t of o){if(\"complete\"===r.type)return!0;if(\"partial\"!==r.type)return!1;{const e=r.diff[t];if(!e)return!1;r=e}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(t||e))return!t||!e||\"object\"==typeof t&&\"object\"==typeof e&&l(t)!==l(e)?{type:\"complete\",oldValue:t,newValue:e}:s(t,e)}function m(e){if(t(e))return!0;switch(e.type){case\"complete\":return!1;case\"collection\":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case\"partial\":for(const t in e.diff){if(!m(e.diff[t]))return!1}return!0}}export{y as diff,p as hasDiff,a as hasDiffAny,m as isEmpty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/has.js\";import{isNone as e,isSome as i,mapMany as s,forEachSome as r,andThen as a,unwrap as o}from\"../../../../../core/maybe.js\";import n from\"../../../../../core/Logger.js\";import l from\"../../../../../core/Error.js\";import{createAbortController as h,all as c,createResolver as u,isAbortError as d,resolve as p}from\"../../../../../core/promiseUtils.js\";import{clamp as _}from\"../../../../../core/mathUtils.js\";import{diff as g}from\"../../../../../core/accessorSupport/diffUtils.js\";import f from\"../../../../../layers/support/FieldsIndex.js\";import{MAX_FILTERS as y,HIGHLIGHT_FLAG as m,ATTRIBUTE_DATA_VV as x,NAN_MAGIC_NUMBER as b,ATTRIBUTE_DATA_ANIMATION as z}from\"../../../engine/webgl/definitions.js\";import{getPixelArrayCtor as T}from\"../../../engine/webgl/Utils.js\";import{createDebugLogger as S,DEBUG_ATTR_UPDATES as w}from\"../../../engine/webgl/util/debug.js\";import{getVisualVariableSizeValueRepresentationRatio as A}from\"../tileRenderers/support/visualVariablesUtils.js\";const k=n.getLogger(\"esri.views.layers.2d.features.support.AttributeStore\"),D=S(w,k),E=0,F=1,U=t=>(2147483648&t)>>>31,R=t=>2147483647&t;function C(t){return 1===U(t)}const M={sharedArrayBuffer:t(\"esri-shared-array-buffer\"),atomics:t(\"esri-atomics\")};function B(t,e){return i=>e(t(i))}class v{constructor(t,e,i,s){this.size=0,this.texelSize=4;const{pixelType:r,layout:a,textureOnly:o}=s;this.textureOnly=o||!1,this.pixelType=r,this._ctype=e,this.layout=a,this._resetRange(),this._shared=t,this.size=i,o||(this.data=this._initData(r,i,t,e))}get buffer(){return a(this.data,(t=>t.buffer))}unsetComponentAllTexels(t,e){const i=o(this.data);for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=o(this.data);for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=o(this.data);for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){o(this.data)[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){o(this.data)[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=R(t);return o(this.data)[i*this.texelSize+e]}setData(t,e,i){const s=R(t),r=1<<e;0!=(this.layout&r)?(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):k.error(\"mapview-attributes-store\",\"Tried to set a value for a texel's readonly component\")}lock(){5121===this.pixelType&&this._shared&&M.atomics&&\"local\"!==this._ctype&&Atomics.store(this.data,0,1)}unlock(){5121===this.pixelType&&this._shared&&M.atomics&&\"local\"!==this._ctype&&Atomics.store(this.data,0,0)}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t,this._shared,this._ctype),i=o(this.data);e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!(this._shared||\"local\"===this._ctype),r=this.pixelType,a=this.layout,n=o(this.data);if(!n.slice){if(!s)return{start:t,end:e,data:null,pixelType:r,layout:a};return{start:t,end:e,data:new(T(this.pixelType))(Array.prototype.slice.call(this.data,t*i,(e+1)*i)),pixelType:r,layout:a}}return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e,i,s){const r=i&&\"local\"!==s?SharedArrayBuffer:ArrayBuffer,a=T(t),o=new a(new r(e*e*4*a.BYTES_PER_ELEMENT));for(let t=0;t<o.length;t+=4)o[t+1]=255;return o}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}export default class{constructor(t,e){this._client=t,this.config=e,this._attributeComputeMap=new Map,this._blocks=new Array,this._filters=new Array(y),this._targetType=0,this._abortController=h(),this._hasScaleExpr=!1,this._size=32,this._idsToHighlight=new Set;const i=e.supportsTextureFloat?5126:5121;D(`Creating AttributeStore ${M.sharedArrayBuffer?\"with\":\"without\"} shared memory`),this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:i,layout:15},{pixelType:i,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}destroy(){this._abortController.abort()}get hasScaleExpr(){return this._hasScaleExpr}get _signal(){return this._abortController.signal}update(i,s){this.config=s;const r=s.schema.processors[0].storage,a=g(this._schema,r);if((i.targets.feature||i.targets.aggregate)&&(i.storage.data=!0),a&&(t(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - AttributeStore:\",a),i.storage.data=!0,this._schema=r,this._attributeComputeMap.clear(),!e(r))){switch(r.target){case\"feature\":this._targetType=0;break;case\"aggregate\":this._targetType=1}for(const t of r.mapping)this._bindAttribute(t)}}onTileData(t,i){if(e(i.addOrUpdate))return;const s=i.addOrUpdate.getCursor();for(;s.next();){const t=s.getDisplayId();this.setAttributeData(t,s)}}invalidateResources(){this._createResourcesPromise=null,this._abortController.abort(),this._abortController=h()}async setHighlight(t,e){const i=this._getBlock(0),s=e.map((t=>R(t)));i.lock(),i.unsetComponentAllTexels(0,1),i.setComponent(0,1,s),i.unlock(),this._idsToHighlight.clear();for(const e of t)this._idsToHighlight.add(e);await this.sendUpdates()}async updateFilters(e,i){const{config:s,service:r,spatialReference:a}=i,{filters:o}=s,n=o.map(((t,e)=>this._updateFilter(t,e,r,a)));(await c(n)).some((t=>t))&&(e.storage.filters=!0,t(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - AttributeStore:\",\"Filters changed\"))}setData(t,e,i,s){const r=R(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlag(t){return this._idsToHighlight.has(t)?m:0}unsetAttributeData(t){const e=R(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e){const i=R(t);if(this._ensureSizeForTexel(i),this._getBlock(0).setData(i,0,this.getFilterFlags(e)),this._targetType!==U(t))return;const s=this._attributeComputeMap,r=this.config.supportsTextureFloat?1:2;s.size&&s.forEach(((t,s)=>{const a=s*r%4,o=Math.floor(s*r/4),n=this._getBlock(o+x),l=t(e);if(this.config.supportsTextureFloat)n.setData(i,a,l);else if(l===b)n.setData(i,a,255),n.setData(i,a+1,255);else{const t=_(Math.round(l),-32767,32766)+32768,e=255&t,s=(65280&t)>>8;n.setData(i,a,e),n.setData(i,a+1,s)}}))}sendUpdates(){if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=u(),this._nextUpdate.promise;const t={blocks:this._blocks.map((t=>i(t)?t.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const e=()=>{if(this._currUpdate=null,this._nextUpdate){const t=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>t.resolve()))}},i=this._client.update(t,this._signal).then(e).catch(e);return this._client.render(this._signal),i})).catch((t=>d(t)?(this._createResourcesPromise=null,this._createResources()):(k.error(new l(\"mapview-attribute-store\",\"Encountered an error during client update\",t)),p()))),this._currUpdate}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}_bindAttribute(t){let e;if(null!=t.fieldIndex)t.normalizationField&&k.warn(\"mapview-arcade\",\"Ignoring normalizationField specified with an arcade expression which is not supported.\"),e=e=>e.getComputedNumericAtIndex(t.fieldIndex);else{if(!t.field)return;e=t.normalizationField?e=>{const i=e.readAttribute(t.normalizationField);return i?e.readAttribute(t.field)/i:null}:e=>e.readAttribute(t.field)}if(t.valueRepresentation){e=B(e,(e=>A(e,t.valueRepresentation)))}this._attributeComputeMap.set(t.binding,B(e,(t=>null===t||isNaN(t)||t===1/0?b:t)))}_createResources(){if(i(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(z),D(\"Initializing AttributeStore\");const t={shared:M.sharedArrayBuffer&&!(\"local\"===this._client.type),size:this._size,blocks:s(this._blocks,(t=>({textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType})))},r=this._client.initialize(t,this._signal).catch((t=>{d(t)?this._createResourcesPromise=null:k.error(new l(\"mapview-attribute-store\",\"Encountered an error during client initialization\",t))}));return this._createResourcesPromise=r,r.then((()=>e(this._createResourcesPromise)?this._createResources():void 0)),r}_getBlock(t){const e=this._blocks[t];if(i(e))return e;D(`Initializing AttributeBlock at index ${t}`);const s=M.sharedArrayBuffer,r=this._client.type,a=new v(s,r,this._size,this._blockDescriptors[t]);return this._blocks[t]=a,this._createResourcesPromise=null,a}_expand(){if(this._size<this.config.maxTextureSize){const t=this._size<<=1;return D(\"Expanding block size to\",t,this._blocks),r(this._blocks,(e=>e.expand(t))),this._createResourcesPromise=null,this._size=t,0}return k.error(new l(\"mapview-limitations\",\"Maximum number of onscreen features exceeded.\")),-1}async _updateFilter(t,s,r,a){const o=this._filters[s],n=i(o)&&o.hash;if(!o&&!t)return!1;if(n===JSON.stringify(t))return!1;if(e(t)){const t=1<<s+1,e=this._getBlock(0);return this._filters[s]=null,e.setComponentAllTexels(0,t),this.sendUpdates(),!0}const l=await this._getFilter(s,r);return await l.update(t,a),!0}async _getFilter(t,e){const s=this._filters[t];if(i(s))return s;const{default:r}=await import(\"../../../../../layers/graphics/data/FeatureFilter.js\"),a=new r({geometryType:e.geometryType,hasM:!1,hasZ:!1,timeInfo:e.timeInfo,fieldsIndex:new f(e.fields)});return this._filters[t]=a,a}isVisible(t){return!!(2&this._getBlock(0).getData(t,0))}getFilterFlags(t){let i=0;const s=(r=t.getDisplayId(),1===U(r)?254:255);var r;for(let r=0;r<this._filters.length;r++){const a=!!(s&1<<r),o=this._filters[r];i|=(!a||e(o)||o.check(t)?1:0)<<r}let a=0;if(this._idsToHighlight.size){const e=t.getObjectId();a=this.getHighlightFlag(e)}return i<<1|a}}export{F as DISPLAY_ID_TYPE_AGGREGATE,E as DISPLAY_ID_TYPE_FEATURE,C as isAggregateId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e=0,t=1;function r(e){return(2147483648&e)>>>31}function s(e){return 2147483647&e}class n{constructor(){this._freeIds=[],this._idCounter=1}createId(e=!1){return function(e,t){return((t?2147483648:0)|e)>>>0}(this._getFreeId(),e)}releaseId(e){this._freeIds.push(e)}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}export{t as DISPLAY_ID_TYPE_AGGREGATE,e as DISPLAY_ID_TYPE_FEATURE,n as DisplayIdGenerator,s as getDisplayIdIndex,r as getDisplayIdType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this._mask=0,this._buf=t,this._mask=e}static fromBuffer(e,s){return new t(e,s)}static create(e,s=4294967295){const h=new Uint32Array(Math.ceil(e/32));return new t(h,s)}_getIndex(t){return Math.floor(t/32)}has(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}set(t){const e=this._mask&t,s=this._getIndex(e),h=1<<e%32;this._buf[s]|=h}unset(t){const e=this._mask&t,s=this._getIndex(e),h=1<<e%32;this._buf[s]&=4294967295^h}resize(t){const e=this._buf,s=new Uint32Array(Math.ceil(t/32));s.set(e),this._buf=s}or(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}and(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}xor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}ior(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}iand(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}ixor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}any(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}copy(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}clone(){return new t(this._buf.slice(),this._mask)}clear(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0}forEachSet(t){for(let e=0;e<this._buf.length;e++){let s=this._buf[e],h=32*e;if(s)for(;s;){1&s&&t(h),s>>>=1,h++}}}countSet(){let t=0;return this.forEachSet((e=>{t++})),t}}export{t as StaticBitSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{DisplayIdGenerator as t}from\"./displayIdUtils.js\";import{StaticBitSet as e}from\"./StaticBitSet.js\";function s(t,e,s){if(!(t.length>e))for(;t.length<=e;)t.push(s)}class i{constructor(){this._numerics=[],this._strings=[],this._idGenerator=new t,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}createBitset(){const t=this._bitsets.length;return this._bitsets.push(e.create(this._allocatedSize,2147483647)),t+1}getBitset(t){return this._bitsets[t-1]}_expand(){this._allocatedSize<<=1;for(const t of this._bitsets)t.resize(this._allocatedSize)}_ensureNumeric(t,e){this._numerics[t]||(this._numerics[t]=[]);s(this._numerics[t],e,0)}_ensureInstanceId(t){s(this._instanceIds,t,0)}_ensureString(t,e){this._strings[t]||(this._strings[t]=[]);s(this._strings[t],e,null)}createDisplayId(t=!1){const e=this._idGenerator.createId();return e>this._allocatedSize&&this._expand(),((t,e)=>((e?2147483648:0)|t)>>>0)(e,t)}releaseDisplayId(t){for(const e of this._bitsets)e.unset(t);return this._idGenerator.releaseId(2147483647&t)}getComputedNumeric(t,e){return this.getComputedNumericAtIndex(2147483647&t,0)}setComputedNumeric(t,e,s){return this.setComputedNumericAtIndex(2147483647&t,s,0)}getComputedString(t,e){return this.getComputedStringAtIndex(2147483647&t,0)}setComputedString(t,e,s){return this.setComputedStringAtIndex(2147483647&t,0,s)}getComputedNumericAtIndex(t,e){const s=2147483647&t;return this._ensureNumeric(e,s),this._numerics[e][s]}setComputedNumericAtIndex(t,e,s){const i=2147483647&t;this._ensureNumeric(e,i),this._numerics[e][i]=s}getInstanceId(t){const e=2147483647&t;return this._ensureInstanceId(e),this._instanceIds[e]}setInstanceId(t,e){const s=2147483647&t;this._ensureInstanceId(s),this._instanceIds[s]=e}getComputedStringAtIndex(t,e){const s=2147483647&t;return this._ensureString(e,s),this._strings[e][s]}setComputedStringAtIndex(t,e,s){const i=2147483647&t;this._ensureString(e,i),this._strings[e][i]=s}getXMin(t){return this._bounds[4*(2147483647&t)]}getYMin(t){return this._bounds[4*(2147483647&t)+1]}getXMax(t){return this._bounds[4*(2147483647&t)+2]}getYMax(t){return this._bounds[4*(2147483647&t)+3]}setBounds(t,e){const i=e.readHydratedGeometry();if(!i||!i.coords.length)return!1;let n=1/0,r=1/0,u=-1/0,h=-1/0;i.forEachVertex(((t,e)=>{n=Math.min(n,t),r=Math.min(r,e),u=Math.max(u,t),h=Math.max(h,e)}));const d=2147483647&t;return s(this._bounds,4*d+4,0),this._bounds[4*d]=n,this._bounds[4*d+1]=r,this._bounds[4*d+2]=u,this._bounds[4*d+3]=h,!0}}export{i as ComputedAttributeStorage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{fromJSON as t}from\"../../../../../geometry/support/jsonUtils.js\";import\"../../../../../geometry.js\";import e from\"../../../../../layers/graphics/OptimizedGeometry.js\";import{convertToGeometry as r}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{getCentroidOptimizedGeometry as i}from\"../../../../../layers/graphics/centroid.js\";let s=0;class n{constructor(t){this.type=\"FeatureSetReader\",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._xmin=-1,this._xmax=0,this._ymin=0,this._ymax=0,this._joined=[],this.instance=t}static createInstance(){return s++,s=s>65535?0:s,s}get _hasFilter(){return-1!==this._xmin}getQuantizationTransform(){throw new Error(\"Unable to find transform for featureSet\")}getStorage(){return this._storage}getComputedNumeric(t){return this.getComputedNumericAtIndex(0)}setComputedNumeric(t,e){return this.setComputedNumericAtIndex(e,0)}getComputedString(t){return this.getComputedStringAtIndex(0)}setComputedString(t,e){return this.setComputedStringAtIndex(0,e)}getComputedNumericAtIndex(t){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),t)}setComputedNumericAtIndex(t,e){this._storage.setComputedNumericAtIndex(this.getDisplayId(),t,e)}getComputedStringAtIndex(t){return this._storage.getComputedStringAtIndex(this.getDisplayId(),t)}setComputedStringAtIndex(t,e){return this._storage.setComputedStringAtIndex(this.getDisplayId(),t,e)}transform(t,e){const r=this.copy();return r._tx=t,r._ty=e,r}extent(t,e,r,i){const s=this.copy();return s._xmin=t,s._xmax=r,s._ymin=e,s._ymax=i,s}hasFilter(){return this._hasFilter}readAttribute(t,e=!1){const r=this._readAttribute(t,e);if(void 0!==r)return r;for(const r of this._joined){r.setIndex(this.getIndex());const i=r._readAttribute(t,e);if(void 0!==i)return i}}readAttributes(){return this._readAttributes()}joinAttributes(t){this._joined.push(t)}readArcadeFeature(){return this}geometry(){const e=this.readHydratedGeometry(),i=r(e,this.geometryType,this.hasZ,this.hasM),s=t(i);return s.spatialReference=this._arcadeSpatialReference,s}field(t){return this.readAttribute(t,!0)}hasField(t){return!0}setField(t,e){}keys(){return[]}castToText(){return\"\"}_computeCentroid(){if(\"esriGeometryPolygon\"!==this.geometryType)return null;const t=this.readUnquantizedGeometry();if(!t||t.hasIndeterminateRingOrder)return null;const r=this.getQuantizationTransform();return i(new e,t,this.hasM,this.hasZ,r)}copyInto(t){t.seen=this.seen,t._storage=this._storage,t._arcadeSpatialReference=this._arcadeSpatialReference,t._joined=this._joined,t._tx=this._tx,t._ty=this._ty,t._xmin=this._xmin,t._xmax=this._xmax,t._ymin=this._ymin,t._ymax=this._ymax}}export{n as FeatureSetReader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{convertFromFeatures as t,convertFromFeatureSet as e,convertToFeature as r,convertToGeometry as s,getQuantizedArea as i,unquantizeOptimizedGeometry as n}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{FeatureSetReader as o}from\"./FeatureSetReader.js\";class a extends o{constructor(t,e,r){super(t),this._featureIndex=-1,this._dateFields=new Set,this._geometryType=r,this._features=e}static fromFeatures(e,r,s){const i=t([],e,r,!1,!1,s);for(let t=0;t<i.length;t++)i[t].displayId=e[t].displayId;return a.fromOptimizedFeatures(i,r)}static fromFeatureSet(t,r){const s=e(t,r);return a.fromOptimizedFeatureSet(s)}static fromOptimizedFeatureSet(t){const{features:e,geometryType:r}=t,s=a.fromOptimizedFeatures(e,r);s._exceededTransferLimit=t.exceededTransferLimit,s._transform=t.transform;for(const e of t.fields)\"esriFieldTypeDate\"===e.type&&s._dateFields.add(e.name);return s}static fromOptimizedFeatures(t,e,r){const s=o.createInstance(),i=new a(s,t,e);return i._transform=r,i}get _current(){return this._features[this._featureIndex]}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}getApproximateSize(){return this._features.length}getCursor(){return this.copy()}getQuantizationTransform(){return this._transform}getAttributeHash(){let t=\"\";for(const e in this._current.attributes)t+=this._current.attributes[e];return t}getIndex(){return this._featureIndex}setIndex(t){this._featureIndex=t}getObjectId(){return this._current.objectId}getDisplayId(){return this._current.displayId}setDisplayId(t){this._current.displayId=t}getGroupId(){return this._current.groupId}setGroupId(t){this._current.groupId=t}copy(){const t=new a(this.instance,this._features,this.geometryType);return this.copyInto(t),t}next(){if(!this._hasFilter)return++this._featureIndex<this._features.length;for(;++this._featureIndex<this._features.length&&!this._passesFilter(););return this._featureIndex<this._features.length}readLegacyFeature(){return r(this._current,this.geometryType,this.hasZ,this.hasM)}readOptimizedFeature(){return this._current}readLegacyPointGeometry(){const t=this.readGeometry();return t?{x:t.coords[0],y:t.coords[1]}:null}readLegacyGeometry(){const t=this.readGeometry();return s(t,this.geometryType,this.hasZ,this.hasM)}readLegacyCentroid(){const t=this.readCentroid();return t?{x:t.coords[0],y:t.coords[1]}:null}readGeometryArea(){return i(this._current.geometry,2)}readUnquantizedGeometry(){const t=this.readGeometry();if(\"esriGeometryPoint\"===this.geometryType||!t)return t;const e=t.clone();return function({coords:t,lengths:e}){let r=0;for(const s of e){for(let e=1;e<s;e++)t[2*(r+e)]+=t[2*(r+e)-2],t[2*(r+e)+1]+=t[2*(r+e)-1];r+=s}}(e),e}readHydratedGeometry(){const t=this._current.geometry;if(!t)return null;const e=t.clone();return n(e,e,this.hasZ,this.hasM,this._transform),e}getXHydrate(){const t=this._current.geometry.coords[0]+this._tx,e=this.getQuantizationTransform();return t*e.scale[0]+e.translate[0]}getYHydrate(){const t=this._current.geometry.coords[1]+this._ty,e=this.getQuantizationTransform();return e.translate[1]-t*e.scale[1]}readGeometry(){if(!this._current.hasGeometry)return null;const t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t;let e=0;for(const r of t.lengths)t.coords[2*e]+=this._tx,t.coords[2*e+1]+=this._ty,e+=r;return t}readCentroid(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){const t=this._computeCentroid();if(!t)return null;t.coords[0]-=this._tx,t.coords[1]-=this._ty,this._current.centroid=t}const t=this._current.centroid.clone();return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t}_readAttribute(t,e){const r=this._current.attributes[t];if(void 0!==r)return e&&this._dateFields.has(t)?new Date(r):r;const s=this.readAttributes(),i=t.toLocaleLowerCase().trim();for(const t in s)if(t.toLocaleLowerCase().trim()===i){const e=this._current.attributes[t];return this._dateFields.has(t)?new Date(e):e}}copyInto(t){super.copyInto(t),t._featureIndex=this._featureIndex,t._transform=this._transform,t._dateFields=this._dateFields}_readAttributes(){return this._current.attributes}_passesFilter(){if(!this._hasFilter)return!0;let t=0,e=0;switch(this.geometryType){case\"esriGeometryPoint\":{const r=this._current.geometry;if(!r)return!1;[t,e]=r.coords;break}case\"esriGeometryPolygon\":{const r=this.readCentroid();if(!r)return!1;[t,e]=r.coords,t-=this._tx,e-=this._ty;break}default:return!1}return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax}}export{a as FeatureSetReaderJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/ArrayPool.js\";import t from\"../../../../../geometry/Extent.js\";import{create as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import s from\"../../../../../tasks/support/QuantizationParameters.js\";import o from\"../../../tiling/TileKey.js\";function n(e,t){const i=e.bounds,s=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&i[0]<=s[0]&&i[1]<=s[1]&&i[2]>=s[2]&&i[3]>=s[3]}function r(e,t){return n(t,e)}class l{constructor(e,t){this.key=new o(0,0,0,0),this.bounds=i(),this.objectIds=new Set,this.key.set(t);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level,this.needsClear=!0}get id(){return this.key.id}get extent(){return t.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:\"upperLeft\",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}get bbox(){const e=this.bounds;return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}clone(){return new l(this.tileInfoView,this.key)}createChildTiles(){const t=this.key.getChildKeys(),i=e.acquire();for(let e=0;e<t.length;e++)i[e]=new l(this.tileInfoView,t[e]);return i}getQuantizationParameters(){return s.fromJSON({mode:\"view\",originPosition:\"upperLeft\",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}export default l;export{l as Tile,r as isChildOf,n as isParentOf};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/has.js\";import t from\"../../../../../core/Evented.js\";import s from\"../../../tiling/TileKey.js\";import i from\"../../../tiling/TileCoverage.js\";import{r as o}from\"../../../../../chunks/rbush.js\";import{Tile as n}from\"./Tile.js\";const h={added:[],removed:[]},r=new Set,d=new s(0,0,0,0);export default class extends t{constructor(t){super(),this._tiles=new Map,this._index=o(9,e(\"csp-restrictions\")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}findByKey(e){return this._tiles.get(e.id)}intersections(e,t){const s=\"string\"==typeof e?this.get(e):e;if(!s)return[];const i=t*s.resolution,o=s.bounds[0]-i,n=s.bounds[1]-i,h=s.bounds[2]+i,r=s.bounds[3]+i,d=[];for(const e of this._index.search({minX:o,minY:n,maxX:h,maxY:r})){const t=e.bounds.slice();t[0]=Math.max(t[0],o),t[1]=Math.max(t[1],n),t[2]=Math.min(t[2],h),t[3]=Math.min(t[3],r),t[2]-t[0]>0&&t[3]-t[1]>0&&d.push({bounds:t,tile:e})}return d}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new n(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e)}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit(\"update\",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:o}=t,{level:l}=o;if(s.length>0)for(const{row:e,colFrom:t,colTo:i}of s)for(let s=t;s<=i;s++){const t=d.set(l,e,o.normalizeCol(s),o.getWorldForColumn(s)).id;if(r.add(t),!this.has(t)){const e=new n(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),h.added.push(e)}}for(let e=this.tiles.length-1;e>=0;e--){const t=this.tiles[e];r.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(e,1),this._index.remove(t),h.removed.push(t))}(h.added.length||h.removed.length)&&this.emit(\"update\",h),i.pool.release(t),r.clear(),h.added.length=0,h.removed.length=0}}\n"],"sourceRoot":""}