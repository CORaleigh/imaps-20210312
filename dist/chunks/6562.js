(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[6562],{55534:(t,e,i)=>{"use strict";i.d(e,{b:()=>H});i(95830);var n=i(36544),r=i(33655),s=i(77625),o=i(17387),a=i(17154),c=i(67128),l=i(12811),u=i(8344),h=i(69987),f=i(91531),d=i(35280),g=i(31641),p=i(95224);const m=n.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function b(t=z){return{plane:(0,p.c)(t.plane),origin:(0,s.a)(t.origin),basis1:(0,s.a)(t.basis1),basis2:(0,s.a)(t.basis2)}}function _(t,e=b()){return v(t.origin,t.basis1,t.basis2,e)}function v(t,e,i,n=b()){return(0,o.g)(n.origin,t),(0,o.g)(n.basis1,e),(0,o.g)(n.basis2,i),y(n),function(t,e){Math.abs((0,o.d)(t.basis1,t.basis2)/((0,o.l)(t.basis1)*(0,o.l)(t.basis2)))>1e-6&&m.warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,o.d)(t.basis1,W(t)))>1e-6&&m.warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,o.d)(W(t),t.origin)-t.plane[3])>1e-6&&m.warn(e,"Plane offset is not consistent with plane origin")}(n,"fromValues()"),n}function y(t){(0,p.f)(t.basis2,t.basis1,t.origin,t.plane)}function M(t,e,i){t!==i&&_(t,i);const n=(0,o.a)(u.WM.get(),W(t),e);return(0,o.b)(i.origin,i.origin,n),i.plane[3]-=e,i}function x(t,e=b()){const i=(t[2]-t[0])/2,n=(t[3]-t[1])/2;return(0,o.s)(e.origin,t[0]+i,t[1]+n,0),(0,o.s)(e.basis1,i,0,0),(0,o.s)(e.basis2,0,n,0),(0,p.b)(0,0,1,0,e.plane),e}function S(t,e,i){return!!(0,p.i)(t.plane,e,i)&&F(t,i)}function T(t,e,i){const n=C.get();B(t,e,n,C.get());let s=Number.POSITIVE_INFINITY;for(const c of U){const l=L(t,c,R.get()),h=u.WM.get();if((0,p.d)(n,l,h)){const t=(0,a.tB)(u.WM.get(),e.origin,h),n=Math.abs((0,r.ZF)((0,o.d)(e.direction,t)));n<s&&(s=n,(0,o.g)(i,h))}}return s===Number.POSITIVE_INFINITY?A(t,e,i):i}function A(t,e,i){if(S(t,e,i))return i;const n=C.get(),r=C.get();B(t,e,n,r);let s=Number.POSITIVE_INFINITY;for(const a of U){const c=L(t,a,R.get()),l=u.WM.get();if((0,p.e)(n,c,l)){const t=(0,g.d)(e,l);if(!(0,p.g)(r,l))continue;t<s&&(s=t,(0,o.g)(i,l))}}return I(t,e.origin)<s&&P(t,e.origin,i),i}function P(t,e,i){const n=(0,p.h)(t.plane,e,u.WM.get()),r=(0,d.p)(V(t,t.basis1),n,-1,1,u.WM.get()),s=(0,d.p)(V(t,t.basis2),n,-1,1,u.WM.get());return(0,o.f)(i,(0,o.b)(u.WM.get(),r,s),t.origin),i}function w(t,e,i){const{origin:n,basis1:r,basis2:s}=t,a=(0,o.f)(u.WM.get(),e,n),c=(0,h.p)(r,a),l=(0,h.p)(s,a),f=(0,h.p)(W(t),a);return(0,o.s)(i,c,l,f)}function I(t,e){const i=w(t,e,u.WM.get()),{basis1:n,basis2:r}=t,s=(0,o.l)(n),a=(0,o.l)(r),c=Math.max(Math.abs(i[0])-s,0),l=Math.max(Math.abs(i[1])-a,0),h=i[2];return c*c+l*l+h*h}function O(t,e){const i=-t.plane[3];return(0,h.p)(W(t),e)-i}function W(t){return(0,p.n)(t.plane)}function F(t,e){const i=(0,o.f)(u.WM.get(),e,t.origin),n=(0,o.p)(t.basis1),r=(0,o.p)(t.basis2),s=(0,o.d)(t.basis1,i),a=(0,o.d)(t.basis2,i);return-s-n<0&&s-n<0&&-a-r<0&&a-r<0}function V(t,e){const i=R.get();return(0,o.g)(i.origin,t.origin),(0,o.g)(i.vector,e),i}function L(t,e,i){const{basis1:n,basis2:r,origin:s}=t,a=(0,o.a)(u.WM.get(),n,e.origin[0]),c=(0,o.a)(u.WM.get(),r,e.origin[1]);(0,o.b)(i.origin,a,c),(0,o.b)(i.origin,i.origin,s);const l=(0,o.a)(u.WM.get(),n,e.direction[0]),h=(0,o.a)(u.WM.get(),r,e.direction[1]);return(0,o.a)(i.vector,(0,o.b)(l,l,h),2),i}function B(t,e,i,n){const r=W(t);(0,p.f)(r,e.direction,e.origin,i),(0,p.f)((0,p.n)(i),r,e.origin,n)}const z={plane:(0,p.c)(),origin:(0,s.f)(0,0,0),basis1:(0,s.f)(1,0,0),basis2:(0,s.f)(0,1,0)},C=new f.x(p.c),R=new f.x(d.c),D=(0,s.c)(),j=new f.x((()=>({origin:null,basis1:null,basis2:null,plane:null}))),U=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],k=(0,l.c)(),E=(0,l.c)();var H=Object.freeze({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=(0,p.c)(),this.origin=(0,s.c)(),this.basis1=(0,s.c)(),this.basis2=(0,s.c)()}},create:b,wrap:function(t,e,i){const n=j.get();return n.origin=t,n.basis1=e,n.basis2=i,n.plane=(0,p.w)(0,0,0,0),y(n),n},copy:_,copyWithoutVerify:function(t,e){(0,o.g)(e.origin,t.origin),(0,o.g)(e.basis1,t.basis1),(0,o.g)(e.basis2,t.basis2),(0,p.a)(t.plane,e.plane)},fromValues:v,updateUnboundedPlane:y,elevate:M,setExtent:function(t,e,i){return x(e,i),M(i,O(t,t.origin),i),i},fromAABoundingRect:x,intersectRay:S,intersectRayClosestSilhouette:function(t,e,i){if(S(t,e,i))return i;const n=T(t,e,u.WM.get());return(0,o.b)(i,e.origin,(0,o.a)(u.WM.get(),e.direction,(0,o.i)(e.origin,n)/(0,o.l)(e.direction))),i},closestPointOnSilhouette:T,closestPoint:A,projectPoint:P,projectPointLocal:w,distance2:I,distance:function(t,e){return Math.sqrt(I(t,e))},distanceToSilhouette:function(t,e){let i=Number.NEGATIVE_INFINITY;for(const n of U){const r=L(t,n,R.get()),s=(0,d.d)(r,e);s>i&&(i=s)}return Math.sqrt(i)},extrusionContainsPoint:function(t,e){return(0,p.g)(t.plane,e)&&F(t,e)},axisAt:function(t,e,i,n){return function(t,e,i){switch(e){case 0:(0,o.g)(i,t.basis1),(0,o.n)(i,i);break;case 1:(0,o.g)(i,t.basis2),(0,o.n)(i,i);break;case 2:(0,o.g)(i,W(t))}return i}(t,i,n)},altitudeAt:O,setAltitudeAt:function(t,e,i,n){const r=O(t,e),s=(0,o.a)(D,W(t),i-r);return(0,o.b)(n,e,s),n},equals:function(t,e){return(0,o.o)(t.basis1,e.basis1)&&(0,o.o)(t.basis2,e.basis2)&&(0,o.o)(t.origin,e.origin)},transform:function(t,e,i){return t!==i&&_(t,i),(0,c.c)(k,e),(0,c.d)(k,k),(0,o.k)(i.basis1,t.basis1,k),(0,o.k)(i.basis2,t.basis2,k),(0,o.k)((0,p.n)(i.plane),(0,p.n)(t.plane),k),(0,o.k)(i.origin,t.origin,e),(0,p.s)(i.plane,i.origin,i.plane),i},rotate:function(t,e,i,n){return t!==n&&_(t,n),(0,c.r)(E,(0,c.i)(E),e,i),(0,o.k)(n.basis1,t.basis1,E),(0,o.k)(n.basis2,t.basis2,E),y(n),n},normal:W,UP:z})},46304:(t,e,i)=>{"use strict";i.d(e,{a:()=>u,b:()=>a,c:()=>p,d:()=>f,f:()=>l,g:()=>h});var n=i(17387),r=i(8344),s=i(91531),o=i(31641);function a(t){return t?{ray:(0,o.c)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,o.c)(),c0:0,c1:Number.MAX_VALUE}}function c(t,e,i,n=a()){return(0,o.a)(t,n.ray),n.c0=e,n.c1=i,n}function l(t,e=a()){return(0,o.a)(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function u(t,e,i=a()){const r=(0,n.l)(t.vector);return(0,o.f)(t.origin,e,i.ray),i.c0=0,i.c1=r,i}function h(t,e){return d(t,t.c0,e)}function f(t,e){return d(t,t.c1,e)}function d(t,e,i){return(0,n.b)(i,t.ray.origin,(0,n.a)(i,t.ray.direction,e))}const g=new s.x((()=>({c0:0,c1:0,ray:null})));var p=Object.freeze({__proto__:null,create:a,wrap:function(t,e,i){const n=g.get();return n.ray=t,n.c0=e,n.c1=i,n},copy:function(t,e=a()){return c(t.ray,t.c0,t.c1,e)},fromValues:c,fromRay:l,fromLineSegment:function(t,e=a()){return u(t,(0,n.n)(r.WM.get(),t.vector),e)},fromLineSegmentAndDirection:u,getStart:h,getEnd:f,getAt:d})},35280:(t,e,i)=>{"use strict";i.d(e,{c:()=>c,d:()=>h,f:()=>u,l:()=>m,p:()=>f});var n=i(33655),r=i(77625),s=i(17387),o=i(8344),a=i(91531);function c(t){return t?{origin:(0,r.a)(t.origin),vector:(0,r.a)(t.vector)}:{origin:(0,r.c)(),vector:(0,r.c)()}}function l(t,e){const i=p.get();return i.origin=t,i.vector=e,i}function u(t,e,i=c()){return(0,s.g)(i.origin,t),(0,s.g)(i.vector,e),i}function h(t,e){const i=(0,s.f)(o.WM.get(),e,t.origin),r=(0,s.d)(t.vector,i),a=(0,s.d)(t.vector,t.vector),c=(0,n.uZ)(r/a,0,1),l=(0,s.f)(o.WM.get(),(0,s.a)(o.WM.get(),t.vector,c),i);return(0,s.d)(l,l)}function f(t,e,i,r,a){const{vector:c,origin:l}=t,u=(0,s.f)(o.WM.get(),e,l),h=(0,s.d)(c,u)/(0,s.p)(c);return(0,s.a)(a,c,(0,n.uZ)(h,i,r)),(0,s.b)(a,a,t.origin)}function d(t,e,i,r){const a=1e-6,c=t.origin,l=(0,s.b)(o.WM.get(),c,t.vector),u=e.origin,h=(0,s.b)(o.WM.get(),u,e.vector),f=o.WM.get(),d=o.WM.get();if(f[0]=c[0]-u[0],f[1]=c[1]-u[1],f[2]=c[2]-u[2],d[0]=h[0]-u[0],d[1]=h[1]-u[1],d[2]=h[2]-u[2],Math.abs(d[0])<a&&Math.abs(d[1])<a&&Math.abs(d[2])<a)return!1;const g=o.WM.get();if(g[0]=l[0]-c[0],g[1]=l[1]-c[1],g[2]=l[2]-c[2],Math.abs(g[0])<a&&Math.abs(g[1])<a&&Math.abs(g[2])<a)return!1;const p=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],m=d[0]*g[0]+d[1]*g[1]+d[2]*g[2],b=f[0]*g[0]+f[1]*g[1]+f[2]*g[2],_=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],v=(g[0]*g[0]+g[1]*g[1]+g[2]*g[2])*_-m*m;if(Math.abs(v)<a)return!1;let y=(p*m-b*_)/v,M=(p+m*y)/_;i&&(y=(0,n.uZ)(y,0,1),M=(0,n.uZ)(M,0,1));const x=o.WM.get(),S=o.WM.get();return x[0]=c[0]+y*g[0],x[1]=c[1]+y*g[1],x[2]=c[2]+y*g[2],S[0]=u[0]+M*d[0],S[1]=u[1]+M*d[1],S[2]=u[2]+M*d[2],r.tA=y,r.tB=M,r.pA=x,r.pB=S,r.distance2=(0,s.h)(x,S),!0}const g={tA:0,tB:0,pA:(0,r.c)(),pB:(0,r.c)(),distance2:0},p=new a.x((()=>({origin:null,vector:null})));var m=Object.freeze({__proto__:null,create:c,wrap:l,copy:function(t,e=c()){return u(t.origin,t.vector,e)},fromValues:u,fromPoints:function(t,e,i=c()){return(0,s.g)(i.origin,t),(0,s.f)(i.vector,e,t),i},distance2:h,distance:function(t,e){return Math.sqrt(h(t,e))},projectPoint:function(t,e,i){return f(t,e,0,1,i)},pointAt:function(t,e,i){return(0,s.b)(i,t.origin,(0,s.a)(i,t.vector,e))},projectPointClamp:f,closestRayDistance2:function(t,e){if(d(t,l(e.origin,e.direction),!1,g)){const{tA:e,pB:i,distance2:n}=g;if(e>=0&&e<=1)return n;if(e<0)return(0,s.h)(t.origin,i);if(e>1)return(0,s.h)((0,s.b)(o.WM.get(),t.origin,t.vector),i)}return null},closestLineSegmentPoint:function(t,e,i){return!!d(t,e,!0,g)&&((0,s.g)(i,g.pA),!0)},closestLineSegmentDistance2:function(t,e){return d(t,e,!0,g)?g.distance2:null}})},98501:(t,e,i)=>{"use strict";i.d(e,{a:()=>d,b:()=>c,c:()=>u,f:()=>r,i:()=>o,j:()=>h,m:()=>a,n:()=>f,r:()=>l,s:()=>s});var n=i(60418);function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s(t,e,i,n,r,s,o,a,c,l){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=l,t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function a(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=i[0],d=i[1],g=i[2],p=i[3],m=i[4],b=i[5],_=i[6],v=i[7],y=i[8];return t[0]=f*n+d*o+g*l,t[1]=f*r+d*a+g*u,t[2]=f*s+d*c+g*h,t[3]=p*n+m*o+b*l,t[4]=p*r+m*a+b*u,t[5]=p*s+m*c+b*h,t[6]=_*n+v*o+y*l,t[7]=_*r+v*a+y*u,t[8]=_*s+v*c+y*h,t}function c(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=i[0],d=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=f*n+d*o+l,t[7]=f*r+d*a+u,t[8]=f*s+d*c+h,t}function l(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*n+f*o,t[1]=d*r+f*a,t[2]=d*s+f*c,t[3]=d*o-f*n,t[4]=d*a-f*r,t[5]=d*c-f*s,t[6]=l,t[7]=u,t[8]=h,t}function u(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function h(t,e,i){const n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t}function f(t,e){const i=e[0],n=e[1],r=e[2],s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10],h=u*o-a*l,f=-u*s+a*c,d=l*s-o*c,g=i*h+n*f+r*d;if(!g)return null;const p=1/g;return t[0]=h*p,t[1]=(-u*n+r*l)*p,t[2]=(a*n-r*o)*p,t[3]=f*p,t[4]=(u*i-r*c)*p,t[5]=(-a*i+r*s)*p,t[6]=d*p,t[7]=(-l*i+n*c)*p,t[8]=(o*i-n*s)*p,t}function d(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],g=e[12],p=e[13],m=e[14],b=e[15],_=i*a-n*o,v=i*c-r*o,y=i*l-s*o,M=n*c-r*a,x=n*l-s*a,S=r*l-s*c,T=u*p-h*g,A=u*m-f*g,P=u*b-d*g,w=h*m-f*p,I=h*b-d*p,O=f*b-d*m;let W=_*O-v*I+y*w+M*P-x*A+S*T;return W?(W=1/W,t[0]=(a*O-c*I+l*w)*W,t[1]=(c*P-o*O-l*A)*W,t[2]=(o*I-a*P+l*T)*W,t[3]=(r*I-n*O-s*w)*W,t[4]=(i*O-r*P+s*A)*W,t[5]=(n*P-i*I-s*T)*W,t[6]=(p*S-m*x+b*M)*W,t[7]=(m*y-g*S-b*v)*W,t[8]=(g*x-p*y+b*_)*W,t):null}function g(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}const p=a,m=g;Object.freeze({__proto__:null,fromMat4:r,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},set:s,identity:o,transpose:function(t,e){if(t===e){const i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=-u*s+a*c,d=l*s-o*c;let g=i*h+n*f+r*d;return g?(g=1/g,t[0]=h*g,t[1]=(-u*n+r*l)*g,t[2]=(a*n-r*o)*g,t[3]=f*g,t[4]=(u*i-r*c)*g,t[5]=(-a*i+r*s)*g,t[6]=d*g,t[7]=(-l*i+n*c)*g,t[8]=(o*i-n*s)*g,t):null},adjoint:function(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t[0]=o*u-a*l,t[1]=r*l-n*u,t[2]=n*a-r*o,t[3]=a*c-s*u,t[4]=i*u-r*c,t[5]=r*s-i*a,t[6]=s*l-o*c,t[7]=n*c-i*l,t[8]=i*o-n*s,t},determinant:function(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8];return e*(l*s-o*c)+i*(-l*r+o*a)+n*(c*r-s*a)},multiply:a,translate:c,rotate:l,scale:u,scaleByVec2:h,fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,c=r+r,l=i*o,u=n*o,h=n*a,f=r*o,d=r*a,g=r*c,p=s*o,m=s*a,b=s*c;return t[0]=1-h-g,t[3]=u-b,t[6]=f+m,t[1]=u+b,t[4]=1-l-g,t[7]=d-p,t[2]=f-m,t[5]=d+p,t[8]=1-l-h,t},normalFromMat4Legacy:f,normalFromMat4:d,projection:function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract:g,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],h=t[8],f=e[0],d=e[1],g=e[2],p=e[3],m=e[4],b=e[5],_=e[6],v=e[7],y=e[8];return Math.abs(i-f)<=n.E*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=n.E*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-g)<=n.E*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-p)<=n.E*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=n.E*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(c-b)<=n.E*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-_)<=n.E*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-v)<=n.E*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(h-y)<=n.E*Math.max(1,Math.abs(h),Math.abs(y))},mul:p,sub:m})},6897:(t,e,i)=>{"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}i.d(e,{c:()=>n});const r=n();Object.freeze({__proto__:null,create:n,clone:function(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(t,e,i,n,r,s,o,a,c,l,u,h,f,d,g,p){const m=new Float32Array(16);return m[0]=t,m[1]=e,m[2]=i,m[3]=n,m[4]=r,m[5]=s,m[6]=o,m[7]=a,m[8]=c,m[9]=l,m[10]=u,m[11]=h,m[12]=f,m[13]=d,m[14]=g,m[15]=p,m},createView:function(t,e){return new Float32Array(t,e,16)},IDENTITY:r})},95224:(t,e,i)=>{"use strict";i.d(e,{a:()=>h,b:()=>f,c:()=>l,d:()=>A,e:()=>P,f:()=>S,g:()=>I,h:()=>V,i:()=>T,j:()=>g,k:()=>w,l:()=>F,m:()=>B,n:()=>C,o:()=>O,p:()=>D,q:()=>W,s:()=>x,w:()=>u});var n=i(59472),r=i(33655),s=i(77625),o=i(17387),a=i(8344),c=i(13633);function l(t=R){return[t[0],t[1],t[2],t[3]]}function u(t,e,i,n){return f(t,e,i,n,a.o6.get())}function h(t,e=l()){return f(t[0],t[1],t[2],t[3],e)}function f(t,e,i,n,r=l()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function d(t,e,i=l()){(0,o.g)(i,e);const n=(0,o.d)(e,e);return Math.abs(n-1)>1e-5&&n>1e-12&&(0,o.a)(i,i,1/Math.sqrt(n)),x(i,t,i),i}function g(t,e,i,n=l()){return S((0,o.f)(a.WM.get(),t,e),(0,o.f)(a.WM.get(),i,e),t,n)}function p(t,e,i,n,r){if(t.count<3)return!1;t.getVec(i,b);let s=n,a=!1;for(;s<t.count-1&&!a;)t.getVec(s,_),s++,a=!(0,o.o)(b,_);if(!a)return!1;for(s=Math.max(s,r),a=!1;s<t.count&&!a;)t.getVec(s,v),s++,(0,o.f)(y,b,_),(0,o.n)(y,y),(0,o.f)(M,_,v),(0,o.n)(M,M),a=!(0,o.o)(b,v)&&!(0,o.o)(_,v)&&Math.abs((0,o.d)(y,M))<m;return a?(g(b,_,v,e),!0):(0!==i||1!==n||2!==r)&&p(t,e,0,1,2)}const m=.99619469809,b=(0,s.c)(),_=(0,s.c)(),v=(0,s.c)(),y=(0,s.c)(),M=(0,s.c)();function x(t,e,i){return t!==i&&h(t,i),i[3]=-(0,o.d)(i,e),i}function S(t,e,i,n=l()){return d(i,(0,o.c)(a.WM.get(),e,t),n)}function T(t,e,i){return!!(0,n.pC)(e)&&z(t,e.origin,e.direction,!0,!1,i)}function A(t,e,i){return z(t,e.origin,e.vector,!1,!1,i)}function P(t,e,i){return z(t,e.origin,e.vector,!1,!0,i)}function w(t,e){return B(t,(0,c.g)(e))-e[3]>=0}function I(t,e){return B(t,e)>=0}function O(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5];return t[0]*(t[0]>0?i:s)+t[1]*(t[1]>0?n:o)+t[2]*(t[2]>0?r:a)+t[3]>=0}function W(t,e){const i=(0,o.d)(t,e.ray.direction),n=-B(t,e.ray.origin);if(n<0&&i>=0)return!1;if(i>-1e-6&&i<1e-6)return n>0;if((n<0||i<0)&&!(n<0&&i<0))return!0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function F(t,e){const i=(0,o.d)(t,e.ray.direction),n=-B(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const r=n/i;return i>0?r<e.c1&&(e.c1=r):r>e.c0&&(e.c0=r),e.c0<=e.c1}function V(t,e,i){const n=(0,o.a)(a.WM.get(),t,-t[3]),r=L(t,(0,o.f)(a.WM.get(),e,n),a.WM.get());return(0,o.b)(i,r,n),i}function L(t,e,i){const n=(0,o.a)(a.WM.get(),t,(0,o.d)(t,e));return(0,o.f)(i,e,n),i}function B(t,e){return(0,o.d)(t,e)+t[3]}function z(t,e,i,n,s,a){const c=(0,o.d)(t,i);if(0===c)return!1;let l=-((0,o.d)(t,e)+t[3])/c;return s&&(l=n?Math.max(0,l):(0,r.uZ)(l,0,1)),!(l<0||!n&&l>1||((0,o.b)(a,e,(0,o.a)(a,i,l)),0))}function C(t){return t}const R=[0,0,1,0];var D=Object.freeze({__proto__:null,create:l,wrap:u,copy:h,fromValues:f,fromNormalAndOffset:function(t,e,i=l()){return(0,o.g)(i,t),i[3]=e,i},fromPositionAndNormal:d,fromPoints:g,fromManyPoints:function(t,e){return p(t,e,0,1,2)},fromManyPointsSampleAt:p,setOffsetFromPoint:x,negate:function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},fromVectorsAndPoint:S,intersectRay:T,intersectLineSegment:A,intersectLineSegmentClamp:P,isSphereFullyInside:w,isSphereFullyOutside:function(t,e){return B(t,(0,c.g)(e))+e[3]<0},isPointInside:I,isPointOutside:function(t,e){return B(t,e)<0},isAABBFullyInside:O,clip:W,clipInfinite:F,projectPoint:V,projectVector:L,distance:function(t,e){return Math.abs(B(t,e))},signedDistance:B,normal:C,UP:R})},31641:(t,e,i)=>{"use strict";i.d(e,{a:()=>h,b:()=>g,c:()=>u,d:()=>m,e:()=>b,f:()=>f,r:()=>y});var n=i(59472),r=i(96071),s=i(77625),o=i(17387),a=i(8344),c=i(91531),l=i(14286);function u(t){return t?{origin:(0,s.a)(t.origin),direction:(0,s.a)(t.direction)}:{origin:(0,s.c)(),direction:(0,s.c)()}}function h(t,e=u()){return f(t.origin,t.direction,e)}function f(t,e,i=u()){return(0,o.g)(i.origin,t),(0,o.g)(i.direction,e),i}function d(t,e,i=u()){const s=(0,r.Wv)((0,l.c)(a.WM.get(),e));if(s[2]=0,!t.unprojectFromRenderScreen(s,i.origin))return null;const c=(0,r.Wv)((0,l.c)(a.WM.get(),e));c[2]=1;const h=t.unprojectFromRenderScreen(c,a.WM.get());return(0,n.Wi)(h)?null:((0,o.f)(i.direction,h,i.origin),i)}function g(t,e,i=u()){return p(t,t.screenToRender(e,(0,r.Wv)(a.WM.get())),i)}function p(t,e,i=u()){(0,o.g)(i.origin,t.eye);const r=(0,o.s)(a.WM.get(),e[0],e[1],1),s=t.unprojectFromRenderScreen(r,a.WM.get());return(0,n.Wi)(s)?null:((0,o.f)(i.direction,s,i.origin),i)}function m(t,e){const i=(0,o.c)(a.WM.get(),(0,o.n)(a.WM.get(),t.direction),(0,o.f)(a.WM.get(),e,t.origin));return(0,o.d)(i,i)}function b(t,e,i){const n=(0,o.d)(t.direction,(0,o.f)(i,e,t.origin));return(0,o.b)(i,t.origin,(0,o.a)(i,t.direction,n)),i}function _(){return{origin:null,direction:null}}const v=new c.x(_);var y=Object.freeze({__proto__:null,create:u,wrap:function(t,e){const i=v.get();return i.origin=t,i.direction=e,i},copy:h,fromPoints:function(t,e,i=u()){return(0,o.g)(i.origin,t),(0,o.f)(i.direction,e,t),i},fromValues:f,fromScreen:function(t,e,i=u()){return d(t,t.screenToRender(e,(0,r.Wv)(a.WM.get())),i)},fromRender:d,fromScreenAtEye:g,fromRenderAtEye:p,distance2:m,distance:function(t,e){return Math.sqrt(m(t,e))},closestPoint:b,createWrapper:_})},13633:(t,e,i)=>{"use strict";i.d(e,{a:()=>_,c:()=>m,g:()=>y,s:()=>F});i(95830);var n=i(59472),r=i(36544),s=i(33655),o=i(77625),a=i(17387),c=i(17154),l=i(67128),u=i(38256),h=i(8344),f=i(69987),d=i(34353),g=i(31641);const p=r.Z.getLogger("esri.views.3d.support.geometryUtils.sphere");function m(){return(0,u.c)()}function b(t,e=m()){return(0,d.c)(e,t)}function _(t){t[0]=t[1]=t[2]=t[3]=0}function v(t){return Array.isArray(t)?t[3]:t}function y(t){return Array.isArray(t)?t:O}function M(t,e,i){if((0,n.Wi)(e))return!1;const r=(0,a.f)(h.WM.get(),e.origin,y(t)),s=(0,a.d)(e.direction,e.direction),o=2*(0,a.d)(e.direction,r),c=o*o-4*s*((0,a.d)(r,r)-t[3]*t[3]);if(c<0)return!1;const l=Math.sqrt(c);let u=(-o-l)/(2*s);const f=(-o+l)/(2*s);return(u<0||f<u&&f>0)&&(u=f),!(u<0||(i&&(0,a.b)(i,e.origin,(0,a.a)(h.WM.get(),e.direction,u)),0))}function x(t,e,i){const n=h.WM.get(),r=h.MP.get();(0,a.c)(n,e.origin,e.direction);const s=v(t);(0,a.c)(i,n,e.origin),(0,a.a)(i,i,1/(0,a.l)(i)*s);const o=T(t,e.origin),c=(0,f.a)(e.origin,i);return(0,l.i)(r),(0,l.r)(r,r,c+o,n),(0,a.k)(i,i,r),i}function S(t,e,i){const n=(0,a.f)(h.WM.get(),e,y(t)),r=(0,a.a)(h.WM.get(),n,t[3]/(0,a.l)(n));return(0,a.b)(i,r,y(t))}function T(t,e){const i=(0,a.f)(h.WM.get(),e,y(t)),n=(0,a.l)(i),r=v(t),o=r+Math.abs(r-n);return(0,s.ZF)(r/o)}const A=(0,o.c)();function P(t,e,i,n){const r=(0,a.f)(A,e,y(t));switch(i){case 0:{const t=(0,c.jE)(r,A)[2];return(0,a.s)(n,-Math.sin(t),Math.cos(t),0)}case 1:{const t=(0,c.jE)(r,A),e=t[1],i=t[2],s=Math.sin(e);return(0,a.s)(n,-s*Math.cos(i),-s*Math.sin(i),Math.cos(e))}case 2:return(0,a.n)(n,r);default:return}}function w(t,e){const i=(0,a.f)(W,e,y(t));return(0,a.l)(i)-t[3]}const I=(0,g.c)(),O=(0,o.c)(),W=(0,o.c)();Object.freeze(O);var F=Object.freeze({__proto__:null,create:m,copy:b,fromCenterAndRadius:function(t,e){return(0,u.f)(t[0],t[1],t[2],e)},wrap:function(t){return t},clear:_,fromRadius:function(t){return t},getRadius:v,getCenter:y,fromValues:function(t,e,i,n){return(0,u.f)(t,e,i,n)},elevate:function(t,e,i){return t!==i&&(0,a.g)(i,t),i[3]=t[3]+e,i},setExtent:function(t,e,i){return p.error("sphere.setExtent is not yet supported"),t===i?i:b(t,i)},intersectRay:M,intersectScreen:function(t,e,i,n){return M(t,(0,g.b)(e,i,I),n)},intersectsRay:function(t,e){return M(t,e,null)},intersectRayClosestSilhouette:function(t,e,i){if(M(t,e,i))return i;const n=x(t,e,h.WM.get());return(0,a.b)(i,e.origin,(0,a.a)(h.WM.get(),e.direction,(0,a.i)(e.origin,n)/(0,a.l)(e.direction))),i},closestPointOnSilhouette:x,closestPoint:function(t,e,i){return M(t,e,i)?i:((0,g.e)(e,y(t),i),S(t,i,i))},projectPoint:S,distanceToSilhouette:function(t,e){const i=(0,a.f)(h.WM.get(),e,y(t)),n=(0,a.p)(i),r=t[3]*t[3];return Math.sqrt(Math.abs(n-r))},angleToSilhouette:T,axisAt:P,altitudeAt:w,setAltitudeAt:function(t,e,i,n){const r=w(t,e),s=P(t,e,2,W),o=(0,a.a)(W,s,i-r);return(0,a.b)(n,e,o),n}})},56938:(t,e,i)=>{"use strict";i.d(e,{a:()=>f});var n=i(77625),r=i(17387),s=i(8344),o=i(91531),a=i(35280),c=i(14286);function l(t){return t?{p0:(0,n.a)(t.p0),p1:(0,n.a)(t.p1),p2:(0,n.a)(t.p2)}:{p0:(0,n.c)(),p1:(0,n.c)(),p2:(0,n.c)()}}function u(t,e,i,n=l()){return(0,r.g)(n.p0,t),(0,r.g)(n.p1,e),(0,r.g)(n.p2,i),n}function h(t,e,i){const n=(0,c.d)(t,e),r=(0,c.d)(e,i),s=(0,c.d)(i,t),o=(n+r+s)/2,a=o*(o-n)*(o-r)*(o-s);return a<=0?0:Math.sqrt(a)}function f(t,e,i){return(0,r.f)(p,e,t),(0,r.f)(m,i,t),(0,r.l)((0,r.c)(p,p,m))/2}const d=new o.x(a.c),g=new o.x((()=>({p0:null,p1:null,p2:null}))),p=(0,n.c)(),m=(0,n.c)();Object.freeze({__proto__:null,create:l,wrap:function(t,e,i){const n=g.get();return n.p0=t,n.p1=e,n.p2=i,n},copy:function(t,e=l()){return u(t.p0,t.p1,t.p2,e)},fromValues:u,distance2:function(t,e){const i=t.p0,n=t.p1,o=t.p2,c=(0,r.f)(s.WM.get(),n,i),l=(0,r.f)(s.WM.get(),o,n),u=(0,r.f)(s.WM.get(),i,o),h=(0,r.f)(s.WM.get(),e,i),f=(0,r.f)(s.WM.get(),e,n),g=(0,r.f)(s.WM.get(),e,o),p=(0,r.c)(c,c,u),m=(0,r.d)((0,r.c)(s.WM.get(),c,p),h),b=(0,r.d)((0,r.c)(s.WM.get(),l,p),f),_=(0,r.d)((0,r.c)(s.WM.get(),u,p),g);if(m>0&&b>0&&_>0){const t=(0,r.d)(p,h);return t*t/(0,r.d)(p,p)}const v=(0,a.d)((0,a.f)(i,c,d.get()),e),y=(0,a.d)((0,a.f)(n,l,d.get()),e),M=(0,a.d)((0,a.f)(o,u,d.get()),e);return Math.min(v,y,M)},intersectRay:function(t,e,i){const n=1e-5,{direction:s,origin:o}=e,{p0:a,p1:c,p2:l}=t,u=c[0]-a[0],h=c[1]-a[1],f=c[2]-a[2],d=l[0]-a[0],g=l[1]-a[1],p=l[2]-a[2],m=s[1]*p-g*s[2],b=s[2]*d-p*s[0],_=s[0]*g-d*s[1],v=u*m+h*b+f*_;if(v>-n&&v<n)return!1;const y=1/v,M=o[0]-a[0],x=o[1]-a[1],S=o[2]-a[2],T=y*(M*m+x*b+S*_);if(T<0||T>1)return!1;const A=x*f-h*S,P=S*u-f*M,w=M*h-u*x,I=y*(s[0]*A+s[1]*P+s[2]*w);return!(I<0||T+I>1)&&(i&&((0,r.a)(i,s,y*(d*A+g*P+p*w)),(0,r.b)(i,o,i)),!0)},areaPoints2d:h,area2d:function(t){return h(t.p0,t.p1,t.p2)},areaPoints3d:f})},69236:(t,e,i)=>{"use strict";function n(){return new Float32Array(3)}function r(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t,e,i){const n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=i,n}function o(){return n()}function a(){return s(1,1,1)}function c(){return s(1,0,0)}function l(){return s(0,1,0)}function u(){return s(0,0,1)}i.d(e,{a:()=>r,c:()=>n,f:()=>s});const h=o(),f=a(),d=c(),g=l(),p=u();Object.freeze({__proto__:null,create:n,clone:r,fromValues:s,createView:function(t,e){return new Float32Array(t,e,3)},zeros:o,ones:a,unitX:c,unitY:l,unitZ:u,ZEROS:h,ONES:f,UNIT_X:d,UNIT_Y:g,UNIT_Z:p})},69987:(t,e,i)=>{"use strict";i.d(e,{a:()=>a,b:()=>c,p:()=>o,v:()=>h});var n=i(33655),r=i(77625),s=i(17387);function o(t,e){return(0,s.d)(t,e)/(0,s.l)(t)}function a(t,e){const i=(0,s.d)(t,e)/((0,s.l)(t)*(0,s.l)(e));return-(0,n.ZF)(i)}function c(t,e,i){(0,s.n)(l,t),(0,s.n)(u,e);const r=(0,s.d)(l,u),o=(0,n.ZF)(r),a=(0,s.c)(l,l,u);return(0,s.d)(a,i)<0?2*Math.PI-o:o}const l=(0,r.c)(),u=(0,r.c)();var h=Object.freeze({__proto__:null,projectPoint:function(t,e,i){const n=(0,s.d)(t,e)/(0,s.d)(t,t);return(0,s.a)(i,t,n)},projectPointSignedLength:o,angle:a,angleAroundAxis:c})},91531:(t,e,i)=>{"use strict";i.d(e,{x:()=>s});var n=i(59472),r=i(33469);class s{constructor(t){this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=r.Z.before((()=>this.reset())),this.grow()}destroy(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=(0,n.Bd)(this.tickHandle)),this.items=(0,n.Bd)(this.items)}get(){return 0===this.itemsPtr&&(0,r.Z)((()=>{})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*o);this.items.length=Math.min(t,this.items.length),this.itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this.items.length,o));t++)this.items.push(this.allocator())}}const o=1024},88:(t,e,i)=>{"use strict";i.d(e,{Sh:()=>O,bW:()=>V,oy:()=>B,KD:()=>W,yC:()=>I,kx:()=>F,Dv:()=>L,xr:()=>z});var n=i(69987),r=i(17387),s=i(8344);function o(t=c){return[t[0],t[1],t[2],t[3]]}function a(t,e,i,n,r=o()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}const c=[0,0,1,0];Object.freeze({__proto__:null,create:o,wrap:function(t,e,i,n){return a(t,e,i,n,s.o6.get())},wrapAxisAngle:function(t,e){return a(t[0],t[1],t[2],e,s.o6.get())},copy:function(t,e=o()){return a(t[0],t[1],t[2],t[3],e)},fromValues:a,fromAxisAndAngle:function(t,e,i=o()){return(0,r.g)(i,t),i[3]=e,i},fromPoints:function(t,e,i=o()){return(0,r.c)(i,t,e),(0,r.n)(i,i),i[3]=(0,n.a)(t,e),i},axis:function(t){return t},UP:c});var l=i(35280),u=i(31641),h=i(13633),f=i(95224),d=i(55534),g=i(46304),p=i(77625),m=i(67128),b=i(38256),_=i(91531),v=i(34353);function y(t){return t?[(0,f.c)(t[0]),(0,f.c)(t[1]),(0,f.c)(t[2]),(0,f.c)(t[3]),(0,f.c)(t[4]),(0,f.c)(t[5])]:[(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)()]}function M(){return[(0,p.c)(),(0,p.c)(),(0,p.c)(),(0,p.c)(),(0,p.c)(),(0,p.c)(),(0,p.c)(),(0,p.c)()]}function x(t,e){(0,f.j)(e[4],e[0],e[3],t[0]),(0,f.j)(e[1],e[5],e[6],t[1]),(0,f.j)(e[4],e[5],e[1],t[2]),(0,f.j)(e[3],e[2],e[6],t[3]),(0,f.j)(e[0],e[1],e[2],t[4]),(0,f.j)(e[5],e[4],e[7],t[5])}function S(t,e){for(let i=0;i<6;i++)if(!(0,f.q)(t[i],e))return!1;return!0}const T=[(0,b.f)(-1,-1,-1,1),(0,b.f)(1,-1,-1,1),(0,b.f)(1,1,-1,1),(0,b.f)(-1,1,-1,1),(0,b.f)(-1,-1,1,1),(0,b.f)(1,-1,1,1),(0,b.f)(1,1,1,1),(0,b.f)(-1,1,1,1)],A=new _.x(g.b),P=M();var w=Object.freeze({__proto__:null,create:y,createPoints:M,copy:function(t,e=y()){for(let i=0;i<6;i++)(0,f.a)(t[i],e[i])},fromMatrix:function(t,e,i,n=P){const o=(0,m.m)(s.MP.get(),e,t);(0,m.c)(o,o);for(let t=0;t<8;++t){const e=(0,v.t)(s.o6.get(),T[t],o);(0,r.s)(n[t],e[0]/e[3],e[1]/e[3],e[2]/e[3])}x(i,n)},computePlanes:x,intersectsSphere:function(t,e){for(let i=0;i<6;i++)if((0,f.k)(t[i],e))return!1;return!0},intersectsRay:function(t,e){return S(t,(0,g.f)(e,A.get()))},intersectClipRay:function(t,e){for(let i=0;i<6;i++){const n=t[i];if(!(0,f.l)(n,e))return!1}return!0},intersectsLineSegment:function(t,e,i){return S(t,(0,g.a)(e,i,A.get()))},intersectsPoint:function(t,e){for(let i=0;i<6;i++)if((0,f.m)(t[i],e)>0)return!1;return!0},intersectsAABB:function(t,e){for(let i=0;i<6;i++)if((0,f.o)(t[i],e))return!1;return!0},planePointIndices:{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]}});i(56938);const I=f.p,O=d.b,W=l.l,F=u.r,V=g.c,L=h.s,B=w,z=n.v},61514:(t,e,i)=>{"use strict";i.d(e,{p:()=>a});var n=i(59472),r=i(77625),s=i(17387),o=i(85461);function a(t,e){if(e.slicePlaneEnabled){t.extensions.add("GL_OES_standard_derivatives"),e.sliceEnabledForVertexPrograms&&(t.vertex.uniforms.add("slicePlaneOrigin","vec3"),t.vertex.uniforms.add("slicePlaneBasis1","vec3"),t.vertex.uniforms.add("slicePlaneBasis2","vec3")),t.fragment.uniforms.add("slicePlaneOrigin","vec3"),t.fragment.uniforms.add("slicePlaneBasis1","vec3"),t.fragment.uniforms.add("slicePlaneBasis2","vec3");const i=o.H`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,n=o.H`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `,r=e.sliceHighlightDisabled?o.H`#define highlightSlice(_color_, _pos_) (_color_)`:o.H`
        ${n}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(i),t.fragment.code.add(i),t.fragment.code.add(r)}else{const i=o.H`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `;e.sliceEnabledForVertexPrograms&&t.vertex.code.add(i),t.fragment.code.add(i)}}!function(t){t.bindUniformsWithOrigin=function(e,i,n){t.bindUniforms(e,i,n.slicePlane,n.origin)},t.bindUniforms=function(t,e,i,o){e.slicePlaneEnabled&&((0,n.pC)(i)?(o?((0,s.f)(c,i.origin,o),t.setUniform3fv("slicePlaneOrigin",c)):t.setUniform3fv("slicePlaneOrigin",i.origin),t.setUniform3fv("slicePlaneBasis1",i.basis1),t.setUniform3fv("slicePlaneBasis2",i.basis2)):(t.setUniform3fv("slicePlaneBasis1",r.Z),t.setUniform3fv("slicePlaneBasis2",r.Z),t.setUniform3fv("slicePlaneOrigin",r.Z)))}}(a||(a={}));const c=(0,r.c)()},62213:(t,e,i)=>{"use strict";i.d(e,{w:()=>r});var n=i(85461);function r(t,e){e.linearDepth?t.vertex.code.add(n.H`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):t.vertex.code.add(n.H`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)}},11823:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var n=i(85461);function r(t,e){e.attributeColor?(t.attributes.add("color","vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(n.H`
      void forwardVertexColor() { vColor = color; }
    `),t.vertex.code.add(n.H`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):t.vertex.code.add(n.H`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)}},83488:(t,e,i)=>{"use strict";i.d(e,{F:()=>s});var n=i(85461),r=i(61017);function s(t,e){t.fragment.include(r.n),3===e.output?(t.extensions.add("GL_OES_standard_derivatives"),t.fragment.code.add(n.H`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===e.output&&t.fragment.code.add(n.H`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)}},72023:(t,e,i)=>{"use strict";i.d(e,{bA:()=>a});var n=i(38256),r=i(85461);const s=(0,n.f)(1,1,0,1),o=(0,n.f)(1,0,1,1);function a(t){t.fragment.uniforms.add("depthTex","sampler2D"),t.fragment.uniforms.add("highlightViewportPixelSz","vec4"),t.fragment.constants.add("occludedHighlightFlag","vec4",s).add("unoccludedHighlightFlag","vec4",o),t.fragment.code.add(r.H`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = occludedHighlightFlag;
      }
      else {
        gl_FragColor = unoccludedHighlightFlag;
      }
    }
  `)}!function(t){t.bindOutputHighlight=function(t,e,i){t.bindTexture(i.highlightDepthTexture,5),e.setUniform1i("depthTex",5),e.setUniform4f("highlightViewportPixelSz",0,0,i.inverseViewport[0],i.inverseViewport[1])}}(a||(a={}))},4071:(t,e,i)=>{"use strict";i.d(e,{S:()=>s});var n=i(85461),r=i(61017);function s(t){t.include(r.n),t.code.add(n.H`
    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
      return -(rgba2float(texture2D(depthTex, uv)) * (nearFar[1] - nearFar[0]) + nearFar[0]);
    }
  `)}},88214:(t,e,i)=>{"use strict";i.d(e,{C:()=>s,l:()=>r});var n=i(85461);function r(t,e){t.fragment.uniforms.add("terrainDepthTexture","sampler2D"),t.fragment.uniforms.add("cameraNearFar","vec2"),t.fragment.uniforms.add("viewportDim","vec2"),t.fragment.code.add(n.H`
    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy/viewportDim, cameraNearFar);
      if(fragmentDepth ${e.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `)}function s(t,e,i){i.multipassTerrainEnabled&&(t.setUniform1i("terrainDepthTexture",i.terrainLinearDepthTextureUnit),e.bindTexture(i.terrainLinearDepthTexture,i.terrainLinearDepthTextureUnit))}},34658:(t,e,i)=>{"use strict";i.d(e,{sj:()=>o,F:()=>r,bf:()=>s});var n=i(85461);const r=.1,s=.001;function o(t,e){const i=t.fragment;switch(e.alphaDiscardMode){case 0:i.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < ${n.H.float(s)}) { discard; } }
      `);break;case 1:i.code.add(n.H`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:i.uniforms.add("textureAlphaCutoff","float"),i.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:t.fragment.uniforms.add("textureAlphaCutoff","float"),t.fragment.code.add(n.H`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}}},63230:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r});var n=i(85461);function r(t){t.code.add(n.H`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)}},61017:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var n=i(85461);function r(t){t.code.add(n.H`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)}},89553:(t,e,i)=>{"use strict";i.d(e,{G:()=>n});var n,r=i(67128),s=i(6897);!function(t){function e(t,e,i){(0,r.t)(o,i,e),t.setUniform3fv("localOrigin",e),t.setUniformMatrix4fv("view",o)}t.bindCamPosition=function(t,e,i){t.setUniform3f("camPos",i[3]-e[0],i[7]-e[1],i[11]-e[2])},t.bindProjectionMatrix=function(t,e){t.setUniformMatrix4fv("proj",e)},t.bindNearFar=function(t,e){t.setUniform2fv("nearFar",e)},t.bindViewCustomOrigin=e,t.bindView=function(t,i){e(t,i.origin,i.camera.viewMatrix)},t.bindViewport=function(t,e){t.setUniform4fv("viewport",e.camera.fullViewport)}}(n||(n={}));const o=(0,s.c)()},51219:(t,e,i)=>{"use strict";i.d(e,{kG:()=>s});const n=i(36544).Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class r{constructor(){this.includedModules=new Map}include(t,e){this.includedModules.has(t)?this.includedModules.get(t)!==e&&n.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(t,e),t(this.builder,e))}}class s extends r{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new l,this.varyings=new u,this.extensions=new h,this.constants=new f}get builder(){return this}generateSource(t){const e=this.extensions.generateSource(t),i=this.attributes.generateSource(t),n=this.varyings.generateSource(),r="vertex"===t?this.vertex:this.fragment,s=r.uniforms.generateSource(),o=r.code.generateSource(),a="vertex"===t?g:d,c=this.constants.generateSource().concat(r.constants.generateSource());return`\n${e.join("\n")}\n\n${a}\n\n${c.join("\n")}\n\n${s.join("\n")}\n\n${i.join("\n")}\n\n${n.join("\n")}\n\n${o.join("\n")}`}}class o{constructor(){this._entries=new Array,this._set=new Set}add(t,e,i){const n=`${t}_${e}_${i}`;return this._set.has(n)||(this._entries.push([t,e,i]),this._set.add(n)),this}generateSource(){return this._entries.map((t=>`uniform ${t[1]} ${t[0]}${(t=>t?`[${t}]`:"")(t[2])};`))}}class a{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class c extends r{constructor(){super(...arguments),this.uniforms=new o,this.code=new a,this.constants=new f}get builder(){return this}}class l{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>`attribute ${t[1]} ${t[0]};`))}}class u{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(){return this._entries.map((t=>`varying ${t[1]} ${t[0]};`))}}class h{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?h.ALLOWLIST_VERTEX:h.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>`#extension ${t} : enable`))}}h.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],h.ALLOWLIST_VERTEX=[];class f{constructor(){this._entries=[]}add(t,e,i){let n="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":n=f.numberToFloatStr(i);break;case"int":n=f.numberToIntStr(i);break;case"bool":n=i.toString();break;case"vec2":n=`vec2(${f.numberToFloatStr(i[0])},                            ${f.numberToFloatStr(i[1])})`;break;case"vec3":n=`vec3(${f.numberToFloatStr(i[0])},                            ${f.numberToFloatStr(i[1])},                            ${f.numberToFloatStr(i[2])})`;break;case"vec4":n=`vec4(${f.numberToFloatStr(i[0])},                            ${f.numberToFloatStr(i[1])},                            ${f.numberToFloatStr(i[2])},                            ${f.numberToFloatStr(i[3])})`;break;case"ivec2":n=`ivec2(${f.numberToIntStr(i[0])},                             ${f.numberToIntStr(i[1])})`;break;case"ivec3":n=`ivec3(${f.numberToIntStr(i[0])},                             ${f.numberToIntStr(i[1])},                             ${f.numberToIntStr(i[2])})`;break;case"ivec4":n=`ivec4(${f.numberToIntStr(i[0])},                             ${f.numberToIntStr(i[1])},                             ${f.numberToIntStr(i[2])},                             ${f.numberToIntStr(i[3])})`;break;case"bvec2":n=`bvec2(${i[0].toString()},                             ${i[1].toString()})`;break;case"bvec3":n=`bvec3(${i[0].toString()},                             ${i[1].toString()},                             ${i[2].toString()})`;break;case"bvec4":n=`bvec4(${i[0].toString()},                             ${i[1].toString()},                             ${i[2].toString()},                             ${i[3].toString()})`;break;case"mat2":case"mat3":case"mat4":n=`${e}(${Array.prototype.map.call(i,(t=>f.numberToFloatStr(t))).join(", ")})`}return this._entries.push(`const ${e} ${t} = ${n};`),this}static numberToIntStr(t){return t.toFixed(0)}static numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const d="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",g="precision highp float;\nprecision highp sampler2D;"},85461:(t,e,i)=>{"use strict";function n(t,...e){let i="";for(let n=0;n<e.length;n++)i+=t[n]+e[n];return i+=t[t.length-1],i}i.d(e,{H:()=>n}),function(t){t.int=function(t){return Math.round(t).toString()},t.float=function(t){return t.toPrecision(8)}}(n||(n={}))},23240:(t,e,i)=>{"use strict";i.d(e,{J:()=>n});class n{constructor(t,e){this._module=t,this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}},97853:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});class n{constructor(t,e){e&&(this._config=e.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}dispose(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}reload(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(t),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}get program(){return this._program}get pipeline(){return this._pipeline}get key(){return this._config.key}get configuration(){return this._config}bindPass(t,e,i){}bindMaterial(t,e,i){}bindDraw(t,e,i){}bindPipelineState(t){t.setPipelineState(this.pipeline)}ensureAttributeLocations(t){this.program.assertCompatibleVertexAttributeLocations(t)}get primitiveType(){return 4}}},44801:(t,e,i)=>{"use strict";i.d(e,{m:()=>r,o:()=>s});var n=i(33655);class r{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((()=>0))}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const i of t)e[i]=this[i];return e}}function s(t={}){return(e,i)=>{var r,s;e._parameterNames=null!=(r=e._parameterNames)?r:[],e._parameterNames.push(i);const o=e._parameterNames.length-1,a=t.count||2,c=Math.ceil((0,n.k3)(a)),l=null!=(s=e._parameterBits)?s:[0];let u=0;for(;l[u]+c>16;)u++,u>=l.length&&l.push(0);e._parameterBits=l;const h=l[u],f=(1<<c)-1<<h;l[u]+=c,Object.defineProperty(e,i,{get(){return this[o]},set(t){if(this[o]!==t&&(this[o]=t,this._keyDirty=!0,this._parameterBits[u]=this._parameterBits[u]&~f|+t<<h&f,"number"!=typeof t&&"boolean"!=typeof t))throw"Configuration values must be booleans or numbers!"}})}}},91852:(t,e,i)=>{"use strict";i.d(e,{Xn:()=>r,TF:()=>n,gT:()=>s});const n=t=>class extends t{constructor(){super(...arguments),this._isDisposed=!1}dispose(){for(const e of null!=(t=this._managedDisposables)?t:[]){var t;const i=this[e];this[e]=null,i&&"function"==typeof i.dispose&&i.dispose()}this._isDisposed=!0}get isDisposed(){return this._isDisposed}};class r extends(n(class{})){}function s(){return(t,e)=>{var i,n;t.hasOwnProperty("_managedDisposables")||(t._managedDisposables=null!=(i=null==(n=t._managedDisposables)?void 0:n.slice())?i:[]),t._managedDisposables.unshift(e)}}},49326:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var n=i(32366);class r{constructor(){this.id=(0,n.D)()}unload(){}}},11379:(t,e,i)=>{"use strict";i.d(e,{i:()=>n});const n={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},26701:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(91852);class r extends n.Xn{constructor(t){super(),this.material=t.material,this.techniqueRep=t.techniqueRep,this.output=t.output}getTechnique(){return this.technique}getPipelineState(t,e){return this.getTechnique().pipeline}ensureResources(t){return 2}ensureParameters(t){}}const s=r},68500:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(59472),r=i(49326),s=i(56469),o=i(62698),a=i(77625),c=i(17387);class l{constructor(t,e,i,n){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.indices=i,this.position=n,this.center=(0,a.c)(),(0,s.hu)(t.length>=1),(0,s.hu)(i.length%this._numIndexPerPrimitive==0),(0,s.hu)(i.length>=t.length*this._numIndexPerPrimitive),(0,s.hu)(3===n.size||4===n.size);const{data:r,size:o}=n,l=t.length;let h=o*i[this._numIndexPerPrimitive*t[0]];u.clear(),u.push(h),this.bbMin=(0,a.f)(r[h],r[h+1],r[h+2]),this.bbMax=(0,a.a)(this.bbMin);for(let e=0;e<l;++e){const n=this._numIndexPerPrimitive*t[e];for(let t=0;t<this._numIndexPerPrimitive;++t){h=o*i[n+t],u.push(h);let e=r[h];this.bbMin[0]=Math.min(e,this.bbMin[0]),this.bbMax[0]=Math.max(e,this.bbMax[0]),e=r[h+1],this.bbMin[1]=Math.min(e,this.bbMin[1]),this.bbMax[1]=Math.max(e,this.bbMax[1]),e=r[h+2],this.bbMin[2]=Math.min(e,this.bbMin[2]),this.bbMax[2]=Math.max(e,this.bbMax[2])}}(0,c.e)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let f=this.radius*this.radius;for(let t=0;t<u.length;++t){h=u.getItemAt(t);const e=r[h]-this.center[0],i=r[h+1]-this.center[1],n=r[h+2]-this.center[2],s=e*e+i*i+n*n;if(s<=f)continue;const o=Math.sqrt(s),a=.5*(o-this.radius);this.radius=this.radius+a,f=this.radius*this.radius;const c=a/o;this.center[0]+=e*c,this.center[1]+=i*c,this.center[2]+=n*c}u.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if((0,c.h)(this.bbMin,this.bbMax)>1){const t=(0,c.e)((0,a.c)(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,i=new Uint8Array(e),n=new Array(8);for(let t=0;t<8;++t)n[t]=0;const{data:r,size:s}=this.position;for(let o=0;o<e;++o){let e=0;const a=this._numIndexPerPrimitive*this.primitiveIndices[o];let c=s*this.indices[a],l=r[c],u=r[c+1],h=r[c+2];for(let t=1;t<this._numIndexPerPrimitive;++t){c=s*this.indices[a+t];const e=r[c],i=r[c+1],n=r[c+2];e<l&&(l=e),i<u&&(u=i),n<h&&(h=n)}l<t[0]&&(e|=1),u<t[1]&&(e|=2),h<t[2]&&(e|=4),i[o]=e,++n[e]}let o=0;for(let t=0;t<8;++t)n[t]>0&&++o;if(o<2)return;const u=new Array(8);for(let t=0;t<8;++t)u[t]=n[t]>0?new Uint32Array(n[t]):void 0;for(let t=0;t<8;++t)n[t]=0;for(let t=0;t<e;++t){const e=i[t];u[e][n[e]++]=this.primitiveIndices[t]}this._children=new Array(8);for(let t=0;t<8;++t)void 0!==u[t]&&(this._children[t]=new l(u[t],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){u.prune()}}const u=new o.Z({deallocator:null});var h=i(27898);class f extends r.c{constructor(t,e=[],i=0){super(),this._primitiveType=i,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[e,i]of t)i&&this._vertexAttributes.set(e,{...i});if(null==e||0===e.length){const t=function(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}(this._vertexAttributes),e=(0,h.p)(t);for(const t of this._vertexAttributes.keys())this._indices.set(t,e)}else for(const[t,i]of e)i&&this._indices.set(t,d(i))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return(0,n.Wi)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)}computeAttachmentOriginTriangles(t){const e=this.indices.get("position"),i=this.vertexAttributes.get("position");return(0,h.cM)(i,e,t)}computeAttachmentOriginPoints(t){const e=this.indices.get("position"),i=this.vertexAttributes.get("position");return(0,h.NO)(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get("position");if(0===t.length)return null;const e=0===this.primitiveType?3:1;(0,s.hu)(t.length%e==0,"Indexing error: "+t.length+" not divisible by "+e);const i=(0,h.p)(t.length/e),n=this.vertexAttributes.get("position");return new l(i,e,t,n)}}function d(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}},10762:(t,e,i)=>{"use strict";i.d(e,{F5:()=>a,zh:()=>l,Pb:()=>c});var n=i(59472),r=i(49326),s=i(11379),o=i(30090);class a extends r.c{constructor(t,e){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=s.i,this._params=(0,o.Uf)(t,e),this.validateParameterValues(this._params)}dispose(){}get params(){return this._params}update(t){return!1}setParameterValues(t){(0,o.LO)(this._params,t)&&(this.validateParameterValues(this._params),this.parametersChanged())}validateParameterValues(t){}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.parametersChanged())}isVisibleInPass(t){return!0}get renderOccluded(){return this.params.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(t){t!==this._renderPriority&&(this._renderPriority=t,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(t){t!==this._insertOrder&&(this._insertOrder=t,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){(0,n.pC)(this.materialRepository)&&this.materialRepository.materialChanged(this)}}function c(t,e){return t.isVisible()&&t.isVisibleInPass(e.pass)&&0!=(t.renderOccluded&e.renderOccludedMask)}const l={renderOccluded:1}},88909:(t,e,i)=>{"use strict";i.d(e,{T:()=>b});var n=i(59472),r=i(77625),s=i(17387),o=i(17154),a=i(67128),c=i(12811),l=i(13633),u=i(49326),h=i(38035),f=i(32366);class d{constructor(){this._disposed=!1}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(t,e,i,n,r,s){this.id=(0,f.D)(),this.geometry=t,this.material=e,this.transformation=i,this.instanceParameters=n,this.origin=r,this._shaderTransformation=s,this._disposed=!1}dispose(){this._disposed=!0}getStaticTransformation(){return this.transformation}getShaderTransformation(){return(0,n.pC)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(t){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))&&((0,s.k)(t,t,this.getStaticTransformation()),!0)}}d.pool=new h.Z(d);var g=i(85450),p=i(56469),m=i(49366);class b extends u.c{constructor(t={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=(0,c.c)(),this._bvObjectSpace=new v,this._bvWorldSpace=new v,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==t.castShadow||t.castShadow,this.metadata=t.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new _),this.transformation=(0,c.c)();const{geometries:e,materials:i,transformations:n,origins:r}=t;if(Array.isArray(e)){(0,p.hu)(i.length===e.length,"Object3D: materials don't match geometries"),(0,p.hu)(n.length===e.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=e.length,this._geometries.length=e.length;for(let t=0;t<e.length;t++)this._geometries[t]=e[t],this._geometryRecords[t]=d.pool.acquire(e[t],i[t],(0,c.a)(n[t]),{highlights:null,occludees:null,visible:!0},r&&r[t])}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(t){(0,a.e)(this._objectTransformation,t),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}dispose(){for(const t of this._geometryRecords)d.pool.release(t);this._geometryRecords.length=0,this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,p.hu)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}getNumGeometryRecords(){return this._geometryRecords.length}getGeometryRecord(t){return(0,p.hu)(t>=0&&t<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[t]}addGeometry(t,e,i,r,s,o){i=i||c.I,this._geometries.push(t);const a=d.pool.acquire(t,e,i,r||{highlights:null,occludees:null,visible:!0},s,o);return this._geometryRecords.push(a),this._hasVolatileTransformation=this._hasVolatileTransformation||(0,n.pC)(a.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:a}),this._invalidateBoundingVolume(),a}removeGeometry(t){const e=this._geometryRecords.splice(t,1)[0];return this._hasVolatileTransformation=(0,n.pC)(e.shaderTransformation)?this._geometryRecords.some((t=>(0,n.pC)(t.shaderTransformation))):this._hasVolatileTransformation,e.dispose(),this._geometries.splice(t,1),this._emit("objectGeometryRemoved",{object:this,record:e}),this._invalidateBoundingVolume(),e}removeAllGeometries(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}geometryVertexAttrsUpdated(t){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[t]}),this._invalidateBoundingVolume()}get isVisible(){return this._visible}setVisible(t){this._visible=t;for(const t of this._geometryRecords)t.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)}maskOccludee(){const t=new g.O(1);for(const e of this._geometryRecords)e.instanceParameters.occludees=(0,m.lr)(e.instanceParameters.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometryRecords)e.instanceParameters.occludees=(0,m.U_)(e.instanceParameters.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new g.O(0);for(const e of this._geometryRecords)e.instanceParameters.highlights=(0,m.lr)(e.instanceParameters.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometryRecords)e.instanceParameters.highlights=(0,m.U_)(e.instanceParameters.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,e){return(0,a.m)((0,n.Pt)(e,(0,c.c)()),this.transformation,t.getStaticTransformation())}getCombinedShaderTransformation(t,e){return e=e||(0,c.c)(),(0,a.m)(e,this.transformation,t.getShaderTransformation()),e}hasVolativeTransformation(){return this._hasVolatileTransformation}getBBMin(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}getBBMax(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}getBounds(t){return this._validateBoundingVolume(),t?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let t=0;t<this._geometryRecords.length;++t){const e=this._geometries[t],i=this._geometryRecords[t],r=e.boundingInfo;(0,n.pC)(r)&&(this._calculateTransformedBoundingVolume(r,this._bvObjectSpace,i.getShaderTransformation()),this._calculateTransformedBoundingVolume(r,this._bvWorldSpace,this.getCombinedShaderTransformation(i)))}(0,s.e)(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),(0,s.e)(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);const t=(0,r.c)(),e=(0,r.c)(),i=(0,o.u1)(this.transformation);for(let r=0;r<this._geometryRecords.length;++r){const a=this._geometries[r].boundingInfo;if((0,n.Wi)(a))continue;const c=this._geometryRecords[r].getShaderTransformation(),l=(0,o.u1)(c);(0,s.k)(t,a.getCenter(),c);const u=(0,s.i)(t,this._bvObjectSpace.bounds),h=a.getBSRadius()*l;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],u+h),(0,s.k)(e,t,this.transformation);const f=(0,s.i)(e,this._bvWorldSpace.bounds),d=h*i;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],f+d)}this._bvDirty=!1}_calculateTransformedBoundingVolume(t,e,i){const n=t.getBBMin(),o=t.getBBMax(),a=(0,r.a)(n),c=(0,r.a)(o);(0,s.k)(a,a,i),(0,s.k)(c,c,i);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],a[t],c[t]),e.bbMax[t]=Math.max(e.bbMax[t],a[t],c[t]);for(let t=0;t<3;++t){(0,s.g)(a,n),(0,s.g)(c,o),a[t]=o[t],c[t]=n[t],(0,s.k)(a,a,i),(0,s.k)(c,c,i);for(let t=0;t<3;++t)e.bbMin[t]=Math.min(e.bbMin[t],a[t],c[t]),e.bbMax[t]=Math.max(e.bbMax[t],a[t],c[t])}}_invalidateBoundingVolume(){this._bvDirty=!0,(0,n.pC)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}_emit(t,e){(0,n.pC)(this._parentLayer)&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.indexOf(e)>-1,getGeometryIndex:e=>t._geometries.indexOf(e)}}}class _{constructor(){this.bbMin=(0,r.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=(0,r.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}class v extends _{constructor(){super(...arguments),this.bounds=(0,l.c)()}init(){(0,s.s)(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),(0,s.s)(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),(0,l.a)(this.bounds)}}},85450:(t,e,i)=>{"use strict";i.d(e,{O:()=>r});var n=i(32366);class r{constructor(t){this.channel=t,this.id=(0,n.D)()}}},66704:(t,e,i)=>{"use strict";i.d(e,{$L:()=>a,$x:()=>f,Vc:()=>c,E0:()=>u,ve:()=>l,wu:()=>r,je:()=>h});var n=i(36904);const r=(0,n.wK)(770,1,771,771),s=(0,n.if)(1,1),o=(0,n.if)(0,771);function a(t){return 2===t?null:1===t?o:s}function c(t){return 2===t?n.LZ:null}const l=5e5,u={factor:-1,units:-2};function h(t){return t?u:null}function f(t){return 3===t||2===t?513:515}},38391:(t,e,i)=>{"use strict";i.d(e,{zV:()=>r,JN:()=>n,RY:()=>a,eD:()=>c,ii:()=>l,YD:()=>u,P7:()=>o,s3:()=>s});const n={func:513},r={func:519},s={mask:255},o={mask:0},a={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},l={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},u={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},56469:(t,e,i)=>{"use strict";i.d(e,{hu:()=>a,tM:()=>d,RQ:()=>g,Kj:()=>h,zF:()=>f,Xv:()=>M,kG:()=>u,I0:()=>p,yK:()=>c,u_:()=>l,vP:()=>m});var n=i(33655),r=(i(77625),i(67128),i(55735),i(38256)),s=(i(34353),i(14286));(0,r.c)();class o{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function a(t,e){if(!t){e=e||"assert";const t=new Error(e);throw t.stack&&console.log(t.stack),new o(e)}}function c(t,e,i,n){let r,s=(i[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(r=s,s=o,o=r);let a=(i[1]-t[1])/e[1],c=(n[1]-t[1])/e[1];if(a>c&&(r=a,a=c,c=r),s>c||a>o)return!1;a>s&&(s=a),c<o&&(o=c);let l=(i[2]-t[2])/e[2],u=(n[2]-t[2])/e[2];return l>u&&(r=l,l=u,u=r),!(s>u||l>o||(u<o&&(o=u),o<0))}function l(t,e,i,n){t[12]=e,t[13]=i,t[14]=n}function u(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function h(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/e)}function f(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/i)}function d(t,e,i){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function g(t,e,i){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function p(t,e,i=0){const r=(0,n.uZ)(t,0,v);for(let t=0;t<4;t++)e[i+t]=Math.floor(256*y(r*b[t]))}function m(t,e=0){let i=0;for(let n=0;n<4;n++)i+=t[e+n]*_[n];return i}const b=[1,256,65536,16777216],_=[1/256,1/65536,1/16777216,1/4294967296],v=m(new Uint8ClampedArray([255,255,255,255]));function y(t){return t-Math.floor(t)}function M(t,e,i,n,r){const o=t;0===t[11]?(n[0]=2/(e*o[0]),n[1]=2/(i*o[5]),n[2]=(1+o[12])/o[0],n[3]=(1+o[13])/o[5],(0,s.s)(r,0,1)):(n[0]=-2/(e*o[0]),n[1]=-2/(i*o[5]),n[2]=(1-o[8])/o[0],n[3]=(1-o[9])/o[5],(0,s.s)(r,1,0))}},71061:(t,e,i)=>{"use strict";function n(t,e,i){for(let n=0;n<i;++n)e[2*n]=t[n],e[2*n+1]=t[n]-e[2*n]}function r(t,e,i,r){for(let a=0;a<r;++a)s[0]=t[a],n(s,o,1),e[a]=o[0],i[a]=o[1]}i.d(e,{LF:()=>n,po:()=>r});const s=new Float64Array(1),o=new Float32Array(2)},27898:(t,e,i)=>{"use strict";i.d(e,{qZ:()=>f,NO:()=>h,cM:()=>u,p:()=>l});var n=i(77625),r=i(17387),s=i(56938);let o=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const a=new Uint16Array([0]),c=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function l(t){if(1===t)return a;if(t<c.length)return new Uint16Array(c.buffer,0,t);if(t>o.length){const e=Math.max(2*o.length,t);o=new Uint32Array(e);for(let t=0;t<o.length;t++)o[t]=t}return new Uint32Array(o.buffer,0,t)}function u(t,e,i){if(!t)return!1;const{size:n,data:o}=t;(0,r.s)(i,0,0,0),(0,r.s)(m,0,0,0);let a=0,c=0;for(let t=0;t<e.length-2;t+=3){const l=e[t+0]*n,u=e[t+1]*n,h=e[t+2]*n;(0,r.s)(d,o[l+0],o[l+1],o[l+2]),(0,r.s)(g,o[u+0],o[u+1],o[u+2]),(0,r.s)(p,o[h+0],o[h+1],o[h+2]);const f=(0,s.a)(d,g,p);f?((0,r.b)(d,d,g),(0,r.b)(d,d,p),(0,r.a)(d,d,1/3*f),(0,r.b)(i,i,d),a+=f):((0,r.b)(m,m,d),(0,r.b)(m,m,g),(0,r.b)(m,m,p),c+=3)}return!(0===c&&0===a||(0!==a?((0,r.a)(i,i,1/a),0):0===c||((0,r.a)(i,m,1/c),0)))}function h(t,e,i){if(!t||!e)return!1;const{size:n,data:s}=t;(0,r.s)(i,0,0,0);let o=-1,a=0;for(let t=0;t<e.length;t++){const r=e[t]*n;o!==r&&(i[0]+=s[r+0],i[1]+=s[r+1],i[2]+=s[r+2],a++),o=r}return a>1&&(0,r.a)(i,i,1/a),a>0}function f(t,e,i,n){if(!t)return!1;const{size:s,data:o}=t;(0,r.s)(n,0,0,0),(0,r.s)(m,0,0,0);let a=0,c=0;const l=e?e.length-1:o.length/s-1,u=l+(i?2:0);for(let t=0;t<u;t+=2){const i=t<l?t:l,u=t<l?t+1:0,h=(e?e[i]:i)*s,f=(e?e[u]:u)*s;d[0]=o[h+0],d[1]=o[h+1],d[2]=o[h+2],g[0]=o[f+0],g[1]=o[f+1],g[2]=o[f+2],(0,r.a)(d,(0,r.b)(d,d,g),.5);const p=(0,r.j)(d,g);p>0?((0,r.b)(n,n,(0,r.a)(d,d,p)),a+=p):((0,r.b)(m,m,d),c++)}return 0!==a?((0,r.a)(n,n,1/a),!0):0!==c&&((0,r.a)(n,m,1/c),!0)}const d=(0,n.c)(),g=(0,n.c)(),p=(0,n.c)(),m=(0,n.c)()},10346:(t,e,i)=>{"use strict";i.d(e,{hf:()=>u,ow:()=>l});var n=i(11379),r=i(69595),s=i(8634),o=i(74038);const a=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],c=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function l(t,e=a,i=n.i,s=-1,l=1){let u=null;switch(e){case c:u=new Float32Array([s,s,0,0,l,s,1,0,s,l,0,1,l,l,1,1]);break;case a:default:u=new Float32Array([s,s,l,s,s,l,l,l])}return new o.Z(t,i,{geometry:e},{geometry:r.Z.createVertex(t,35044,u)})}function u(t){return new s.Z(t,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},81495:(t,e,i)=>{"use strict";i.d(e,{om:()=>_,xM:()=>x,LV:()=>M,yn:()=>v,cy:()=>w,W9:()=>P});var n=i(59472),r=i(77625),s=i(17387),o=i(67128),a=i(98501),c=i(30663),l=i(12811),u=i(32232),h=i(38256),f=i(34353),d=i(13633),g=(i(55534),i(88)),p=i(2847),m=i(69236),b=i(88909);class _{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.store=2}}class v{constructor(){this._transform=(0,l.c)(),this._transformInverse=new y({value:this._transform},o.c,l.c),this._transformInverseTranspose=new y(this._transformInverse,o.d,l.c),this._transformTranspose=new y({value:this._transform},o.d,l.c),this._transformInverseRotation=new y({value:this._transform},a.n,c.c)}invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,o.e)(this._transform,t)}multiplyTransform(t){(0,o.m)(this._transform,this._transform,t)}set(t){(0,o.e)(this._transform,t),this.invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,e){this.setTransformMatrix(t),this.multiplyTransform(e),this.invalidateLazyTransforms()}}class y{constructor(t,e,i){this.original=t,this.update=e,this.dirty=!0,this.transform=i()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}class M{constructor(){this.min=new x,this.max=new x,this.hud=new x,this.ground=new x}init(t){this.min.init(t),this.max.init(t),this.hud.init(t),this.ground.init(t),this.all=[]}}class x{constructor(t){this.normal=(0,r.c)(),this.transformation=(0,l.c)(),this._ray=g.kx.create(),this.init(t)}get ray(){return this._ray}get hasIntersectionPoint(){return null!=this.dist}get distanceInRenderSpace(){if(null!=this.dist)return(0,s.a)(I,this.ray.direction,this.dist),(0,s.l)(I)}getIntersectionPoint(t){return!!this.hasIntersectionPoint&&((0,s.a)(I,this.ray.direction,this.dist),(0,s.b)(t,this.ray.origin,I),!0)}getTransformedNormal(t){return(0,s.g)(O,this.normal),O[3]=0,(0,f.t)(O,O,this.transformation),(0,s.g)(t,O),(0,s.n)(t,t),t}init(t){this.dist=void 0,this.target=void 0,this.name=void 0,this.drapedLayerOrder=void 0,this.drapedLayerGraphicOrder=void 0,this.center=null,this.geometryId=null,this.triangleNr=null,this.intersector="Stage",t?g.kx.copy(t,this._ray):this._ray=g.kx.create()}set(t,e,i,n,a,c,l,u,h,f){t instanceof b.T&&(t={type:"stage",obj:t}),this.dist=i,(0,s.g)(this.normal,n),(0,o.e)(this.transformation,a),this.target=t,this.name=e,this.drapedLayerOrder=c,this.center=l?(0,r.a)(l):null,this.geometryId=u,this.triangleNr=h,this.drapedLayerGraphicOrder=f}copyFrom(t){g.kx.copy(t._ray,this._ray),this.dist=t.dist,this.target=t.target,this.name=t.name,this.drapedLayerOrder=t.drapedLayerOrder,this.center=t.center?(0,r.a)(t.center):null,this.geometryId=t.geometryId,this.triangleNr=t.triangleNr,this.intersector=t.intersector,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,(0,s.g)(this.normal,t.normal),(0,o.e)(this.transformation,t.transformation)}toOwner(t){if(!this.target)return null;switch(this.target.type){case"stage":return S(this.target.obj.metadata,t);case"external":switch(this.intersector){case"PointRenderer":return function(t,e){const i=t.metadata.layerUid;return null!=i?e.map.findLayerByUid(i):null}(this.target,t);case"I3S":case"IM":case"LodRenderer":case"OverlayRenderer":return S(this.target.metadata,t);case"TerrainRenderer":return t.map&&t.map.ground}}return null}toGraphic(t){if(!this.target)return null;switch(this.target.type){case"stage":return T(this.target.obj.metadata,t);case"external":switch(this.intersector){case"PointRenderer":return function(t){return t.metadata.createGraphic()}(this.target);case"I3S":case"IM":case"LodRenderer":case"OverlayRenderer":return T(this.target.metadata,t)}}return null}}function S(t,e){return(0,n.Wi)(t)||null==t.layerUid?null:(0,n.pC)(e.graphicsView)&&t.layerUid===e.graphicsView.graphics3d.layer.id?e.graphics:e.map.findLayerByUid(t.layerUid)}function T(t,e){if((0,n.Wi)(t))return null;const i=S(t,e);if((0,n.Wi)(i))return null;if(i===e.graphics)return(0,n.pC)(e.graphicsView)?(0,n.Wg)(e.graphicsView.getGraphicFromGraphicUid(t.graphicUid)):null;const r=e.allLayerViews.find((t=>t.layer===i));return r?function(t,e){return!t||t.suspended?null:"getGraphicFromIntersectorMetadata"in t&&e?t.getGraphicFromIntersectorMetadata(e):"getGraphicFromGraphicUid"in t&&null!=e.graphicUid?t.getGraphicFromGraphicUid(e.graphicUid):null}(r,t):null}const A=new class{constructor(t=0){this.offset=t,this.sphere=(0,d.c)(),this.tmpVertex=(0,r.c)()}applyToVertex(t,e,i){const n=this.objectTransform.transform;let r=n[0]*t+n[4]*e+n[8]*i+n[12],s=n[1]*t+n[5]*e+n[9]*i+n[13],o=n[2]*t+n[6]*e+n[10]*i+n[14];const a=this.offset/Math.sqrt(r*r+s*s+o*o);r+=r*a,s+=s*a,o+=o*a;const c=this.objectTransform.inverse;return this.tmpVertex[0]=c[0]*r+c[4]*s+c[8]*o+c[12],this.tmpVertex[1]=c[1]*r+c[5]*s+c[9]*o+c[13],this.tmpVertex[2]=c[2]*r+c[6]*s+c[10]*o+c[14],this.tmpVertex}applyToMinMax(t,e){const i=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*i,t[1]+=t[1]*i,t[2]+=t[2]*i;const n=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*n,e[1]+=e[1]*n,e[2]+=e[2]*n}applyToAabb(t){const e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e,t[1]+=t[1]*e,t[2]+=t[2]*e;const i=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*i,t[4]+=t[4]*i,t[5]+=t[5]*i,t}applyToBoundingSphere(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/e;return this.sphere[0]=t[0]+t[0]*i,this.sphere[1]=t[1]+t[1]*i,this.sphere[2]=t[2]+t[2]*i,this.sphere[3]=t[3]+t[3]*this.offset/e,this.sphere}};function P(t){return(0,n.pC)(t)?(A.offset=t,A):null}new class{constructor(t=0){this.offset=t,this.componentLocalOriginLength=0,this.tmpVertex=(0,r.c)(),this.mbs=(0,h.c)(),this.obb={center:(0,r.c)(),halfSize:(0,m.c)(),quaternion:null}}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,e,i){const n=t,r=e,s=i+this.componentLocalOriginLength,o=this.offset/Math.sqrt(n*n+r*r+s*s);return this.tmpVertex[0]=t+n*o,this.tmpVertex[1]=e+r*o,this.tmpVertex[2]=i+s*o,this.tmpVertex}applyToAabb(t){const e=t[0],i=t[1],n=t[2]+this.componentLocalOriginLength,r=t[3],s=t[4],o=t[5]+this.componentLocalOriginLength,a=this.offset/Math.sqrt(e*e+i*i+n*n);t[0]+=e*a,t[1]+=i*a,t[2]+=n*a;const c=this.offset/Math.sqrt(r*r+s*s+o*o);return t[3]+=r*c,t[4]+=s*c,t[5]+=o*c,t}applyToMbs(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/e;return this.mbs[0]=t[0]+t[0]*i,this.mbs[1]=t[1]+t[1]*i,this.mbs[2]=t[2]+t[2]*i,this.mbs[3]=t[3]+t[3]*this.offset/e,this.mbs}applyToObb(t){const e=t.center,i=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);this.obb.center[0]=e[0]+e[0]*i,this.obb.center[1]=e[1]+e[1]*i,this.obb.center[2]=e[2]+e[2]*i,(0,s.q)(this.obb.halfSize,t.halfSize,t.quaternion),(0,s.b)(this.obb.halfSize,this.obb.halfSize,t.center);const n=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);return this.obb.halfSize[0]+=this.obb.halfSize[0]*n,this.obb.halfSize[1]+=this.obb.halfSize[1]*n,this.obb.halfSize[2]+=this.obb.halfSize[2]*n,(0,s.f)(this.obb.halfSize,this.obb.halfSize,t.center),(0,p.c)(W,t.quaternion),(0,s.q)(this.obb.halfSize,this.obb.halfSize,W),this.obb.halfSize[0]*=this.obb.halfSize[0]<0?-1:1,this.obb.halfSize[1]*=this.obb.halfSize[1]<0?-1:1,this.obb.halfSize[2]*=this.obb.halfSize[2]<0?-1:1,this.obb.quaternion=t.quaternion,this.obb}};new class{constructor(t=0){this.offset=t,this.tmpVertex=(0,r.c)()}applyToVertex(t,e,i){const n=t+this.localOrigin[0],r=e+this.localOrigin[1],s=i+this.localOrigin[2],o=this.offset/Math.sqrt(n*n+r*r+s*s);return this.tmpVertex[0]=t+n*o,this.tmpVertex[1]=e+r*o,this.tmpVertex[2]=i+s*o,this.tmpVertex}applyToAabb(t){const e=t[0]+this.localOrigin[0],i=t[1]+this.localOrigin[1],n=t[2]+this.localOrigin[2],r=t[3]+this.localOrigin[0],s=t[4]+this.localOrigin[1],o=t[5]+this.localOrigin[2],a=this.offset/Math.sqrt(e*e+i*i+n*n);t[0]+=e*a,t[1]+=i*a,t[2]+=n*a;const c=this.offset/Math.sqrt(r*r+s*s+o*o);return t[3]+=r*c,t[4]+=s*c,t[5]+=o*c,t}};const w="terrain",I=((0,r.c)(),(0,r.c)()),O=(0,h.c)(),W=(0,u.c)()},24379:(t,e,i)=>{"use strict";i.d(e,{TU:()=>c,sX:()=>o,PV:()=>a,bA:()=>l});var n=i(33655);function r(t,e,i){const n=i.parameters,r=i.paddingPixelsOverride;return u.scale=Math.min(n.divisor/(e-n.offset),1),u.factor=function(t){return Math.abs(t*t*t)}(t),u.minPixelSize=n.minPixelSize,u.paddingPixels=r,u}function s(t,e){return 0===t?e.minPixelSize:e.minPixelSize*(1+2*e.paddingPixels/t)}function o(t,e){return Math.max((0,n.t7)(t*e.scale,t,e.factor),s(t,e))}function a(t,e,i,n){n.scale=function(t,e,i){const n=r(t,e,i);return n.minPixelSize=0,n.paddingPixels=0,o(1,n)}(t,e,i),n.factor=0,n.minPixelSize=i.parameters.minPixelSize,n.paddingPixels=i.paddingPixelsOverride}function c(t,e,i=[0,0]){const n=Math.min(Math.max(e.scale,s(t[1],e)/t[1]),1);return i[0]=t[0]*n,i[1]=t[1]*n,i}function l(t,e,i,n){return o(t,r(e,i,n))}(0,n.Vl)(10),(0,n.Vl)(12),(0,n.Vl)(70),(0,n.Vl)(40);const u={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},30090:(t,e,i)=>{"use strict";i.d(e,{bj:()=>x,FZ:()=>w,Uf:()=>S,TT:()=>A,Bw:()=>f,LO:()=>T,Hx:()=>M});var n=i(59472),r=i(33655),s=i(77625),o=i(17387),a=i(69996),c=i(56469),l=i(49366),u=i(24379);const h=(0,a.Ue)();function f(t,e,i,n,r,s,o){const a=(0,l.PD)(e),u=i.tolerance;if(!a)if(t.boundingInfo)(0,c.hu)(0===t.primitiveType),g(t.boundingInfo,n,r,u,s,o);else{const e=t.indices.get("position"),i=t.vertexAttributes.get("position");b(n,r,0,e.length/3,e,i,void 0,s,o)}}const d=(0,s.c)();function g(t,e,i,r,s,c){if((0,n.Wi)(t))return;const l=function(t,e,i){return(0,o.s)(i,1/(e[0]-t[0]),1/(e[1]-t[1]),1/(e[2]-t[2]))}(e,i,d);if((0,a.op)(h,t.getBBMin()),(0,a.Tn)(h,t.getBBMax()),(0,n.pC)(s)&&s.applyToAabb(h),function(t,e,i,n){return function(t,e,i,n,r){const s=(t[0]-n-e[0])*i[0],o=(t[3]+n-e[0])*i[0];let a=Math.min(s,o),c=Math.max(s,o);const l=(t[1]-n-e[1])*i[1],u=(t[4]+n-e[1])*i[1];if(c=Math.min(c,Math.max(l,u)),c<0)return!1;if(a=Math.max(a,Math.min(l,u)),a>c)return!1;const h=(t[2]-n-e[2])*i[2],f=(t[5]+n-e[2])*i[2];return c=Math.min(c,Math.max(h,f)),!(c<0)&&(a=Math.max(a,Math.min(h,f)),!(a>c)&&a<r)}(t,e,i,n,1/0)}(h,e,l,r)){const{primitiveIndices:n,indices:o,position:a}=t,l=n?n.length:o.length/3;if(l>I){const n=t.getChildren();if(void 0!==n){for(let t=0;t<8;++t)void 0!==n[t]&&g(n[t],e,i,r,s,c);return}}b(e,i,0,l,o,a,n,s,c)}}const p=2**-52,m=(0,s.c)();function b(t,e,i,r,s,o,a,c,l){if(a)return function(t,e,i,r,s,o,a,c,l){const u=o.data,h=o.stride||o.size,f=t[0],d=t[1],g=t[2],b=e[0]-f,_=e[1]-d,v=e[2]-g;for(let t=i;t<r;++t){const e=a[t];let i=3*e,r=h*s[i++],o=u[r++],M=u[r++],x=u[r];r=h*s[i++];let S=u[r++],T=u[r++],A=u[r];r=h*s[i];let P=u[r++],w=u[r++],I=u[r];(0,n.pC)(c)&&([o,M,x]=c.applyToVertex(o,M,x,t),[S,T,A]=c.applyToVertex(S,T,A,t),[P,w,I]=c.applyToVertex(P,w,I,t));const O=S-o,W=T-M,F=A-x,V=P-o,L=w-M,B=I-x,z=_*B-L*v,C=v*V-B*b,R=b*L-V*_,D=O*z+W*C+F*R;if(Math.abs(D)<=p)continue;const j=f-o,U=d-M,k=g-x,E=j*z+U*C+k*R;if(D>0){if(E<0||E>D)continue}else if(E>0||E<D)continue;const H=U*F-W*k,N=k*O-F*j,q=j*W-O*U,G=b*H+_*N+v*q;if(D>0){if(G<0||E+G>D)continue}else if(G>0||E+G<D)continue;const $=(V*H+L*N+B*q)/D;$>=0&&l($,y(O,W,F,V,L,B,m),e)}}(t,e,i,r,s,o,a,c,l);const u=o.data,h=o.stride||o.size,f=t[0],d=t[1],g=t[2],b=e[0]-f,_=e[1]-d,v=e[2]-g;for(let t=i,e=3*i;t<r;++t){let i=h*s[e++],r=u[i++],o=u[i++],a=u[i];i=h*s[e++];let M=u[i++],x=u[i++],S=u[i];i=h*s[e++];let T=u[i++],A=u[i++],P=u[i];(0,n.pC)(c)&&([r,o,a]=c.applyToVertex(r,o,a,t),[M,x,S]=c.applyToVertex(M,x,S,t),[T,A,P]=c.applyToVertex(T,A,P,t));const w=M-r,I=x-o,O=S-a,W=T-r,F=A-o,V=P-a,L=_*V-F*v,B=v*W-V*b,z=b*F-W*_,C=w*L+I*B+O*z;if(Math.abs(C)<=p)continue;const R=f-r,D=d-o,j=g-a,U=R*L+D*B+j*z;if(C>0){if(U<0||U>C)continue}else if(U>0||U<C)continue;const k=D*O-I*j,E=j*w-O*R,H=R*I-w*D,N=b*k+_*E+v*H;if(C>0){if(N<0||U+N>C)continue}else if(N>0||U+N<C)continue;const q=(W*k+F*E+V*H)/C;q>=0&&l(q,y(w,I,O,W,F,V,m),t)}}const _=(0,s.c)(),v=(0,s.c)();function y(t,e,i,n,r,s,a){return(0,o.s)(_,t,e,i),(0,o.s)(v,n,r,s),(0,o.c)(a,_,v),(0,o.n)(a,a),a}function M(t,e,i,n,s){let o=(i.screenLength||0)*t.pixelRatio;s&&(o=(0,u.bA)(o,n,e,s));const a=o*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return(0,r.YU)(a*e,i.minWorldLength||0,null!=i.maxWorldLength?i.maxWorldLength:1/0)}function x(t,e,i){if(!t)return;const n=t.parameters,r=t.paddingPixelsOverride;e.setUniform4f(i,n.divisor,n.offset,n.minPixelSize,r)}function S(t,e){const i=e?S(e):{};for(const e in t){let n=t[e];n&&n.forEach&&(n=P(n)),null==n&&e in i||(i[e]=n)}return i}function T(t,e){let i=!1;for(const n in e){const r=e[n];void 0!==r&&(i=!0,Array.isArray(r)?t[n]=r.slice():t[n]=r)}return i}function A(t,e,i,n,s){if(!e.options.selectionMode)return;const o=t.vertexAttributes.get("position").data,a=t.vertexAttributes.get("size"),c=a&&a.data[0],l=i[0],u=i[1],h=((c+n)/2+4)*t.screenToWorldRatio;let f=Number.MAX_VALUE;for(let t=0;t<o.length-5;t+=3){const e=o[t],i=o[t+1],n=l-e,s=u-i,a=o[t+3]-e,c=o[t+4]-i,h=(0,r.uZ)((a*n+c*s)/(a*a+c*c),0,1),d=a*h-n,g=c*h-s,p=d*d+g*g;p<f&&(f=p)}f<h*h&&s()}function P(t){const e=[];return t.forEach((t=>e.push(t))),e}const w={multiply:1,ignore:2,replace:3,tint:4},I=1e3},13405:(t,e,i)=>{"use strict";i.d(e,{SW:()=>a,Vs:()=>u,NK:()=>h,s5:()=>l,ho:()=>c});var n=i(56469),r=i(12608);function s(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=2*t[i];s[n]=e[r],s[n+1]=e[r+1],n+=o}else for(let i=0;i<a;++i){const a=2*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],n+=o}}function o(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=3*t[i];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],n+=o}else for(let i=0;i<a;++i){const a=3*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],s[n+2]=e[a+2],n+=o}}function a(t,e,i,n,r){const s=i.typedBuffer,o=i.typedBufferStride,a=t.length;if(n*=o,null==r||1===r)for(let i=0;i<a;++i){const r=4*t[i];s[n]=e[r],s[n+1]=e[r+1],s[n+2]=e[r+2],s[n+3]=e[r+3],n+=o}else for(let i=0;i<a;++i){const a=4*t[i];for(let t=0;t<r;++t)s[n]=e[a],s[n+1]=e[a+1],s[n+2]=e[a+2],s[n+3]=e[a+3],n+=o}}function c(t,e,i,n,r,s){if(i){const o=i,a=n.typedBuffer,c=n.typedBufferStride,l=t.length;if(r*=c,null==s||1===s)for(let i=0;i<l;++i){const n=3*t[i],s=e[n],l=e[n+1],u=e[n+2];a[r]=o[0]*s+o[4]*l+o[8]*u+o[12],a[r+1]=o[1]*s+o[5]*l+o[9]*u+o[13],a[r+2]=o[2]*s+o[6]*l+o[10]*u+o[14],r+=c}else for(let i=0;i<l;++i){const n=3*t[i],l=e[n],u=e[n+1],h=e[n+2],f=o[0]*l+o[4]*u+o[8]*h+o[12],d=o[1]*l+o[5]*u+o[9]*h+o[13],g=o[2]*l+o[6]*u+o[10]*h+o[14];for(let t=0;t<s;++t)a[r]=f,a[r+1]=d,a[r+2]=g,r+=c}}else o(t,e,n,r,s)}function l(t,e,i,n,r,s){if(i){const o=i,a=n.typedBuffer,c=n.typedBufferStride,l=t.length,u=o[0],h=o[1],f=o[2],d=o[4],g=o[5],p=o[6],m=o[8],b=o[9],_=o[10],v=Math.abs(1-u*u+d*d+m*m)>1e-5||Math.abs(1-h*h+g*g+b*b)>1e-5||Math.abs(1-f*f+p*p+_*_)>1e-5;if(r*=c,null==s||1===s)for(let i=0;i<l;++i){const n=3*t[i],s=e[n],o=e[n+1],l=e[n+2];let y=u*s+d*o+m*l,M=h*s+g*o+b*l,x=f*s+p*o+_*l;if(v){const t=y*y+M*M+x*x;if(t<.999999&&t>1e-6){const e=Math.sqrt(t);y/=e,M/=e,x/=e}}a[r+0]=y,a[r+1]=M,a[r+2]=x,r+=c}else for(let i=0;i<l;++i){const n=3*t[i],o=e[n],l=e[n+1],y=e[n+2];let M=u*o+d*l+m*y,x=h*o+g*l+b*y,S=f*o+p*l+_*y;if(v){const t=M*M+x*x+S*S;if(t<.999999&&t>1e-6){const e=Math.sqrt(t);M/=e,x/=e,S/=e}}for(let t=0;t<s;++t)a[r+0]=M,a[r+1]=x,a[r+2]=S,r+=c}}else o(t,e,n,r,s)}function u(t,e,i,n,r,s){const o=n.typedBuffer,a=n.typedBufferStride,c=t.length;if(r*=a,null==s||1===s){if(4===i)for(let i=0;i<c;++i){const n=4*t[i];o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=e[n+3],r+=a}else if(3===i)for(let i=0;i<c;++i){const n=3*t[i];o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=255,r+=a}}else if(4===i)for(let i=0;i<c;++i){const n=4*t[i];for(let t=0;t<s;++t)o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=e[n+3],r+=a}else if(3===i)for(let i=0;i<c;++i){const n=3*t[i];for(let t=0;t<s;++t)o[r]=e[n],o[r+1]=e[n+1],o[r+2]=e[n+2],o[r+3]=255,r+=a}}function h(t,e,i,o,h,f){for(const d of e.fieldNames){const e=t.vertexAttributes.get(d),g=t.indices.get(d);if(e&&g)switch(d){case"position":{(0,n.hu)(3===e.size);const t=h.getField(d,r.ct);t&&c(g,e.data,i,t,f);break}case"normal":{(0,n.hu)(3===e.size);const t=h.getField(d,r.ct);t&&l(g,e.data,o,t,f);break}case"uv0":{(0,n.hu)(2===e.size);const t=h.getField(d,r.Eu);t&&s(g,e.data,t,f);break}case"color":{(0,n.hu)(3===e.size||4===e.size);const t=h.getField(d,r.mc);t&&u(g,e.data,e.size,t,f);break}case"symbolColor":{(0,n.hu)(3===e.size||4===e.size);const t=h.getField(d,r.mc);t&&u(g,e.data,e.size,t,f);break}case"tangent":{(0,n.hu)(4===e.size);const t=h.getField(d,r.ek);t&&a(g,e.data,t,f);break}}}}},49366:(t,e,i)=>{"use strict";i.d(e,{a9:()=>u,lr:()=>a,Wr:()=>f,PD:()=>l,BX:()=>h,U_:()=>c});var n=i(59472),r=i(67128),s=i(12811),o=i(56469);i(71061);function a(t,e){return(0,n.Wi)(t)&&(t=[]),t.push(e),t}function c(t,e){if((0,n.Wi)(t))return t;const i=t.filter((t=>t!==e));return 0===i.length?null:i}function l(t){return!!(0,n.pC)(t)&&!t.visible}function u(t,e){const i=new Map;return i.set(0,e.acquire(t,0)),i.set(1,e.acquire(t,7)),i.set(4,e.acquire(t,3)),i.set(3,e.acquire(t,2)),i.set(2,e.acquire(t,1)),i.set(5,e.acquire(t,4)),i.set(7,e.acquire(t,3)),i.set(6,e.acquire(t,3)),i}function h(t,e){e.release(t,0),e.release(t,7),e.release(t,3),e.release(t,2),e.release(t,1),e.release(t,4)}function f(t,e,i){const s=t.origin.vec3;(0,o.u_)(d,-s[0],-s[1],-s[2]),(0,n.pC)(t.transformation)?(0,r.m)(e,d,t.transformation):(0,r.e)(e,d),i&&((0,r.c)(i,e),(0,r.d)(i,i))}new Float64Array(3),new Float32Array(6);const d=(0,s.c)()},36904:(t,e,i)=>{"use strict";function n(t,e,i=32774,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function r(t,e,i,n,r=32774,s=32774,o=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:n,opRgb:r,opAlpha:s,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}i.d(e,{jp:()=>z,BK:()=>o,LZ:()=>s,sm:()=>p,wK:()=>r,if:()=>n});const s={zNear:0,zFar:1},o={r:!0,g:!0,b:!0,a:!0};function a(t){return _.intern(t)}function c(t){return y.intern(t)}function l(t){return x.intern(t)}function u(t){return T.intern(t)}function h(t){return P.intern(t)}function f(t){return I.intern(t)}function d(t){return W.intern(t)}function g(t){return V.intern(t)}function p(t){return B.intern(t)}class m{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}function b(t){return"["+t.join(",")+"]"}const _=new m(v,(t=>({__tag:"Blending",...t})));function v(t){return t?b([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const y=new m(M,(t=>({__tag:"Culling",...t})));function M(t){return t?b([t.face,t.mode]):null}const x=new m(S,(t=>({__tag:"PolygonOffset",...t})));function S(t){return t?b([t.factor,t.units]):null}const T=new m(A,(t=>({__tag:"DepthTest",...t})));function A(t){return t?b([t.func]):null}const P=new m(w,(t=>({__tag:"StencilTest",...t})));function w(t){return t?b([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const I=new m(O,(t=>({__tag:"DepthWrite",...t})));function O(t){return t?b([t.zNear,t.zFar]):null}const W=new m(F,(t=>({__tag:"ColorWrite",...t})));function F(t){return t?b([t.r,t.g,t.b,t.a]):null}const V=new m(L,(t=>({__tag:"StencilWrite",...t})));function L(t){return t?b([t.mask]):null}const B=new m((function(t){return t?b([v(t.blending),M(t.culling),S(t.polygonOffset),A(t.depthTest),w(t.stencilTest),O(t.depthWrite),F(t.colorWrite),L(t.stencilWrite)]):null}),(t=>({blending:a(t.blending),culling:c(t.culling),polygonOffset:l(t.polygonOffset),depthTest:u(t.depthTest),stencilTest:h(t.stencilTest),depthWrite:f(t.depthWrite),colorWrite:d(t.colorWrite),stencilWrite:g(t.stencilWrite)})));class z{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this.setBlending(t.blending),this.setCulling(t.culling),this.setPolygonOffset(t.polygonOffset),this.setDepthTest(t.depthTest),this.setStencilTest(t.stencilTest),this.setDepthWrite(t.depthWrite),this.setColorWrite(t.colorWrite),this.setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}setBlending(t){this._blending=this.setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}setCulling(t){this._culling=this.setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}setPolygonOffset(t){this._polygonOffset=this.setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}setDepthTest(t){this._depthTest=this.setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}setStencilTest(t){this._stencilTest=this.setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}setDepthWrite(t){this._depthWrite=this.setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}setColorWrite(t){this._colorWrite=this.setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}setStencilWrite(t){this._stencilWrite=this.setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}}}]);
//# sourceMappingURL=6562.js.map