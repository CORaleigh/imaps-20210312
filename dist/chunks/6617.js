(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[6617,1012,995],{71012:(t,e,n)=>{"use strict";n.d(e,{b:()=>r,c:()=>s,g:()=>i});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return r(null==e&&n.path)}},n.exports),n.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},92823:(t,e,n)=>{"use strict";n.d(e,{Xq:()=>s,WJ:()=>r});var i=n(62698);class s{constructor(t,e,n){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,n,i=0){this._storage.put(this._namespace+t,e,n,i)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this._namespace+t,e,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class r{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new i.Z}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,n,i){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==e&&this._notifyRemoved(t,s.entry)),n>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:n,lifetime:r,lives:r}),this._size+=n,this._checkSizeLimit()}updateSize(t,e,n){const i=this._db.get(t);if(i&&i.entry===e){if(this._size-=i.size,n>this._maxSize)return this._db.delete(t),void this._notifyRemoved(t,e);i.size=n,this._size+=n,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,i)=>{const s=t.lifetime;n[s]=(n[s]||0)+t.size,this._users.forAll((n=>{const s=n.namespace;if(i.startsWith(s)){const n=e[s]||0;e[s]=n+t.size}}))}));const i={};this._users.forAll((t=>{const n=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const s=e[n]||0;e[n]=s,i[n]=Math.round(100*t.hitRate)+"%"}else i[n]="0%"}));const s=Object.keys(e);s.forEach((t=>e[t]=e[t]/this._size*100)),s.sort(((t,n)=>e[n]-e[t])),s.forEach((n=>t[n]=Math.round(e[n])+"% / "+i[n]));for(let e=n.length-1;e>=0;--e){const i=n[e];i&&(t["Priority "+(e+-3-1)]=Math.round(i/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemoved(n,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((n=>{t.startsWith(n[0])&&n[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}},69996:(t,e,n)=>{"use strict";n.d(e,{Gv:()=>z,be:()=>f,Ue:()=>s,cS:()=>v,fS:()=>w,TC:()=>o,G1:()=>a,pp:()=>u,JR:()=>x,al:()=>r,KE:()=>d,bA:()=>m,t8:()=>y,Tn:()=>g,op:()=>_,dp:()=>p});var i=n(59472);n(52937),n(50897);function s(t=S){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function r(t,e,n,i,r,o,u=s()){return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=r,u[5]=o,u}function o(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function u(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function a(t,e,n=0,i=e.length/3){let s=t[0],r=t[1],o=t[2],u=t[3],a=t[4],l=t[5];for(let t=0;t<i;t++)s=Math.min(s,e[n+3*t]),r=Math.min(r,e[n+3*t+1]),o=Math.min(o,e[n+3*t+2]),u=Math.max(u,e[n+3*t]),a=Math.max(a,e[n+3*t+1]),l=Math.max(l,e[n+3*t+2]);t[0]=s,t[1]=r,t[2]=o,t[3]=u,t[4]=a,t[5]=l}function l(t){return t[0]>=t[3]?0:t[3]-t[0]}function c(t){return t[1]>=t[4]?0:t[4]-t[1]}function h(t){return t[2]>=t[5]?0:t[5]-t[2]}function f(t,e=[0,0,0]){return e[0]=t[0]+l(t)/2,e[1]=t[1]+c(t)/2,e[2]=t[2]+h(t)/2,e}function p(t,e=[0,0,0]){return e[0]=l(t),e[1]=c(t),e[2]=h(t),e}function m(t,e,n=t){const i=t[0]+l(t)/2,s=t[1]+c(t)/2,r=t[2]+h(t)/2;return n[0]=i+(t[0]-i)*e,n[1]=s+(t[1]-s)*e,n[2]=r+(t[2]-r)*e,n[3]=i+(t[3]-i)*e,n[4]=s+(t[4]-s)*e,n[5]=r+(t[5]-r)*e,n}function d(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function _(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function g(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function v(t){return t?y(t,z):s(z)}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function b(t){return 6===t.length}function w(t,e,n){if((0,i.Wi)(t)||(0,i.Wi)(e))return t===e;if(!b(t)||!b(e))return!1;if(n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const z=[1/0,1/0,1/0,-1/0,-1/0,-1/0],S=[0,0,0,0,0,0];s()},50897:(t,e,n)=>{"use strict";n.d(e,{Gv:()=>x,SO:()=>f,d9:()=>r,r3:()=>y,BD:()=>p,Qn:()=>m,Zm:()=>_,jE:()=>d,Ue:()=>s,cS:()=>v,Ho:()=>l,oJ:()=>u,al:()=>o,Cb:()=>h,kK:()=>g,HH:()=>a,bf:()=>c});n(95830);var i=n(52937);function s(t=b){return[t[0],t[1],t[2],t[3]]}function r(t){return[t[0],t[1],t[2],t[3]]}function o(t,e,n,i,r=s()){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function u(t,e=s()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function a(t,e){return new i.Z({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function l(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function c(t){return t[0]>=t[2]?0:t[2]-t[0]}function h(t){return t[1]>=t[3]?0:t[3]-t[1]}function f(t){return c(t)*h(t)}function p(t,e){return d(t,e[0],e[1])}function m(t,e){return d(t,e.x,e.y)}function d(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function _(t,e,n){return e[0]>=t[0]-n&&e[1]>=t[1]-n&&e[0]<=t[2]+n&&e[1]<=t[3]+n}function g(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function y(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function v(t){return t?function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}(t,x):s(x)}const x=[1/0,1/0,-1/0,-1/0],b=[0,0,0,0]},91535:(t,e,n)=>{"use strict";n.d(e,{aX:()=>z,or:()=>S});var i=n(34926),s=n(59472),r=n(36544),o=n(32656),u=n(27780),a=n(41241),l=n(53817),c=n(93833),h=n(49573),f=n(10923),p=n(56885),m=(n(36348),n(36654));async function d(t,e,n){const i="string"==typeof t?(0,f.mN)(t):t,s=e[0].spatialReference,r=(0,p.Ji)(e[0]),o={...n,query:{...i.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(_(e))}};return function(t,e,n){const i=(0,p.q9)(e);return t.map((t=>{const e=i.fromJSON(t);return e.spatialReference=n,e}))}((await(0,m.default)(i.path+"/simplify",o)).data,r,s)}function _(t){return{geometryType:(0,p.Ji)(t[0]),geometries:t.map((t=>t.toJSON()))}}const g=r.Z.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function v(t){return"polyline"===t[0].type}function x(t,e,n){if(e){const e=function(t,e){if(!(t instanceof c.Z||t instanceof l.Z)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(t),new o.Z(t)}const n=(0,h.x3)(t),i=[];for(const t of n){const n=[];i.push(n),n.push([t[0][0],t[0][1]]);for(let i=0;i<t.length-1;i++){const s=t[i][0],r=t[i][1],o=t[i+1][0],u=t[i+1][1],a=Math.sqrt((o-s)*(o-s)+(u-r)*(u-r)),l=(u-r)/a,c=(o-s)/a,h=a/e;if(h>1){for(let t=1;t<=h-1;t++){const i=t*e,o=c*i+s,u=l*i+r;n.push([o,u])}const t=(a+Math.floor(h-1)*e)/2,i=c*t+s,o=l*t+r;n.push([i,o])}n.push([o,u])}}return function(t){return"polygon"===t.type}(t)?new l.Z({rings:i,spatialReference:t.spatialReference}):new c.Z({paths:i,spatialReference:t.spatialReference})}(t,1e6);t=(0,a.Sx)(e,!0)}return n&&(t=(0,h.Sy)(t,n)),t}function b(t,e,n){if(Array.isArray(t)){const i=t[0];if(i>e){const n=(0,h.XZ)(i,e);t[0]=i+n*(-2*e)}else if(i<n){const e=(0,h.XZ)(i,n);t[0]=i+e*(-2*n)}}else{const i=t.x;if(i>e){const n=(0,h.XZ)(i,e);t=t.clone().offset(n*(-2*e),0)}else if(i<n){const e=(0,h.XZ)(i,n);t=t.clone().offset(e*(-2*n),0)}}return t}function w(t,e){let n=-1;for(let i=0;i<e.cutIndexes.length;i++){const s=e.cutIndexes[i],r=e.geometries[i],o=(0,h.x3)(r);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const i=e[t][0];n=i>n?i:n}n=Number(n.toFixed(9));const i=-360*(0,h.XZ)(n,180);for(let n=0;n<e.length;n++){const e=r.getPoint(t,n);r.setPoint(t,n,e.clone().offset(i,0))}return!0}}))}if(s===n){if(y(t))for(const e of(0,h.x3)(r))t[s]=t[s].addRing(e);else if(v(t))for(const e of(0,h.x3)(r))t[s]=t[s].addPath(e)}else n=s,t[s]=r}return t}async function z(t,e,n){if(!Array.isArray(t))return z([t],e);const r=e?e.url:i.default.geometryServiceUrl;let o,_,g,y,v,S,M,R,Z=0;const C=[],A=[];for(const e of t)if((0,s.Wi)(e))A.push(e);else if(o||(o=e.spatialReference,_=(0,u.C5)(o),g=o.isWebMercator,S=g?102100:4326,y=h.UZ[S].maxX,v=h.UZ[S].minX,M=h.UZ[S].plus180Line,R=h.UZ[S].minus180Line),_)if("mesh"===e.type)A.push(e);else if("point"===e.type)A.push(b(e.clone(),y,v));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map((t=>b(t,y,v))),A.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,_);A.push(t.rings?new l.Z(t):t)}else if(e.extent){const t=e.extent,n=(0,h.XZ)(t.xmin,v)*(2*y);let i=0===n?e.clone():(0,h.Sy)(e.clone(),n);t.offset(n,0),t.intersects(M)&&t.xmax!==y?(Z=t.xmax>Z?t.xmax:Z,i=x(i,g),C.push(i),A.push("cut")):t.intersects(R)&&t.xmin!==v?(Z=t.xmax*(2*y)>Z?t.xmax*(2*y):Z,i=x(i,g,360),C.push(i),A.push("cut")):A.push(i)}else A.push(e.clone());else A.push(e);let T=(0,h.XZ)(Z,y),F=-90;const N=T,X=new c.Z;for(;T>0;){const t=360*T-180;X.addPath([[t,F],[t,-1*F]]),F*=-1,T--}if(C.length>0&&N>0){const e=w(C,await async function(t,e,n,i){const s="string"==typeof t?(0,f.mN)(t):t,r=e[0].spatialReference,o={...i,query:{...s.query,f:"json",sr:JSON.stringify(r),target:JSON.stringify({geometryType:(0,p.Ji)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},u=await(0,m.default)(s.path+"/cut",o),{cutIndexes:a,geometries:l=[]}=u.data;return{cutIndexes:a,geometries:l.map((t=>{const e=(0,p.im)(t);return e.spatialReference=r,e}))}}(r,C,X,n)),i=[],o=[];for(let n=0;n<A.length;n++){const r=A[n];if("cut"!==r)o.push(r);else{const r=e.shift(),u=t[n];(0,s.pC)(u)&&"polygon"===u.type&&u.rings&&u.rings.length>1&&r.rings.length>=u.rings.length?(i.push(r),o.push("simplify")):o.push(g?(0,a.$)(r):r)}}if(!i.length)return o;const u=await d(r,i,n),l=[];for(let t=0;t<o.length;t++){const e=o[t];"simplify"!==e?l.push(e):l.push(g?(0,a.$)(u.shift()):u.shift())}return l}const E=[];for(let t=0;t<A.length;t++){const e=A[t];if("cut"!==e)E.push(e);else{const t=C.shift();E.push(!0===g?(0,a.$)(t):t)}}return Promise.resolve(E)}function S(t,e){const n=(0,u.C5)(e);if(n){const[e,i]=n.valid,s=i-e;if(t<e)for(;t<e;)t+=s;if(t>i)for(;t>i;)t-=s}return t}},49573:(t,e,n)=>{"use strict";n.d(e,{UZ:()=>o,x3:()=>l,uS:()=>c,XZ:()=>u,Sy:()=>a});var i=n(73032),s=n(93833),r=n(56885);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new s.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new s.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function u(t,e){return Math.ceil((t-e)/(2*e))}function a(t,e){const n=l(t);for(const t of n)for(const n of t)n[0]+=e;return t}function l(t){return(0,r.oU)(t)?t.rings:t.paths}function c(t){const e=(null==t?void 0:t.isWebMercator)?102100:4326;return[o[e].minX,o[e].maxX]}},78712:(t,e,n)=>{"use strict";n.d(e,{ym:()=>v,RF:()=>_,vY:()=>u,J9:()=>x,U1:()=>b,Ie:()=>w,G6:()=>z});var i=n(56885);const s=(t,e,n)=>[e,n],r=(t,e,n)=>[e,n,t[2]],o=(t,e,n)=>[e,n,t[2],t[3]];function u(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:t.extent?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function a({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function l({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function c(t,e,n){const i=[];let s,r,o,u;for(let c=0;c<n.length;c++){const h=n[c];c>0?(o=a(t,h[0]),u=l(t,h[1]),o===s&&u===r||(i.push(e(h,o-s,u-r)),s=o,r=u)):(s=a(t,h[0]),r=l(t,h[1]),i.push(e(h,s,r)))}return i.length>0?i:null}function h({scale:t,translate:e},n){return n*t[0]+e[0]}function f({scale:t,translate:e},n){return e[1]-n*t[1]}function p(t,e,n){const i=new Array(n.length);if(!n.length)return i;const[s,r]=t.scale;let o=h(t,n[0][0]),u=f(t,n[0][1]);i[0]=e(n[0],o,u);for(let t=1;t<n.length;t++){const a=n[t];o+=a[0]*s,u-=a[1]*r,i[t]=e(a,o,u)}return i}function m(t,e,n){const i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=p(t,e,n[s]);return i}function d(t,e,n,i,u){return e.points=function(t,e,n,i){return c(t,n?i?o:r:i?r:s,e)}(t,n.points,i,u),e}function _(t,e,n,i,s){return e.x=a(t,n.x),e.y=l(t,n.y),e!==n&&(i&&(e.z=n.z),s&&(e.m=n.m)),e}function g(t,e,n,i,u){const a=function(t,e,n,i){const u=[],a=n?i?o:r:i?r:s;for(let n=0;n<e.length;n++){const i=c(t,a,e[n]);i&&i.length>=3&&u.push(i)}return u.length?u:null}(t,n.rings,i,u);return a?(e.rings=a,e):null}function y(t,e,n,i,u){const a=function(t,e,n,i){const u=[],a=n?i?o:r:i?r:s;for(let n=0;n<e.length;n++){const i=c(t,a,e[n]);i&&i.length>=2&&u.push(i)}return u.length?u:null}(t,n.paths,i,u);return a?(e.paths=a,e):null}function v(t,e){return t&&e?(0,i.wp)(e)?_(t,{},e,!1,!1):(0,i.l9)(e)?y(t,{},e,!1,!1):(0,i.oU)(e)?g(t,{},e,!1,!1):(0,i.aW)(e)?d(t,{},e,!1,!1):(0,i.YX)(e)?function(t,e,n,i,s){return e.xmin=a(t,n.xmin),e.ymin=l(t,n.ymin),e.xmax=a(t,n.xmax),e.ymax=l(t,n.ymax),e!==n&&(i&&(e.zmin=n.zmin,e.zmax=n.zmax),s&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}(t,{},e,!1,!1):null:null}function x(t,e,n,i,u){return e.points=function(t,e,n,i){return p(t,n?i?o:r:i?r:s,e)}(t,n.points,i,u),e}function b(t,e,n,i,s){return e.x=h(t,n.x),e.y=f(t,n.y),e!==n&&(i&&(e.z=n.z),s&&(e.m=n.m)),e}function w(t,e,n,i,u){return e.rings=function(t,e,n,i){return m(t,n?i?o:r:i?r:s,e)}(t,n.rings,i,u),e}function z(t,e,n,i,u){return e.paths=function(t,e,n,i){return m(t,n?i?o:r:i?r:s,e)}(t,n.paths,i,u),e}},61121:(t,e,n)=>{"use strict";function i(t){return"date"===t.type||"esriFieldTypeDate"===t.type}n.d(e,{Z:()=>r});function s(t){return t.toLowerCase().trim()}const r=class{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!t)return;const e=[];for(const n of t){const t=n&&n.name;if(t){const r=s(t);this._fieldsMap.set(t,n),this._fieldsMap.set(r,n),e.push(r),i(n)&&(this.dateFields.push(n),this._dateFieldsSet.add(n))}}e.sort(),this.uid=e.join(",")}destroy(){this._fieldsMap.clear()}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(s(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}},39160:(t,e,n)=>{"use strict";n.d(e,{gh:()=>a,H2:()=>c,Vl:()=>p,B$:()=>l,cT:()=>h});var i=n(82550),s=n(96071),r=n(77625),o=n(17387),u=(n(67128),n(14286));(0,r.c)();function a(t,e){return{...t,...(0,i.d9)(e)}}function l(t,e,n,i){for(;t.length<e;)t.push(n());if(i)for(;t.length>e;)i(t.pop());else t.length=e}function c(t,e){if((0,o.s)(e,0,0,0),t.length>0){for(let n=0;n<t.length;++n)(0,o.b)(e,e,t[n]);(0,o.a)(e,e,1/t.length)}}function h(t,e,n,i){i.projectToRenderScreen(t,_),i.projectToRenderScreen(e,y),(0,u.e)(n,v,g),(0,u.f)(n,n)}function f(t,e,n){const i=n.state.camera;n.renderCoordsHelper.toRenderCoords(t,m),i.projectToRenderScreen(m,d),n.state.camera.renderToScreen(d,e)}function p(t,e,n){return f(t,x,n),f(e,b,n),(0,u.d)(x,b)}const m=(0,r.c)(),d=(0,s.J$)(),_=(0,s.J$)(),g=_,y=(0,s.J$)(),v=y,x=((0,s.s1)(),(0,s.s1)()),b=(0,s.s1)()},19539:(t,e,n)=>{"use strict";n.d(e,{V:()=>h});var i=n(56140),s=(n(95830),n(36544),n(68055),n(79881)),r=n(87566),o=n(32656),u=(n(10923),n(57002),n(86035),n(82677)),a=n(59691),l=n(80621),c=n(17519);let h=class extends u.default{constructor(t){super(t),this.tool=null,this._baseHandles=new a.Z,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,t&&null!=t.visible&&(this.visible=t.visible)}initialize(){this._baseHandles.add((0,l.init)(this,["view.ready","isSupported"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(t){if(t===this.view)return;this.removeTool(),this._set("view",t);const e="tools";this._baseHandles.remove(e),t&&this._baseHandles.add(t.tools.on("change",(t=>{if(this.tool)for(const e of t.removed)if(this.tool===e){e.destroyed||e.destroy(),this._set("tool",null);break}})),e)}set visible(t){this._set("visible",t),this.tool&&(this.tool.visible=t),!t&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return Promise.reject(new o.Z("tool:create","The view does not support the tool"));const t=this.createToolParams(),e=()=>{const e=(0,c.J1)(t.constructorArguments);return{visible:this.visible,...e}},n=new AbortController,i=n.signal;this._creationAbortController=n;const s=()=>{n===this._creationAbortController&&(this._creationAbortController=null)};try{const n=await this.view.createTool(t.toolConstructor,e,{signal:i});this._set("tool",n),s()}catch(t){throw s(),t}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const t=this.tool;t&&(this.view&&this.view.tools&&this.view.tools.remove(t),t.destroyed||t.destroy(),this._set("tool",null))}};(0,i._)([(0,s.Cb)({constructOnly:!0})],h.prototype,"tool",void 0),(0,i._)([(0,s.Cb)()],h.prototype,"isSupported",null),(0,i._)([(0,s.Cb)({value:null})],h.prototype,"view",null),(0,i._)([(0,s.Cb)({type:Boolean,value:!0})],h.prototype,"visible",null),(0,i._)([(0,s.Cb)()],h.prototype,"active",null),(0,i._)([(0,s.Cb)()],h.prototype,"isDisabled",null),(0,i._)([(0,s.Cb)()],h.prototype,"_creationAbortController",void 0),(0,i._)([(0,s.Cb)({readOnly:!0})],h.prototype,"creatingTool",null),h=(0,i._)([(0,r.j)("esri.widgets.support.InteractiveToolViewModel")],h)}}]);
//# sourceMappingURL=6617.js.map