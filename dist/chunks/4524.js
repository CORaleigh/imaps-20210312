(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[4524],{60418:(t,n,e)=>{"use strict";e.d(n,{E:()=>r,R:()=>o,a:()=>c,t:()=>s});const r=1e-6,o=Math.random,i=Math.PI/180,a=180/Math.PI;function s(t){return t*i}function c(t){return t*a}Object.freeze({__proto__:null,EPSILON:r,RANDOM:o,toRadian:s,toDegree:c,equals:function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))}})},14286:(t,n,e)=>{"use strict";e.d(n,{a:()=>f,b:()=>E,c:()=>o,d:()=>h,e:()=>s,f:()=>p,g:()=>v,h:()=>b,i:()=>a,j:()=>d,k:()=>I,l:()=>M,m:()=>w,n:()=>g,o:()=>y,p:()=>l,q:()=>m,r:()=>q,s:()=>i,t:()=>A});var r=e(60418);function o(t,n){return t[0]=n[0],t[1]=n[1],t}function i(t,n,e){return t[0]=n,t[1]=e,t}function a(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function s(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function c(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function u(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function f(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function l(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t}function h(t,n){const e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function d(t,n){const e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function M(t){const n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function m(t){const n=t[0],e=t[1];return n*n+e*e}function g(t,n){return t[0]=-n[0],t[1]=-n[1],t}function p(t,n){const e=n[0],r=n[1];let o=e*e+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o),t}function b(t,n){return t[0]*n[0]+t[1]*n[1]}function v(t,n,e){const r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t}function w(t,n,e,r){const o=n[0],i=n[1];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t}function y(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o,t[1]=e[1]*r+e[3]*o,t}function A(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[2]*o+e[4],t[1]=e[1]*r+e[3]*o+e[5],t}function q(t,n,e,r){const o=n[0]-e[0],i=n[1]-e[1],a=Math.sin(r),s=Math.cos(r);return t[0]=o*s-i*a+e[0],t[1]=o*a+i*s+e[1],t}function I(t,n){return t[0]===n[0]&&t[1]===n[1]}const x=M,E=s,_=c,N=u,U=h,S=d,D=m;Object.freeze({__proto__:null,copy:o,set:i,add:a,subtract:s,multiply:c,divide:u,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:f,scaleAndAdd:l,distance:h,squaredDistance:d,length:M,squaredLength:m,negate:g,inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},normalize:p,dot:b,cross:v,lerp:w,random:function(t,n){n=n||1;const e=2*(0,r.R)()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},transformMat2:y,transformMat2d:A,transformMat3:function(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[3]*o+e[6],t[1]=e[1]*r+e[4]*o+e[7],t},transformMat4:function(t,n,e){const r=n[0],o=n[1];return t[0]=e[0]*r+e[4]*o+e[12],t[1]=e[1]*r+e[5]*o+e[13],t},rotate:q,angle:function(t,n){const e=t[0],r=t[1],o=n[0],i=n[1];let a=e*e+r*r;a>0&&(a=1/Math.sqrt(a));let s=o*o+i*i;s>0&&(s=1/Math.sqrt(s));const c=(e*o+r*i)*a*s;return c>1?0:c<-1?Math.PI:Math.acos(c)},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:I,equals:function(t,n){const e=t[0],o=t[1],i=n[0],a=n[1];return Math.abs(e-i)<=r.E*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-a)<=r.E*Math.max(1,Math.abs(o),Math.abs(a))},len:x,sub:E,mul:_,div:N,dist:U,sqrDist:S,sqrLen:D})},17387:(t,n,e)=>{"use strict";e.d(n,{C:()=>l,D:()=>d,E:()=>E,F:()=>x,a:()=>h,b:()=>c,c:()=>w,d:()=>v,e:()=>y,f:()=>u,g:()=>a,h:()=>m,i:()=>M,j:()=>L,k:()=>A,l:()=>i,m:()=>p,n:()=>b,o:()=>U,p:()=>g,q:()=>I,r:()=>z,s:()=>s,t:()=>q,u:()=>S,v:()=>k,w:()=>P});var r=e(77625),o=e(60418);function i(t){const n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function a(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function s(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function c(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function u(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function f(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function l(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function h(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function d(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function M(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}function m(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return e*e+r*r+o*o}function g(t){const n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function p(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function b(t,n){const e=n[0],r=n[1],o=n[2];let i=e*e+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i),t}function v(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function w(t,n,e){const r=n[0],o=n[1],i=n[2],a=e[0],s=e[1],c=e[2];return t[0]=o*c-i*s,t[1]=i*a-r*c,t[2]=r*s-o*a,t}function y(t,n,e,r){const o=n[0],i=n[1],a=n[2];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=a+r*(e[2]-a),t}function A(t,n,e){const r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r+e[4]*o+e[8]*i+e[12],t[1]=e[1]*r+e[5]*o+e[9]*i+e[13],t[2]=e[2]*r+e[6]*o+e[10]*i+e[14],t}function q(t,n,e){const r=n[0],o=n[1],i=n[2];return t[0]=r*e[0]+o*e[3]+i*e[6],t[1]=r*e[1]+o*e[4]+i*e[7],t[2]=r*e[2]+o*e[5]+i*e[8],t}function I(t,n,e){const r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],c=n[1],u=n[2];let f=o*u-i*c,l=i*s-r*u,h=r*c-o*s,d=o*h-i*l,M=i*f-r*h,m=r*l-o*f;const g=2*a;return f*=g,l*=g,h*=g,d*=2,M*=2,m*=2,t[0]=s+f+d,t[1]=c+l+M,t[2]=u+h+m,t}function x(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function E(t,n){a(_,t),a(N,n),b(_,_),b(N,N);const e=v(_,N);return e>1?0:e<-1?Math.PI:Math.acos(e)}const _=(0,r.c)(),N=(0,r.c)();function U(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}const S=u,D=f,V=l,L=M,P=m,z=i,k=g;Object.freeze({__proto__:null,length:i,copy:a,set:s,add:c,subtract:u,multiply:f,divide:l,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:h,scaleAndAdd:d,distance:M,squaredDistance:m,squaredLength:g,negate:p,inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},normalize:b,dot:v,cross:w,lerp:y,hermite:function(t,n,e,r,o,i){const a=i*i,s=a*(2*i-3)+1,c=a*(i-2)+i,u=a*(i-1),f=a*(3-2*i);return t[0]=n[0]*s+e[0]*c+r[0]*u+o[0]*f,t[1]=n[1]*s+e[1]*c+r[1]*u+o[1]*f,t[2]=n[2]*s+e[2]*c+r[2]*u+o[2]*f,t},bezier:function(t,n,e,r,o,i){const a=1-i,s=a*a,c=i*i,u=s*a,f=3*i*s,l=3*c*a,h=c*i;return t[0]=n[0]*u+e[0]*f+r[0]*l+o[0]*h,t[1]=n[1]*u+e[1]*f+r[1]*l+o[1]*h,t[2]=n[2]*u+e[2]*f+r[2]*l+o[2]*h,t},random:function(t,n){n=n||1;const e=2*(0,o.R)()*Math.PI,r=2*(0,o.R)()-1,i=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*i,t[1]=Math.sin(e)*i,t[2]=r*n,t},transformMat4:A,transformMat3:q,transformQuat:I,rotateX:function(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},rotateY:function(t,n,e,r){const o=[],i=[];return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t},rotateZ:x,angle:E,str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:U,equals:function(t,n){const e=t[0],r=t[1],i=t[2],a=n[0],s=n[1],c=n[2];return Math.abs(e-a)<=o.E*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-s)<=o.E*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-c)<=o.E*Math.max(1,Math.abs(i),Math.abs(c))},sub:S,mul:D,div:V,dist:L,sqrDist:P,len:z,sqrLen:k})},77625:(t,n,e)=>{"use strict";function r(){return[0,0,0]}function o(t){return[t[0],t[1],t[2]]}function i(t,n,e){return[t,n,e]}function a(t){const n=[0,0,0],e=Math.min(3,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function s(t,n){return new Float64Array(t,n,3)}function c(){return[0,0,0]}function u(){return i(1,1,1)}function f(){return i(1,0,0)}function l(){return i(0,1,0)}function h(){return i(0,0,1)}e.d(n,{O:()=>M,U:()=>m,Z:()=>d,a:()=>o,b:()=>s,c:()=>r,d:()=>a,f:()=>i});const d=[0,0,0],M=u(),m=f(),g=l(),p=h();Object.freeze({__proto__:null,create:r,clone:o,fromValues:i,fromArray:a,createView:s,zeros:c,ones:u,unitX:f,unitY:l,unitZ:h,ZEROS:d,ONES:M,UNIT_X:m,UNIT_Y:g,UNIT_Z:p})},34353:(t,n,e)=>{"use strict";e.d(n,{a:()=>a,b:()=>f,c:()=>o,d:()=>g,e:()=>d,f:()=>M,g:()=>v,h:()=>w,i:()=>h,l:()=>p,n:()=>m,s:()=>i,t:()=>b});var r=e(60418);function o(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function i(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t}function a(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function s(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function c(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function u(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function f(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function l(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return Math.sqrt(e*e+r*r+o*o+i*i)}function h(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],i=n[3]-t[3];return e*e+r*r+o*o+i*i}function d(t){const n=t[0],e=t[1],r=t[2],o=t[3];return Math.sqrt(n*n+e*e+r*r+o*o)}function M(t){const n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}function m(t,n){const e=n[0],r=n[1],o=n[2],i=n[3];let a=e*e+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e*a,t[1]=r*a,t[2]=o*a,t[3]=i*a),t}function g(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function p(t,n,e,r){const o=n[0],i=n[1],a=n[2],s=n[3];return t[0]=o+r*(e[0]-o),t[1]=i+r*(e[1]-i),t[2]=a+r*(e[2]-a),t[3]=s+r*(e[3]-s),t}function b(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3];return t[0]=e[0]*r+e[4]*o+e[8]*i+e[12]*a,t[1]=e[1]*r+e[5]*o+e[9]*i+e[13]*a,t[2]=e[2]*r+e[6]*o+e[10]*i+e[14]*a,t[3]=e[3]*r+e[7]*o+e[11]*i+e[15]*a,t}function v(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function w(t,n){const e=t[0],o=t[1],i=t[2],a=t[3],s=n[0],c=n[1],u=n[2],f=n[3];return Math.abs(e-s)<=r.E*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-c)<=r.E*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-u)<=r.E*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-f)<=r.E*Math.max(1,Math.abs(a),Math.abs(f))}const y=s,A=c,q=u,I=l,x=h,E=d,_=M;Object.freeze({__proto__:null,copy:o,set:i,add:a,subtract:s,multiply:c,divide:u,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:f,scaleAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},distance:l,squaredDistance:h,length:d,squaredLength:M,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},normalize:m,dot:g,lerp:p,random:function(t,n){let e,o,i,a,s,c;n=n||1;do{e=2*(0,r.R)()-1,o=2*(0,r.R)()-1,s=e*e+o*o}while(s>=1);do{i=2*(0,r.R)()-1,a=2*(0,r.R)()-1,c=i*i+a*a}while(c>=1);const u=Math.sqrt((1-s)/c);return t[0]=n*e,t[1]=n*o,t[2]=n*i*u,t[3]=n*a*u,t},transformMat4:b,transformQuat:function(t,n,e){const r=n[0],o=n[1],i=n[2],a=e[0],s=e[1],c=e[2],u=e[3],f=u*r+s*i-c*o,l=u*o+c*r-a*i,h=u*i+a*o-s*r,d=-a*r-s*o-c*i;return t[0]=f*u+d*-a+l*-c-h*-s,t[1]=l*u+d*-s+h*-a-f*-c,t[2]=h*u+d*-c+f*-s-l*-a,t[3]=n[3],t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:v,equals:w,sub:y,mul:A,div:q,dist:I,sqrDist:x,len:E,sqrLen:_})},82204:(t,n,e)=>{"use strict";e.d(n,{d:()=>o});var r=e(33655);function o(t,n,e){const o=t.byteLength/(4*n),u=new Uint32Array(t,0,o*n);let f=new Uint32Array(o);const l=e&&e.minReduction||0,h=e&&e.originalIndices||null,d=e&&e.componentOffsets||null;let M=0;if(d)for(let t=0;t<d.length-1;t++){const n=d[t+1]-d[t];n>M&&(M=n)}else M=o;const m=Math.floor(1.1*M)+1;(null==c||c.length<2*m)&&(c=new Uint32Array((0,r.Sf)(2*m)));for(let t=0;t<2*m;t++)c[t]=0;let g=0;const p=!!d&&!!h,b=p?h.length:o,v=p?new Uint32Array(h.length):null,w=1.96;let y=0!==l?Math.ceil(4*w*w/(l*l)*l*(1-l)):b,A=1,q=d?d[1]:b;for(let t=0;t<b;t++){if(t===y){const n=1-g/t;if(n+w*Math.sqrt(n*(1-n)/t)<l)return null;y*=2}if(t===q){for(let t=0;t<2*m;t++)c[t]=0;if(h)for(let t=d[A-1];t<d[A];t++)v[t]=f[h[t]];q=d[++A]}const e=p?h[t]:t,r=e*n,o=s(u,r,n);let a=o%m,M=g;for(;0!==c[2*a+1];){if(c[2*a]===o){const t=c[2*a+1]-1;if(i(u,r,t*n,n)){M=f[t];break}}a++,a>=m&&(a-=m)}M===g&&(c[2*a]=o,c[2*a+1]=e+1,g++),f[e]=M}if(0!==l&&1-g/o<l)return null;if(p){for(let t=d[A-1];t<v.length;t++)v[t]=f[h[t]];f=v}const I=new Uint32Array(n*g);g=0;for(let t=0;t<b;t++)f[t]===g&&(a(u,(p?h[t]:t)*n,I,g*n,n),g++);if(h&&!p){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=f[h[n]];f=t}return{buffer:I.buffer,indices:f,uniqueCount:g}}function i(t,n,e,r){for(let o=0;o<r;o++)if(t[n+o]!==t[e+o])return!1;return!0}function a(t,n,e,r,o){for(let i=0;i<o;i++)e[r+i]=t[n+i]}function s(t,n,e){let r=0;for(let o=0;o<e;o++)r=t[n+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let c=null},1227:(t,n,e)=>{"use strict";e.d(n,{K:()=>o});const r={divisor:0};function o(t,n={}){n={...r,...n};const e=t.stride;return t.fieldNames.filter((n=>{const e=t.fields.get(n).optional;return!(e&&e.glPadding)})).map((r=>{const o=t.fields.get(r),a=o.constructor.ElementCount,s=i(o.constructor.ElementType),c=o.offset,u=!(!o.optional||!o.optional.glNormalized);return{name:r,stride:e,count:a,type:s,offset:c,normalized:u,divisor:n.divisor}}))}function i(t){const n=a[t];if(n)return n;throw new Error("BufferType not supported in WebGL")}const a={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},64164:(t,n,e)=>{"use strict";e.r(n),e.d(n,{work:()=>K,wrappedWork:()=>Z});var r=e(82204),o=e(1227),i=e(80905);const a=(0,i.U$)().vec3f("position").u16("componentIndex").u16("u16padding"),s=(0,i.U$)().vec2u8("sideness"),c=((0,o.K)(s),(0,i.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),u=c.clone().vec3f("normal"),f=c.clone().vec3f("normalA").vec3f("normalB");var l=e(91946),h=e(77625),d=e(17387);class M{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?v:b}write(t,n,e){const r=this.edgeHashFunction(e);I.seed=r;const o=I.getIntRange(0,255),i=I.getIntRange(0,this.settings.variants-1),a=I.getFloat(),s=255*(.5*function(t,n){const e=t<0?-1:1;return Math.abs(t)**n*e}(-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/(1-.7),1.2)+.5);t.position0.setVec(n,e.position0),t.position1.setVec(n,e.position1),t.componentIndex.set(n,e.componentIndex),t.variantOffset.set(n,o),t.variantStroke.set(n,i),t.variantExtension.set(n,s)}trim(t,n){return t.slice(0,n)}}const m=new Float32Array(6),g=new Uint32Array(m.buffer),p=new Uint32Array(1);function b(t){const n=m;n[0]=t.position0[0],n[1]=t.position0[1],n[2]=t.position0[2],n[3]=t.position1[0],n[4]=t.position1[1],n[5]=t.position1[2],p[0]=5381;for(let t=0;t<g.length;t++)p[0]=31*p[0]+g[t];return p[0]}function v(t){const n=m;n[0]=w(t.position0[0]),n[1]=w(t.position0[1]),n[2]=w(t.position0[2]),n[3]=w(t.position1[0]),n[4]=w(t.position1[1]),n[5]=w(t.position1[2]),p[0]=5381;for(let t=0;t<g.length;t++)p[0]=31*p[0]+g[t];return p[0]}function w(t){return Math.round(1e4*t)/1e4}class y{constructor(){this.commonWriter=new M}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return u.createBuffer(t)}write(t,n,e){this.commonWriter.write(t,n,e),(0,d.b)(q,e.faceNormal0,e.faceNormal1),(0,d.n)(q,q),t.normal.setVec(n,q)}trim(t,n){return this.commonWriter.trim(t,n)}}y.Layout=u,y.glLayout=(0,o.K)(u,{divisor:1});class A{constructor(){this.commonWriter=new M}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return f.createBuffer(t)}write(t,n,e){this.commonWriter.write(t,n,e),t.normalA.setVec(n,e.faceNormal0),t.normalB.setVec(n,e.faceNormal1)}trim(t,n){return this.commonWriter.trim(t,n)}}A.Layout=f,A.glLayout=(0,o.K)(f,{divisor:1});const q=(0,h.c)(),I=new l.Z;var x=e(12608);function E(t,n){return n.push(t.buffer),{buffer:t.buffer,layout:_(t.layout)}}function _(t){const n=new Array;return t.fields.forEach(((t,e)=>{const r={...t,constructor:U(t.constructor)};n.push([e,r])})),{stride:t.stride,fields:n,fieldNames:t.fieldNames}}const N=[x.ly,x.Eu,x.ct,x.ek,x.gK,x.bj,x.oS,x.q6,x.fP,x.Cd,x.ey,x.O1,x.D_,x.xA,x.ne,x.mc,x.av,x.TS,x.mw,x.v6,x.Nu,x.qt,x.G5,x.hu,x.Hz,x.Vs,x.P_,x.ir,x.o7,x.or,x.n1,x.zO,x.Jj,x.wA,x.PP,x.TN];function U(t){return`${t.ElementType}_${t.ElementCount}`}const S=new Map;function D(t,n){const e=t.length/3,r=new Uint32Array(n+1),o=new Uint32Array(n+1),i=(t,n)=>{t<n?r[t+1]++:o[n+1]++};for(let n=0;n<e;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];i(e,r),i(r,o),i(o,e)}let a=0,s=0;for(let t=0;t<n;t++){const n=r[t+1],e=o[t+1];r[t+1]=a,o[t+1]=s,a+=n,s+=e}const c=new Uint32Array(6*e),u=r[n],f=(t,n,e)=>{if(t<n){const o=r[t+1]++;c[2*o]=n,c[2*o+1]=e}else{const r=o[n+1]++;c[2*u+2*r]=t,c[2*u+2*r+1]=e}};for(let n=0;n<e;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];f(e,r,n),f(r,o,n),f(o,e,n)}const l=(t,n)=>{const e=2*t,r=n-t;for(let t=1;t<r;t++){const n=c[e+2*t],r=c[e+2*t+1];let o=t-1;for(;o>=0&&c[e+2*o]>n;o--)c[e+2*o+2]=c[e+2*o],c[e+2*o+3]=c[e+2*o+1];c[e+2*o+2]=n,c[e+2*o+3]=r}};for(let t=0;t<n;t++)l(r[t],r[t+1]),l(u+o[t],u+o[t+1]);const h=new Int32Array(3*e),d=(n,e)=>n===t[3*e]?0:n===t[3*e+1]?1:n===t[3*e+2]?2:-1,M=(t,n)=>{const e=d(t,n);h[3*n+e]=-1},m=(t,n,e,r)=>{const o=d(t,n);h[3*n+o]=r;const i=d(e,r);h[3*r+i]=n};for(let t=0;t<n;t++){let n=r[t];const e=r[t+1];let i=o[t];const a=o[t+1];for(;n<e&&i<a;){const e=c[2*n],r=c[2*u+2*i];e===r?(m(t,c[2*n+1],r,c[2*u+2*i+1]),n++,i++):e<r?(M(t,c[2*n+1]),n++):(M(r,c[2*u+2*i+1]),i++)}for(;n<e;)M(t,c[2*n+1]),n++;for(;i<a;)M(c[2*u+2*i],c[2*u+2*i+1]),i++}return h}N.forEach((t=>S.set(U(t),t)));var V=e(6962),L=e(19677),P=e(33655),z=e(17154);const k=-1;function O(t,n,e,r=C){const o=t.vertices.position,i=t.vertices.componentIndex,a=(0,P.Vl)(r.anglePlanar),s=(0,P.Vl)(r.angleSignificantEdge),c=Math.cos(s),u=Math.cos(a),f=j.edge,l=f.position0,h=f.position1,M=f.faceNormal0,m=f.faceNormal1,g=W(t),p=function(t){const n=t.faces.length/3,e=t.faces,r=t.neighbors;let o=0;for(let t=0;t<n;t++){const n=r[3*t+0],i=r[3*t+1],a=r[3*t+2],s=e[3*t+0],c=e[3*t+1],u=e[3*t+2];o+=n===k||s<c?1:0,o+=i===k||c<u?1:0,o+=a===k||u<s?1:0}const i=new Int32Array(4*o);let a=0;for(let t=0;t<n;t++){const n=r[3*t+0],o=r[3*t+1],s=r[3*t+2],c=e[3*t+0],u=e[3*t+1],f=e[3*t+2];(n===k||c<u)&&(i[a++]=c,i[a++]=u,i[a++]=t,i[a++]=n),(o===k||u<f)&&(i[a++]=u,i[a++]=f,i[a++]=t,i[a++]=o),(s===k||f<c)&&(i[a++]=f,i[a++]=c,i[a++]=t,i[a++]=s)}return i}(t),b=p.length/4,v=n.allocate(b);let w=0;const y=b,A=e.allocate(y);let q=0,I=0,x=0;const E=(0,L.w6)(0,b),_=new Float32Array(b);(0,V.Ed)(_,((t,n,e)=>{o.getVec(p[4*n+0],l),o.getVec(p[4*n+1],h),e[n]=(0,d.i)(l,h)})),E.sort(((t,n)=>_[n]-_[t]));const N=new Array,U=new Array;for(let t=0;t<b;t++){const r=E[t],s=_[r],b=p[4*r+0],y=p[4*r+1],S=p[4*r+2],D=p[4*r+3],V=D===k;if(o.getVec(b,l),o.getVec(y,h),V)(0,d.s)(M,g[3*S+0],g[3*S+1],g[3*S+2]),(0,d.g)(m,M),f.componentIndex=i.get(b),f.cosAngle=(0,d.d)(M,m);else{if((0,d.s)(M,g[3*S+0],g[3*S+1],g[3*S+2]),(0,d.s)(m,g[3*D+0],g[3*D+1],g[3*D+2]),f.componentIndex=i.get(b),f.cosAngle=(0,d.d)(M,m),F(f,u))continue;f.cosAngle<-.9999&&(0,d.g)(m,M)}I+=s,x++,V||R(f,c)?(n.write(v,w++,f),N.push(s)):T(f,a)&&(e.write(A,q++,f),U.push(s))}const S=new Float32Array(N.reverse()),D=new Float32Array(U.reverse());return{regular:{instancesData:n.trim(v,w),lodInfo:{lengths:S}},silhouette:{instancesData:e.trim(A,q),lodInfo:{lengths:D}},averageEdgeLength:I/x}}function R(t,n){return t.cosAngle<n}function F(t,n){return t.cosAngle>n}function T(t,n){const e=(0,P.ZF)(t.cosAngle),r=j.fwd,o=j.ortho;return(0,z.tB)(r,t.position1,t.position0),e*((0,d.d)((0,d.c)(o,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>n}function W(t){const n=t.faces.length/3,e=t.vertices.position,r=t.faces,o=B.v0,i=B.v1,a=B.v2,s=new Float32Array(3*n);for(let t=0;t<n;t++){const n=r[3*t+0],c=r[3*t+1],u=r[3*t+2];e.getVec(n,o),e.getVec(c,i),e.getVec(u,a),(0,d.f)(i,i,o),(0,d.f)(a,a,o),(0,d.c)(o,i,a),(0,d.n)(o,o),s[3*t+0]=o[0],s[3*t+1]=o[1],s[3*t+2]=o[2]}return s}const j={edge:{position0:(0,h.c)(),position1:(0,h.c)(),faceNormal0:(0,h.c)(),faceNormal1:(0,h.c)(),componentIndex:0,cosAngle:0},ortho:(0,h.c)(),fwd:(0,h.c)()},B={v0:(0,h.c)(),v1:(0,h.c)(),v2:(0,h.c)()},C={anglePlanar:4,angleSignificantEdge:35};async function Z(t){const n=function(t){return{data:a.createView(t.dataBuffer),originalIndices:"Uint32Array"===t.originalIndicesType?new Uint32Array(t.originalIndicesBuffer):"Uint16Array"===t.originalIndicesType?new Uint16Array(t.originalIndicesBuffer):void 0,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),e=K(n),r=[n.data.buffer];return{result:$(e,r),transferList:r}}function K(t){const n=function(t,n,e){if(n&&e)return{faces:e,neighbors:D(e,t.count),vertices:t};{const n=(0,r.d)(t.buffer,t.stride/4,{originalIndices:e}),o=D(n.indices,n.uniqueCount);return{faces:n.indices,neighbors:o,vertices:a.createView(n.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return H.updateSettings(t.writerSettings),X.updateSettings(t.writerSettings),O(n,H,X)}function $(t,n){return n.push(t.regular.lodInfo.lengths.buffer),n.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:E(t.regular.instancesData,n),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:E(t.silhouette.instancesData,n),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const H=new y,X=new A}}]);
//# sourceMappingURL=4524.js.map