{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"names":["c","y","w","document","createElement","b","e","t","a","getContext","l","weight","push","size","family","font","join","measureText","width","L","length","parseFloat","slice","z","x","k","maxSize","opacity","j","rotation","C","F","shape","fill","stroke","offset","Math","min","E","P","scale","S","U","type","style","cx","cy","r","path","command","values","symbolConfig","isSquareFill","height","n","max","s","ceil","round","src","url","text","o","i","test","toString","align","decoration","rotated","kerning","Promise","reject","q","Z","T","color","A","toCss","then","resolve","applyColorModulation","unshift","node"],"mappings":"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","file":"chunks/1278.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{pt2px as t,px2pt as a}from\"../../core/screenUtils.js\";import{getStroke as l,getFill as n,getPatternUrlWithColor as s}from\"./gfxUtils.js\";import{shapes as o,adjustColorBrightness as i}from\"./previewUtils.js\";import{renderSymbol as r}from\"./renderUtils.js\";const c=\"picture-fill\",m=\"picture-marker\",u=\"simple-fill\",p=\"simple-line\",h=\"simple-marker\",d=\"text\",f=\"Aa\",v=22,y=120,g=80,M=40,w=document.createElement(\"canvas\");function b(e,t){const a=w.getContext(\"2d\"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+\"px\"),t.family&&l.push(t.family)),a.font=l.join(\" \"),a.measureText(e).width}const x=7.2/2.54,k=72/2.54;function L(e){if(0===e.length)return 0;if(e.length>2){const t=a(1),l=parseFloat(e);switch(e.slice(-2)){case\"px\":return l;case\"pt\":return l*t;case\"in\":return 72*l*t;case\"pc\":return 12*l*t;case\"mm\":return l*x*t;case\"cm\":return l*k*t}}return parseFloat(e)}function z(a,w){const x=null!=(null==w?void 0:w.size)?t(w.size):null,k=null!=(null==w?void 0:w.maxSize)?t(w.maxSize):null,z=null!=(null==w?void 0:w.opacity)?w.opacity:null,j=null!=(null==w?void 0:w.rotation)?w.rotation:null,C=l(a),F={shape:null,fill:null,stroke:C,offset:[0,0]};null!=C&&C.width&&(C.width=Math.min(C.width,g));const E=(null==C?void 0:C.width)||0;let P=null!=x&&(null==(null==w?void 0:w.scale)||(null==w?void 0:w.scale)),S=0,U=0;switch(a.type){case h:{const e=a.style,l=Math.min(null!=x?x:t(a.size),k||y);switch(S=l,U=l,e){case\"circle\":F.shape={type:\"circle\",cx:0,cy:0,r:.5*l},P||(S+=E,U+=E);break;case\"cross\":F.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*U]},{command:\"L\",values:[S,.5*U]},{command:\"M\",values:[.5*S,0]},{command:\"L\",values:[.5*S,U]}]};break;case\"diamond\":F.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*U]},{command:\"L\",values:[.5*S,0]},{command:\"L\",values:[S,.5*U]},{command:\"L\",values:[.5*S,U]},{command:\"Z\",values:[]}]},P||(S+=E,U+=E);break;case\"square\":F.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[S,0]},{command:\"L\",values:[S,U]},{command:\"L\",values:[0,U]},{command:\"Z\",values:[]}]},P||(S+=E,U+=E);break;case\"triangle\":F.shape={type:\"path\",path:[{command:\"M\",values:[.5*S,0]},{command:\"L\",values:[S,U]},{command:\"L\",values:[0,U]},{command:\"Z\",values:[]}]},P||(S+=E,U+=E);break;case\"x\":F.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[S,U]},{command:\"M\",values:[S,0]},{command:\"L\",values:[0,U]}]};break;case\"path\":F.shape={type:\"path\",path:a.path||\"\"},P||(S+=E,U+=E),P=!0}break}case p:{const e=Math.min(null!=x?x:E,k||g),t=e>v?2*e:M;C.width=e,S=t,U=e,F.shape={type:\"path\",path:[{command:\"M\",values:[0,U]},{command:\"L\",values:[S,U]}]};break}case c:case u:S=Math.min(null!=x?x:v,k||y)+E,U=S,P=!0,F.shape=\"object\"==typeof(null==w?void 0:w.symbolConfig)&&null!=w&&w.symbolConfig.isSquareFill?o.squareFill[0]:o.fill[0];break;case m:{let e=t(a.width),l=t(a.height);const n=Math.max(e,l),s=e/l;e=s<=1?Math.ceil(n*s):n,l=s<=1?n:Math.ceil(n/s),S=Math.min(null!=x?x:e,k||y),U=Math.min(null!=x?x:l,k||y),F.shape={type:\"image\",x:-Math.round(S/2),y:-Math.round(U/2),width:S,height:U,src:a.url||\"\"};break}case d:{const e=a,l=e.text||f,n=e.font,s=Math.min(null!=x?x:t(n.size),k||y),o=b(l,{weight:n.weight,size:s,family:n.family}),i=/[\\uE600-\\uE6FF]/.test(l);S=i?s:o,U=s;let r=.25*L((n?s:0).toString());i&&(r+=5),F.shape={type:\"text\",text:l,x:0,y:r,align:\"middle\",decoration:n&&n.decoration,rotated:e.rotated,kerning:e.kerning},F.font=n&&{size:s,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}if(!F.shape)return Promise.reject(new e(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\"));const q=n(a),Z=q,T=a.color;let A=null;return Z&&\"pattern\"===Z.type&&T&&a.type!==c?A=s(Z.src,T.toCss(!0)).then((e=>(Z.src=e,F.fill=Z,F))):(F.fill=q,A=Promise.resolve(F)),A.then((e=>{const t=[[e]];if(\"object\"==typeof(null==w?void 0:w.symbolConfig)&&null!=w&&w.symbolConfig.applyColorModulation){const a=.6*S;t.unshift([{...e,offset:[-a,0],fill:i(q,-.3)}]),t.push([{...e,offset:[a,0],fill:i(q,.3)}]),S+=2*a}return r(t,[S,U],{node:w&&w.node,scale:P,opacity:z,rotation:j})}))}export{z as previewSymbol2D};\n"],"sourceRoot":""}