{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/ground/NavigationConstraint.js","webpack://imaps/./node_modules/@arcgis/core/Ground.js","webpack://imaps/./node_modules/@arcgis/core/support/groundUtils.js","webpack://imaps/./node_modules/@arcgis/core/Map.js","webpack://imaps/./node_modules/@arcgis/core/core/HandleOwner.js","webpack://imaps/./node_modules/@arcgis/core/core/asyncUtils.js","webpack://imaps/./node_modules/@arcgis/core/geometry/HeightModelInfo.js","webpack://imaps/./node_modules/@arcgis/core/geometry/support/scaleUtils.js","webpack://imaps/./node_modules/@arcgis/core/layers/MapImageLayer.js","webpack://imaps/./node_modules/@arcgis/core/layers/mixins/ArcGISMapService.js","webpack://imaps/./node_modules/@arcgis/core/layers/mixins/ArcGISService.js","webpack://imaps/./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js","webpack://imaps/./node_modules/@arcgis/core/layers/mixins/SublayersOwner.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/ExportImageParameters.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/sublayerUtils.js","webpack://imaps/./node_modules/@arcgis/core/support/GraphicsCollection.js","webpack://imaps/./node_modules/@arcgis/core/support/LayersMixin.js","webpack://imaps/./node_modules/@arcgis/core/support/TablesMixin.js","webpack://imaps/./node_modules/@arcgis/core/support/basemapUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/support/WatchUpdatingTracking.js"],"names":["t","p","o","super","this","type","C","none","stayAbove","prototype","S","I","r","opacity","surfaceColor","navigationConstraint","layers","e","parent","remove","error","title","id","on","item","when","catch","resourceInfo","read","data","context","removeAll","destroy","_set","_get","s","a","layerContainerType","forEach","write","push","messages","declaredClass","layer","addResolvingPromise","_loadFromSource","load","signal","ElevationQuery","filter","L","toArray","queryAll","createSamplerAll","slice","loaded","loadStatus","set","_loadLayersFromJSON","origin","portal","url","then","populateOperationalLayers","i","Array","isArray","defaultLayerType","json","readOnly","Number","nonNullable","range","min","max","reader","source","writer","transparency","target","toJSON","layerType","b","f","allLayers","root","rootCollectionNames","getChildrenFunction","allTables","_createTablesFlattener","basemap","ground","_basemapCache","warn","find","itemFilterFunction","_isMapOrGroupLayer","tables","includes","_isGroupLayer","dependsOn","autoTracked","destroyed","handles","updatingHandles","d","n","map","apply","value","ok","orthometric","gravity_related_height","ellipsoidal","u","jsonValues","g","meter","foot","m","heightModel","heightUnit","vertCRS","y","ellipsoid","geoid","apiValues","constructOnly","origins","default","String","extent","width","c","spatialReference","clone","expand","U","alwaysRefetch","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","labelsVisible","isReference","operationalLayerType","sourceJSON","sublayers","loadFromPortal","supportedTypes","_fetchService","supportedImageFormatTypes","indexOf","reverse","flatten","capabilities","operations","supportsExportMap","exportMap","supportsDynamicLayers","createSublayersForOrigin","writeSublayerStructure","originOf","some","Object","keys","length","visibleLayers","visible","pixelRatio","version","shiftCentralMeridian","scale","rotation","wkid","JSON","stringify","l","timeExtent","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","responseType","timestamp","query","_ts","customParameters","parsedUrl","path","createExportImageParameters","Date","now","dynamicLayers","returnUpdates","fullExtent","allSublayers","ssl","replace","service","Boolean","enabled","overridePolicy","ignoreOrigin","arguments","copyright","legendEnabled","split","toLowerCase","trim","supportsQuery","supportsExportTiles","supportsTileMap","exportTiles","exportTilesAllowed","tileInfo","supportsSublayersChanges","supportsSublayerVisibility","supportsSublayerDefinitionExpression","maxExportTilesCount","currentVersion","hasOwnProperty","fetchAllLayersAndTables","_allLayersAndTablesMap","get","_allLayersAndTablesPromise","Map","result","sublayersSourceJSON","2","3","4","5","watch","_handleSublayersChange","setDefaultOrigin","parentLayerId","unshift","h","Set","add","defaultVisibility","has","items","readSublayers","preventDefault","allowNull","definitionExpression","labelingInfo","minScale","maxScale","renderer","_scale","view","hasDynamicLayers","visibleSublayers","toExportImageJSON","serviceSublayers","notifyChange","propertyName","join","reduce","layerDefs","format","transparent","originIdOf","mapLayerId","layerDefinition","_own","_unownAll","_ownAll","owner","_unown","cast","getItemAt","layerAdded","layerRemoved","getNextIndex","reorder","removeMany","v","baseLayers","j","x","mustMatchReferences","concat","referenceLayers","sourceNameToSource","sourceUrl","test","authority","T","urlTemplate","styleUrl","q","baseMapLayers","templateUrl","visibility","w","updating","handleId","scheduleHandleId","pendingPromises","installSyncUpdatingWatch","createSyncUpdatingCallback","added","removed","moved","delete","clear"],"mappings":"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","file":"chunks/8368.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/accessorSupport/decorators/property.js\";import{enumeration as r}from\"../core/accessorSupport/decorators/enumeration.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../core/JSONSupport.js\";var t;let p=t=class extends s{constructor(o){super(o),this.type=\"none\"}clone(){return new t({type:this.type})}};o([r({none:\"none\",stayAbove:\"stay-above\"})],p.prototype,\"type\",void 0),p=t=o([e(\"esri.ground.NavigationConstraint\")],p);export{p as NavigationConstraint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import{typeCast as e}from\"./core/compilerUtils.js\";import{clone as o}from\"./core/lang.js\";import t from\"./core/Logger.js\";import{Integer as s}from\"./core/accessorSupport/ensureType.js\";import{property as a}from\"./core/accessorSupport/decorators/property.js\";import{subclass as i}from\"./core/accessorSupport/decorators/subclass.js\";import{writer as n}from\"./core/accessorSupport/decorators/writer.js\";import l from\"./core/Error.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import{resolve as p,throwIfAborted as c,eachAlways as u}from\"./core/promiseUtils.js\";import{JSONSupportMixin as y}from\"./core/JSONSupport.js\";import d from\"./core/Collection.js\";import m from\"./Color.js\";import{transparencyToOpacity as f,opacityToTransparency as h}from\"./webdoc/support/opacityUtils.js\";import{referenceSetter as g}from\"./core/collectionUtils.js\";import v from\"./core/Loadable.js\";import{loadAll as j}from\"./core/loadAll.js\";import{NavigationConstraint as w}from\"./ground/NavigationConstraint.js\";var C;const S=t.getLogger(\"esri.Ground\");let I=C=class extends(y(v)){constructor(r){super(r),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new d;const e=r=>{r.parent&&r.parent!==this&&\"remove\"in r.parent&&r.parent.remove(r),r.parent=this,\"elevation\"!==r.type&&\"base-elevation\"!==r.type&&S.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on(\"after-add\",(r=>e(r.item))),this.layers.on(\"after-remove\",(r=>{r.item.parent=null}))}initialize(){this.when().catch((r=>{S.error(\"#load()\",\"Failed to load ground\",r)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const r=this.layers.removeAll();for(const e of r)e.destroy();this.layers.destroy()}normalizeCtorArgs(r){return r&&\"resourceInfo\"in r&&(this._set(\"resourceInfo\",r.resourceInfo),delete(r={...r}).resourceInfo),r}set layers(r){this._set(\"layers\",g(r,this._get(\"layers\")))}writeLayers(r,o,t,s){const a=[];r?(s={...s,layerContainerType:\"ground\"},r.forEach((r=>{if(\"write\"in r){const o={};e(r)().write(o,s)&&a.push(o)}else s&&s.messages&&s.messages.push(new l(\"layer:unsupported\",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),o.layers=a):o.layers=a}load(r){return this.addResolvingPromise(this._loadFromSource(r)),p(this)}loadAll(){return j(this,(r=>{r(this.layers)}))}async queryElevation(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import(\"./layers/support/ElevationQuery.js\");c(e);const t=new o,s=this.layers.filter(L).toArray();return t.queryAll(s,r,e)}async createElevationSampler(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import(\"./layers/support/ElevationQuery.js\");c(e);const t=new o,s=this.layers.filter(L).toArray();return t.createSamplerAll(s,r,e)}clone(){const r={opacity:this.opacity,surfaceColor:o(this.surfaceColor),navigationConstraint:o(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(r.loadStatus=\"loaded\"),new C({resourceInfo:this.resourceInfo}).set(r)}read(r,e){this.resourceInfo||this._set(\"resourceInfo\",{data:r,context:e}),super.read(r,e)}_loadFromSource(r){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,r):p(null)}_loadLayersFromJSON(r,e,o){const t=e&&e.origin||\"web-scene\",s=e&&e.portal||null,a=e&&e.url||null;return import(\"./layers/support/layersCreator.js\").then((({populateOperationalLayers:e})=>{c(o);const i=[];if(r.layers&&Array.isArray(r.layers)){const o={context:{origin:t,url:a,portal:s,layerContainerType:\"ground\"},defaultLayerType:\"ArcGISTiledElevationServiceLayer\"};i.push(e(this.layers,r.layers,o))}return u(i)})).then((()=>{}))}};function L(r){return\"elevation\"===r.type||function(r){return r&&\"createElevationSampler\"in r}(r)}r([a({json:{read:!1}})],I.prototype,\"layers\",null),r([n(\"layers\")],I.prototype,\"writeLayers\",null),r([a({readOnly:!0})],I.prototype,\"resourceInfo\",void 0),r([a({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:s,read:{reader:f,source:\"transparency\"},write:{writer:(r,e)=>{e.transparency=h(r)},target:\"transparency\"}}})],I.prototype,\"opacity\",void 0),r([a({type:m,json:{type:[s],write:(r,e)=>{e.surfaceColor=r.toJSON().slice(0,3)}}})],I.prototype,\"surfaceColor\",void 0),r([a({type:w,json:{write:!0}})],I.prototype,\"navigationConstraint\",void 0),I=C=r([i(\"esri.Ground\")],I);var A=I;export default A;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../core/Logger.js\";import{ensureType as r}from\"../core/accessorSupport/ensureType.js\";import o from\"../Ground.js\";const i=e.getLogger(\"esri.support.groundUtils\"),t={\"world-elevation\":{id:\"worldElevation\",url:\"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer\",layerType:\"ArcGISTiledElevationServiceLayer\"},\"world-topobathymetry\":{id:\"worldTopoBathymetry\",url:\"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer\",layerType:\"ArcGISTiledElevationServiceLayer\"}};function a(e){let a;if(\"string\"==typeof e)if(e in t){a=new o({resourceInfo:{data:{layers:[t[e]]}}})}else i.warn(`Unable to find ground definition for: ${e}. Try \"world-elevation\"`);else a=r(o,e);return a}export{a as ensureType,t as groundElevationLayers};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import e from\"./core/Logger.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import{cast as s}from\"./core/accessorSupport/decorators/cast.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import a from\"./core/Accessor.js\";import p from\"./core/Evented.js\";import i from\"./Basemap.js\";import l from\"./Ground.js\";import n from\"./core/CollectionFlattener.js\";import{createCache as u,destroyCache as c,ensureType as m}from\"./support/basemapUtils.js\";import{ensureType as d}from\"./support/groundUtils.js\";import{LayersMixin as y}from\"./support/LayersMixin.js\";import{TablesMixin as h}from\"./support/TablesMixin.js\";const b=e.getLogger(\"esri.Map\");let f=class extends(h(y(p.EventedMixin(a)))){constructor(r){super(r),this.allLayers=new n({root:this,rootCollectionNames:[\"basemap.baseLayers\",\"ground.layers\",\"layers\",\"basemap.referenceLayers\"],getChildrenFunction:r=>r.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new l,this._basemapCache=u()}destroy(){var r,e;this.allLayers.destroy(),this.allTables.destroy(),null==(r=this.ground)||r.destroy(),null==(e=this.basemap)||e.destroy(),c(this._basemapCache),this._basemapCache=null}castBasemap(r){return m(r,this._basemapCache)}castGround(r){const e=d(r);return e||(b.error(\"Map.ground may not be set to null or undefined\"),this._get(\"ground\"))}findLayerById(r){return this.allLayers.find((e=>e.id===r))}findTableById(r){return this.allTables.find((e=>e.id===r))}_createTablesFlattener(r){return new n({root:r,rootCollectionNames:[\"tables\",\"layers\"],getChildrenFunction:r=>r&&\"group\"===r.type?this._createTablesFlattener(r):null,itemFilterFunction:r=>this._isMapOrGroupLayer(r.parent)&&r.parent.tables.includes(r)})}_isMapOrGroupLayer(r){return r&&(r===this||this._isGroupLayer(r))}_isGroupLayer(r){return r&&\"group\"===r.type}};r([t({readOnly:!0,dependsOn:[],autoTracked:!1})],f.prototype,\"allLayers\",void 0),r([t({readOnly:!0})],f.prototype,\"allTables\",void 0),r([t({type:i})],f.prototype,\"basemap\",void 0),r([s(\"basemap\")],f.prototype,\"castBasemap\",null),r([t({type:l,nonNullable:!0})],f.prototype,\"ground\",void 0),r([s(\"ground\")],f.prototype,\"castGround\",null),f=r([o(\"esri.Map\")],f);var g=f;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{property as s}from\"./accessorSupport/decorators/property.js\";import{subclass as r}from\"./accessorSupport/decorators/subclass.js\";import t from\"./Accessor.js\";import o from\"./Handles.js\";import{WatchUpdatingTracking as n}from\"../views/support/WatchUpdatingTracking.js\";const a=t=>{let a=class extends t{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get(\"handles\")||new o}get updatingHandles(){return this._get(\"updatingHandles\")||new n}};return e([s({readOnly:!0})],a.prototype,\"handles\",null),e([s({readOnly:!0})],a.prototype,\"updatingHandles\",null),a=e([r(\"esri.core.HandleOwner\")],a),a};let d=class extends(a(t)){};d=e([r(\"esri.core.HandleOwner\")],d);export{d as HandleOwner,a as HandleOwnerMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{eachAlways as r,throwIfAbortError as t}from\"./promiseUtils.js\";function n(t,n,e){return r(t.map(((r,t)=>n.apply(e,[r,t]))))}function e(t,n,e){return r(t.map(((r,t)=>n.apply(e,[r,t])))).then((r=>r.map((r=>r.value))))}function o(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>({ok:!1,error:r})))}function u(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>{t(r);return{ok:!1,error:r}}))}function a(r){if(!0===r.ok)return r.value;throw r.error}export{a as assertResult,n as forEach,e as map,o as result,u as resultOrAbort};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{strict as r}from\"../core/jsonMap.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import i from\"../core/Warning.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as n}from\"../core/accessorSupport/decorators/writer.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{removeUnordered as a}from\"../core/arrayUtils.js\";import{JSONSupport as l}from\"../core/JSONSupport.js\";import{unitFromRESTJSON as c,getVerticalUnitStringForSR as h}from\"../core/unitUtils.js\";var p;const d=r()({orthometric:\"gravity-related-height\",gravity_related_height:\"gravity-related-height\",ellipsoidal:\"ellipsoidal\"}),u=d.jsonValues.slice();a(u,\"orthometric\");const g=r()({meter:\"meters\",foot:\"feet\",\"us-foot\":\"us-feet\",\"clarke-foot\":\"clarke-feet\",\"clarke-yard\":\"clarke-yards\",\"clarke-link\":\"clarke-links\",\"sears-yard\":\"sears-yards\",\"sears-foot\":\"sears-feet\",\"sears-chain\":\"sears-chains\",\"benoit-1895-b-chain\":\"benoit-1895-b-chains\",\"indian-yard\":\"indian-yards\",\"indian-1937-yard\":\"indian-1937-yards\",\"gold-coast-foot\":\"gold-coast-feet\",\"sears-1922-truncated-chain\":\"sears-1922-truncated-chains\",\"50-kilometers\":\"50-kilometers\",\"150-kilometers\":\"150-kilometers\"});let m=p=class extends l{constructor(e){super(e),this.heightModel=\"gravity-related-height\",this.heightUnit=\"meters\",this.vertCRS=null}writeHeightModel(e,t,r){return d.write(e,t,r)}readHeightModel(e,t,r){const o=d.read(e);return o||(r&&r.messages&&r.messages.push(function(e,t){return new i(\"height-model:unsupported\",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=c(e)||g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new p({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=h(t);return new p({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:\"web-scene\",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new p;return t.read(e,{origin:\"web-scene\"}),t}};function y(e,t){return new i(\"height-unit:unsupported\",`Height unit of value '${e}' is not supported`,t)}e([t({type:d.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:u,default:\"ellipsoidal\"}}}})],m.prototype,\"heightModel\",void 0),e([n(\"web-scene\",\"heightModel\")],m.prototype,\"writeHeightModel\",null),e([o([\"web-scene\",\"service\"],\"heightModel\")],m.prototype,\"readHeightModel\",null),e([t({type:g.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:g.jsonValues,write:g.write}}}})],m.prototype,\"heightUnit\",void 0),e([o(\"web-scene\",\"heightUnit\")],m.prototype,\"readHeightUnit\",null),e([o(\"service\",\"heightUnit\")],m.prototype,\"readHeightUnitService\",null),e([t({type:String,constructOnly:!0,json:{origins:{\"web-scene\":{write:!0}}}})],m.prototype,\"vertCRS\",void 0),e([o(\"service\",\"vertCRS\",[\"vertCRS\",\"ellipsoid\",\"geoid\"])],m.prototype,\"readVertCRS\",null),m=p=e([s(\"esri.geometry.HeightModelInfo\")],m);var f=m;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t,inchesPerMeter as n}from\"../../core/unitUtils.js\";function e(e,r){const i=r||e.extent,o=e.width,c=t(i&&i.spatialReference);return i&&o?i.width/o*c*n*96:0}function r(e,r){return e/(t(r)*n*96)}function i(e,r){return e*(t(r)*n*96)}function o(t,n){const e=t.extent,i=t.width,o=r(n,e.spatialReference);return e.clone().expand(o*i/e.width)}export{o as getExtentForScale,r as getResolutionForScale,e as getScale,i as getScaleForResolution};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import{Integer as t}from\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../core/accessorSupport/decorators/writer.js\";import p from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import{nameToId as m}from\"../core/accessorSupport/PropertyOrigin.js\";import\"../portal/support/resourceExtension.js\";import{resolve as n,reject as l,isAbortError as c}from\"../core/promiseUtils.js\";import u from\"../geometry/Extent.js\";import y from\"../request.js\";import{loadAll as h}from\"../core/loadAll.js\";import d from\"./Layer.js\";import f from\"../TimeExtent.js\";import{MultiOriginJSONMixin as g}from\"../core/MultiOriginJSONSupport.js\";import{url as j}from\"./support/commonProperties.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{ArcGISService as x}from\"./mixins/ArcGISService.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as S}from\"./mixins/CustomParametersMixin.js\";import{PortalLayer as w}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as E}from\"./mixins/TemporalLayer.js\";import{HandleOwnerMixin as I}from\"../core/HandleOwner.js\";import{getScale as M}from\"../geometry/support/scaleUtils.js\";import{ArcGISMapService as q}from\"./mixins/ArcGISMapService.js\";import P from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as N}from\"./support/sublayerUtils.js\";import{SublayersOwner as R}from\"./mixins/SublayersOwner.js\";import{ExportImageParameters as J}from\"./support/ExportImageParameters.js\";let U=class extends(v(E(L(O(R(q(x(b(w(g(S(I(d))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),n(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.indexOf(\"PNG32\")>-1?\"png32\":\"png24\"}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let i=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=m(s.origin);if(3===e){const e=this.createSublayersForOrigin(\"service\").sublayers;i=N(o,e,2)}else if(e>3){const e=this.createSublayersForOrigin(\"portal-item\");i=N(o,e.sublayers,m(e.origin))}}const a=[],p={writeSublayerStructure:i,...s};let n=i;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,s){const o=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const i=new J({layer:this,scale:M({extent:e,width:r})*o}),a=i.toJSON();i.destroy();const p=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},m=e&&e.spatialReference,n=m.wkid||JSON.stringify(m.toJSON());a.dpi*=o;const l={};if(null!=s&&s.timeExtent){const{start:e,end:r}=s.timeExtent.toJSON();l.time=e&&r&&e===r?\"\"+e:`${null==e?\"null\":e},${null==r?\"null\":r}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(l.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:n,imageSR:n,size:r+\",\"+t,...a,...p,...l}}async fetchImage(e,r,t,s){const o={responseType:\"image\"};s&&s.timestamp&&(o.query={...o.query,_ts:s.timestamp}),s&&s.signal&&(o.signal=s.signal),this.customParameters&&Object.keys(this.customParameters).length&&(o.query={...this.customParameters,...o.query});const i=this.parsedUrl.path+\"/export\",a={...this.parsedUrl.query,...this.createExportImageParameters(e,r,t,s),f:\"image\",_ts:this.alwaysRefetch?Date.now():null};if(null!=a.dynamicLayers&&!this.capabilities.exportMap.supportsDynamicLayers)return l(new p(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:a}));o.query?o.query={...a,...o.query}:o.query=a;return y(i,o).then((e=>e.data)).catch((e=>{if(c(e))throw e;throw new p(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${i}`,{error:e})}))}async fetchRecomputedExtents(e={}){const r={...e,query:{returnUpdates:!0,f:\"json\"}},{data:t}=await y(this.url,r),{extent:s,fullExtent:o,timeExtent:i}=t,a=s||o;return{fullExtent:a&&u.fromJSON(a),timeExtent:i&&f.fromJSON({start:i[0],end:i[1]})}}loadAll(){return h(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:r,ssl:t}=await y(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters},signal:e});t&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=r,this.read(r,{origin:\"service\",url:this.parsedUrl})}};e([s()],U.prototype,\"alwaysRefetch\",void 0),e([s()],U.prototype,\"dpi\",void 0),e([s()],U.prototype,\"gdbVersion\",void 0),e([s({json:{read:!1,write:!1}})],U.prototype,\"popupEnabled\",void 0),e([s()],U.prototype,\"imageFormat\",void 0),e([o(\"imageFormat\",[\"supportedImageFormatTypes\"])],U.prototype,\"readImageFormat\",null),e([s({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],U.prototype,\"imageMaxHeight\",void 0),e([s({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],U.prototype,\"imageMaxWidth\",void 0),e([s()],U.prototype,\"imageTransparency\",void 0),e([s({json:{read:!1,write:!1}})],U.prototype,\"labelsVisible\",void 0),e([s({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,\"isReference\",void 0),e([s({type:[\"ArcGISMapServiceLayer\"]})],U.prototype,\"operationalLayerType\",void 0),e([s()],U.prototype,\"sourceJSON\",void 0),e([s({json:{write:{ignoreOrigin:!0}}})],U.prototype,\"sublayers\",void 0),e([a(\"sublayers\",{layers:{type:[P]},visibleLayers:{type:[t]}})],U.prototype,\"writeSublayers\",null),e([s({type:[\"show\",\"hide\",\"hide-children\"]})],U.prototype,\"listMode\",void 0),e([s({json:{read:!1},readOnly:!0,value:\"map-image\"})],U.prototype,\"type\",void 0),e([s(j)],U.prototype,\"url\",void 0),U=e([i(\"esri.layers.MapImageLayer\")],U);var T=U;export default T;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{urlToObject as o}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as i}from\"../../core/promiseUtils.js\";import p from\"../../geometry/SpatialReference.js\";import a from\"../../geometry/Extent.js\";import l from\"../../request.js\";import{popupEnabled as n}from\"../support/commonProperties.js\";const u=u=>{let c=class extends u{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,r){const s=r.capabilities&&r.capabilities.split(\",\").map((e=>e.toLowerCase().trim()));if(!s)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const t=this.type,o=-1!==s.indexOf(\"query\"),i=-1!==s.indexOf(\"map\"),p=!!r.exportTilesAllowed,a=-1!==s.indexOf(\"tilemap\"),l=\"tile\"!==t&&!!r.supportsDynamicLayers,n=\"tile\"!==t&&(!r.tileInfo||l),u=\"tile\"!==t&&(!r.tileInfo||l);return{operations:{supportsQuery:o,supportsExportMap:i,supportsExportTiles:p,supportsTileMap:a},exportMap:i?{supportsSublayersChanges:\"tile\"!==t,supportsDynamicLayers:l,supportsSublayerVisibility:n,supportsSublayerDefinitionExpression:u}:null,exportTiles:p?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(e,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty(\"capabilities\")||r.hasOwnProperty(\"tables\")?10:r.hasOwnProperty(\"supportedImageFormatTypes\")?9.31:9.3),s}async fetchSublayerInfo(e,r){return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=l(o(this.url).path+\"/layers\",{responseType:\"json\",query:{f:\"json\",...this.customParameters}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const r of e.data.layers)this._allLayersAndTablesMap.set(r.id,r);return{result:e.data}}),(e=>({error:e}))));const r=await this._allLayersAndTablesPromise;if(i(e),\"result\"in r)return r.result;throw r.error}};return e([r({readOnly:!0})],c.prototype,\"capabilities\",void 0),e([s(\"service\",\"capabilities\",[\"capabilities\",\"exportTilesAllowed\",\"maxExportTilesCount\",\"supportsDynamicLayers\",\"tileInfo\"])],c.prototype,\"readCapabilities\",null),e([r({json:{read:{source:\"copyrightText\"}}})],c.prototype,\"copyright\",void 0),e([r({type:a})],c.prototype,\"fullExtent\",void 0),e([r({json:{origins:{service:{read:!1},\"portal-item\":{read:!1}}}})],c.prototype,\"id\",void 0),e([r({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\"}}})],c.prototype,\"legendEnabled\",void 0),e([r(n)],c.prototype,\"popupEnabled\",void 0),e([r({type:p})],c.prototype,\"spatialReference\",void 0),e([r()],c.prototype,\"version\",void 0),e([s(\"version\",[\"currentVersion\",\"capabilities\",\"tables\",\"supportedImageFormatTypes\"])],c.prototype,\"readVersion\",null),c=e([t(\"esri.layers.mixins.ArcGISMapService\")],c),c};export{u as ArcGISMapService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import e from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{parse as i,sanitizeUrl as l}from\"../support/arcgisLayerUrl.js\";const p=p=>{let c=class extends p{get title(){if(this._get(\"title\")&&\"defaults\"!==this.originOf(\"title\"))return this._get(\"title\");if(this.url){const t=i(this.url);if(r(t)&&t.title)return t.title}return this._get(\"title\")||\"\"}set title(t){this._set(\"title\",t)}set url(t){this._set(\"url\",l(t,e.getLogger(this.declaredClass)))}};return t([s({dependsOn:[\"url\"]})],c.prototype,\"title\",null),t([s({type:String})],c.prototype,\"url\",null),c=t([o(\"esri.layers.mixins.ArcGISService\")],c),c};export{p as ArcGISService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";const e=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return r([s({json:{write:!0,origins:{\"web-scene\":{write:!1}}}})],t.prototype,\"customParameters\",void 0),t=r([o(\"esri.layers.mixins.CustomParametersMixin\")],t),t};export{e as CustomParametersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{getProperties as s}from\"../../core/accessorSupport/utils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import{nameToId as i,idToName as l}from\"../../core/accessorSupport/PropertyOrigin.js\";import\"../../portal/support/resourceExtension.js\";import n from\"../../core/Collection.js\";import u from\"../../core/CollectionFlattener.js\";import y from\"../support/Sublayer.js\";import{isSublayerOverhaul as c}from\"../support/sublayerUtils.js\";const b=r.getLogger(\"esri.layers.TileLayer\");const p=n.ofType(y);function d(e,r){e&&e.forEach((e=>{r(e),e.sublayers&&e.sublayers.length&&d(e.sublayers,r)}))}const f=r=>{let f=class extends r{constructor(...e){super(...e),this.allSublayers=new u({root:this,rootCollectionNames:[\"sublayers\"],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.watch(\"sublayers\",((e,r)=>this._handleSublayersChange(e,r)),!0)}readSublayers(e,r){if(!r||!e)return;const{sublayersSourceJSON:t}=this,o=i(r.origin);if(o<2)return;if(t[o]={context:r,visibleLayers:e.visibleLayers||t[o].visibleLayers,layers:e.layers||t[o].layers},o>2)return;this._set(\"serviceSublayers\",this.createSublayersForOrigin(\"service\").sublayers);const{sublayers:a,origin:l}=this.createSublayersForOrigin(\"web-document\"),n=s(this);n.setDefaultOrigin(l),this._set(\"sublayers\",new p(a)),n.setDefaultOrigin(\"user\")}findSublayerById(e){return this.allSublayers.find((r=>r.id===e))}createServiceSublayers(){return this.createSublayersForOrigin(\"service\").sublayers}createSublayersForOrigin(e){const r=i(\"web-document\"===e?\"web-map\":e);let s=2,t=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,a=null;const n=[3,4,5].filter((e=>e<=r));for(const e of n){const r=this.sublayersSourceJSON[e];c(r.layers)&&(s=e,t=r.layers,o=r.context,r.visibleLayers&&(a={visibleLayers:r.visibleLayers,context:r.context}))}const u=[3,4,5].filter((e=>e>s&&e<=r));let b=null;for(const e of u){const{layers:r,visibleLayers:s,context:t}=this.sublayersSourceJSON[e];r&&(b={layers:r,context:t}),s&&(a={visibleLayers:s,context:t})}const f=function(e,r){const s=[],t={};return e?(e.forEach((e=>{const o=new y;if(o.read(e,r),t[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){const r=t[e.parentLayerId];r.sublayers||(r.sublayers=[]),r.sublayers.unshift(o)}else s.unshift(o)})),s):s}(t,o),h=new Map,m=new Set;if(b)for(const e of b.layers)h.set(e.id,e);if(a)for(const e of a.visibleLayers)m.add(e);return d(f,(e=>{b&&e.read(h.get(e.id),b.context),a&&e.read({defaultVisibility:m.has(e.id)},a.context)})),{origin:l(s),sublayers:new p({items:f})}}read(e,r){super.read(e,r),this.readSublayers(e,r)}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.remove(\"sublayers-owner\")),e&&(e.forEach((e=>{e.parent=this,e.layer=this})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))],\"sublayers-owner\"),\"tile\"===this.type&&this.handles.add(e.on(\"before-changes\",(e=>{b.error(new a(\"tilelayer:sublayers-non-modifiable\",\"Sublayer can't be added, moved, or removed from the layer's sublayers\",{layer:this})),e.preventDefault()})),\"sublayers-owner\"))}};return e([t({readOnly:!0})],f.prototype,\"allSublayers\",void 0),e([t({readOnly:!0,type:n.ofType(y)})],f.prototype,\"serviceSublayers\",void 0),e([t({value:null,type:p,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,\"sublayers\",void 0),e([t({readOnly:!0})],f.prototype,\"sublayersSourceJSON\",void 0),f=e([o(\"esri.layers.mixins.SublayersOwner\")],f),f};export{f as SublayersOwner,d as forEachSublayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{combinedViewLayerTimeExtentProperty as a}from\"./commonProperties.js\";import{HandleOwnerMixin as t}from\"../../core/HandleOwner.js\";import{isExportDynamic as l}from\"./sublayerUtils.js\";import n from\"../../views/View.js\";const o={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends(t(i)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&l(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(o[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,s)=>(e[s.id]=s.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const s=e.layer;return s&&(s.dpi,s.imageFormat,s.imageTransparency,s.gdbVersion),(this._get(\"version\")||0)+1}set version(e){this._set(\"version\",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const s=this.layer.sublayers,r=s=>{const i=this.scale,a=0===i,t=0===s.minScale||i<=s.minScale,l=0===s.maxScale||i>=s.maxScale;s.visible&&(a||t&&l)&&(s.sublayers?s.sublayers.forEach(r):e.unshift(s))};s&&s.forEach(r);const i=this._get(\"visibleSublayers\");return!i||i.length!==e.length||i.some(((s,r)=>e[r]!==s))?e:i}toJSON(){const e=this.layer;let s={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};e([s({readOnly:!0,dependsOn:[\"hasDynamicLayers\",\"visibleSublayers\"]})],y.prototype,\"dynamicLayers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\",\"layer.serviceSublayers\",\"layer.capabilities\"]})],y.prototype,\"hasDynamicLayers\",null),e([s()],y.prototype,\"layer\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layers\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],y.prototype,\"layerDefs\",null),e([s({type:Number,dependsOn:[\"view.scale\"]})],y.prototype,\"scale\",null),e([s(a)],y.prototype,\"timeExtent\",void 0),e([s({dependsOn:[\"layers\",\"layerDefs\",\"dynamicLayers\",\"layer.dpi\",\"layer.imageFormat\",\"layer.imageTransparency\",\"layer.gdbVersion\",\"timeExtent\"]})],y.prototype,\"version\",null),e([s({type:n})],y.prototype,\"view\",void 0),e([s({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],y.prototype,\"visibleSublayers\",null),y=e([r(\"esri.layers.mixins.ExportImageParameters\")],y);export{y as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:n}of e){for(;i<o&&r[i]!==n;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{ensureType as o}from\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import s from\"../core/Collection.js\";import{castForReferenceSetter as n,referenceSetter as i}from\"../core/collectionUtils.js\";import c from\"../Graphic.js\";const l=s.ofType(c);let p=class extends l{constructor(r){super(r),this.on(\"before-add\",(r=>{r.item||r.preventDefault()})),this.on(\"after-add\",(r=>this._own(r.item))),this.on(\"after-remove\",(({item:r})=>{r.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get(\"owner\")}set owner(r){r!==this._get(\"owner\")&&(this._unownAll(),this._set(\"owner\",r),this._ownAll())}_createNewInstance(r){return new l(r)}_ownAll(){this.items.forEach((r=>this._own(r)))}_own(r){r.layer&&\"remove\"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner}_unownAll(){this.items.forEach((r=>this._unown(r)))}_unown(r){r.layer===this.owner&&(r.layer=null)}};function a(r){const e=o(p,r);return e&&(e.owner=this),e}r([e()],p.prototype,\"owner\",null),p=r([t(\"esri.support.GraphicsCollection\")],p);const h=(r=\"graphics\")=>({type:p,cast:n,set(o){const e=i(o,this._get(r),p);e.owner=this,this._set(r,e)}});var u=p;export default u;export{p as GraphicsCollection,a as castGraphicsCollection,h as graphicsCollectionProperty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import r from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import i from\"../core/Collection.js\";import{referenceSetter as a}from\"../core/collectionUtils.js\";import n from\"../layers/Layer.js\";function l(e){return e&&\"group\"===e.type}function d(e,r,t){let s,o;if(e)for(let i=0,a=e.length;i<a;i++){if(s=e.getItemAt(i),s[r]===t)return s;if(l(s)&&(o=d(s.layers,r,t),o))return o}}const y=r.getLogger(\"esri.support.LayersMixin\"),p=r=>{let l=class extends r{constructor(...e){super(...e),this.layers=new i;const r=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||y.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},t=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on(\"before-add\",(e=>{var r;(r=e.item).parent&&\"remove\"in r.parent&&r.parent.remove(r)})),this.layers.on(\"after-add\",(e=>r(e.item))),this.layers.on(\"after-remove\",(e=>t(e.item)))}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",a(e,this._get(\"layers\")))}add(e,r){const t=this.layers;r=t.getNextIndex(r),e instanceof n?e.parent===this?this.reorder(e,r):t.add(e,r):o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):y.error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach((e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r)}))}findLayerById(e){return d(this.layers,\"id\",e)}findLayerByUid(e){return d(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([t()],l.prototype,\"layers\",null),l=e([s(\"esri.support.LayersMixin\")],l),l};export{p as LayersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import e from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import o from\"../core/Collection.js\";import{referenceSetter as i}from\"../core/collectionUtils.js\";const n=e.getLogger(\"esri.support.TablesMixin\");function p(t){return t&&\"group\"===t.type}function a(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.getItemAt(s);if(o[e]===r)return o;if(p(o)){const t=a(o.tables,e,r);if(t)return t}}}const l=e=>{let p=class extends e{constructor(...t){super(...t),this.tables=new o,this.tables.on(\"after-add\",(t=>{const e=t.item;e.parent&&e.parent!==this&&\"tables\"in e.parent&&e.parent.tables.remove(e),e.parent=this,\"feature\"!==e.type&&n.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on(\"after-remove\",(t=>{t.item.parent=null}))}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set(\"tables\",i(t,this._get(\"tables\")))}findTableById(t){return a(this.tables,\"id\",t)}findTableByUid(t){return a(this.tables,\"uid\",t)}};return t([r()],p.prototype,\"tables\",null),p=t([s(\"esri.support.TablesMixin\")],p),p};export{l as TablesMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../core/Logger.js\";import{ensureType as r}from\"../core/accessorSupport/ensureType.js\";import{normalize as n,Url as t,makeAbsolute as a}from\"../core/urlUtils.js\";import l from\"../core/Collection.js\";import{esriBasemapDefinitions as s}from\"./basemapDefinitions.js\";import i from\"../Basemap.js\";const o=e.getLogger(\"esri.support.basemapUtils\");function c(){return{}}function u(e){for(const r in e){const n=e[r];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[r]}}function f(e,n){var t;let a;if(\"string\"==typeof e){if(!(e in s)){const r=Object.keys(s).map((e=>`\"${e}\"`)).join(\", \");return o.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}n&&(a=n[e]),a||(a=i.fromId(e),n&&(n[e]=a))}else a=r(i,e);return null!=(t=a)&&t.destroyed&&(o.warn(\"The provided basemap is already destroyed\",{basemap:a}),a=null),a}function y(e,r=null){const n=f(e);if(!n)return null;const t=new i({id:n.id,title:n.title,baseLayers:n.baseLayers.slice(),referenceLayers:n.referenceLayers.slice()});return r&&(t.baseLayers=b(t.baseLayers,r.baseLayers),t.referenceLayers=b(t.referenceLayers,r.referenceLayers)),t.load().catch((()=>{})),t.portalItem=n.portalItem,t}function m(e){let r=null;const n=v(e),t=!n.baseLayers.length;for(const e in s){const a=j(n,x(s[e]),{mustMatchReferences:t});if(\"equal\"===a){r=e;break}\"base-layers-equal\"===a&&(r=e)}return r}function p(e,r){if(e===r)return!0;return\"equal\"===j(v(e),v(r),{mustMatchReferences:!0})}function b(e,r){const n=new l;return e.forEach((e=>{const t=r.find((r=>U(g(e),g(r))))||e;n.some((e=>e===t))?n.push(e):n.push(t)})),n}function L(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(d))}function d(e){if(h(e.url))return!0;if(\"vector-tile\"===e.type)for(const r in e.sourceNameToSource){const n=e.sourceNameToSource[r];if(h(null==n?void 0:n.sourceUrl))return!0}return!1}const S=/^(basemaps|ibasemaps).*-api\\.arcgis\\.com$/i;function h(e){if(!e)return!1;const r=new t(a(e));return S.test(r.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?x(e.resourceInfo.data):{baseLayers:T(e.baseLayers),referenceLayers:T(e.referenceLayers)}:null}function T(e){return(l.isCollection(e)?e.toArray():e).map(g)}function g(e){return{type:e.type,url:I(\"urlTemplate\"in e&&e.urlTemplate||e.url||\"styleUrl\"in e&&e.styleUrl),minScale:\"minScale\"in e&&null!=e.minScale?e.minScale:0,maxScale:\"maxScale\"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function x(e){return e?{baseLayers:q(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:q(e.baseMapLayers.filter((e=>e.isReference)))}:null}function q(e){return e.map((e=>function(e){let r;switch(e.layerType){case\"VectorTileLayer\":r=\"vector-tile\";break;case\"ArcGISTiledMapServiceLayer\":r=\"tile\";break;default:r=\"unknown\"}return{type:r,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function j(e,r,n){if(null!=e!=(null!=r))return\"not-equal\";if(!e)return\"equal\";if(!w(e.baseLayers,r.baseLayers))return\"not-equal\";return w(e.referenceLayers,r.referenceLayers)?\"equal\":n.mustMatchReferences?\"not-equal\":\"base-layers-equal\"}function w(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!U(e[n],r[n]))return!1;return!0}function U(e,r){return e.type===r.type&&e.url===r.url&&e.minScale===r.minScale&&e.maxScale===r.maxScale&&e.visible===r.visible&&e.opacity===r.opacity}function I(e){return e?n(e).replace(/^\\s*https?:/i,\"\").toLowerCase():\"\"}export{y as clonePreservingTiledLayers,p as contentEquals,c as createCache,u as destroyCache,f as ensureType,m as getWellKnownBasemapId,L as hasDeveloperBasemapLayer,d as isDeveloperBasemapLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{valueOf as s}from\"../../core/accessorSupport/get.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{schedule as r}from\"../../core/scheduling.js\";import{wire as i}from\"../../core/accessorSupport/wire.js\";import n from\"../../core/Accessor.js\";import a from\"../../core/Handles.js\";import{init as o,on as h}from\"../../core/watchUtils.js\";let c=class extends n{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,s,t,d=0){const r=0!=(1&d),i=++this.handleId;r||this.installSyncUpdatingWatch(e,s,i);const n=0!=(2&d)?o(e,s,t,r):e.watch(s,t,r);return this.handles.add(n,i),{remove:()=>{this.handles.remove(i)}}}addOnCollectionPropertyChange(e,s,t,d=0){const r=0!=(2&d),i=++this.handleId;return this.handles.add([h(e,s,\"after-changes\",this.createSyncUpdatingCallback()),h(e,s,\"change\",t,r?e=>{t({added:e.items,removed:[],moved:[],target:e})}:void 0)],i),{remove:()=>{this.handles.remove(i)}}}addOnCollectionChange(e,s,t=0){const d=0!=(2&t),r=++this.handleId;return this.handles.add([e.on(\"after-changes\",this.createSyncUpdatingCallback()),e.on(\"change\",s)],r),d&&s({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(r)}}}addPromise(e){if(!e)return e;const s=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(l)||this._set(\"updating\",!1))}},s),this.pendingPromises.add(e),this._set(\"updating\",!0);const t=()=>this.handles.remove(s);return e.then(t,t),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set(\"updating\",!1)}installSyncUpdatingWatch(e,t,d){const r=this.createSyncUpdatingCallback(),n=i((()=>s(e,t)),r);return this.handles.add(n,d),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(l),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get(\"updating\")||this._set(\"updating\",!0),this.handles.add(r((()=>{e===this.scheduleHandleId&&(this._set(\"updating\",this.pendingPromises.size>0),this.handles.remove(l))})),l)}}};e([t({readOnly:!0})],c.prototype,\"updating\",void 0),c=e([d(\"esri.views.support.WatchUpdatingTracking\")],c);const l=-42;export{c as WatchUpdatingTracking};\n"],"sourceRoot":""}