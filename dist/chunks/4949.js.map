{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/arcade/functions/featuresetbase.js"],"names":["H","n","r","i","a","getVariables","length","t","e","name","push","evaluateIdentifier","then","parameters","z","toLowerCase","U","type","range","codedValues","code","W","wkt","wkid","_","hasZ","hasM","spatialReference","x","y","rings","paths","s","points","l","K","F","mode","functions","getuser","standardFunctionAsync","o","f","services","portal","JSON","parse","stringify","Date","u","load","getOwningSystemUrl","getIdentityUser","username","Error","signatures","min","max","featuresetbyid","featureSetById","featuresetbyportalitem","lrucache","c","d","m","featuresetbyname","featureSetByName","featureset","standardFunction","layerDefinition","geometryType","objectIdField","globalIdField","typeIdField","fields","featureSet","features","objectIdFieldName","typeIdFieldName","globalIdFieldName","castToText","alias","nullable","editable","domain","attributes","geometry","q","J","filter","getFieldsIndex","parentfeatureset","whereclause","failDefferred","orderby","orderbyclause","top","topnum","slice","first","abortSignal","_underlyingGraphic","get","attachments","minsize","maxsize","types","hasField","field","_layer","queryAttachments","featuresetbyrelationshipname","p","relationshipMetaData","relationshipTableId","serviceUrl","charAt","relatedTableId","toString","id","keyField","getFeatureByObjectId","featuresetbyassociation","terminals","terminalName","terminalId","associations","h","I","D","w","$","T","L","v","j","lkp","sourceId","O","R","codefield","unVersion","adaptedFields","extraFilter","groupby","toArray","expression","statistic","Promise","all","distinct","V"],"mappings":"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","file":"chunks/4949.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{all as e,resolve as t}from\"../../core/promiseUtils.js\";import n from\"../../layers/support/Field.js\";import{p as r,u as i,d as a,q as s,A as l,a as o,g as f,t as u,b as c,T as d,C as m}from\"../../chunks/languageUtils.js\";import p from\"../Dictionary.js\";import y from\"../ArcadePortal.js\";import{cloneField as g}from\"../featureset/support/shared.js\";import h from\"../Feature.js\";import{calculateStat as F}from\"./fieldStats.js\";import I from\"../featureSetCollection.js\";import{WhereClause as E}from\"../../core/sql/WhereClause.js\";import{isSingleField as D}from\"../featureset/support/sqlUtils.js\";import w from\"../featureset/actions/AttributeFilter.js\";import{SqlExpressionAdapted as b,StringToCodeAdapted as A,FieldRename as N,AdaptedFeatureSet as x,OriginalField as S}from\"../featureset/actions/Adapted.js\";import $ from\"../featureset/support/OrderbyClause.js\";import T from\"../featureset/actions/OrderBy.js\";import L from\"../featureset/sources/Empty.js\";import v from\"../featureset/actions/Top.js\";import j from\"../../layers/FeatureLayer.js\";import O from\"../featureset/sources/FeatureLayerMemory.js\";import{getPortal as R,lookupUser as C,constructFeatureSetFromPortalItem as P,constructFeatureSet as M,constructFeatureSetFromRelationship as k,constructFeatureSetFromUrl as G,constructAssociationMetaDataFeatureSetFromUrl as B}from\"../featureSetUtils.js\";function V(e,t,n,r){if(1===r.length){if(o(r[0]))return F(e,r[0],-1);if(c(r[0]))return F(e,r[0].toArray(),-1)}return F(e,r,-1)}function H(n,r,i){const a=n.getVariables();if(a.length>0){const t=[];for(let e=0;e<a.length;e++){const n={name:a[e]};t.push(r.evaluateIdentifier(i,n))}return e(t).then((e=>{const t={};for(let n=0;n<a.length;n++)t[a[n]]=e[n];return n.parameters=t,n}))}return t(n)}function z(e,t,n=null){for(const r in e)if(r.toLowerCase()===t.toLowerCase())return e[r];return n}function U(e){if(null===e)return null;const t={type:z(e,\"type\",\"\"),name:z(e,\"name\",\"\")};if(\"range\"===t.type)t.range=z(e,\"range\",[]);else{t.codedValues=[];for(const n of z(e,\"codedValues\",[]))t.codedValues.push({name:z(n,\"name\",\"\"),code:z(n,\"code\",null)})}return t}function W(e){if(null===e)return null;const t={},n=z(e,\"wkt\",null);null!==n&&(t.wkt=n);const r=z(e,\"wkid\",null);return null!==r&&(t.wkid=r),t}function _(e){if(null===e)return null;const t={hasZ:z(e,\"hasz\",!1),hasM:z(e,\"hasm\",!1)},n=z(e,\"spatialreference\",null);n&&(t.spatialReference=W(n));const r=z(e,\"x\",null);if(null!==r)return t.x=r,t.y=z(e,\"y\",null),t;const i=z(e,\"rings\",null);if(null!==i)return t.rings=i,t;const a=z(e,\"paths\",null);if(null!==a)return t.paths=a,t;const s=z(e,\"points\",null);if(null!==s)return t.points=s,t;for(const l of[\"xmin\",\"xmax\",\"ymin\",\"ymax\",\"zmin\",\"zmax\",\"mmin\",\"mmax\"]){const n=z(e,l,null);null!==n&&(t[l]=n)}return t}function q(e,t){for(const n of t)if(n===e)return!0;return!1}function J(e){return!!e.layerDefinition&&(!!e.featureSet&&(!1!==q(e.layerDefinition.geometryType,[\"\",\"esriGeometryPoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\",\"esriGeometryMultipoint\",\"esriGeometryEnvelope\"])&&(null!==e.layerDefinition.objectIdField&&\"\"!==e.layerDefinition.objectIdField&&(!1!==o(e.layerDefinition.fields)&&!1!==o(e.featureSet.features)))))}function K(F){\"async\"===F.mode&&(F.functions.getuser=function(e,t){return F.standardFunctionAsync(e,t,((t,n,l)=>{r(l,1,2);let o=i(l[1],\"\"),f=!0===o;if(o=!0===o||!1===o?\"\":a(o),l[0]instanceof y){let t=null;return e.services&&e.services.portal&&(t=e.services.portal),t=R(l[0],t),C(t,o,f).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of[\"lastLogin\",\"created\",\"modified\"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return p.convertObjectToArcadeDictionary(t)}return null}))}let u=null;if(s(l[0])&&(u=l[0]),u)return f=!1,o?null:u.load().then((()=>u.getOwningSystemUrl())).then((t=>{if(!t)return o?null:u.getIdentityUser().then((e=>e?p.convertObjectToArcadeDictionary({username:e}):null));let n=null;return e.services&&e.services.portal&&(n=e.services.portal),n=R(new y(t),n),C(n,o,f).then((e=>{if(e){const t=JSON.parse(JSON.stringify(e));for(const e of[\"lastLogin\",\"created\",\"modified\"])void 0!==t[e]&&null!==t[e]&&(t[e]=new Date(t[e]));return p.convertObjectToArcadeDictionary(t)}return null}))}));throw new Error(\"Invalid Parameter\")}))},F.signatures.push({name:\"getuser\",min:\"1\",max:\"2\"}),F.functions.featuresetbyid=function(e,t){return F.standardFunctionAsync(e,t,((e,t,n)=>{if(r(n,2,4),n[0]instanceof I){const e=a(n[1]);let t=i(n[2],null);const r=l(i(n[3],!0));if(null===t&&(t=[\"*\"]),!1===o(t))throw new Error(\"Invalid Parameter\");return n[0].featureSetById(e,r,t)}throw new Error(\"Invalid Parameter\")}))},F.signatures.push({name:\"featuresetbyid\",min:\"2\",max:\"4\"}),F.functions.featuresetbyportalitem=function(e,t){return F.standardFunctionAsync(e,t,((t,n,s)=>{if(r(s,2,5),null===s[0])throw new Error(\"Portal is required\");if(s[0]instanceof y){const t=a(s[1]),n=a(s[2]);let r=i(s[3],null);const f=l(i(s[4],!0));if(null===r&&(r=[\"*\"]),!1===o(r))throw new Error(\"Invalid Parameter\");let u=null;return e.services&&e.services.portal&&(u=e.services.portal),u=R(s[0],u),P(t,n,e.spatialReference,r,f,u,e.lrucache)}if(!1===f(s[0]))throw new Error(\"Portal is required\");const u=a(s[0]),c=a(s[1]);let d=i(s[2],null);const m=l(i(s[3],!0));if(null===d&&(d=[\"*\"]),!1===o(d))throw new Error(\"Invalid Parameter\");if(e.services&&e.services.portal)return P(u,c,e.spatialReference,d,m,e.services.portal,e.lrucache);throw new Error(\"Portal is required\")}))},F.signatures.push({name:\"featuresetbyportalitem\",min:\"2\",max:\"5\"}),F.functions.featuresetbyname=function(e,t){return F.standardFunctionAsync(e,t,((e,t,n)=>{if(r(n,2,4),n[0]instanceof I){const e=a(n[1]);let t=i(n[2],null);const r=l(i(n[3],!0));if(null===t&&(t=[\"*\"]),!1===o(t))throw new Error(\"Invalid Parameter\");return n[0].featureSetByName(e,r,t)}throw new Error(\"Invalid Parameter\")}))},F.signatures.push({name:\"featuresetbyname\",min:\"2\",max:\"4\"}),F.functions.featureset=function(e,t){return F.standardFunction(e,t,((t,n,i)=>{r(i,1,1);let a=i[0];const s={layerDefinition:{geometryType:\"\",objectIdField:\"\",globalIdField:\"\",typeIdField:\"\",fields:[]},featureSet:{geometryType:\"\",features:[]}};if(f(a))a=JSON.parse(a),void 0!==a.layerDefinition?(s.layerDefinition=a.layerDefinition,s.featureSet=a.featureSet,a.layerDefinition.spatialReference&&(s.layerDefinition.spatialReference=a.layerDefinition.spatialReference)):(s.featureSet.features=a.features,s.featureSet.geometryType=a.geometryType,s.layerDefinition.geometryType=s.featureSet.geometryType,s.layerDefinition.objectIdField=a.objectIdFieldName,s.layerDefinition.typeIdField=a.typeIdFieldName,s.layerDefinition.globalIdField=a.globalIdFieldName,s.layerDefinition.fields=a.fields,a.spatialReference&&(s.layerDefinition.spatialReference=a.spatialReference));else{if(!(i[0]instanceof p))throw new Error(\"Invalid Parameter\");{a=JSON.parse(i[0].castToText());const e=z(a,\"layerdefinition\");if(null!==e){s.layerDefinition.geometryType=z(e,\"geometrytype\",\"\"),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.globalIdField=z(e,\"globalidfield\",\"\"),s.layerDefinition.objectIdField=z(e,\"objectidfield\",\"\"),s.layerDefinition.typeIdField=z(e,\"typeidfield\",\"\");const t=z(e,\"spatialreference\",null);t&&(s.layerDefinition.spatialReference=W(t));for(const r of z(e,\"fields\",[])){const e={name:z(r,\"name\",\"\"),alias:z(r,\"alias\",\"\"),type:z(r,\"type\",\"\"),nullable:z(r,\"nullable\",!0),editable:z(r,\"editable\",!0),length:z(r,\"length\",null),domain:U(z(r,\"domain\"))};s.layerDefinition.fields.push(e)}const n=z(a,\"featureset\",null);if(n){const e={};for(const t of s.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of z(n,\"features\",[])){const n={},r=z(t,\"attributes\",{});for(const t in r)n[e[t.toLowerCase()]]=r[t];s.featureSet.features.push({attributes:n,geometry:_(z(t,\"geometry\",null))})}}}else{s.layerDefinition.geometryType=z(a,\"geometrytype\",\"\"),s.featureSet.geometryType=s.layerDefinition.geometryType,s.layerDefinition.objectIdField=z(a,\"objectidfieldname\",\"\"),s.layerDefinition.typeIdField=z(a,\"typeidfieldname\",\"\");const e=z(a,\"spatialreference\",null);e&&(s.layerDefinition.spatialReference=W(e));for(const n of z(a,\"fields\",[])){const e={name:z(n,\"name\",\"\"),alias:z(n,\"alias\",\"\"),type:z(n,\"type\",\"\"),nullable:z(n,\"nullable\",!0),editable:z(n,\"editable\",!0),length:z(n,\"length\",null),domain:U(z(n,\"domain\"))};s.layerDefinition.fields.push(e)}const t={};for(const n of s.layerDefinition.fields)t[n.name.toLowerCase()]=n.name;for(const n of z(a,\"features\",[])){const e={},r=z(n,\"attributes\",{});for(const n in r)e[t[n.toLowerCase()]]=r[n];s.featureSet.features.push({attributes:e,geometry:_(z(n,\"geometry\",null))})}}}}if(!1===J(s))throw new Error(\"Invalid Parameter\");return O.create(s,e.spatialReference)}))},F.signatures.push({name:\"featureset\",min:\"1\",max:\"1\"}),F.functions.filter=function(n,i){return F.standardFunctionAsync(n,i,((i,a,l)=>(r(l,2,2),s(l[0])?l[0].load().then((r=>{const i=E.create(l[1],r.getFieldsIndex()),a=i.getVariables();if(a.length>0){const t=[];for(let e=0;e<a.length;e++){const r={name:a[e]};t.push(F.evaluateIdentifier(n,r))}return e(t).then((e=>{const t={};for(let n=0;n<a.length;n++)t[a[n]]=e[n];return i.parameters=t,new w({parentfeatureset:l[0],whereclause:i})}))}return t(new w({parentfeatureset:l[0],whereclause:i}))})):F.failDefferred(\"Filter cannot accept this parameter type\"))))},F.signatures.push({name:\"filter\",min:\"2\",max:\"2\"}),F.functions.orderby=function(e,n){return F.standardFunctionAsync(e,n,((e,n,i)=>{if(r(i,2,2),s(i[0])){const e=new $(i[1]);return t(new T({parentfeatureset:i[0],orderbyclause:e}))}return F.failDefferred(\"Order cannot accept this parameter type\")}))},F.signatures.push({name:\"orderby\",min:\"2\",max:\"2\"}),F.functions.top=function(e,n){return F.standardFunctionAsync(e,n,((e,n,i)=>(r(i,2,2),s(i[0])?t(new v({parentfeatureset:i[0],topnum:i[1]})):o(i[0])?u(i[1])>=i[0].length?i[0].slice(0):i[0].slice(0,u(i[1])):c(i[0])?u(i[1])>=i[0].length()?i[0].slice(0):i[0].slice(0,u(i[1])):F.failDefferred(\"Top cannot accept this parameter type\"))))},F.signatures.push({name:\"top\",min:\"2\",max:\"2\"}),F.functions.first=function(e,n){return F.standardFunctionAsync(e,n,((e,n,i)=>(r(i,1,1),s(i[0])?i[0].first(e.abortSignal).then((e=>{if(null!==e){const t=h.createFromGraphicLikeObject(e.geometry,e.attributes,i[0]);t._underlyingGraphic=e,e=t}return e})):o(i[0])?0===i[0].length?t(null):t(i[0][0]):c(i[0])?0===i[0].length()?t(null):t(i[0].get(0)):null)))},F.signatures.push({name:\"first\",min:\"1\",max:\"1\"}),F.functions.attachments=function(e,t){return F.standardFunctionAsync(e,t,((t,n,i)=>{r(i,1,2);const a={minsize:-1,maxsize:-1,types:null};if(i.length>1)if(i[1]instanceof p){if(i[1].hasField(\"minsize\")&&(a.minsize=u(i[1].field(\"minsize\"))),i[1].hasField(\"maxsize\")&&(a.maxsize=u(i[1].field(\"maxsize\"))),i[1].hasField(\"types\")){const e=d(i[1].field(\"types\"),!1);e.length>0&&(a.types=e)}}else if(null!==i[1])throw new Error(\"Invalid Parameter\");if(i[0]instanceof h){let t=i[0]._layer;return t instanceof j&&(t=M(t,e.spatialReference,[\"*\"],!0,e.lrucache)),null===t||!1===s(t)?[]:t.load().then((()=>t.queryAttachments(i[0].field(t.objectIdField),a.minsize,a.maxsize,a.types)))}if(null===i[0])return[];throw new Error(\"Invalid Parameter\")}))},F.signatures.push({name:\"attachments\",min:\"1\",max:\"2\"}),F.functions.featuresetbyrelationshipname=function(e,t){return F.standardFunctionAsync(e,t,((t,n,f)=>{r(f,2,4);const u=f[0],c=a(f[1]);let d=i(f[2],null);const m=l(i(f[3],!0));if(null===d&&(d=[\"*\"]),!1===o(d))throw new Error(\"Invalid Parameter\");if(null===f[0])return null;if(!(f[0]instanceof h))throw new Error(\"Invalid Parameter\");let p=u._layer;return p instanceof j&&(p=M(p,e.spatialReference,[\"*\"],!0,e.lrucache)),null===p||!1===s(p)?null:p.load().then((t=>{const n=t.relationshipMetaData().filter((e=>e.name===c));if(0===n.length)return null;if(void 0!==n[0].relationshipTableId&&null!==n[0].relationshipTableId&&n[0].relationshipTableId>-1)return k(t,n[0],u.field(t.objectIdField),t.spatialReference,d,m,e.lrucache);let r=t.serviceUrl();return r?(r=\"/\"===r.charAt(r.length-1)?r+n[0].relatedTableId.toString():r+\"/\"+n[0].relatedTableId.toString(),G(r,t.spatialReference,d,m,e.lrucache).then((e=>e.load().then((()=>e.relationshipMetaData())).then((r=>{if(r=r.filter((e=>e.id===n[0].id)),!1===u.hasField(n[0].keyField)||null===u.field(n[0].keyField))return t.getFeatureByObjectId(u.field(t.objectIdField),[n[0].keyField]).then((t=>{if(t){const i=E.create(r[0].keyField+\"= @id\",e.getFieldsIndex());return i.parameters={id:t.attributes[n[0].keyField]},e.filter(i)}return new L({parentfeatureset:e})}));const i=E.create(r[0].keyField+\"= @id\",e.getFieldsIndex());return i.parameters={id:u.field(n[0].keyField)},e.filter(i)}))))):null}))}))},F.signatures.push({name:\"featuresetbyrelationshipname\",min:\"2\",max:\"4\"}),F.functions.featuresetbyassociation=function(e,t){return F.standardFunctionAsync(e,t,((t,l,o)=>{r(o,2,3);const u=o[0],c=a(i(o[1],\"\")).toLowerCase(),d=f(o[2])?a(o[2]):null;if(null===o[0])return null;if(!(o[0]instanceof h))throw new Error(\"Invalid Parameter\");let p=u._layer;return p instanceof j&&(p=M(p,e.spatialReference,[\"*\"],!0,e.lrucache)),null===p||!1===s(p)?null:p.load().then((()=>{const t=p.serviceUrl();return B(t,e.spatialReference)})).then((e=>{let t=null,r=null,i=!1;if(null!==d&&\"\"!==d&&void 0!==d){for(const t of e.terminals)t.terminalName===d&&(r=t.terminalId);null===r&&(i=!0)}const a=e.associations.getFieldsIndex(),s=a.get(\"TOGLOBALID\").name,l=a.get(\"FROMGLOBALID\").name,o=a.get(\"TOTERMINALID\").name,f=a.get(\"FROMTERMINALID\").name,y=a.get(\"FROMNETWORKSOURCEID\").name,h=a.get(\"TONETWORKSOURCEID\").name,F=a.get(\"ASSOCIATIONTYPE\").name,I=a.get(\"ISCONTENTVISIBLE\").name,D=a.get(\"OBJECTID\").name;for(const n of p.fields)if(\"global-id\"===n.type){t=u.field(n.name);break}let w=null,$=new b(new n({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),E.create(\"0\",e.associations.getFieldsIndex())),T=new b(new n({name:\"side\",alias:\"side\",type:\"string\"}),E.create(\"''\",e.associations.getFieldsIndex()));const L=\"globalid\",v=\"globalId\",j={};for(const n in e.lkp)j[n]=e.lkp[n].sourceId;const O=new A(new n({name:\"classname\",alias:\"classname\",type:\"string\"}),null,j);let R=\"\";switch(c){case\"midspan\":{R=`((${s}='${t}') OR ( ${l}='${t}')) AND (${F} IN (5))`,O.codefield=E.create(`CASE WHEN (${s}='${t}') THEN ${y} ELSE ${h} END`,e.associations.getFieldsIndex());const r=g(x.findField(e.associations.fields,l));r.name=L,r.alias=L,w=new b(r,E.create(`CASE WHEN (${l}='${t}') THEN ${s} ELSE ${l} END`,e.associations.getFieldsIndex())),$=e.unVersion>=4?new S(x.findField(e.associations.fields,a.get(\"PERCENTALONG\").name)):new b(new n({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),E.create(\"0\",e.associations.getFieldsIndex()));break}case\"junctionedge\":{R=`((${s}='${t}') OR ( ${l}='${t}')) AND (${F} IN (4,6))`,O.codefield=E.create(`CASE WHEN (${s}='${t}') THEN ${y} ELSE ${h} END`,e.associations.getFieldsIndex());const r=g(x.findField(e.associations.fields,l));r.name=L,r.alias=L,w=new b(r,E.create(`CASE WHEN (${l}='${t}') THEN ${s} ELSE ${l} END`,e.associations.getFieldsIndex())),T=new b(new n({name:\"side\",alias:\"side\",type:\"string\"}),E.create(`CASE WHEN (${F}=4) THEN 'from' ELSE 'to' END`,e.associations.getFieldsIndex()));break}case\"connected\":{let n=`${s}='@T'`,i=`${l}='@T'`;null!==r&&(n+=` AND ${o}=@A`,i+=` AND ${f}=@A`),R=\"((\"+n+\") OR (\"+i+\"))\",R=m(R,\"@T\",t),n=m(n,\"@T\",t),null!==r&&(n=m(n,\"@A\",r.toString()),R=m(R,\"@A\",r.toString())),O.codefield=E.create(\"CASE WHEN \"+n+` THEN ${y} ELSE ${h} END`,e.associations.getFieldsIndex());const a=g(x.findField(e.associations.fields,l));a.name=L,a.alias=L,w=new b(a,E.create(\"CASE WHEN \"+n+` THEN ${l} ELSE ${s} END`,e.associations.getFieldsIndex()));break}case\"container\":R=`${s}='${t}' AND ${F} = 2`,null!==r&&(R+=` AND ${o} = `+r.toString()),O.codefield=y,R=\"( \"+R+\" )\",w=new N(x.findField(e.associations.fields,l),L,L);case\"content\":R=`(${l}='${t}' AND ${F} = 2)`,null!==r&&(R+=` AND ${f} = `+r.toString()),O.codefield=h,R=\"( \"+R+\" )\",w=new N(x.findField(e.associations.fields,s),L,L);break;case\"structure\":R=`(${s}='${t}' AND ${F} = 3)`,null!==r&&(R+=` AND ${o} = `+r.toString()),O.codefield=y,R=\"( \"+R+\" )\",w=new N(x.findField(e.associations.fields,l),L,v);break;case\"attached\":R=`(${l}='${t}' AND ${F} = 3)`,null!==r&&(R+=` AND ${f} = `+r.toString()),O.codefield=h,R=\"( \"+R+\" )\",w=new N(x.findField(e.associations.fields,s),L,v);break;default:throw new Error(\"Invalid Parameter\")}i&&(R=\"1 <> 1\");return new x({parentfeatureset:e.associations,adaptedFields:[new S(x.findField(e.associations.fields,D)),new S(x.findField(e.associations.fields,I)),w,T,O,$],extraFilter:R?E.create(R,e.associations.getFieldsIndex()):null})}))}))},F.signatures.push({name:\"featuresetbyassociation\",min:\"2\",max:\"6\"}),F.functions.groupby=function(e,n){return F.standardFunctionAsync(e,n,((n,i,l)=>(r(l,3,3),s(l[0])?l[0].load().then((n=>{const r=[],i=[];let s=!1,u=[];if(f(l[1]))u.push(l[1]);else if(l[1]instanceof p)u.push(l[1]);else if(o(l[1]))u=l[1];else{if(!c(l[1]))return F.failDefferred(\"Illegal Value: GroupBy\");u=l[1].toArray()}for(const e of u)if(f(e)){const t=E.create(a(e),n.getFieldsIndex()),i=!0===D(t)?a(e):\"%%%%FIELDNAME\";r.push({name:i,expression:t}),\"%%%%FIELDNAME\"===i&&(s=!0)}else{if(!(e instanceof p))return F.failDefferred(\"Illegal Value: GroupBy\");{const t=e.hasField(\"name\")?e.field(\"name\"):\"%%%%FIELDNAME\",i=e.hasField(\"expression\")?e.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===t&&(s=!0),!t)return F.failDefferred(\"Illegal Value: GroupBy\");r.push({name:t,expression:E.create(i||t,n.getFieldsIndex())})}}if(u=[],f(l[2]))u.push(l[2]);else if(o(l[2]))u=l[2];else if(c(l[2]))u=l[2].toArray();else{if(!(l[2]instanceof p))return F.failDefferred(\"Illegal Value: GroupBy\");u.push(l[2])}for(const e of u){if(!(e instanceof p))return F.failDefferred(\"Illegal Value: GroupBy\");{const t=e.hasField(\"name\")?e.field(\"name\"):\"\",r=e.hasField(\"statistic\")?e.field(\"statistic\"):\"\",a=e.hasField(\"expression\")?e.field(\"expression\"):\"\";if(!t||!r||!a)return F.failDefferred(\"Illegal Value: GroupBy\");i.push({name:t,statistic:r.toLowerCase(),expression:E.create(a,n.getFieldsIndex())})}}if(s){const e={};for(const r of n.fields)e[r.name.toLowerCase()]=1;for(const n of r)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of i)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of r)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}const d=[];for(const t of r)d.push(H(t.expression,F,e));for(const t of i)d.push(H(t.expression,F,e));return d.length>0?Promise.all(d).then((()=>t(l[0].groupby(r,i)))):t(l[0].groupby(r,i))})):F.failDefferred(\"Illegal Value: GroupBy\"))))},F.signatures.push({name:\"groupby\",min:\"3\",max:\"3\"}),F.functions.distinct=function(e,n){return F.standardFunctionAsync(e,n,((n,i,l)=>s(l[0])?(r(l,2,2),l[0].load().then((n=>{const r=[];let i=[];if(f(l[1]))i.push(l[1]);else if(l[1]instanceof p)i.push(l[1]);else if(o(l[1]))i=l[1];else{if(!c(l[1]))return F.failDefferred(\"Illegal Value: GroupBy\");i=l[1].toArray()}let s=!1;for(const e of i)if(f(e)){const t=E.create(a(e),n.getFieldsIndex()),i=!0===D(t)?a(e):\"%%%%FIELDNAME\";r.push({name:i,expression:t}),\"%%%%FIELDNAME\"===i&&(s=!0)}else{if(!(e instanceof p))return F.failDefferred(\"Illegal Value: GroupBy\");{const t=e.hasField(\"name\")?e.field(\"name\"):\"%%%%FIELDNAME\",i=e.hasField(\"expression\")?e.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===t&&(s=!0),!t)return F.failDefferred(\"Illegal Value: GroupBy\");r.push({name:t,expression:E.create(i||t,n.getFieldsIndex())})}}if(s){const e={};for(const r of n.fields)e[r.name.toLowerCase()]=1;for(const n of r)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of r)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}const u=[];for(const t of r)u.push(H(t.expression,F,e));return u.length>0?Promise.all(u).then((()=>t(l[0].groupby(r,[])))):t(l[0].groupby(r,[]))}))):V(\"distinct\",n,i,l)))})}export{K as registerFunctions};\n"],"sourceRoot":""}