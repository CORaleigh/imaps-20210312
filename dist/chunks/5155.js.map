{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/layers/support/TileMatrixSet.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/WMTSStyle.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/WMTSSublayer.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/wmtsUtils.js","webpack://imaps/./node_modules/@arcgis/core/layers/WMTSLayer.js"],"names":["p","l","t","super","this","fullExtent","id","tileInfo","hasOwnProperty","clone","type","json","read","source","prototype","String","i","r","title","description","legendUrl","isDefault","keywords","slice","m","imageFormats","layer","styles","tileMatrixSetId","tileMatrixSets","_get","_set","e","length","indexOf","console","error","getItemAt","find","imageFormat","styleId","value","write","ignoreOrigin","readOnly","s","a","nodeType","Node","ELEMENT_NODE","d","childNodes","n","nodeName","f","push","map","textContent","g","split","forEach","Array","call","some","x","y","formats","S","E","w","layerMap","get","o","c","dimensionMap","set","dimensions","dimensions2","getAttribute","replace","toLowerCase","substring","template","format","resourceType","xmin","parseFloat","ymin","xmax","ymax","spatialReference","wkid","abstract","b","u","parseInt","N","resolution","C","toJSON","dpi","size","origin","lods","V","pop","Number","h","O","level","levelValue","scale","Math","PI","metersPerDegree","Set","_","_sublayersHandles","copyright","customParameters","customLayerParameters","operationalLayerType","resourceInfo","serviceMode","sublayers","version","watch","removeAll","add","on","item","url","addResolvingPromise","loadFromPortal","supportedTypes","then","_fetchService","catch","Promise","resolve","activeLayer","layers","templateUrl","wmtsInfo","_getLowerCasedUrlParams","layerIdentifier","tileMatrixSet","isArray","style","getUrlTemplate","_mergeParams","toArray","_override","_clearOverride","substr","_getTileMatrixSetById","urlTemplate","getTileUrl","responseType","data","_appendCustomLayerParameters","ssl","_getCapabilities","DOMParser","parseFromString","documentElement","Map","querySelector","getElementsByTagName","T","M","attributes","nodeValue","tileUrl","_getCapabilitiesUrl","findSublayerById","encodeURIComponent","_appendCustomParameters","query","Object","keys","has","origins","target","service"],"mappings":"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","file":"chunks/5155.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import s from\"../../geometry/Extent.js\";import i from\"./TileInfo.js\";var p;let l=p=class extends e{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new p;return this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"tileInfo\")&&(t.tileInfo=this.tileInfo&&this.tileInfo.clone()),t}};t([o({type:s,json:{read:{source:\"fullExtent\"}}})],l.prototype,\"fullExtent\",void 0),t([o({type:String,json:{read:{source:\"id\"}}})],l.prototype,\"id\",void 0),t([o({type:i,json:{read:{source:\"tileInfo\"}}})],l.prototype,\"tileInfo\",void 0),l=p=t([r(\"esri.layer.support.TileMatrixSet\")],l);var n=l;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";var t;let i=t=class extends s{constructor(r){super(r),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const r=new t;return this.hasOwnProperty(\"description\")&&(r.description=this.description),this.hasOwnProperty(\"id\")&&(r.id=this.id),this.hasOwnProperty(\"isDefault\")&&(r.isDefault=this.isDefault),this.hasOwnProperty(\"keywords\")&&(r.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty(\"legendUrl\")&&(r.legendUrl=this.legendUrl),this.hasOwnProperty(\"title\")&&(r.title=this.title),r}};r([e({json:{read:{source:\"id\"}}})],i.prototype,\"id\",void 0),r([e({json:{read:{source:\"title\"}}})],i.prototype,\"title\",void 0),r([e({json:{read:{source:\"abstract\"}}})],i.prototype,\"description\",void 0),r([e({json:{read:{source:\"legendUrl\"}}})],i.prototype,\"legendUrl\",void 0),r([e({json:{read:{source:\"isDefault\"}}})],i.prototype,\"isDefault\",void 0),r([e({json:{read:{source:\"keywords\"}}})],i.prototype,\"keywords\",void 0),i=t=r([o(\"esri.layer.support.WMTSStyle\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import o from\"../../geometry/Extent.js\";import l from\"../../core/Collection.js\";import a from\"./TileMatrixSet.js\";import p from\"./WMTSStyle.js\";var n;let m=n=class extends i{constructor(t){super(t),this.fullExtent=null,this.imageFormats=null,this.id=null,this.layer=null,this.styles=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}get description(){return this._get(\"description\")}set description(t){this._set(\"description\",t)}readFullExtent(t,e){return(t=e.fullExtent)?o.fromJSON(t):null}get imageFormat(){let t=this._get(\"imageFormat\");return t||(t=this.imageFormats&&this.imageFormats.length?this.imageFormats[0]:\"\"),t}set imageFormat(t){const e=this.imageFormats;t&&(t.indexOf(\"image/\")>-1||e&&-1===e.indexOf(t))&&(-1===t.indexOf(\"image/\")&&(t=\"image/\"+t),e&&-1===e.indexOf(t))?console.error(\"The layer doesn't support the format of \"+t):this._set(\"imageFormat\",t)}get styleId(){let t=this._get(\"styleId\");return t||(t=this.styles&&this.styles.length?this.styles.getItemAt(0).id:\"\"),t}set styleId(t){this._set(\"styleId\",t)}get title(){return this._get(\"title\")}set title(t){this._set(\"title\",t)}get tileMatrixSet(){return this.tileMatrixSets?this.tileMatrixSets.find((t=>t.id===this.tileMatrixSetId)):null}clone(){const t=new n;return this.hasOwnProperty(\"description\")&&(t.description=this.description),this.hasOwnProperty(\"imageFormats\")&&(t.imageFormats=this.imageFormats&&this.imageFormats.slice()),this.hasOwnProperty(\"imageFormat\")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty(\"fullExtent\")&&(t.fullExtent=this.fullExtent&&this.fullExtent.clone()),this.hasOwnProperty(\"id\")&&(t.id=this.id),this.hasOwnProperty(\"layer\")&&(t.layer=this.layer),this.hasOwnProperty(\"styleId\")&&(t.styleId=this.styleId),this.hasOwnProperty(\"styles\")&&(t.styles=this.styles&&this.styles.clone()),this.hasOwnProperty(\"tileMatrixSetId\")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty(\"tileMatrixSets\")&&(t.tileMatrixSets=this.tileMatrixSets.clone()),this.hasOwnProperty(\"title\")&&(t.title=this.title),t}};t([e()],m.prototype,\"description\",null),t([e()],m.prototype,\"fullExtent\",void 0),t([r(\"fullExtent\",[\"fullExtent\"])],m.prototype,\"readFullExtent\",null),t([e()],m.prototype,\"imageFormat\",null),t([e({json:{read:{source:\"formats\"}}})],m.prototype,\"imageFormats\",void 0),t([e()],m.prototype,\"id\",void 0),t([e()],m.prototype,\"layer\",void 0),t([e()],m.prototype,\"styleId\",null),t([e({type:l.ofType(p),json:{read:{source:\"styles\"}}})],m.prototype,\"styles\",void 0),t([e({value:null,json:{write:{ignoreOrigin:!0}}})],m.prototype,\"title\",null),t([e()],m.prototype,\"tileMatrixSetId\",void 0),t([e({readOnly:!0})],m.prototype,\"tileMatrixSet\",null),t([e({type:l.ofType(a),json:{read:{source:\"tileMatrixSets\"}}})],m.prototype,\"tileMatrixSets\",void 0),m=n=t([s(\"esri.layers.support.WMTSSublayer\")],m);var h=m;export default h;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import t from\"../../geometry/support/WKIDUnitConversion.js\";import i from\"../../geometry/SpatialReference.js\";import n from\"../../geometry/Point.js\";import r from\"../../geometry/Extent.js\";import{getReferenceEllipsoidFromWKID as l}from\"../../geometry/projectionEllipsoid.js\";import o from\"./TileInfo.js\";const s=90.71428571428571,a=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function c(t,i){var n,r;t=t.replace(/ows:/gi,\"\");const l=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,o=new Map,s=new Map,a=d(\"Contents\",l);if(!a)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const c=d(\"OperationsMetadata\",l),u=null==c?void 0:c.querySelector(\"[name='GetTile']\"),p=null==u?void 0:u.getElementsByTagName(\"Get\"),m=p&&Array.prototype.slice.call(p),w=null!=(n=(null==i||null==(r=i.url)?void 0:r.indexOf(\"https\"))>-1)&&n;let T,M,y=i.serviceMode,S=i&&i.url;if(m&&m.length&&m.some((e=>{const t=d(\"Constraint\",e);return!t||h(\"AllowedValues\",\"Value\",y,t)?(S=e.attributes[0].nodeValue,!0):(!t||h(\"AllowedValues\",\"Value\",\"RESTful\",t)||h(\"AllowedValues\",\"Value\",\"REST\",t)?M=e.attributes[0].nodeValue:t&&!h(\"AllowedValues\",\"Value\",\"KVP\",t)||(T=e.attributes[0].nodeValue),!1)})),!S)if(M)S=M,y=\"RESTful\";else if(T)S=T,y=\"KVP\";else{const e=d(\"ServiceMetadataURL\",l);S=e&&e.getAttribute(\"xlink:href\")}const E=S.indexOf(\"1.0.0/\");-1===E&&\"RESTful\"===y?S+=\"/\":E>-1&&(S=S.substring(0,E)),\"KVP\"===y&&(S+=E>-1?\"\":\"?\"),w&&(S=S.replace(/^http:/i,\"https:\"));const V=g(\"ServiceIdentification>AccessConstraints\",l),b=f(\"Layer\",a),C=f(\"TileMatrixSet\",a);return{copyright:V,layers:b.map((e=>{const t=g(\"Identifier\",e);return o.set(t,e),x(t,e,C,w)})),tileUrl:S,serviceMode:y,layerMap:o,dimensionMap:s}}function u(e){return e.layers.forEach((e=>{e.tileMatrixSets.forEach((e=>{const t=e.tileInfo;96!==t.dpi&&(t.lods.forEach((i=>{i.scale=96*i.scale/t.dpi,i.resolution=O(t.spatialReference.wkid,i.scale*s/96,e.id)})),t.dpi=96)}))})),e}function p(e){return e.nodeType===Node.ELEMENT_NODE}function d(e,t){for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];if(p(n)&&n.nodeName===e)return n}return null}function f(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];p(r)&&r.nodeName===e&&i.push(r)}return i}function m(e,t){const i=[];for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];p(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent))}function g(e,t){return e.split(\">\").forEach((e=>{t&&(t=d(e,t))})),t&&t.textContent}function h(e,t,i,n){let r;return Array.prototype.slice.call(n.childNodes).some((n=>{if(n.nodeName.indexOf(e)>-1){const e=d(t,n),l=e&&e.textContent;if(l===i||i.split(\":\")&&i.split(\":\")[1]===l)return r=n,!0}return!1})),r}function x(e,t,i,n){const r=g(\"Abstract\",t),l=m(\"Format\",t);return{id:e,fullExtent:y(t),description:r,formats:l,styles:S(t,n),title:g(\"Title\",t),tileMatrixSets:E(t,i)}}function w(e,t){const i=[],n=e.layerMap.get(t);if(!n)return;const r=f(\"ResourceURL\",n),l=f(\"Dimension\",n);let o,s,a,c;return l.length&&(o=g(\"Identifier\",l[0]),s=m(\"Default\",l[0])||m(\"Value\",l[0])),l.length>1&&(a=g(\"Identifier\",l[1]),c=m(\"Default\",l[1])||m(\"Value\",l[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:c}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(o&&s.length)if(t.indexOf(\"{\"+o+\"}\")>-1)t=t.replace(\"{\"+o+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+o.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+o.length+2))}if(a&&c.length)if(t.indexOf(\"{\"+a+\"}\")>-1)t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}i.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),i}function T(e,t,i,n,r,l,o,s){const{dimensionMap:a}=e,c=w(e,t),u=a.get(t).dimensions&&a.get(t).dimensions[0],p=a.get(t).dimensions2&&a.get(t).dimensions2[0];let d=\"\";if(c&&c.length>0){let e=null;c.some((t=>t.format===n&&(e=t,!0))),e||(e=c[o%c.length]),d=e.template.replace(/\\{Style\\}/gi,r).replace(/\\{TileMatrixSet\\}/gi,i).replace(/\\{TileMatrix\\}/gi,l).replace(/\\{TileRow\\}/gi,\"\"+o).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}return d}function M(e,t,i,n){const{dimensionMap:r}=e,l=w(e,t);let o=\"\";if(l&&l.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];o=l[0].template,o.indexOf(\".xxx\")===o.length-4&&(o=o.slice(0,o.length-4)),o=o.replace(/\\{Style\\}/gi,n),o=o.replace(/\\{TileMatrixSet\\}/gi,i),o=o.replace(/\\{TileMatrix\\}/gi,\"{level}\"),o=o.replace(/\\{TileRow\\}/gi,\"{row}\"),o=o.replace(/\\{TileCol\\}/gi,\"{col}\"),o=o.replace(/\\{dimensionValue\\}/gi,e),o=o.replace(/\\{dimensionValue2\\}/gi,s)}return o}function y(e){const t=d(\"WGS84BoundingBox\",e),i=t?g(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],n=t?g(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(n[0]),ymax:parseFloat(n[1]),spatialReference:{wkid:4326}}}function S(e,t){return f(\"Style\",e).map((e=>{const i=d(\"LegendURL\",e),n=d(\"Keywords\",e),r=n&&m(\"Keyword\",n);let l=i&&i.getAttribute(\"xlink:href\");t&&(l=l&&l.replace(/^http:/i,\"https:\"));return{abstract:g(\"Abstract\",e),id:g(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:l,title:g(\"Title\",e)}}))}function E(e,t){return m(\"TileMatrixSet\",d(\"TileMatrixSetLink\",e)).map((i=>V(i,e,t)))}function V(e,t,i){const n=m(\"TileMatrix\",h(\"TileMatrixSetLink\",\"TileMatrixSet\",e,t)),r=i.find((t=>{const i=d(\"Identifier\",t),n=i&&i.textContent;return!!(n===e||e.split(\":\")&&e.split(\":\")[1]===n)})),l=b(r),s=l.spatialReference,a=s.wkid,c=d(\"TileMatrix\",r),u=[parseInt(g(\"TileWidth\",c),10),parseInt(g(\"TileHeight\",c),10)],p=[];if(n.length)n.forEach(((t,i)=>{const n=h(\"TileMatrix\",\"Identifier\",t,r);p.push(N(n,a,i,e))}));else{f(\"TileMatrix\",r).forEach(((t,i)=>{p.push(N(t,a,i,e))}))}const x=C(r,l,u,p[0]);return{id:e,fullExtent:x.toJSON(),tileInfo:new o({dpi:96,spatialReference:s,size:u,origin:l,lods:p}).toJSON()}}function b(e){let t=g(\"SupportedCRS\",e);t&&(t=t.toLowerCase());let r=parseInt(t.split(\":\").pop(),10);900913!==r&&3857!==r||(r=102100);let l=!1;t.indexOf(\"crs84\")>-1||t.indexOf(\"crs:84\")>-1?(r=4326,l=!0):t.indexOf(\"crs83\")>-1||t.indexOf(\"crs:83\")>-1?(r=4269,l=!0):(t.indexOf(\"crs27\")>-1||t.indexOf(\"crs:27\")>-1)&&(r=4267,l=!0);const o=new i({wkid:r}),s=g(\"TopLeftCorner\",d(\"TileMatrix\",e)).split(\" \"),c=s[0].split(\"E\").map((e=>Number(e))),u=s[1].split(\"E\").map((e=>Number(e)));let p,f=c[0],m=u[0];c.length>1&&(f=c[0]*10**c[1]),u.length>1&&(m=u[0]*10**u[1]);const h=l&&4326===r&&90===f&&-180===m;return a.some(((e,i)=>{const s=Number(t.split(\":\").pop());return s>=e[0]&&s<=e[1]||4326===r&&(!l||h)?(p=new n(m,f,o),!0):(i===a.length-1&&(p=new n(f,m,o)),!1)})),p}function C(e,t,i,n){const l=d(\"BoundingBox\",e);let o,s,a,c,u,p;if(l&&(o=g(\"LowerCorner\",l).split(\" \"),s=g(\"UpperCorner\",l).split(\" \")),o&&o.length>1&&s&&s.length>1)a=parseFloat(o[0]),u=parseFloat(o[1]),c=parseFloat(s[0]),p=parseFloat(s[1]);else{const r=d(\"TileMatrix\",e),l=parseFloat(g(\"MatrixWidth\",r)),o=parseFloat(g(\"MatrixHeight\",r));a=t.x,p=t.y,c=a+l*i[0]*n.resolution,u=p-o*i[1]*n.resolution}return new r(a,u,c,p,t.spatialReference)}function N(e,t,i,n){const r=g(\"Identifier\",e),l=g(\"ScaleDenominator\",e).split(\"E\").map((e=>Number(e)));let o;o=l.length>1?l[0]*10**l[1]:l[0];const a=O(t,o,n);return o*=96/s,{level:i,levelValue:r,scale:o,resolution:a}}function O(e,i,n){let r;return r=t.hasOwnProperty(String(e))?t.values[t[e]]:\"default028mm\"===n?6370997*Math.PI/180:l(e).metersPerDegree,7*i/25e3/r}export{T as getTileUrlFromResourceUrls,M as getTileUrlTemplateFromResourceUrls,c as parseCapabilities,u as parseResourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{clone as t}from\"../core/lang.js\";import{getDeepValue as r}from\"../core/object.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as o}from\"../core/accessorSupport/decorators/writer.js\";import l from\"../core/Error.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import m from\"../geometry/Extent.js\";import c from\"../core/Collection.js\";import u from\"../request.js\";import p from\"../core/Handles.js\";import y from\"./Layer.js\";import{MultiOriginJSONMixin as d}from\"../core/MultiOriginJSONSupport.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{PortalLayer as v}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as g}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import w from\"./support/TileInfo.js\";import I from\"./support/WMTSLayerInfo.js\";import S from\"./WebTileLayer.js\";import M from\"./support/WMTSSublayer.js\";import{getTileUrlFromResourceUrls as P,getTileUrlTemplateFromResourceUrls as T,parseCapabilities as b,parseResourceInfo as j}from\"./support/wmtsUtils.js\";const x={\"image/png\":\".png\",\"image/png8\":\".png\",\"image/png24\":\".png\",\"image/png32\":\".png\",\"image/jpg\":\".jpg\",\"image/jpeg\":\".jpeg\",\"image/gif\":\".gif\",\"image/bmp\":\".bmp\",\"image/tiff\":\".tif\",\"image/jpgpng\":\"\",\"image/jpegpng\":\"\",\"image/unknown\":\"\"},E=new Set([\"version\",\"service\",\"request\",\"layer\",\"style\",\"format\",\"tilematrixset\",\"tilematrix\",\"tilerow\",\"tilecol\"]);let _=class extends(f(g(L(h(v(d(y))))))){constructor(...e){super(...e),this._sublayersHandles=new p,this.copyright=\"\",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType=\"WebTiledLayer\",this.resourceInfo=null,this.serviceMode=\"RESTful\",this.sublayers=null,this.type=\"wmts\",this.version=\"1.0.0\",this.watch(\"activeLayer\",((e,t)=>{t&&(t.layer=null),e&&(e.layer=this)}),!0),this.watch(\"sublayers\",((e,t)=>{t&&(t.forEach((e=>{e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((e=>{e.layer=this})),this._sublayersHandles||(this._sublayersHandles=new p),this._sublayersHandles.add([e.on(\"after-add\",(({item:e})=>{e.layer=this})),e.on(\"after-remove\",(({item:e})=>{e.layer=null}))]))}),!0)}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(\"KVP\"===this.serviceMode||\"RESTful\"===this.serviceMode)return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMTS\"]},e).then((()=>this._fetchService(e))).catch((e=>{throw new l(\"wmtslayer:unsupported-service-data\",\"Invalid response from the WMTS service.\",{error:e})}))),Promise.resolve(this);console.error(\"WMTS mode could only be 'KVP' or 'RESTful'\")}get activeLayer(){return this._get(\"activeLayer\")}set activeLayer(e){this._set(\"activeLayer\",e)}readActiveLayerFromService(e,t,r){let s;return this.activeLayer?t.layers.some((e=>e.id===this.activeLayer.id&&(s=e,!0))):(this.activeLayer=new M,s=t.layers[0]),this.activeLayer.read(s,r),this.activeLayer}readActiveLayerFromItemOrWebDoc(e,t){const{templateUrl:r,wmtsInfo:s}=t,i=r?this._getLowerCasedUrlParams(r):null,a=s&&s.layerIdentifier;let o=null;const l=s&&s.tileMatrixSet;l&&(Array.isArray(l)?l.length&&(o=l[0]):o=l);const n=i&&i.format,m=i&&i.style;return new M({id:a,imageFormat:n,styleId:m,tileMatrixSetId:o})}writeActiveLayer(e,t,s,i){const a=this.activeLayer;t.templateUrl=this.getUrlTemplate(a.id,a.tileMatrixSetId,a.imageFormat,a.styleId);const o=r(\"tileMatrixSet.tileInfo\",a);t.tileInfo=o?o.toJSON(i):null,t.wmtsInfo={...t.wmtsInfo,layerIdentifier:a.id,tileMatrixSet:a.tileMatrixSetId}}readCustomParameters(e,t){const r=t.wmtsInfo;return r?this._mergeParams(r.customParameters,r.url):null}get fullExtents(){const e=[];return this.activeLayer.tileMatrixSets.forEach((t=>{t.fullExtent&&e.push(t.fullExtent)})),e}readServiceMode(e,t){return t.templateUrl.indexOf(\"?\")>-1?\"KVP\":\"RESTful\"}readSublayersFromService(e,t,r){return C(t.layers,r)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets.map((e=>e.tileInfo.spatialReference)).toArray()}get title(){var e,t;return null!=(e=null==(t=this.activeLayer)?void 0:t.title)?e:\"Layer\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return this._get(\"url\")}set url(e){e&&\"/\"===e.substr(-1)?this._set(\"url\",e.slice(0,-1)):this._set(\"url\",e)}createWebTileLayer(e){const t=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),r=this._getTileMatrixSetById(e.tileMatrixSetId).tileInfo,s=e.fullExtent,i=new I({layerIdentifier:e.id,tileMatrixSet:e.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(i.customLayerParameters=this.customLayerParameters),this.customParameters&&(i.customParameters=this.customParameters),new S({fullExtent:s,urlTemplate:t,tileInfo:r,wmtsInfo:i})}fetchTile(e,t,r){const s=this.getTileUrl(e,t,r);return u(s,{responseType:\"image\"}).then((e=>e.data))}findSublayerById(e){return this.sublayers.find((t=>t.id===e))}getTileUrl(e,t,r){const s=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId).tileInfo.lods[e],i=s?s.levelValue?s.levelValue:`${s.level}`:`${e}`;let a=this.resourceInfo?\"\":P({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,i,t,r);if(!a){a=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replace(/\\{level\\}/gi,i).replace(/\\{row\\}/gi,`${t}`).replace(/\\{col\\}/gi,`${r}`)}return a=this._appendCustomLayerParameters(a),a}getUrlTemplate(e,t,r,s){if(!this.resourceInfo){const r=T({dimensionMap:this.dimensionMap,layerMap:this.layerMap},e,t,s);if(r)return r}if(\"KVP\"===this.serviceMode)return this.url+\"?SERVICE=WMTS&VERSION=\"+this.version+\"&REQUEST=GetTile&LAYER=\"+e+\"&STYLE=\"+s+\"&FORMAT=\"+r+\"&TILEMATRIXSET=\"+t+\"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}\";if(\"RESTful\"===this.serviceMode){let i=\"\";return x[r.toLowerCase()]&&(i=x[r.toLowerCase()]),this.url+e+\"/\"+s+\"/\"+t+\"/{level}/{row}/{col}\"+i}return\"\"}async _fetchService(e){let t;if(this.resourceInfo)\"KVP\"===this.resourceInfo.serviceMode&&(this.url+=this.url.indexOf(\"?\")>-1?\"\":\"?\"),t={ssl:!1,data:this.resourceInfo};else try{t=await this._getCapabilities(this.serviceMode,e)}catch{const s=\"KVP\"===this.serviceMode?\"RESTful\":\"KVP\";try{t=await this._getCapabilities(s,e),this.serviceMode=s}catch(r){throw new l(\"wmtslayer:unsupported-service-data\",\"Services does not support RESTful or KVP service modes.\",{error:r})}}this.resourceInfo?t.data=j(t.data):t.data=b(t.data,{serviceMode:this.serviceMode,url:this.url}),t.data&&this.read(t.data,{origin:\"service\"})}async _getCapabilities(e,t){const r=this._getCapabilitiesUrl(e);return await u(r,{...t,responseType:\"text\"})}_getTileMatrixSetById(e){return this.findSublayerById(this.activeLayer.id).tileMatrixSets.find((t=>t.id===e))}_appendCustomParameters(e){if(this.customParameters)for(const t in this.customParameters)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(this.customParameters[t]);return e}_appendCustomLayerParameters(e){if(this.customLayerParameters||this.customParameters){const r={...t(this.customParameters),...this.customLayerParameters};for(const t in r)e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+t+\"=\"+encodeURIComponent(r[t])}return e}_getCapabilitiesUrl(e){let t;return this.url=this.url.split(\"?\")[0],\"KVP\"===e?t=this.url+\"?request=GetCapabilities&service=WMTS&version=\"+this.version:\"RESTful\"===e&&(t=this.url+\"/\"+this.version+\"/WMTSCapabilities.xml\"),t=this._appendCustomParameters(t),t}_getLowerCasedUrlParams(e){if(!e)return null;const t=n(e).query;if(!t)return null;const r={};return Object.keys(t).forEach((e=>{r[e.toLowerCase()]=t[e]})),r}_mergeParams(e,r){const s=this._getLowerCasedUrlParams(r);if(s){const r=Object.keys(s);r.length&&(e=e?t(e):{},r.forEach((t=>{e.hasOwnProperty(t)||E.has(t)||(e[t]=s[t])})))}return e}};function C(e,t){return e.map((e=>{const r=new M;return r.read(e,t),r}))}e([s()],_.prototype,\"dimensionMap\",void 0),e([s()],_.prototype,\"layerMap\",void 0),e([s({type:M,json:{origins:{\"web-document\":{write:{ignoreOrigin:!0}}}}})],_.prototype,\"activeLayer\",null),e([i(\"service\",\"activeLayer\",[\"layers\"])],_.prototype,\"readActiveLayerFromService\",null),e([i([\"web-document\",\"portal-item\"],\"activeLayer\",[\"wmtsInfo\"])],_.prototype,\"readActiveLayerFromItemOrWebDoc\",null),e([o([\"web-document\",\"portal-item\"],\"activeLayer\",{templateUrl:{type:String},tileInfo:{type:w},\"wmtsInfo.layerIdentifier\":{type:String},\"wmtsInfo.tileMatrixSet\":{type:String}})],_.prototype,\"writeActiveLayer\",null),e([s({type:String,value:\"\",json:{write:!0}})],_.prototype,\"copyright\",void 0),e([s({type:[\"show\",\"hide\"]})],_.prototype,\"listMode\",void 0),e([s({json:{origins:{\"web-document\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}},\"portal-item\":{read:{source:[\"wmtsInfo.customParameters\",\"wmtsInfo.url\"]},write:{target:\"wmtsInfo.customParameters\"}}}}})],_.prototype,\"customParameters\",void 0),e([i(\"web-document\",\"customParameters\"),i(\"portal-item\",\"customParameters\")],_.prototype,\"readCustomParameters\",null),e([s({json:{origins:{\"web-document\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}},\"portal-item\":{read:{source:\"wmtsInfo.customLayerParameters\"},write:{target:\"wmtsInfo.customLayerParameters\"}}}}})],_.prototype,\"customLayerParameters\",void 0),e([s({type:m,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{read:{source:\"fullExtent\"}},\"portal-item\":{read:{source:\"fullExtent\"}}}}})],_.prototype,\"fullExtent\",void 0),e([s({readOnly:!0})],_.prototype,\"fullExtents\",null),e([s({type:[\"WebTiledLayer\"]})],_.prototype,\"operationalLayerType\",void 0),e([s()],_.prototype,\"resourceInfo\",void 0),e([s()],_.prototype,\"serviceMode\",void 0),e([i([\"portal-item\",\"web-document\"],\"serviceMode\",[\"templateUrl\"])],_.prototype,\"readServiceMode\",null),e([s({type:c.ofType(M)})],_.prototype,\"sublayers\",void 0),e([i(\"service\",\"sublayers\",[\"layers\"])],_.prototype,\"readSublayersFromService\",null),e([s({readOnly:!0})],_.prototype,\"supportedSpatialReferences\",null),e([s({json:{read:{source:\"title\"}}})],_.prototype,\"title\",null),e([s({json:{read:!1},readOnly:!0,value:\"wmts\"})],_.prototype,\"type\",void 0),e([s({json:{origins:{service:{read:{source:\"tileUrl\"}},\"web-document\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}},\"portal-item\":{read:{source:\"wmtsInfo.url\"},write:{target:\"wmtsInfo.url\"}}}}})],_.prototype,\"url\",null),e([s()],_.prototype,\"version\",void 0),_=e([a(\"esri.layers.WMTSLayer\")],_);var R=_;export default R;\n"],"sourceRoot":""}