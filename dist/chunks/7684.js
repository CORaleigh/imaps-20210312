(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[7684],{42738:(e,t,s)=>{"use strict";s.d(t,{a:()=>n,b:()=>c,f:()=>h,i:()=>r,m:()=>a,r:()=>o,s:()=>l,t:()=>u});var i=s(60418);function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function n(e,t){const s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5];let l=s*n-i*r;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-r*l,e[3]=s*l,e[4]=(r*o-n*a)*l,e[5]=(i*a-s*o)*l,e):null}function a(e,t,s){const i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],u=s[0],c=s[1],h=s[2],d=s[3],p=s[4],f=s[5];return e[0]=i*u+n*c,e[1]=r*u+a*c,e[2]=i*h+n*d,e[3]=r*h+a*d,e[4]=i*p+n*f+o,e[5]=r*p+a*f+l,e}function o(e,t,s){const i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],u=Math.sin(s),c=Math.cos(s);return e[0]=i*c+n*u,e[1]=r*c+a*u,e[2]=i*-u+n*c,e[3]=r*-u+a*c,e[4]=o,e[5]=l,e}function l(e,t,s){const i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],u=s[0],c=s[1];return e[0]=i*u,e[1]=r*u,e[2]=n*c,e[3]=a*c,e[4]=o,e[5]=l,e}function u(e,t,s){const i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],l=t[5],u=s[0],c=s[1];return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=i*u+n*c+o,e[5]=r*u+a*c+l,e}function c(e,t){const s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=s,e[2]=-s,e[3]=i,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e[4]=t[4]-s[4],e[5]=t[5]-s[5],e}const p=a,f=d;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:r,set:function(e,t,s,i,r,n,a){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e[4]=n,e[5]=a,e},invert:n,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:a,rotate:o,scale:l,translate:u,fromRotation:c,fromScaling:h,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},add:function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e},subtract:d,multiplyScalar:function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e},multiplyScalarAndAdd:function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e[4]=t[4]+s[4]*i,e[5]=t[5]+s[5]*i,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=t[0],c=t[1],h=t[2],d=t[3],p=t[4],f=t[5];return Math.abs(s-u)<=i.E*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=i.E*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=i.E*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-d)<=i.E*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=i.E*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(l-f)<=i.E*Math.max(1,Math.abs(l),Math.abs(f))},mul:p,sub:f})},87561:(e,t,s)=>{"use strict";function i(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function r(e,t,s,i){const r=t[i],n=t[i+1];e[i]=s[0]*r+s[2]*n+s[4],e[i+1]=s[1]*r+s[3]*n+s[5]}function n(e,t,s,i=0,n=0,a=2){const o=n||t.length/a;for(let n=i;n<o;n++)r(e,t,s,n*a)}s.d(t,{c:()=>i,t:()=>n});Object.freeze({__proto__:null,create:i,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,s,i,r,n){const a=new Float32Array(6);return a[0]=e,a[1]=t,a[2]=s,a[3]=i,a[4]=r,a[5]=n,a},createView:function(e,t){return new Float32Array(e,t,6)},transform:r,transformMany:n})},14286:(e,t,s)=>{"use strict";s.d(t,{a:()=>c,b:()=>M,c:()=>r,d:()=>d,e:()=>o,f:()=>y,g:()=>_,h:()=>g,i:()=>a,j:()=>p,k:()=>x,l:()=>f,m:()=>b,n:()=>v,o:()=>S,p:()=>h,q:()=>m,r:()=>V,s:()=>n,t:()=>w});var i=s(60418);function r(e,t){return e[0]=t[0],e[1]=t[1],e}function n(e,t,s){return e[0]=t,e[1]=s,e}function a(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e}function o(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e}function l(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e}function u(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e}function c(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e}function h(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e}function d(e,t){const s=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(s*s+i*i)}function p(e,t){const s=t[0]-e[0],i=t[1]-e[1];return s*s+i*i}function f(e){const t=e[0],s=e[1];return Math.sqrt(t*t+s*s)}function m(e){const t=e[0],s=e[1];return t*t+s*s}function v(e,t){return e[0]=-t[0],e[1]=-t[1],e}function y(e,t){const s=t[0],i=t[1];let r=s*s+i*i;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e}function g(e,t){return e[0]*t[0]+e[1]*t[1]}function _(e,t,s){const i=t[0]*s[1]-t[1]*s[0];return e[0]=e[1]=0,e[2]=i,e}function b(e,t,s,i){const r=t[0],n=t[1];return e[0]=r+i*(s[0]-r),e[1]=n+i*(s[1]-n),e}function S(e,t,s){const i=t[0],r=t[1];return e[0]=s[0]*i+s[2]*r,e[1]=s[1]*i+s[3]*r,e}function w(e,t,s){const i=t[0],r=t[1];return e[0]=s[0]*i+s[2]*r+s[4],e[1]=s[1]*i+s[3]*r+s[5],e}function V(e,t,s,i){const r=t[0]-s[0],n=t[1]-s[1],a=Math.sin(i),o=Math.cos(i);return e[0]=r*o-n*a+s[0],e[1]=r*a+n*o+s[1],e}function x(e,t){return e[0]===t[0]&&e[1]===t[1]}const z=f,M=o,I=l,C=u,T=d,E=p,k=m;Object.freeze({__proto__:null,copy:r,set:n,add:a,subtract:o,multiply:l,divide:u,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,s){return e[0]=Math.min(t[0],s[0]),e[1]=Math.min(t[1],s[1]),e},max:function(e,t,s){return e[0]=Math.max(t[0],s[0]),e[1]=Math.max(t[1],s[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:c,scaleAndAdd:h,distance:d,squaredDistance:p,length:f,squaredLength:m,negate:v,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:y,dot:g,cross:_,lerp:b,random:function(e,t){t=t||1;const s=2*(0,i.R)()*Math.PI;return e[0]=Math.cos(s)*t,e[1]=Math.sin(s)*t,e},transformMat2:S,transformMat2d:w,transformMat3:function(e,t,s){const i=t[0],r=t[1];return e[0]=s[0]*i+s[3]*r+s[6],e[1]=s[1]*i+s[4]*r+s[7],e},transformMat4:function(e,t,s){const i=t[0],r=t[1];return e[0]=s[0]*i+s[4]*r+s[12],e[1]=s[1]*i+s[5]*r+s[13],e},rotate:V,angle:function(e,t){const s=e[0],i=e[1],r=t[0],n=t[1];let a=s*s+i*i;a>0&&(a=1/Math.sqrt(a));let o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));const l=(s*r+i*n)*a*o;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:x,equals:function(e,t){const s=e[0],r=e[1],n=t[0],a=t[1];return Math.abs(s-n)<=i.E*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=i.E*Math.max(1,Math.abs(r),Math.abs(a))},len:z,sub:M,mul:I,div:C,dist:T,sqrDist:E,sqrLen:k})},27851:(e,t,s)=>{"use strict";function i(){return new Float32Array(2)}function r(e,t){const s=new Float32Array(2);return s[0]=e,s[1]=t,s}function n(){return i()}function a(){return r(1,1)}function o(){return r(1,0)}function l(){return r(0,1)}s.d(t,{c:()=>i,f:()=>r});const u=n(),c=a(),h=o(),d=l();Object.freeze({__proto__:null,create:i,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:r,createView:function(e,t){return new Float32Array(e,t,2)},zeros:n,ones:a,unitX:o,unitY:l,ZEROS:u,ONES:c,UNIT_X:h,UNIT_Y:d})},40365:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(92823);const r=class{constructor(e,t){this._storage=new i.WJ,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}put(e,t,s){this._storage.put(e,t,s,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}}},94588:(e,t,s)=>{"use strict";s.d(t,{Bg:()=>i,sM:()=>r});s(95830);function i(e){}function r(e){return()=>e}},50560:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var i,r=s(56140),n=(s(95830),s(36544),s(68055),s(79881)),a=s(87566),o=(s(10923),s(57002),s(86035),s(58385));let l=i=class extends o.wq{constructor(){super(...arguments),this.title=null}clone(){return new i({title:this.title})}};(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=i=(0,r._)([(0,a.j)("esri.renderers.support.LegendOptions")],l);const u=l},2961:(e,t,s)=>{"use strict";s.d(t,{a:()=>n});var i=s(49840),r=s(93533);const n={inches:(0,r.En)(1,"meters","inches"),feet:(0,r.En)(1,"meters","feet"),"us-feet":(0,r.En)(1,"meters","us-feet"),yards:(0,r.En)(1,"meters","yards"),miles:(0,r.En)(1,"meters","miles"),"nautical-miles":(0,r.En)(1,"meters","nautical-miles"),millimeters:(0,r.En)(1,"meters","millimeters"),centimeters:(0,r.En)(1,"meters","centimeters"),decimeters:(0,r.En)(1,"meters","decimeters"),meters:(0,r.En)(1,"meters","meters"),kilometers:(0,r.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,r.ty)(1,"meters",i.sv.radius)}},90260:(e,t,s)=>{"use strict";s.d(t,{Z:()=>z});var i,r=s(56140),n=(s(95830),s(36544)),a=s(79881),o=s(60263),l=s(56274),u=s(30590),c=s(87566),h=s(60538),d=s(32656),p=(s(10923),s(57002),s(86035),s(96071)),f=s(19571),m=s(24158),v=s(94268),y=s(95005),g=s(5328);const _=n.Z.getLogger("esri.renderers.visualVariables.SizeVariable"),b=new l.Xn({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),S=new l.Xn({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function w(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,p.t_)(e):"size"===e.type?(0,y.iY)(e)?e:(delete(e={...e}).type,new x(e)):void 0}function V(e,t,s){if("object"!=typeof e)return e;const i=new x;return i.read(e,s),i}let x=i=class extends f.Z{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:g.viewScaleRE.test(this.valueExpression)}}set expression(e){_.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){(0,y.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,y.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,y.PS)(this)}set maxDataValue(e){e&&this.stops&&(_.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(_.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return w(e)}readMaxSize(e,t,s){return V(e,0,s)}set minDataValue(e){e&&this.stops&&(_.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(_.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return w(e)}readMinSize(e,t,s){return V(e,0,s)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(_.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,y.QW)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,s,i){if("$view.scale"===e){if(i&&i.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;i.messages.push(new d.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:i}))}}else t[s]=e}readValueUnit(e){return e?S.read(e):null}clone(){return new i({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,y.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,y.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops,t=e.map((e=>e.size)).reverse(),s=e.length;for(let i=0;i<s;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,r._)([(0,a.Cb)({readOnly:!0})],x.prototype,"cache",null),(0,r._)([(0,a.Cb)({type:b.apiValues,json:{type:b.jsonValues,origins:{"web-map":{read:!1}},read:b.read,write:b.write}})],x.prototype,"axis",void 0),(0,r._)([(0,a.Cb)({type:String,value:null,json:{read:!1}})],x.prototype,"expression",null),(0,r._)([(0,a.Cb)()],x.prototype,"index",null),(0,r._)([(0,a.Cb)({type:String,readOnly:!0})],x.prototype,"inputValueType",null),(0,r._)([(0,a.Cb)({type:v.Z,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,r._)([(0,a.Cb)({type:Number,value:null,json:{write:!0}})],x.prototype,"maxDataValue",null),(0,r._)([(0,a.Cb)({type:Number,value:null,json:{write:!0}})],x.prototype,"maxSize",null),(0,r._)([(0,o.p)("maxSize")],x.prototype,"castMaxSize",null),(0,r._)([(0,u.r)("maxSize")],x.prototype,"readMaxSize",null),(0,r._)([(0,a.Cb)({type:Number,value:null,json:{write:!0}})],x.prototype,"minDataValue",null),(0,r._)([(0,a.Cb)({type:Number,value:null,json:{write:!0}})],x.prototype,"minSize",null),(0,r._)([(0,o.p)("minSize")],x.prototype,"castMinSize",null),(0,r._)([(0,u.r)("minSize")],x.prototype,"readMinSize",null),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],x.prototype,"arcadeRequired",null),(0,r._)([(0,a.Cb)({type:String})],x.prototype,"scaleBy",void 0),(0,r._)([(0,a.Cb)({type:[m.Z],value:null,json:{write:!0}})],x.prototype,"stops",null),(0,r._)([(0,a.Cb)({type:["outline"],json:{write:!0}})],x.prototype,"target",void 0),(0,r._)([(0,a.Cb)({type:String,readOnly:!0})],x.prototype,"transformationType",null),(0,r._)([(0,a.Cb)({type:["size"],json:{type:["sizeInfo"]}})],x.prototype,"type",void 0),(0,r._)([(0,a.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],x.prototype,"useSymbolValue",void 0),(0,r._)([(0,a.Cb)({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0),(0,r._)([(0,u.r)("valueExpression",["valueExpression","expression"])],x.prototype,"readValueExpression",null),(0,r._)([(0,h.c)("web-scene","valueExpression")],x.prototype,"writeValueExpressionWebScene",null),(0,r._)([(0,a.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],x.prototype,"valueRepresentation",void 0),(0,r._)([(0,a.Cb)({type:S.apiValues,json:{write:S.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],x.prototype,"valueUnit",void 0),(0,r._)([(0,u.r)("valueUnit")],x.prototype,"readValueUnit",null),x=i=(0,r._)([(0,c.j)("esri.renderers.visualVariables.SizeVariable")],x);const z=x},19571:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var i=s(56140),r=(s(95830),s(36544)),n=s(68055),a=s(79881),o=s(60263),l=s(56274),u=s(87566),c=(s(10923),s(57002),s(86035),s(58385)),h=s(68266);const d=r.Z.getLogger("esri.renderers.visualVariables.VisualVariable"),p=new l.Xn({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let f=class extends c.wq{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(d.error(".field: field must be a string value"),null):(0,n.Zs)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,i._)([(0,a.Cb)()],f.prototype,"index",void 0),(0,i._)([(0,a.Cb)({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,i._)([(0,o.p)("field")],f.prototype,"castField",null),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],f.prototype,"arcadeRequired",null),(0,i._)([(0,a.Cb)({type:h.Z,json:{write:!0}})],f.prototype,"legendOptions",void 0),f=(0,i._)([(0,u.j)("esri.renderers.visualVariables.VisualVariable")],f);const m=f},24158:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var i,r=s(56140),n=(s(95830),s(36544),s(68055),s(79881)),a=s(87566),o=(s(10923),s(57002),s(86035),s(58385)),l=s(96071);let u=i=class extends o.wq{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new i({label:this.label,size:this.size,value:this.value})}};(0,r._)([(0,n.Cb)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,r._)([(0,n.Cb)({type:Number,cast:l.t_,json:{write:!0}})],u.prototype,"size",void 0),(0,r._)([(0,n.Cb)({type:Number,json:{write:!0}})],u.prototype,"value",void 0),u=i=(0,r._)([(0,a.j)("esri.renderers.visualVariables.support.SizeStop")],u);const c=u},94268:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var i,r=s(56140),n=(s(95830),s(36544),s(68055),s(79881)),a=s(87566),o=(s(10923),s(57002),s(86035),s(68266));let l=i=class extends o.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new i({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,r._)([(0,n.Cb)({type:[Number],json:{write:!0}})],l.prototype,"customValues",void 0),l=i=(0,r._)([(0,a.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],l);const u=l},68266:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var i,r=s(56140),n=(s(95830),s(36544),s(68055),s(79881)),a=s(87566),o=(s(10923),s(57002),s(86035),s(50560));let l=i=class extends o.Z{constructor(){super(...arguments),this.showLegend=null}clone(){return new i({title:this.title,showLegend:this.showLegend})}};(0,r._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],l.prototype,"showLegend",void 0),l=i=(0,r._)([(0,a.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],l);const u=l},95005:(e,t,s)=>{"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function r(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function a(e,t){const s=t||n(e),i=e.valueUnit||"unknown";return"unknown"===s?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}s.d(t,{PS:()=>n,QW:()=>a,iY:()=>i,qh:()=>r})},5328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{getAllSizes:()=>x,getColor:()=>f,getOpacity:()=>m,getRotationAngle:()=>v,getSize:()=>y,getSizeForValue:()=>b,getSizeFromNumberOrVariable:()=>g,getSizeRangeAtScale:()=>S,getVisualVariableValues:()=>w,viewScaleRE:()=>p});var i=s(94588),r=s(59472),n=s(36544),a=s(78745),o=s(15988),l=s(95005),u=s(2961);const c=n.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),h=new o.default,d=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function f(e,t,s){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n="number"==typeof t,o=n?null:t,l=o&&o.attributes;let u=n?t:null;const h=i.field,{ipData:d,hasExpression:p}=i.cache;let f=i.cache.compiledFunc;if(!h&&!p){const e=i.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(p){if(!(0,r.pC)(s)||!(0,r.pC)(s.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:s.viewingMode,scale:s.scale,spatialReference:s.spatialReference},t=s.arcade.arcadeUtils,n=t.getViewInfo(e),a=t.createExecContext(o,n);if(!f){const e=t.createSyntaxTree(i.valueExpression);f=t.createFunction(e),i.cache.compiledFunc=f}u=t.executeFunction(f,a)}else l&&(u=l[h]);const m=i.normalizationField,v=l?parseFloat(l[m]):void 0;if(null!=u&&(!m||n||!isNaN(v)&&0!==v)){isNaN(v)||n||(u/=v);const e=V(u,d);if(e){const t=e[0],n=e[1],o=t===n?i.stops[t].color:a.default.blendColors(i.stops[t].color,i.stops[n].color,e[2],(0,r.pC)(s)?s.color:void 0);return new a.default(o)}}}function m(e,t,s){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof t,a=n?null:t,o=a&&a.attributes;let l=n?t:null;const u=i.field,{ipData:h,hasExpression:d}=i.cache;let p=i.cache.compiledFunc;if(!u&&!d){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(d){if((0,r.Wi)(s)||(0,r.Wi)(s.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:s.viewingMode,scale:s.scale,spatialReference:s.spatialReference},t=s.arcade.arcadeUtils,n=t.getViewInfo(e),o=t.createExecContext(a,n);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}l=t.executeFunction(p,o)}else o&&(l=o[u]);const f=i.normalizationField,m=o?parseFloat(o[f]):void 0;if(null!=l&&(!f||n||!isNaN(m)&&0!==m)){isNaN(m)||n||(l/=m);const e=V(l,h);if(e){const t=e[0],s=e[1];if(t===s)return i.stops[t].opacity;{const r=i.stops[t].opacity;return r+(i.stops[s].opacity-r)*e[2]}}}}function v(e,t,s){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",a="heading"===n&&"arithmetic"===i.rotationType?90:0,o="heading"===n&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,u=l&&l.attributes,h=i.field,{hasExpression:d}=i.cache;let p=i.cache.compiledFunc,f=0;if(!h&&!d)return f;if(d){if((0,r.Wi)(s)||(0,r.Wi)(s.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:s.viewingMode,scale:s.scale,spatialReference:s.spatialReference},t=s.arcade.arcadeUtils,n=t.getViewInfo(e),a=t.createExecContext(l,n);if(!p){const e=t.createSyntaxTree(i.valueExpression);p=t.createFunction(e),i.cache.compiledFunc=p}f=t.executeFunction(p,a)}else u&&(f=u[h]||0);return f="number"!=typeof f||isNaN(f)?null:a+o*f,f}function y(e,t,s){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=b(function(e,t,s){const i="number"==typeof t,n=i?null:t,a=n&&n.attributes;let o=i?t:null;const{isScaleDriven:u}=e.cache;let h=e.cache.compiledFunc;if(u){const t=(0,r.pC)(s)?s.scale:void 0,i=(0,r.pC)(s)?s.view:void 0;o=null==t||"3d"===i?function(e){let t=null,s=null;const i=e.stops;return i?(t=i[0].value,s=i[i.length-1].value):(t=e.minDataValue||0,s=e.maxDataValue||0),(t+s)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if((0,r.Wi)(s)||(0,r.Wi)(s.arcade))return void c.error("Use of arcade expressions requires an arcade context");const t={viewingMode:s.viewingMode,scale:s.scale,spatialReference:s.spatialReference},i=s.arcade.arcadeUtils,a=i.getViewInfo(t),l=i.createExecContext(n,a);if(!h){const t=i.createSyntaxTree(e.valueExpression);h=i.createFunction(t),e.cache.compiledFunc=h}o=i.executeFunction(h,l);break}case"field":a&&(o=a[e.field]);break;case"unknown":o=null}if(!(0,l.qh)(o))return null;if(i||!e.normalizationField)return o;const d=a?parseFloat(a[e.normalizationField]):null;return(0,l.qh)(d)&&0!==d?o/d:null}(i,t,s),i,t,s,i.cache.ipData);return null==n||isNaN(n)?0:n}function g(e,t,s){return null==e?null:(0,l.iY)(e)?y(e,t,s):(0,l.qh)(e)?e:null}function _(e,t,s){return(0,l.qh)(s)&&e>s?s:(0,l.qh)(t)&&e<t?t:e}function b(e,t,s,i,n){switch(t.transformationType){case"additive":return function(e,t,s,i){return e+(g(t.minSize,s,i)||t.minDataValue)}(e,t,s,i);case"constant":return function(e,t,s){const i=e.stops;let r=i&&i.length&&i[0].size;return null==r&&(r=e.minSize),g(r,t,s)}(t,s,i);case"clamped-linear":return function(e,t,s,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=g(t.minSize,s,i),o=g(t.maxSize,s,i),l=(0,r.pC)(i)?i.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?d*(a/2)**2:a*a,s=t+n*((e?d*(o/2)**2:o*o)-t);return e?2*Math.sqrt(s/d):Math.sqrt(s)}return a+n*(o-a)}(e,t,s,i);case"proportional":return function(e,t,s,i){const n=(0,r.pC)(i)?i.shape:void 0,a=e/t.minDataValue,o=g(t.minSize,s,i),l=g(t.maxSize,s,i);let u=null;return u="circle"===n?2*Math.sqrt(a*(o/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(a*o**2):a*o,_(u,o,l)}(e,t,s,i);case"stops":return function(e,t,s,i,r){const[n,a,o]=V(e,r);if(n===a)return g(t.stops[n].size,s,i);{const e=g(t.stops[n].size,s,i);return e+(g(t.stops[a].size,s,i)-e)*o}}(e,t,s,i,n);case"real-world-size":return function(e,t,s,i){const n=((0,r.pC)(i)&&i.resolution?i.resolution:1)*u.a[t.valueUnit],a=g(t.minSize,s,i),o=g(t.maxSize,s,i),{valueRepresentation:l}=t;let c=null;return c="area"===l?2*Math.sqrt(e/d)/n:"radius"===l||"distance"===l?2*e/n:e/n,_(c,a,o)}(e,t,s,i);case"identity":return e;case"unknown":return null}}function S(e,t,s){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===s||t))return null;const r={scale:t,view:s};let n=g(e.minSize,h,r),a=g(e.maxSize,h,r);if(null!=n||null!=a){if(n>a){const e=a;a=n,n=e}return{minSize:n,maxSize:a}}}function w(e,t,s){if(!e.visualVariables)return;const i=[],r=[],n=[],a=[],o=[];for(const t of e.visualVariables)switch(t.type){case"color":r.push(t);break;case"opacity":n.push(t);break;case"rotation":o.push(t);break;case"size":a.push(t)}return r.forEach((e=>{const r=f(e,t,s);i.push({variable:e,value:r})})),n.forEach((e=>{const r=m(e,t,s);i.push({variable:e,value:r})})),o.forEach((e=>{const r=v(e,t,s);i.push({variable:e,value:r})})),a.forEach((e=>{const r=y(e,t,s);i.push({variable:e,value:r})})),i.filter((e=>null!=e.value))}function V(e,t){if(!t)return;let s=0,i=t.length-1;return t.some(((t,r)=>e<t?(i=r,!0):(s=r,!1))),[s,i,(e-t[s])/(t[i]-t[s])]}function x(e,t,s){const r=["proportional","proportional","proportional"];for(const n of e){const e=n.useSymbolValue?"symbol-value":y(n,t,s);switch(n.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:(0,i.Bg)(n.axis)}}return r}},5684:(e,t,s)=>{"use strict";s.d(t,{Rz:()=>d,G:()=>f,kD:()=>v,mW:()=>m,js:()=>p});s(95830);var i=s(59472),r=s(48142),n=s(5674),a=s(88083),o=s(44190),l=s(7767);const u=a.Z.fromJSON(l.I4),c=r.Z.fromJSON(l.ET),h=n.default.fromJSON(l.lF),d=o.default.fromJSON(l.qP);function p(e){if((0,i.Wi)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return u;case"polyline":return c;case"polygon":case"extent":return h}return null}const f=a.Z.fromJSON(l.eG),m=r.Z.fromJSON(l.wW),v=n.default.fromJSON(l.lj)},96540:(e,t,s)=>{"use strict";s.d(t,{vX:()=>c,s5:()=>l,k3:()=>u,Or:()=>o});Number.POSITIVE_INFINITY;const i=Math.PI,r=128/i,n=1/Math.LN2;function a(e,t){return(e%=t)>=0?e:e+t}function o(e){return a(e*r,256)}function l(e){return a(.7111111111111111*e,256)}function u(e){return Math.log(e)*n}function c(e,t,s){return e>=t&&e<=s||e>=s&&e<=t}},90200:(e,t,s)=>{"use strict";s.d(t,{K:()=>a,A:()=>o});var i=s(33655),r=s(71286),n=s(21252);class a{constructor(e,t){this.width=e,this.height=t;const s=Math.ceil(e/1),i=Math.ceil(t/1);this._cols=s,this._rows=i,this._cells=n.p.create(s*i)}insertMetrics(e){return this._hasCollision(e)?255:(this._markMetrics(e),0)}getCellId(e,t){return e+t*this._cols}has(e){return this._cells.has(e)}hasRange(e,t){return this._cells.hasRange(e,t)}set(e){this._cells.set(e)}setRange(e,t){this._cells.setRange(e,t)}_hasCollision(e){const t=e.id;let s=0,i=0;e.save();do{const t=e.boundsCount;s+=t;for(let s=0;s<t;s++){const t=e.boundsComputedAnchorX(s),r=e.boundsComputedAnchorY(s),n=e.boundsWidth(s)+16,a=e.boundsHeight(s)+16;switch(this._collide(t,r,n,a)){case 2:return!0;case 1:i++}}}while(e.peekId()===t&&e.next());return e.restore(),s===i}_collide(e,t,s,r){const n=e-s/2,a=e+s/2,o=t-r/2,l=t+r/2;if(a<0||l<0||n>this.width||o>this.height)return 1;const u=(0,i.uZ)(Math.floor(n/1),0,this._cols),c=(0,i.uZ)(Math.floor(o/1),0,this._rows),h=(0,i.uZ)(Math.ceil(a/1),0,this._cols),d=(0,i.uZ)(Math.ceil(l/1),0,this._rows);for(let e=c;e<=d;e++)for(let t=u;t<=h;t++){const s=this.getCellId(t,e);if(this.has(s))return 2}return 0}_mark(e,t,s,r){const n=e-s/2,a=e+s/2,o=t-r/2,l=t+r/2,u=(0,i.uZ)(Math.floor(n/1),0,this._cols),c=(0,i.uZ)(Math.floor(o/1),0,this._rows),h=(0,i.uZ)(Math.ceil(a/1),0,this._cols),d=(0,i.uZ)(Math.ceil(l/1),0,this._rows);for(let e=c;e<=d;e++)for(let t=u;t<=h;t++){const s=this.getCellId(t,e);this.set(s)}return!1}_markMetrics(e){const t=e.id;do{const t=e.boundsCount;for(let s=0;s<t;s++){const t=e.boundsComputedAnchorX(s),i=e.boundsComputedAnchorY(s),r=e.boundsWidth(s)+16,n=e.boundsHeight(s)+16;this._mark(t,i,r,n)}}while(e.peekId()===t&&e.next())}}class o{constructor(e,t=2){this._bucketSize=e,this._rowsLength=r.I_/e,this._colsLength=r.I_/e,this._elementsPerBucket=t,this._grid=this._initGrid()}checkOverlap(e,t){const s=Math.floor(e/this._bucketSize),i=Math.floor(t/this._bucketSize);return s<0||s>=this._rowsLength||i<0||i>=this._colsLength||this._grid[i*this._colsLength+s]>=this._elementsPerBucket}markUsed(e,t){const s=Math.floor(e/this._bucketSize),i=Math.floor(t/this._bucketSize);this._grid[i*this._colsLength+s]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}},9709:(e,t,s)=>{"use strict";s.d(t,{dk:()=>f,Gq:()=>g,a:()=>v,mE:()=>m,m2:()=>u,qr:()=>y,jj:()=>o,hF:()=>l});var i=s(32656),r=s(31514),n=s(49269);function a(e,t=!1){const s=r.X.SIZE_FIELD_STOPS|r.X.SIZE_MINMAX_VALUE|r.X.SIZE_SCALE_STOPS|r.X.SIZE_UNIT_VALUE,i=(e&(r.mf.FIELD_TARGETS_OUTLINE|r.mf.MINMAX_TARGETS_OUTLINE|r.mf.SCALE_TARGETS_OUTLINE|r.mf.UNIT_TARGETS_OUTLINE))>>>4;return t?s&i:s&~i}function o(e,t,s,i,n){switch(e){case r.LW.FILL:return f.from(t,i);case r.LW.LINE:return v.from(t,s);case r.LW.MARKER:return m.from(t);case r.LW.TEXT:return y.from(t);case r.LW.LABEL:return g.from(t,n);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${e}`)}}function l(e){switch(u.load(e).geometryType){case r.LW.MARKER:return new m(e);case r.LW.FILL:return new f(e);case r.LW.LINE:return new v(e);case r.LW.TEXT:return new y(e);case r.LW.LABEL:return new g(e)}}class u{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get geometryTypeString(){switch(this.geometryType){case r.LW.FILL:return"fill";case r.LW.MARKER:return"marker";case r.LW.LINE:return"line";case r.LW.TEXT:return"text";case r.LW.LABEL:return"label";default:throw new i.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,t){const s=1<<e;t?this._data|=s:this._data&=~s}bit(e){return(this._data&1<<e)>>e}setBits(e,t,s){for(let i=t,r=0;i<s;i++,r++)this.setBit(i,0!=(e&1<<r))}bits(e,t){let s=0;for(let i=e,r=0;i<t;i++,r++)s|=this.bit(i)<<r;return s}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}}u.shared=new u(0);const c=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const s=a(e,t)&e;this.vvSizeMinMaxValue=!!(s&r.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&r.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&r.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&r.X.SIZE_SCALE_STOPS)}},h=e=>class extends e{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t&&!!(e&r.X.ROTATION)}},d=e=>class extends e{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t&&!!(e&r.X.COLOR)}},p=e=>class extends e{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t&&!!(e&r.X.OPACITY)}};class f extends(d(p(u))){static load(e){const t=this.shared;return t.data=e,t}static from(e,t){const s=this.load(0);return s.geometryType=r.LW.FILL,t?s.dotDensity=!0:s.setVV(e,!1),s.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(15)}set dotDensity(e){this.setBit(15,e)}}f.shared=new f(0);class m extends(d(p(h(c(u))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=r.LW.MARKER,t.setVV(e,!1),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);class v extends(d(p(c(u)))){static load(e){const t=this.shared;return t.data=e,t}static from(e,t){const s=this.load(0);return s.geometryType=r.LW.LINE,s.setVV(e,t),s.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}v.shared=new v(0);class y extends(d(p(h(c(u))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(e);return t.geometryType=r.LW.TEXT,t.setVV(e,!1),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0);class g extends(c(u)){static load(e){const t=this.shared;return t.data=e,t}static from(e,t){const s=this.load(0);return s.geometryType=r.LW.LABEL,s.setVV(e,!1),s.mapAligned=!!(0,n.N)(t),s.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}g.shared=new g(0)},49269:(e,t,s)=>{"use strict";function i(e){switch(e){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}s.d(t,{N:()=>i})},31887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var i=s(56140),r=(s(95830),s(36544),s(68055),s(79881)),n=s(87566),a=(s(10923),s(57002),s(86035),s(77204));let o=class extends a.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,i._)([(0,r.Cb)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),(0,i._)([(0,r.Cb)({constructOnly:!0})],o.prototype,"remoteClient",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],o.prototype,"service",void 0),(0,i._)([(0,r.Cb)()],o.prototype,"spatialReference",null),(0,i._)([(0,r.Cb)({constructOnly:!0})],o.prototype,"tileInfo",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=(0,i._)([(0,n.j)("esri.views.2d.layers.features.processors.BaseProcessor")],o);const l=o},50353:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var i=s(56140),r=s(95830),n=s(59472),a=s(36544),o=(s(68055),s(79881),s(87566)),l=(s(32656),s(10923),s(57002),s(86035),s(39105)),u=s(73032),c=s(23229),h=s(71286),d=s(84767),p=s(90200),f=s(83302),m=s(48041),v=s(28487),y=s(80264),g=s(44055),_=s(44840),b=s(10321),S=s(45672),w=s(31887);function V(e){const t=e.message,s={message:{data:{},tileKey:t.tileKey},transferList:new Array};for(const e in t.data){const i=t.data[e];if(s.message.data[e]=null,(0,n.pC)(i)){const t=i.stride,r=i.indices.slice(0),a=i.vertices.slice(0),o=i.records.slice(0),l={stride:t,indices:r,vertices:a,records:o,metrics:(0,n.Po)(i.metrics,(e=>e.slice(0)))};s.transferList.push(r,a,o),s.message.data[e]=l}}return s}a.Z.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");let x=class extends w.Z{constructor(){super(...arguments),this.type="symbol",this._bufferData=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}destroy(){}get supportsTileUpdates(){return!0}async update(e,t){const s=t.schema.processors[0];if("symbol"!==s.type)return;const i=(0,c.Hg)(this._schema,s);(0,c.uD)(i,"mesh")&&((0,r.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",i),e.mesh=!0,e.why.mesh.push("Symbology changed"),this._schema=s,this._factory=this._createFactory(s),this._factory.update(s,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,s){return(0,l.throwIfAborted)(s),this._onTileData(e,t,s)}onTileClear(e){return this._bufferData.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{clear:!0}})}onTileError(e,t,s){const i=s.signal,r={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",r,{signal:i})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&(this._bufferData.get(t.key.id).forEach((e=>{const t=new Set;(0,f.Z_)((s=>{const i=e.message.data[s];if((0,n.pC)(i)){const e=m.$.from(i.records).getCursor();for(;e.next();)t.add(e.id)}}));const s=e.message.tileKey,i={type:"update",addOrUpdate:null,remove:Array.from(t)};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:s,data:i})})),this._bufferData.delete(t.key.id));for(const t of e.added)this._bufferData.forEach((e=>{for(const s of e)s.message.tileKey===t.id&&this._updateTileMesh("append",t,V(s),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e).push(V(t))}_createFactory(e){const{geometryType:t,objectIdField:s,fields:i}=this.service,r={geometryType:t,fields:i,spatialReference:u.Z.fromJSON(this.spatialReference)},n=new b.W(((e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t)),!1);return this._store=n,this._matcher=(0,g.f)(e.mesh.matcher,n,r),new S.j(t,s,n)}async _onTileData(e,t,s){const{type:i,addOrUpdate:r,remove:a}=t,o=t.end;if(!r){const t={type:i,addOrUpdate:null,remove:a,clear:!1,end:o};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},s)}const u=t.status.targets.aggregate,c=this._processFeatures(e,r,u,s);try{const r=await c;if((0,n.Wi)(r)){const t={type:i,addOrUpdate:null,remove:a,clear:!1,end:o};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},s)}for(const t of r)e.key.id!==t.message.tileKey&&this._addBufferData(e.key.id,t);await(0,l.all)(r.map((r=>{const n=e.key.id===r.message.tileKey&&o;return this._updateTileMesh(i,e,r,a,n,t.clear,s.signal)})))}catch(t){this._handleError(e,t,s)}}async _updateTileMesh(e,t,s,i,r,a,o){const u=e,c=s.message.tileKey;c!==t.key.id&&(r=!1);const h=(0,n.Po)(s,(e=>e.message)),d=(0,n.Po)(s,(e=>e.transferList))||[],p={type:u,addOrUpdate:h,remove:i,clear:!1,end:r},f={transferList:(0,n.Wg)(d)||[],signal:o};return(0,l.throwIfAborted)(f),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:c,data:p},f)}async _processFeatures(e,t,s,i){if((0,n.Wi)(t)||!t.hasFeatures)return null;const r={transform:e.transform,hasZ:!1,hasM:!1},a=this._factory,o={viewingMode:"",scale:e.scale},u=await this._matcher;(0,l.throwIfAborted)(i);const c=this._getLabelInfos(e,t);return await a.analyze(t.getCursor(),u,r,o),(0,l.throwIfAborted)(i),this._writeFeatureSet(e,t,r,c,a,s)}_writeFeatureSet(e,t,s,i,r,a){const o=t.getApproximateSize(),l="simple"===this._schema.mesh.matcher.type&&this._schema.mesh.matcher.isDotDensity,u=new y._(e.key.id,{features:o,records:o,metrics:0},l,a,!0),c={viewingMode:"",scale:e.scale},h=t.getCursor();for(;h.next();)try{const t=h.getDisplayId(),a=(0,n.pC)(i)?i.get(t):null;r.writeCursor(u,h,s,c,e.level,a)}catch(e){}return u.serialize()}_handleError(e,t,s){if(!(0,l.isAbortError)(t)){const i={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",i,{signal:s.signal})}}_getLabelInfos(e,t){const s=this._schema.mesh.labels,i=(0,n.Po)(s,(t=>t.filter((t=>function(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}(t,e.scale)))));if((0,n.Wi)(i)||0===i.length)return null;const r=new Map,a=new p.A(h.wz),o=t.getCursor();for(;o.next();){const e=o.getDisplayId();if(this._shouldDiscard(a,o)){r.has(e)||r.set(e,null);continue}let t=!1;const s=[],n=(0,v.nE)(e),l=n&&1!==o.readAttribute("cluster_count")?"aggregate":"feature";for(const r of i){if(r.target!==l)continue;const i=o.getStorage(),a=n&&"feature"===l?i.getComputedStringAtIndex(o.readAttribute("referenceId"),r.fieldIndex):i.getComputedStringAtIndex(e,r.fieldIndex);if(!a)continue;const u=(0,d.E)(a.toString()),c=u[0],h=u[1];this._store.getMosaicItem(r.symbol,(0,_._)(c)).then((e=>{s[r.index]={glyphs:e.glyphMosaicItems,rtl:h,index:r.index}})),t=!0}r.set(e,s),t&&this._markUsed(a,o)}return r}_shouldDiscard(e,t){switch(this.service.geometryType){case"esriGeometryPoint":{const s=t.readLegacyPointGeometry();return!s||e.checkOverlap(s.x,s.y)}case"esriGeometryPolygon":{const s=t.readLegacyCentroid();return!s||e.checkOverlap(s.x,s.y)}default:return!1}}_markUsed(e,t){switch(this.service.geometryType){case"esriGeometryPoint":{const{x:s,y:i}=t.readLegacyPointGeometry();return e.markUsed(s,i)}case"esriGeometryPolygon":{const{x:s,y:i}=t.readLegacyCentroid();return e.markUsed(s,i)}}}};x=(0,i._)([(0,o.j)("esri.views.2d.layers.features.processors.SymbolProcessor")],x);const z=x},68414:(e,t,s)=>{"use strict";var i=s(56140),r=(s(95830),s(36544),s(68055),s(79881)),n=s(87566),a=(s(10923),s(57002),s(86035),s(82677)),o=s(14286),l=s(9512);const u=new Set,c=[],h=new Map,d=[0,0];let p=class extends a.default{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new l.e({concurrency:e,process:(e,s)=>{const i=this._keyToItem.get(e);return t(i,{signal:s})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const s=e.key.id+"-"+t;if(this.has(s))return this.get(s);const i=this._queue.push(s),r=()=>{this._keyToItem.delete(s),this.notifyChange("updating")};return this._keyToItem.set(s,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),r=this.tileInfoView.getTileScale(t.key);h.has(r)||(h.set(r,[]),s=Math.max(r,s),i=Math.min(r,i)),h.get(r).push(t.key),u.add(r)}));let r=this.state.scale;h.has(r)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(c,u),c.sort(),r=c.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),c[0])),r=Math.min(r,s),r=Math.max(r,i);const n=h.get(r),a=t.getClosestInfoForScale(r),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const s=a.denormalizeCol(e.col,e.world),i=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-s)*(o-s)+(l-e.row)*(l-e.row))-Math.sqrt((o-i)*(o-i)+(l-t.row)*(l-t.row))})),u.clear(),h.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let i=Number.POSITIVE_INFINITY,r=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(d,n.key);const a=(0,o.d)(d,s);a<i&&(i=a,r=n.key)})),r.id}};(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,i._)([(0,r.Cb)()],p.prototype,"state",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,i._)([(0,n.j)("esri.views.2d.tiling.PagedTileQueue")],p)},13596:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var i=s(56140),r=(s(95830),s(36544),s(68055),s(79881)),n=s(87566),a=(s(10923),s(57002),s(86035),s(82677)),o=s(14286),l=s(9512);const u=new Set,c=[],h=new Map,d=[0,0];let p=class extends a.default{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:s}=this;this._queue=new l.e({concurrency:e,process:(e,s)=>{const i=this._keyToItem.get(e);return t(i,{signal:s})},peeker:"scale-first"===s?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this.has(t))return this.get(t);const s=this._queue.push(t),i=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),s.then(i,i),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),r=this.tileInfoView.getTileScale(t.key);h.has(r)||(h.set(r,[]),s=Math.max(r,s),i=Math.min(r,i)),h.get(r).push(t.key),u.add(r)}));let r=this.state.scale;h.has(r)||(function(e,t){e.length=0,t.forEach((t=>e.push(t)))}(c,u),c.sort(),r=c.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),c[0])),r=Math.min(r,s),r=Math.max(r,i);const n=h.get(r),a=t.getClosestInfoForScale(r),o=a.getColumnForX(this.state.center[0]),l=a.getRowForY(this.state.center[1]);return n.sort(((e,t)=>{const s=a.denormalizeCol(e.col,e.world),i=a.denormalizeCol(t.col,t.world);return Math.sqrt((o-s)*(o-s)+(l-e.row)*(l-e.row))-Math.sqrt((o-i)*(o-i)+(l-t.row)*(l-t.row))})),u.clear(),h.clear(),n[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let i=Number.POSITIVE_INFINITY,r=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(d,n.key);const a=(0,o.d)(d,s);a<i&&(i=a,r=n.key)})),r.id}};(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,i._)([(0,r.Cb)()],p.prototype,"state",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,i._)([(0,n.j)("esri.views.2d.tiling.TileQueue")],p);const f=p},1768:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var i=s(5201),r=s(73978),n=s(14286);function a(e,t){e.delete(t)}const o=class{constructor(e,t,s){this.maxSize=e,this.tileInfoView=t,this.removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const s=t.key.level,i=this._tileKeysPerLevel[s];a(this._tilePerId,e);for(let t=0;t<i.length;t++)if(i[t].id===e){i.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,s=t.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,e);const i=t.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(t)}prune(e,t,s){let i=this._tilePerId.size;if(i<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&r>=0;)r!==e&&(i=this._pruneAroundCenterTile(i,t,s,r)),r--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,t,s,e))}_pruneAroundCenterTile(e,t,s,i){const r=this._tileKeysPerLevel[i];if(!r||0===r.length)return e;const{size:a,origin:o}=this.tileInfoView.tileInfo,l=s*a[0],u=s*a[1],c=[0,0],h=[0,0];for(r.sort(((e,s)=>(c[0]=o.x+l*(e.col+.5),c[1]=o.y-u*(e.row+.5),h[0]=o.x+l*(s.col+.5),h[1]=o.y-u*(s.row+.5),(0,n.j)(c,t)-(0,n.j)(h,t))));r.length>0;){const t=r.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),a(this._tilePerId,e)}},l=new i.Z(0,0,0,0),u=new Map,c=[],h=[];const d=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new o(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:s}=this,i=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(h.length=0,c.length=0,u.clear(),!i)return;const{minScale:n,maxScale:a}=this.tileInfoView.tileInfo,{spans:o,lodInfo:d}=i,{level:p}=d,{scale:f,center:m,resolution:v}=e.state,y=!e.stationary&&f>this._previousScale;if(this._previousScale=f,this.tiles.length=0,!t&&(f>n||f<a))return this.tiles.length=0,u.clear(),s.forEach((e=>{this.releaseTile(e)})),s.clear(),h.length=0,c.length=0,u.clear(),r.Z.pool.release(i),!0;s.forEach((e=>e.visible=!0));let g=0,_=0;if(o.length>0)for(const{row:e,colFrom:t,colTo:i}of o)for(let r=t;r<=i;r++){g++;const t=l.set(p,e,d.normalizeCol(r),d.getWorldForColumn(r)).id;if(s.has(t)){const e=s.get(t);e.isReady?(u.set(t,e),_++):y||this._addParentTile(t,u)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){u.set(t,e),_++;continue}}else e=this.acquireTile(l),this.tileIndex.set(t,e);y||this._addParentTile(t,u)}}const b=_===g;s.forEach(((e,t)=>{if(l.set(t),u.has(t))return;const s=this.tileInfoView.intersects(i,l);!s||!y&&b?"purge"===this.cachePolicy?l.level===p&&s||c.push(t):(l.level>p||!s)&&c.push(t):e.isReady?h.push(t):l.level>p&&c.push(t)}));for(const e of h){const t=s.get(e);t&&t.isReady&&u.set(e,t)}for(const e of c){const t=s.get(e);this._tileCache?this._tileCache.add(t):this.releaseTile(t),s.delete(e)}return u.forEach((e=>this.tiles.push(e))),s.forEach((e=>{u.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(p,m,v),r.Z.pool.release(i),u.clear(),b}clear(e=!0){const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}_addParentTile(e,t){let s=e,i=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(i=this.tileIndex.get(s),i&&i.isReady){t.has(i.key.id)||t.set(i.key.id,i);break}}else if(this._tileCache&&this._tileCache.has(s)&&(i=this._tileCache.pop(s),this.tileIndex.set(s,i),i&&i.isReady)){t.has(i.key.id)||t.set(i.key.id,i);break}}}}}]);
//# sourceMappingURL=7684.js.map