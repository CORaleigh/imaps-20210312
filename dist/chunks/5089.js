(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5089],{94850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s,i=r(56140),n=(r(95830),r(36544)),o=r(79881),a=r(60263),l=r(87566),c=(r(10923),r(57002),r(86035),r(82677)),u=r(35470),d=r(22696),p=r(94588),h=r(82550),y=r(68055),m=r(60538),f=r(32656),b=r(39105),g=r(58385),v=r(28293),_=r(78745),w=r(3277),S=r(32105),x=r(809),L=r(1721),C=r(9870);let E=s=class extends g.wq{constructor(e){super(e),this.type="none"}clone(){return new s({type:this.type})}};var I;(0,i._)([(0,C.J)({none:"none",stayAbove:"stay-above"})],E.prototype,"type",void 0),E=s=(0,i._)([(0,l.j)("esri.ground.NavigationConstraint")],E);const F=n.Z.getLogger("esri.Ground");let O=I=class extends((0,g.eC)(x.Z)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new v.Z;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&F.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>(e=>{e.parent=null})(e.item)))}initialize(){this.when().catch((e=>{F.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,S.Z)(e,this._get("layers")))}writeLayers(e,t,r,s){const i=[];e?(s={...s,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,p.sM)(e)().write(t,s)&&i.push(t)}else s&&s.messages&&s.messages.push(new f.Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,L.GZ)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:s}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,b.throwIfAborted)(t);const i=new s,n=this.layers.filter(P).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:s}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,b.throwIfAborted)(t);const i=new s,n=this.layers.filter(P).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,h.d9)(this.surfaceColor),navigationConstraint:(0,h.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new I({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,s){const i=t&&t.origin||"web-scene",n=t&&t.portal||null,o=t&&t.url||null;return r.e(7254).then(r.bind(r,87254)).then((({populateOperationalLayers:t})=>{(0,b.throwIfAborted)(s);const r=[];if(e.layers&&Array.isArray(e.layers)){const s={context:{origin:i,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,s))}return(0,b.eachAlways)(r)})).then((()=>{}))}};function P(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,i._)([(0,o.Cb)({json:{read:!1}})],O.prototype,"layers",null),(0,i._)([(0,m.c)("layers")],O.prototype,"writeLayers",null),(0,i._)([(0,o.Cb)({readOnly:!0})],O.prototype,"resourceInfo",void 0),(0,i._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:y.z8,read:{reader:w.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,w.a)(e)},target:"transparency"}}})],O.prototype,"opacity",void 0),(0,i._)([(0,o.Cb)({type:_.default,json:{type:[y.z8],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],O.prototype,"surfaceColor",void 0),(0,i._)([(0,o.Cb)({type:E,json:{write:!0}})],O.prototype,"navigationConstraint",void 0),O=I=(0,i._)([(0,l.j)("esri.Ground")],O);const T=O;var j=r(78452),A=r(80882);const z=n.Z.getLogger("esri.support.groundUtils"),N={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var R=r(90921),M=r(16137);const Z=n.Z.getLogger("esri.Map");let $=class extends((0,M.Q)((0,R.K)(u.Z.EventedMixin(c.default)))){constructor(e){super(e),this.allLayers=new j.Z({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:e=>e.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new T,this._basemapCache=(0,A.Df)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),(0,A.Bf)(this._basemapCache),this._basemapCache=null}castBasemap(e){return(0,A.se)(e,this._basemapCache)}castGround(e){return function(e){let t;"string"==typeof e?e in N?t=new T({resourceInfo:{data:{layers:[N[e]]}}}):z.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,y.se)(T,e);return t}(e)||(Z.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}_createTablesFlattener(e){return new j.Z({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:e=>e&&"group"===e.type?this._createTablesFlattener(e):null,itemFilterFunction:e=>this._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)})}_isMapOrGroupLayer(e){return e&&(e===this||this._isGroupLayer(e))}_isGroupLayer(e){return e&&"group"===e.type}};(0,i._)([(0,o.Cb)({readOnly:!0,dependsOn:[]})],$.prototype,"allLayers",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],$.prototype,"allTables",void 0),(0,i._)([(0,o.Cb)({type:d.default})],$.prototype,"basemap",void 0),(0,i._)([(0,a.p)("basemap")],$.prototype,"castBasemap",null),(0,i._)([(0,o.Cb)({type:T,nonNullable:!0})],$.prototype,"ground",void 0),(0,i._)([(0,a.p)("ground")],$.prototype,"castGround",null),$=(0,i._)([(0,l.j)("esri.Map")],$);const D=$},40522:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s,i=r(56140),n=(r(95830),r(36544),r(68055),r(79881)),o=r(87566),a=(r(10923),r(57002),r(86035),r(58385)),l=r(98034);let c=s=class extends a.wq{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*l.fM[this.unit]}clone(){return new s({value:this.value,unit:this.unit})}};(0,i._)([(0,n.Cb)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),(0,i._)([(0,n.Cb)({type:l.vU.apiValues,json:{type:l.vU.jsonValues,read:l.vU.read,write:l.vU.write},nonNullable:!0})],c.prototype,"unit",void 0),c=s=(0,i._)([(0,o.j)("esri.TimeInterval")],c);const u=c},77204:(e,t,r)=>{"use strict";r.d(t,{r:()=>u,p:()=>c});var s=r(56140),i=r(79881),n=r(87566),o=r(82677),a=r(59691),l=r(45671);const c=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new a.Z}get updatingHandles(){return this._get("updatingHandles")||new l.t}};return(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,i.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,n.j)("esri.core.HandleOwner")],t),t};let u=class extends(c(o.default)){};u=(0,s._)([(0,n.j)("esri.core.HandleOwner")],u)},77293:(e,t,r)=>{"use strict";function s(e,t){for(const[r,s]of e)if(t(s,r))return!0;return!1}r.d(t,{o:()=>s})},92823:(e,t,r)=>{"use strict";r.d(t,{Xq:()=>i,WJ:()=>n});var s=r(62698);class i{constructor(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(e,t,r,s=0){this._storage.put(this._namespace+e,t,r,s)}get(e){const t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}pop(e){const t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}updateSize(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class n{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new s.Z}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs=this._removeFuncs.filter((t=>t[0]!==e))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,t,r,s){const i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),r>this._maxSize)return void this._notifyRemoved(e,t);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const n=1+Math.max(s,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:n,lives:n}),this._size+=r,this._checkSizeLimit()}updateSize(e,t,r){const s=this._db.get(e);if(s&&s.entry===t){if(this._size-=s.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);s.size=r,this._size+=r,this._checkSizeLimit()}}pop(e){const t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}get(e){const t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,s)=>{const i=e.lifetime;r[i]=(r[i]||0)+e.size,this._users.forAll((r=>{const i=r.namespace;if(s.startsWith(i)){const r=t[i]||0;t[i]=r+e.size}}))}));const s={};this._users.forAll((e=>{const r=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){const i=t[r]||0;t[r]=i,s[r]=Math.round(100*e.hitRate)+"%"}else s[r]="0%"}));const i=Object.keys(t);i.forEach((e=>t[e]=t[e]/this._size*100)),i.sort(((e,r)=>t[r]-t[e])),i.forEach((r=>e[r]=Math.round(t[r])+"% / "+s[r]));for(let t=r.length-1;t>=0;--t){const s=r[t];s&&(e["Priority "+(t+-3-1)]=Math.round(s/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemoved(r,t.entry))}))}clearAll(){this._db.forEach(((e,t)=>this._notifyRemoved(t,e.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,t){this._removeFuncs.forEach((r=>{e.startsWith(r[0])&&r[1](t)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,t]of this._db)if(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize)return}}},23229:(e,t,r)=>{"use strict";r.d(t,{Hg:()=>m,uD:()=>h,V7:()=>y});var s=r(59472),i=r(65575),n=r(82677),o=r(28293);const a=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof n.default}function c(e){return e instanceof o.Z?Object.keys(e.items):l(e)?(0,i.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof o.Z?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function p(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=c(e),n=c(t);if(0===i.length&&0===n.length)return;if(!i.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter((e=>-1===i.indexOf(e))),h=i.filter((e=>-1===n.indexOf(e))),y=i.filter((r=>n.indexOf(r)>-1&&u(e,r)!==u(t,r))).concat(o,h).sort(),m=d(e);if(m&&a.indexOf(m)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};let f;const b=l(e)&&l(t);for(const i of y){const n=u(e,i),o=u(t,i);let a;(b||"function"!=typeof n&&"function"!=typeof o)&&n!==o&&(null==n&&null==o||(a=r&&r[i]&&"function"==typeof r[i]?r[i](n,o):"object"==typeof n&&"object"==typeof o&&d(n)===d(o)?p(n,o):{type:"complete",oldValue:n,newValue:o},(0,s.pC)(a)&&((0,s.pC)(f)?f.diff[i]=a:f={type:"partial",diff:{[i]:a}})))}return f}function h(e,t){if((0,s.Wi)(e))return!1;const r=t.split(".");let i=e;for(const e of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}function y(e,t){for(const r of t)if(h(e,r))return!0;return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}},66002:(e,t,r)=>{"use strict";r.d(t,{D9:()=>o,yZ:()=>i});var s=r(93533);function i(e,t){const r=t||e.extent,i=e.width,n=(0,s.c9)(r&&r.spatialReference);return r&&i?r.width/i*n*s.hd*96:0}function n(e,t){return e/((0,s.c9)(t)*s.hd*96)}function o(e,t){const r=e.extent,s=e.width,i=n(t,r.spatialReference);return r.clone().expand(i*s/r.width)}},62933:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var s=r(56140),i=(r(95830),r(59472)),n=(r(36544),r(68055)),o=r(79881),a=r(30590),l=r(87566),c=r(60538),u=r(32656),d=(r(10923),r(57002),r(9678)),p=(r(86035),r(39105)),h=r(52937),y=r(36654),m=r(1721),f=r(56700),b=r(87864),g=r(43072),v=r(18152),_=r(78910),w=r(66002),S=r(48899),x=r(57407),L=r(63795),C=r(33716),E=r(2194),I=r(10113),F=r(2584),O=r(77204),P=r(5698),T=r(41452),j=r(24681),A=r(49708),z=r(11555);let N=class extends((0,x.h)((0,F.n)((0,I.M)((0,E.Q)((0,A.x)((0,P.O)((0,S.Y)((0,_.q)((0,C.I)((0,g.R)((0,L.N)((0,O.p)(f.Z))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.labelsVisible=!1,this.isReference=null,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,i.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),Promise.resolve(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,r,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let n=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=(0,d.M9)(s.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;n=(0,j.QV)(i,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");n=(0,j.QV)(i,e.sublayers,(0,d.M9)(e.origin))}}const o=[],a={writeSublayerStructure:n,...s};let l=n;i.forEach((e=>{const t=e.write({},a);o.push(t),l=l||"user"===e.originOf("visible")})),o.some((e=>Object.keys(e).length>1))&&(t.layers=o),l&&(t.visibleLayers=i.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,t,r,s){const i=s&&s.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const n=new z.R({layer:this,scale:(0,w.yZ)({extent:e,width:t})*i}),o=n.toJSON();n.destroy();const a=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=e&&e.spatialReference,c=l.wkid||JSON.stringify(l.toJSON());o.dpi*=i;const u={};if(null!=s&&s.timeExtent){const{start:e,end:t}=s.timeExtent.toJSON();u.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+r,...o,...a,...u}}async fetchImage(e,t,r,s){const i={responseType:"image"};s&&s.timestamp&&(i.query={...i.query,_ts:s.timestamp}),s&&s.signal&&(i.signal=s.signal),this.customParameters&&Object.keys(this.customParameters).length&&(i.query={...this.customParameters,...i.query});const n=this.parsedUrl.path+"/export",o={...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,s),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==o.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(i.query?i.query={...o,...i.query}:i.query=o,(0,y.default)(n,i).then((e=>e.data)).catch((e=>{if((0,p.isAbortError)(e))throw e;throw new u.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${n}`,{error:e})}))):Promise.reject(new u.Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:r}=await(0,y.default)(this.url,t),{extent:s,fullExtent:i,timeExtent:n}=r,o=s||i;return{fullExtent:o&&h.Z.fromJSON(o),timeExtent:n&&b.Z.fromJSON({start:n[0],end:n[1]})}}loadAll(){return(0,m.GZ)(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await(0,y.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};(0,s._)([(0,o.Cb)()],N.prototype,"alwaysRefetch",void 0),(0,s._)([(0,o.Cb)()],N.prototype,"dpi",void 0),(0,s._)([(0,o.Cb)()],N.prototype,"gdbVersion",void 0),(0,s._)([(0,o.Cb)({json:{read:!1,write:!1}})],N.prototype,"popupEnabled",void 0),(0,s._)([(0,o.Cb)()],N.prototype,"imageFormat",void 0),(0,s._)([(0,a.r)("imageFormat",["supportedImageFormatTypes"])],N.prototype,"readImageFormat",null),(0,s._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],N.prototype,"imageMaxHeight",void 0),(0,s._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],N.prototype,"imageMaxWidth",void 0),(0,s._)([(0,o.Cb)()],N.prototype,"imageTransparency",void 0),(0,s._)([(0,o.Cb)({json:{read:!1,write:!1}})],N.prototype,"labelsVisible",void 0),(0,s._)([(0,o.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],N.prototype,"isReference",void 0),(0,s._)([(0,o.Cb)({type:["ArcGISMapServiceLayer"]})],N.prototype,"operationalLayerType",void 0),(0,s._)([(0,o.Cb)()],N.prototype,"sourceJSON",void 0),(0,s._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0}}})],N.prototype,"sublayers",void 0),(0,s._)([(0,c.c)("sublayers",{layers:{type:[T.Z]},visibleLayers:{type:[n.z8]}})],N.prototype,"writeSublayers",null),(0,s._)([(0,o.Cb)({type:["show","hide","hide-children"]})],N.prototype,"listMode",void 0),(0,s._)([(0,o.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],N.prototype,"type",void 0),(0,s._)([(0,o.Cb)(v.HQ)],N.prototype,"url",void 0),N=(0,s._)([(0,l.j)("esri.layers.MapImageLayer")],N);const R=N},11555:(e,t,r)=>{"use strict";r.d(t,{R:()=>p});var s=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),n=r(87566),o=(r(10923),r(57002),r(86035),r(82677)),a=r(18152),l=r(77204),c=r(24681),u=r(54288);const d={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let p=class extends((0,l.p)(o.default)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,c.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(d[e.propertyName])))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,t)=>(e[t.id]=t.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"))}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}set version(e){this._set("version",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=t=>{const s=this.scale,i=0===s,n=0===t.minScale||s<=t.minScale,o=0===t.maxScale||s>=t.maxScale;t.visible&&(i||n&&o)&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some(((t,r)=>e[r]!==t))?e:s}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};(0,s._)([(0,i.Cb)({readOnly:!0})],p.prototype,"dynamicLayers",null),(0,s._)([(0,i.Cb)({readOnly:!0})],p.prototype,"hasDynamicLayers",null),(0,s._)([(0,i.Cb)()],p.prototype,"layer",null),(0,s._)([(0,i.Cb)({readOnly:!0})],p.prototype,"layers",null),(0,s._)([(0,i.Cb)({readOnly:!0})],p.prototype,"layerDefs",null),(0,s._)([(0,i.Cb)({type:Number})],p.prototype,"scale",null),(0,s._)([(0,i.Cb)(a.qG)],p.prototype,"timeExtent",void 0),(0,s._)([(0,i.Cb)()],p.prototype,"version",null),(0,s._)([(0,i.Cb)({type:u.Z})],p.prototype,"view",void 0),(0,s._)([(0,i.Cb)({readOnly:!0})],p.prototype,"visibleSublayers",null),p=(0,s._)([(0,n.j)("esri.layers.mixins.ExportImageParameters")],p)},7783:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var s=r(56140),i=(r(95830),r(82550)),n=(r(36544),r(68055),r(79881)),o=r(56274),a=r(87566),l=r(60538),c=(r(10923),r(57002),r(86035),r(58385));const u=new o.Xn({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends c.wq{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=u.toJSON(e)}writePrototype(e,t){t.prototype=(0,i.yd)((0,i.d9)(e),!0)}writeThumbnail(e,t){t.thumbnail=(0,i.yd)((0,i.d9)(e))}};(0,s._)([(0,n.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,s._)([(0,n.Cb)({json:{write:!0}})],d.prototype,"description",void 0),(0,s._)([(0,n.Cb)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),(0,s._)([(0,l.c)("drawingTool")],d.prototype,"writeDrawingTool",null),(0,s._)([(0,n.Cb)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,s._)([(0,l.c)("prototype")],d.prototype,"writePrototype",null),(0,s._)([(0,n.Cb)({json:{write:!0}})],d.prototype,"thumbnail",void 0),(0,s._)([(0,l.c)("thumbnail")],d.prototype,"writeThumbnail",null),d=(0,s._)([(0,a.j)("esri.layers.support.FeatureTemplate")],d);const p=d},21872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var s=r(56140),i=(r(95830),r(82550)),n=(r(36544),r(68055),r(79881)),o=r(30590),a=r(87566),l=r(60538),c=(r(10923),r(57002),r(86035),r(58385)),u=r(43950),d=r(79057),p=r(61618),h=(r(6585),r(7783));let y=class extends c.wq{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r];switch(s.type){case"range":t[r]=p.Z.fromJSON(s);break;case"codedValue":t[r]=u.Z.fromJSON(s);break;case"inherited":t[r]=d.Z.fromJSON(s)}}return t}writeDomains(e,t){const r={};for(const t in e)e.hasOwnProperty(t)&&(r[t]=e[t]&&e[t].toJSON());(0,i.yd)(r),t.domains=r}readTemplates(e){return e&&e.map((e=>new h.Z(e)))}writeTemplates(e,t){t.templates=e&&e.map((e=>e.toJSON()))}};(0,s._)([(0,n.Cb)({json:{write:!0}})],y.prototype,"id",void 0),(0,s._)([(0,n.Cb)({json:{write:!0}})],y.prototype,"name",void 0),(0,s._)([(0,n.Cb)({json:{write:!0}})],y.prototype,"domains",void 0),(0,s._)([(0,o.r)("domains")],y.prototype,"readDomains",null),(0,s._)([(0,l.c)("domains")],y.prototype,"writeDomains",null),(0,s._)([(0,n.Cb)({json:{write:!0}})],y.prototype,"templates",void 0),(0,s._)([(0,o.r)("templates")],y.prototype,"readTemplates",null),(0,s._)([(0,l.c)("templates")],y.prototype,"writeTemplates",null),y=(0,s._)([(0,a.j)("esri.layers.support.FeatureType")],y);const m=y},61121:(e,t,r)=>{"use strict";function s(e){return"date"===e.type||"esriFieldTypeDate"===e.type}r.d(t,{Z:()=>n});function i(e){return e.toLowerCase().trim()}const n=class{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!e)return;const t=[];for(const r of e){const e=r&&r.name;if(e){const n=i(e);this._fieldsMap.set(e,r),this._fieldsMap.set(n,r),t.push(n),s(r)&&(this.dateFields.push(r),this._dateFieldsSet.add(r))}}t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(i(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}},26360:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var s,i=r(56140),n=(r(95830),r(82550)),o=(r(36544),r(68055),r(79881)),a=r(56274),l=r(30590),c=r(87566),u=r(60538),d=(r(10923),r(57002),r(86035),r(58385)),p=r(54734),h=r(49684);let y=s=class extends d.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?(0,h.dI)(t.value):e}writeExpression(e,t,r){null!=this.value&&(e=(0,h.dI)(this.value)),t[r]=e}clone(){return new s({expression:this.expression,title:this.title,value:this.value})}};(0,i._)([(0,o.Cb)({type:String,json:{write:{allowNull:!0}}})],y.prototype,"expression",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"title",void 0),(0,i._)([(0,o.Cb)({json:{read:!1,write:!1}})],y.prototype,"value",void 0),(0,i._)([(0,l.r)("expression",["expression","value"])],y.prototype,"readExpression",null),(0,i._)([(0,u.c)("expression")],y.prototype,"writeExpression",null),y=s=(0,i._)([(0,c.j)("esri.layers.support.LabelExpressionInfo")],y);const m=y;var f,b=r(5684);const g=new a.Xn({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function v(e){return!e||"service"!==e.origin&&!(e.layer&&"map-image"===e.layer.type)}let _=f=class extends d.wq{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=b.Rz,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;const s=e.split(" ");if(3===s.length)return r(t[s[0]],s[1],s[2]);if(7===s.length){const e=r(t[s[0]],s[1],s[2]),i=s[3],n=r(t[s[4]],s[5],s[6]);switch(i){case"AND":return e&&n;case"OR":return e||n}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r,s){if(this.labelExpressionInfo&&(v(s)||s&&"service"===s.origin))if(null!=this.labelExpressionInfo.value)e=(0,h.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const t=(0,h.el)(this.labelExpressionInfo.expression);t&&(e="["+t+"]")}null!=e&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,s){if(null==e&&null!=this.labelExpression&&v(s))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(s);i.expression&&(t[r]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return(0,h.hV)(this)}getLabelExpressionArcade(){return(0,h.YI)(this)}getLabelExpressionSingleField(){return(0,h.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new f({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,n.d9)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:(0,n.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],_.prototype,"name",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],_.prototype,"deconflictionStrategy",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:{allowNull:!0}}})],_.prototype,"labelExpression",void 0),(0,i._)([(0,l.r)("labelExpression")],_.prototype,"readLabelExpression",null),(0,i._)([(0,u.c)("labelExpression")],_.prototype,"writeLabelExpression",null),(0,i._)([(0,o.Cb)({type:m,json:{write:{overridePolicy:(e,t,r)=>v(r)?{allowNull:!0}:{enabled:!1}}}})],_.prototype,"labelExpressionInfo",void 0),(0,i._)([(0,u.c)("labelExpressionInfo")],_.prototype,"writeLabelExpressionInfo",null),(0,i._)([(0,o.Cb)({type:g.apiValues,json:{type:g.jsonValues,read:g.read,write:g.write}})],_.prototype,"labelPlacement",void 0),(0,i._)([(0,o.Cb)({type:Number})],_.prototype,"maxScale",void 0),(0,i._)([(0,u.c)("maxScale")],_.prototype,"writeMaxScale",null),(0,i._)([(0,o.Cb)({type:Number})],_.prototype,"minScale",void 0),(0,i._)([(0,u.c)("minScale")],_.prototype,"writeMinScale",null),(0,i._)([(0,o.Cb)({types:p.d,json:{origins:{"web-scene":{types:p.g,write:p.w,default:null}},write:p.w,default:null}})],_.prototype,"symbol",void 0),(0,i._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"useCodedValues",void 0),(0,i._)([(0,o.Cb)({type:String,json:{write:!0}})],_.prototype,"where",void 0),_=f=(0,i._)([(0,c.j)("esri.layers.support.LabelClass")],_);const w=_},97849:(e,t,r)=>{"use strict";r.d(t,{ld:()=>d,B5:()=>c,M8:()=>h,h3:()=>g,G:()=>b,Qc:()=>u,Nm:()=>y,XG:()=>m,a7:()=>p,wH:()=>f});var s=r(59472),i=r(10923),n=r(37704);const o=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${o.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function c(e){return!!a.test(e)}function u(e){const t=(0,i.mN)(e),r=t.path.match(a)||t.path.match(l);if(!r)return null;const[,s,n,o,c]=r,u=n.indexOf("/");return{title:d(-1!==u?n.slice(u+1):n),serverType:o,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:s}}}function d(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function p(e,t){const r=[];if(e){const t=u(e);(0,s.pC)(t)&&t.title&&r.push(t.title)}if(t){const e=d(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function h(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function y(e,t){return e?(0,i.Qj)((0,i.Hu)(e,t)):e}function m(e,t,r){if(!t)return{url:t};t=(0,i.Hu)(t,r);const n=u((0,i.mN)(t).path);let o;return(0,s.pC)(n)&&(null!=n.sublayer&&null==e.layerId&&(o=n.sublayer),t=n.url.path),{url:(0,i.Qj)(t),layerId:o}}function f(e,t,r,s,o){(0,n.w)(t,s,"url",o),s.url&&null!=e.layerId&&(s.url=(0,i.v_)(s.url,r,e.layerId.toString()))}function b(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),s=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),n=-1!==t.indexOf("/wmsserver");return r&&(s||i||n)}function g(e){if(!e)return!1;const t=new i.R9((0,i.hF)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},49684:(e,t,r)=>{"use strict";r.d(t,{dI:()=>m,hV:()=>p,YI:()=>h,UO:()=>y,el:()=>_,z7:()=>d});var s=r(88263);const i="__begin__",n="__end__",o=new RegExp(i,"ig"),a=new RegExp(n,"ig"),l=new RegExp("^"+i,"i"),c=new RegExp(n+"$","i"),u='"';function d(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function p(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function h(e){const t=p(e);if(!t)return null;switch(t.type){case"conventional":return m(t.expression);case"arcade":return t.expression}return null}function y(e){const t=p(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e.match(f);return t&&t[1].trim()||null}(t.expression);case"arcade":return _(t.expression)}return null}function m(e){let t;return e?(t=(0,s.gx)(e,(e=>i+'$feature["'+e+'"]'+n)),t=l.test(t)?t.replace(l,""):u+t,t=c.test(t)?t.replace(c,""):t+u,t=t.replace(o,'" + ').replace(a,' + "')):t='""',t}const f=/^\s*\{([^}]+)\}\s*$/i;const b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function _(e){if(!e)return null;let t=b.exec(e)||g.exec(e);return t?t[1]||t[3]:(t=v.exec(e),t?t[2]:null)}},99322:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>h,JN:()=>d,$o:()=>p});var s=r(56140),i=(r(95830),r(36544)),n=(r(68055),r(79881)),o=r(87566),a=(r(10923),r(57002),r(86035),r(28293)),l=r(32105),c=r(15988);const u=a.Z.ofType(c.default);i.Z.getLogger("esri.support.GraphicsCollection");let d=class extends u{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new u(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};(0,s._)([(0,n.Cb)()],d.prototype,"owner",null),d=(0,s._)([(0,o.j)("esri.support.GraphicsCollection")],d);const p=(e="graphics")=>({type:d,cast:l.R,set(t){const r=(0,l.Z)(t,this._get(e),d);r.owner=this,this._set(e,r)}});const h=d},90921:(e,t,r)=>{"use strict";r.d(t,{K:()=>y});var s=r(56140),i=(r(95830),r(36544)),n=(r(68055),r(79881)),o=r(87566),a=(r(10923),r(57002),r(86035),r(39105)),l=r(28293),c=r(32105),u=r(56700);function d(e){return e&&"group"===e.type}function p(e,t,r){let s,i;if(e)for(let n=0,o=e.length;n<o;n++){if(s=e.getItemAt(n),s[t]===r)return s;if(d(s)&&(i=p(s.layers,t,r),i))return i}}const h=i.Z.getLogger("esri.support.LayersMixin"),y=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new l.Z;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||h.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item))),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,c.Z)(e,this._get("layers")))}add(e,t){const r=this.layers;t=r.getNextIndex(t),e instanceof u.Z?e.parent===this?this.reorder(e,t):r.add(e,t):(0,a.isPromiseLike)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):h.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return p(this.layers,"id",e)}findLayerByUid(e){return p(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,s._)([(0,n.Cb)()],t.prototype,"layers",null),t=(0,s._)([(0,o.j)("esri.support.LayersMixin")],t),t}},16137:(e,t,r)=>{"use strict";r.d(t,{Q:()=>h});var s=r(56140),i=(r(95830),r(36544)),n=(r(68055),r(79881)),o=r(87566),a=(r(10923),r(57002),r(86035),r(28293)),l=r(32105);const c="esri.support.TablesMixin",u=i.Z.getLogger(c);function d(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(let s=0,i=e.length;s<i;s++){const i=e.getItemAt(s);if(i[t]===r)return i;if(d(i)){const e=p(i.tables,t,r);if(e)return e}}}const h=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new a.Z,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,l.Z)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return(0,s._)([(0,n.Cb)()],t.prototype,"tables",null),t=(0,s._)([(0,o.j)(c)],t),t}},80882:(e,t,r)=>{"use strict";r.d(t,{Bj:()=>y,Df:()=>u,Bf:()=>d,se:()=>p,tR:()=>h,zb:()=>m,aL:()=>f});var s=r(36544),i=r(68055),n=r(10923),o=r(28293),a=r(93776),l=r(22696);const c=s.Z.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function p(e,t){var r;let s;if("string"==typeof e){if(!(e in a.s)){const t=Object.keys(a.s).map((e=>`"${e}"`)).join(", ");return c.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(s=t[e]),s||(s=l.default.fromId(e),t&&(t[e]=s))}else s=(0,i.se)(l.default,e);return null!=(r=s)&&r.destroyed&&(c.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}function h(e){let t=null;const r=v(e),s=!r.baseLayers.length;for(const e in a.s){const i=L(r,S(a.s[e]),{mustMatchReferences:s});if("equal"===i){t=e;break}"base-layers-equal"===i&&(t=e)}return t}function y(e,t){return e===t||"equal"===L(v(e),v(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(f))}function f(e){if(g(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(g(null==r?void 0:r.sourceUrl))return!0}return!1}const b=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function g(e){if(!e)return!1;const t=new n.R9((0,n.hF)(e));return b.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?S(e.resourceInfo.data):{baseLayers:_(e.baseLayers),referenceLayers:_(e.referenceLayers)}:null}function _(e){return(o.Z.isCollection(e)?e.toArray():e).map(w)}function w(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function S(e){return e?{baseLayers:x(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:x(e.baseMapLayers.filter((e=>e.isReference)))}:null}function x(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function L(e,t,r){return null!=e!=(null!=t)?"not-equal":e?C(e.baseLayers,t.baseLayers)?C(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function C(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!E(e[r],t[r]))return!1;return!0}function E(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?(0,n.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},43551:(e,t,r)=>{"use strict";r.d(t,{eZ:()=>d});var s=r(4665),i=(r(4529),r(67472)),n=(r(97948),r(99217)),o=r(20628),a=r(38173),l=(r(16839),r(75107),r(58484));const c=["oid","global-id"],u=["oid","global-id","guid"];function d({displayField:e,editFieldsInfo:t,fields:r,objectIdField:n,title:o},c){if(!r)return null;const u=b({editFieldsInfo:t,fields:r,objectIdField:n},c);if(!u.length)return null;const d=function(e){const t=(0,s.O5)(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}({titleBase:o,fields:r,displayField:e}),p=[new a.Z,new i.Z];return new l.default({title:d,content:p,fieldInfos:u})}const p=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],h=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:s})=>s?s.has(e.name):!(m(e.name,t)||r&&e.name===r||c.indexOf(e.type)>-1||p.some((t=>t.test(e.name))));function y(e,t){return"oid"===e.type?-1:"oid"===t.type?1:v(e)?-1:v(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function m(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:s,editDateField:i,editorField:n}=t;return-1!==[r&&r.toLowerCase(),s&&s.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())}function f(e,t){return e.editable&&-1===u.indexOf(e.type)&&!m(e.name,t)}function b({editFieldsInfo:e,fields:t,objectIdField:r},s){return function(e,t){const r=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===r&&(e=e.slice()),e.sort(y),e}(t,(null==s?void 0:s.ignoreFieldTypes)||_).map((t=>new o.Z({fieldName:t.name,isEditable:f(t,e),label:t.alias,format:g(t),visible:h(t,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:null==s?void 0:s.visibleFieldNames})})))}function g(e){switch(e.type){case"small-integer":case"integer":case"single":return new n.Z({digitSeparator:!0,places:0});case"double":return new n.Z({digitSeparator:!0,places:2});case"date":return new n.Z({dateFormat:"long-month-day-year"});default:return null}}function v(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}const _=["geometry","blob","raster","guid","xml"]},5684:(e,t,r)=>{"use strict";r.d(t,{Rz:()=>p,G:()=>y,kD:()=>f,mW:()=>m,js:()=>h});r(95830);var s=r(59472),i=r(48142),n=r(5674),o=r(88083),a=r(44190),l=r(7767);const c=o.Z.fromJSON(l.I4),u=i.Z.fromJSON(l.ET),d=n.default.fromJSON(l.lF),p=a.default.fromJSON(l.qP);function h(e){if((0,s.Wi)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return c;case"polyline":return u;case"polygon":case"extent":return d}return null}const y=o.Z.fromJSON(l.eG),m=i.Z.fromJSON(l.wW),f=n.default.fromJSON(l.lj)},7767:(e,t,r)=>{"use strict";r.d(t,{I4:()=>i,lF:()=>o,ET:()=>n,qP:()=>a,eG:()=>l,lj:()=>u,wW:()=>c});const s=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:s,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},n={type:"esriSLS",style:"esriSLSSolid",width:.75,color:s},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},45671:(e,t,r)=>{"use strict";r.d(t,{t:()=>p});var s=r(56140),i=r(95844),n=r(79881),o=r(87566),a=r(74386),l=r(9419),c=r(82677),u=r(59691),d=r(80621);let p=class extends c.default{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,s=0){const i=0!=(1&s),n=++this.handleId;i||this.installSyncUpdatingWatch(e,t,n);const o=0!=(2&s)?(0,d.init)(e,t,r,i):e.watch(t,r,i);return this.handles.add(o,n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionPropertyChange(e,t,r,s=0){const i=0!=(2&s),n=++this.handleId;return this.handles.add([(0,d.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,d.on)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],n),{remove:()=>{this.handles.remove(n)}}}addOnCollectionChange(e,t,r=0){const s=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),s&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(h)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const s=this.createSyncUpdatingCallback(),n=(0,l.U5)((()=>(0,i.$z)(e,t)),s);return this.handles.add(n,r),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(h),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,a.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(h))})),h)}}};(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"updating",void 0),p=(0,s._)([(0,o.j)("esri.views.support.WatchUpdatingTracking")],p);const h=-42}}]);
//# sourceMappingURL=5089.js.map