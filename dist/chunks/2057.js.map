{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/core/JSONSupport.js","webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/read.js","webpack://imaps/./node_modules/@arcgis/core/core/accessorSupport/write.js","webpack://imaps/./node_modules/@arcgis/core/core/cookie.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityForm.js","webpack://imaps/./node_modules/focus-trap/dist/focus-trap.esm.js","webpack://imaps/./node_modules/tabbable/dist/index.esm.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityModal.js","webpack://imaps/./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack://imaps/./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack://imaps/./node_modules/@arcgis/core/identity/ServerInfo.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack://imaps/./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["i","s","r","super","t","this","write","c","call","prototype","toJSON","isDefaultToJSON","declaredClass","Error","read","a","e","o","enabled","source","n","indexOf","f","Object","getOwnPropertyNames","metadatas","default","set","origin","u","d","setDefaultOrigin","reader","ignoreDefaults","messages","forEach","type","loaded","push","loadWarnings","writer","l","get","overridePolicy","allowNull","isRequired","propertyName","target","error","name","message","defaultEquals","Array","isArray","ignoreOrigin","store","originOf","p","g","keys","length","resources","pendingOperations","then","writtenProperties","propName","oldOrigin","newOrigin","expires","Date","setTime","getTime","toUTCString","encodeURIComponent","document","cookie","m","h","b","_usernameInputNode","_passwordInputNode","signingIn","server","resource","oAuthPrompt","class","oAuthInfo","info","test","lblItem","lblUser","value","required","autocomplete","spellcheck","bind","afterCreate","lblPwd","_","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","y","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","slice","apply","querySelectorAll","unshift","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","radioSet","radioScope","form","ownerDocument","queryRadios","window","CSS","escape","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","visibility","nodeUnderDetails","parentElement","display","isHidden","children","some","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","concat","isFocusable","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","createFocusTrap","elements","userOptions","doc","config","arguments","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","container","contains","getNodeForOption","optionName","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","options","regularTabbables","orderedTabbables","tabbableNodes","candidate","candidateTabindex","sort","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","shiftKey","startOfGroupIndex","_ref","destinationGroupIndex","lastOfGroupIndex","_ref2","_destinationGroupIndex","checkTab","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","undefined","previousActiveElement","updateContainerElements","containerElements","elementsAsArray","Boolean","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","close","v","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","ssl","token","userId","_init","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","json","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","D","j","host","q","E","_portalConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","signInPage","useSignInPage","normalizeWebTierAuth","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","L","scope","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","_doPortalSignIn","_getEsriAuthCookie","findCredential","destroy","path","domain","location","hostname","endsWith","email","resolve","_restInfoPms","_selfReq","_findOAuthInfo","selfDfd","_getPortalSelf","_enqueue","_isRESTService","href","S","w","isAdmin","serverUrl","customParameters","auth_tier","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","checkAppAccess","credential","getCredential","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","localStorage","sessionStorage","save","_redirectFunc","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","allSSL","portalMode","supportsOAuth","protocol","cookieEnabled","_getAllCookies","portalApp","urlKey","match","RegExp","decodeURIComponent","top","_hasPortalSession","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_canUsePortalSignInWorkflow","_pendingDfd","_exchangeToken","baseUrl","signin","useSSL","returnUrlParamName","returnUrl","isValid","oAuthState","oAuthSignIn","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","response_type","force_login","prepopulatedusername","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"chunks/2057.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{subclass as t}from\"./accessorSupport/decorators/subclass.js\";import s from\"./Accessor.js\";import{read as e}from\"./accessorSupport/read.js\";import{write as o}from\"./accessorSupport/write.js\";const i=s=>{let i=class extends s{constructor(...r){super(...r)}read(r,t){e(this,r,t)}write(r={},t){return o(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c.call(this,r,t)}};return i=r([t(\"esri.core.JSONSupport\")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c(r,t){if(!r)return null;if(r.declaredClass)throw new Error(\"JSON object is already hydrated\");const s=new this;return s.read(r,t),s}function n(r){return r&&\"read\"in r&&\"write\"in r&&\"toJSON\"in r}let a=class extends(i(s)){};a=r([t(\"esri.core.JSONSupport\")],a);export{a as JSONSupport,i as JSONSupportMixin,n as isJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"./utils.js\";import{valueOf as t,exists as r}from\"./get.js\";import{originSpecificReadPropertyDefinition as o,originSpecificPropertyDefinition as n}from\"./extensions/serializableProperty.js\";function s(e,t,o){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if(\"string\"==typeof n){if(n===t)return!0;if(n.indexOf(\".\")>-1&&0===n.indexOf(t)&&r(n,o))return!0}else for(const e of n){if(e===t)return!0;if(e.indexOf(\".\")>-1&&0===e.indexOf(t)&&r(e,o))return!0}return!1}function i(e,t,r,n,i){let f=o(t[r],i);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(f)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))f=o(t[a],i),s(f,r,n)&&(e[a]=!0)}function f(e,t,r,o){const s=r.metadatas,i=n(s[t],\"any\",o),f=i&&i.default;if(void 0===f)return;const a=\"function\"==typeof f?f.call(e,t,o):f;void 0!==a&&r.set(t,a)}const a={origin:\"service\"};function c(r,n,s=a){if(!n||\"object\"!=typeof n)return;const c=e(r),u=c.metadatas,d={};for(const e of Object.getOwnPropertyNames(n))i(d,u,e,n,s);c.setDefaultOrigin(s.origin);for(const e of Object.getOwnPropertyNames(d)){const i=o(u[e],s).read,f=i&&i.source;let a;a=f&&\"string\"==typeof f?t(n,f):n[e],i&&i.reader&&(a=i.reader.call(r,a,n,s)),void 0!==a&&c.set(e,a)}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||f(r,e,c,s);c.setDefaultOrigin(\"user\")}function u(e,t,r,o=a){var n;const s={...o,messages:[]};r(s),null==(n=s.messages)||n.forEach((t=>{\"warning\"!==t.type||e.loaded?o&&o.messages&&o.messages.push(t):e.loadWarnings.push(t)}))}export default c;export{c as read,u as readLoadable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport r from\"../Logger.js\";import{getProperties as e,merge as t}from\"./utils.js\";import{originSpecificWritePropertyDefinition as i}from\"./extensions/serializableProperty.js\";import o from\"../Error.js\";import{idToReadableName as n,nameToId as s}from\"./PropertyOrigin.js\";import{equals as u}from\"../arrayUtils.js\";import{all as l}from\"../promiseUtils.js\";const a=r.getLogger(\"esri.core.accessorSupport.write\");function f(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function c(r,e,t,i,n,l){if(!i||!i.write)return!1;const f=r.get(t);if(!n&&i.write.overridePolicy){const e=i.write.overridePolicy.call(r,f,t,l);void 0!==e&&(n=e)}if(n||(n=i.write),!n||!1===n.enabled)return!1;if((null===f&&!n.allowNull||void 0===f)&&n.isRequired){const e=new o(\"web-document-write:property-required\",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return e&&l&&l.messages?l.messages.push(e):e&&!l&&a.error(e.name,e.message),!1}if(void 0===f)return!1;if(null===f&&!n.allowNull)return!1;if(function(r,e,t,i,o){const n=i.default;if(void 0===n)return!1;if(null!=i.defaultEquals)return i.defaultEquals(o);if(\"function\"==typeof n){if(Array.isArray(o)){const i=n.call(r,e,t);return u(i,o)}return!1}return n===o}(r,t,l,i,f))return!1;if(void 0!==i.default)return!0;if(!n.ignoreOrigin&&l&&l.origin){if(e.store.originOf(t)<s(l.origin))return!1}return!0}function p(r,t,o,n){const s=e(r),u=s.metadatas,l=i(u[t],n);return!!l&&c(r,s,t,l,o,n)}function g(r,o,s){if(r&&\"function\"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return t(o,r.toJSON());const u=e(r),a=u.metadatas;for(const e in a){const p=i(a[e],s);if(!c(r,u,e,p,void 0,s))continue;const g=r.get(e),d=f(r,p,p.write&&\"string\"==typeof p.write.target?p.write.target:e,g,s);Object.keys(d).length>0&&(o=t(o,d),s&&s.resources&&s.resources.pendingOperations&&s.resources.pendingOperations.length&&l(s.resources.pendingOperations).then((()=>t(o,d))),s&&s.writtenProperties&&s.writtenProperties.push({target:r,propName:e,oldOrigin:n(u.store.originOf(e)),newOrigin:s.origin}))}return o}export default g;export{p as willPropertyWrite,g as write};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";function t(t,o,n={}){let i=e(n.expires);if(\"number\"==typeof i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),i=n.expires=e}\"string\"!=typeof i&&(n.expires=i.toUTCString());let r=t+\"=\"+encodeURIComponent(o);for(const e in n){r+=\"; \"+e;const t=n[e];!0!==t&&(r+=\"=\"+t)}document.cookie=r}export{t as writeCookie};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as n}from\"../widgets/support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import l from\"../widgets/Widget.js\";const p=\"esri-identity-form\",a=\"esri-identity-form__group\",d=\"esri-identity-form__label\",c=\"esri-identity-form__footer\",m=\"esri-input\",h=\"esri-button\",v=\"esri-button--secondary\";let b=class extends l{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:n,messages:l}=this,b=u(\"div\",{class:a},r(n?l.oAuthInfo:l.info,{server:/\\.arcgis\\.com/i.test(e)?\"ArcGIS Online\":e,resource:`(${t||l.lblItem})`})),g=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:m}))),f=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:m}))),_=u(\"div\",{class:this.classes(a,c)},u(\"input\",{type:\"submit\",disabled:!!i,value:i?l.lblSigning:l.lblOk,class:h}),u(\"input\",{type:\"button\",value:l.lblCancel,bind:this,onclick:this._cancel,class:this.classes(h,v)})),y=s?u(\"div\",null,s.details&&s.details.httpStatus?l.invalidUser:l.noAuthService):null;return u(\"form\",{class:p,bind:this,onsubmit:this._submit},b,y,g,f,_)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(),i(\"esri/identity/t9n/identity\")],b.prototype,\"messages\",void 0),s([e(),n()],b.prototype,\"signingIn\",void 0),s([e(),n()],b.prototype,\"server\",void 0),s([e(),n()],b.prototype,\"resource\",void 0),s([e(),n()],b.prototype,\"error\",void 0),s([e(),n()],b.prototype,\"oAuthPrompt\",void 0),b=s([t(\"esri.identity.IdentityForm\")],b);var g=b;export default g;\n","/*!\n* focus-trap 6.2.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref) {\n          var firstTabbableNode = _ref.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var lastTabbableNode = _ref2.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.1.5\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as o}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as i}from\"../widgets/support/decorators/renderable.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as a}from\"../widgets/support/widget.js\";import n from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const d=\"esri-identity-modal\",l=\"esri-identity-modal--open\",p=\"esri-identity-modal--closed\",u=\"esri-identity-modal__title\",m=\"esri-identity-modal__dialog\",h=\"esri-identity-modal__content\",_=\"esri-identity-modal__close-button\",y=\"esri-icon-close\";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r(\"button\",{class:_,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r(\"h1\",{id:h,class:u},o):null,v=a?r(\"div\",{bind:this,class:m,role:\"dialog\",\"aria-labelledby\":h,\"aria-describedby\":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r(\"div\",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:h,id:t,innerHTML:e}):a(e)?r(\"div\",{class:h,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,\"container\",void 0),t([e(),i()],g.prototype,\"content\",void 0),t([e(),i()],g.prototype,\"open\",void 0),t([e(),i(),o(\"esri/t9n/common\")],g.prototype,\"messages\",void 0),t([e({aliasOf:\"messages.auth.signIn\"}),i()],g.prototype,\"title\",void 0),g=t([s(\"esri.identity.IdentityModal\")],g);var f=g;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s||(s=t[e.authNamespace]={}),s[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}destroy(){const t=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const s=t[e.authNamespace];if(s){delete s[e.portalUrl];try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.expires=s.expires,this.ssl=s.ssl,this.token=s.token,this.userId=s.userId))}}_load(){let t={};if(this.storage){const e=this.storage.getItem(\"esriJSAPIOAuth\");if(e)try{t=JSON.parse(e)}catch(t){console.log(t)}}return t}}t.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{mixin as r,fixJson as s}from\"../core/lang.js\";import{getDeepValue as i}from\"../core/object.js\";import n from\"../config.js\";import{escapeRegExpString as o}from\"../core/string.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../core/Error.js\";import{Url as c,hasSameOrigin as d,queryToObject as u,normalize as p,urlToObject as _,getProxyRule as f,makeAbsolute as g,objectToQuery as m}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as v}from\"../core/events.js\";import{createAbortController as S,createResolver as w,onAbort as I,isAborted as k,resolve as A}from\"../core/promiseUtils.js\";import U from\"../core/Evented.js\";import{id as y}from\"../kernel.js\";import x from\"../request.js\";import{writeCookie as T}from\"../core/cookie.js\";import R from\"./IdentityForm.js\";import O from\"./IdentityModal.js\";import C from\"./OAuthCredential.js\";import P from\"./OAuthInfo.js\";import b from\"./ServerInfo.js\";const D={},j=e=>{const t=new c(e.owningSystemUrl).host,r=new c(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},q=(e,t)=>!!(j(e)&&t&&t.some((t=>t.test(e.server))));let E=class extends U{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=R,this.tokenValidity=null,this.signInPage=null,this.useSignInPage=!0,this.normalizeWebTierAuth=!1,this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;t?(e=e.filter((e=>!this.findOAuthInfo(e.portalUrl))),this.oAuthInfos=t.concat(e)):this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let i,n=this.findServerInfo(t),o=!0;n||(n=new b,n.server=this._getServerInstanceRoot(t),s?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,r(i,e),o=!1):(i=new L({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),o||i.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new b(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){let r,s;if(e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?\"server\":\"portal\",t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s){r=t;break}return r}getCredential(e,t){let r,s,i=!0;t&&(r=!!t.token,s=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=S(),o=w();if(t.signal&&I(t.signal,(()=>{n.abort()})),I(n,(()=>{o.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))})),k(n))return o.promise;t.signal=n.signal;const a=this._isAdminResource(e),h=r&&this._doPortalSignIn(e)?this._getEsriAuthCookie():null,c=r?this.findCredential(e):null;let d;if(c&&s&&s.details&&498===s.details.httpStatus)c.destroy(),h&&h.token===t.token&&(T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:document.domain}),window.location.hostname.endsWith(\".arcgis.com\")&&T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:\"arcgis.com\"}));else if(h||c){const t=h&&h.email||c&&c.userId;return d=new l(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+t+\"'. You do not have access to this resource: \"+e,{error:s}),o.reject(d),o.promise}const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new l(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),o.reject(d),o.promise;p=new b,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return i&&p.hasPortal&&void 0===p._selfReq&&!this._findOAuthInfo(e)&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new c(window.location.href.toLowerCase()),o=this._getEsriAuthCookie(),a=e.shortLivedTokenValidity;let h,u,p,_,f,g,m,v,S,w;t&&(w=this.tokenValidity||a||this.defaultTokenValidity,w>a&&a>0&&(w=a)),s&&(u=s.isAdmin,p=s.serverUrl,_=s.token,m=s.signal,v=s.ssl,e.customParameters=s.customParameters),u?f=e.adminTokenServiceUrl:(f=e.tokenServiceUrl,g=new c(f.toLowerCase()),o&&(h=o.auth_tier,h=h&&h.toLowerCase()),(\"web\"===h||e.webTierAuth)&&s&&s.serverUrl&&!v&&\"http\"===n.scheme&&(d(n.uri,f,!0)||\"https\"===g.scheme&&n.host===g.host&&\"7080\"===n.port&&\"7443\"===g.port)&&(f=f.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"))),S=r({query:r({request:\"getToken\",username:t&&t.username,password:t&&t.password,serverUrl:p,token:_,expiration:w,referer:u||i?window.location.host:null,client:u?\"referer\":null,f:\"json\"},e.customParameters),method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:m},s&&s.ioArgs),i||(S.withCredentials=!1);return x(f,S).then((r=>{const s=r.data;if(!s||!s.token)return new l(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return D[i]||(D[i]={}),t&&(D[i][t.username]=t.password),s.validity=w,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let s=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let n;const o={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e,!0)||r&&r.force))n=i.server+\"/sharing/rest/oauth2/validateAppAccess\",o.client_id=t;else{if(!i.token)return{credential:i};n=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};n=i.server+\"/rest/services\"}return i.token&&(o.token=i.token),x(n,{query:o,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new l(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return s=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new l(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new l(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:s})))}setOAuthResponseHash(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,!r||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const s=u(e);if(s.error){const e=\"access_denied\"===s.error,t=new l(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+s.error+\" - \"+s.error_description);r.reject(t)}else{const e=r.sinfo_,t=r.oinfo_,i=t._oAuthCred,n=new L({userId:s.username,server:e.server,token:s.access_token,expires:Date.now()+1e3*Number(s.expires_in),ssl:\"true\"===s.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=s.persist?window.localStorage:window.sessionStorage,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),r.resolve(n)}}setRedirectionHandler(e){this._redirectFunc=e}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=w(),i=()=>{var e,t,r,s,i;null==(e=a)||e.remove(),null==(t=h)||t.remove(),null==(r=c)||r.remove(),null==(s=o)||s.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=o=a=h=c=null},n=()=>{i(),this._oAuthDfd=null,s.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&I(r.signal,(()=>{n()}));let o=new this.formConstructor;o.resource=this.getResourceName(e),o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");let a=o.on(\"cancel\",n),h=this.dialog.watch(\"open\",n),c=o.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((n=>{i();const o=new L({userId:e.username,server:t.server,token:n.token,expires:null!=n.expires?Number(n.expires):null,ssl:!!n.ssl,isAdmin:r.isAdmin,validity:n.validity});s.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=w();const i=this._oAuthDfd;null!=s&&s.signal&&I(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&a()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=r;const n=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!n)return this._doOAuthSignIn(e,t,r),i.promise;const o=new this.formConstructor;o.oAuthPrompt=!0,o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");const a=()=>{u(),this._oAuthDfd=null,i.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))},h=o.on(\"cancel\",a),c=this.dialog.watch(\"open\",a),d=o.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,r)})),u=()=>{h.remove(),c.remove(),d.remove(),o.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=u(e);let r=!1;t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\")?(t.state=JSON.parse(t.state),this._oAuthHash=t,r=!0):t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0)),r&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new l(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,r.userId),o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,t.userId),o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!d(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!d(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===r&&(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(n.request.proxyUrl||\"\").toLowerCase(),r=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==r&&(e=e.substring(r+t.length+1)),e=p(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new c(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some((e=>e.regex.test(t.uri)));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),s||n.portalUrl&&(s=d(t,n.portalUrl,!0)),s||(s=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),s=s||this._agsPortal.test(t.path),s}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,n)=>{-1===r&&i.regex.test(e)&&(r=n),-1===s&&i.regex.test(t)&&(s=n)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&j(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return t=s+\"/admin/generateToken\",r=x(e=s+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(s=e.toLowerCase().indexOf(\"/sharing\"),-1!==s&&(t=e.substring(0,s)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,r){return x(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return A({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return x(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_hasPortalSession(){return!!this._getEsriAuthCookie()}_getEsriAuthCookie(){let e=null;if(navigator.cookieEnabled){const t=this._getAllCookies(\"esri_auth\");let r;for(let s=0;s<t.length;s++){const i=JSON.parse(t[s]);if(i.portalApp){e=i;break}r?r.push(i):r=[i]}if(!e&&r)for(const t of r)if(t.urlKey&&window.location.hostname===`${t.urlKey.toLowerCase()}.${t.customBaseUrl}`){e=t;break}}if(e){let t=null;e.expires&&(\"number\"==typeof e.expires?t=e.expires:\"string\"==typeof e.expires&&(t=Date.parse(e.expires)),isNaN(t)&&(t=null),e.expires=t),t&&t<Date.now()&&(e=null)}return e}_getAllCookies(e){const t=[],r=document.cookie.match(new RegExp(\"(?:^|; )\"+o(e)+\"=([^;]*)\",\"g\"));if(r)for(let e=0;e<r.length;e++){let s=r[e];const i=s.indexOf(\"=\");i>-1&&(s=s.substring(i+1),t.push(decodeURIComponent(s)))}return t}_doPortalSignIn(e,t){if(navigator.cookieEnabled){const r=this._getEsriAuthCookie(),s=this._portalConfig,i=window.location.href,n=this.findServerInfo(e);if((t||this.useSignInPage)&&(s||this._isPortalDomain(i)||r)&&(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(i,e)||s&&(this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),e)||this._isIdProvider(s.restBaseUrl,e))||d(i,e,!0)))return!0}return!1}_canUsePortalSignInWorkflow(e){return this._doPortalSignIn(e)&&(window===window.top||this._hasPortalSession())}_checkProtocol(e,t,r,s){let i=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===n.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&f(n)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){r(new l(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,r,s,i,n){return s||(s=w()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(s,i,n,o)=>{const a=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,c=a.hasPortal&&this._findOAuthInfo(e.resUrl_);let d,u;if(this._canUsePortalSignInWorkflow(e.resUrl_)){const s=this._getEsriAuthCookie(),i=this._portalConfig;if(s){if(!a.webTierAuth){\"web\"===(s.auth_tier&&s.auth_tier.toLowerCase())&&(a.webTierAuth=!0)}return d=new L({userId:s.email,server:a.server,token:a.webTierAuth?null:s.token,expires:s.expires}),void(d.token?e._pendingDfd=this._exchangeToken(d.server,c?c.appId:\"arcgisonline\",d.token).then((e=>{d.token=e,t(d)})).catch((()=>{t(d)})):t(d))}if(h){let t=\"\";const s=window.location.href;return t=this.signInPage?this.signInPage:i?i.baseUrl+i.signin:this._isIdProvider(s,e.resUrl_)?this._getOrigin(s)+\"/home/signin.html\":a.tokenServiceUrl.replace(this._rePortalTokenSvc,\"\")+\"/home/signin.html\",t=t.replace(/http:/i,\"https:\"),i&&!1===i.useSSL&&(t=t.replace(/https:/i,\"http:\")),void(0===s.toLowerCase().replace(\"https\",\"http\").indexOf(t.toLowerCase().replace(\"https\",\"http\"))?(u=new l(\"identity-manager:unexpected-error\",\"Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: \"+e.resUrl_),r(u)):(this._rejectOnPersistedPageShow=!0,this._redirectFunc?this._redirectFunc({signInPage:t,returnUrlParamName:\"returnUrl\",returnUrl:s,resourceUrl:e.resUrl_,serverInfo:a}):window.location.href=t+\"?returnUrl=\"+encodeURIComponent(s)))}u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)}else if(s)t(new L({userId:s,server:a.server,token:n,expires:null!=o?Number(o):null,ssl:!!i}));else if(c){let s=c._oAuthCred;if(!s){const e=new C(c,window.localStorage),t=new C(c,window.sessionStorage);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,c._oAuthCred=s}if(s.isValid())d=new L({userId:s.userId,server:a.server,token:s.token,expires:s.expires,ssl:s.ssl,_oAuthCred:s}),c.appId!==s.appId&&this._doPortalSignIn(e.resUrl_,!0)?e._pendingDfd=this._exchangeToken(d.server,c.appId,d.token).then((e=>{d.token=e,s.token=e,s.save(),t(d)})).catch((()=>{t(d)})):t(d);else if(this._oAuthHash&&this._oAuthHash.state.portalUrl===c.portalUrl){const e=this._oAuthHash;d=new L({userId:e.username,server:a.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s}),c.userId=d.userId,s.storage=e.persist?window.localStorage:window.sessionStorage,s.token=d.token,s.expires=d.expires,s.userId=d.userId,s.ssl=d.ssl,s.save(),this._oAuthHash=null,t(d)}else h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,a,c,e.options_).then(t,r):(u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u))}else if(h){if(this._checkProtocol(e.resUrl_,a,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,a,s).then(t,r)}}else u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)},n=()=>{const s=e.sinfo_,i=s.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(q(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{r(e)}))}};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),h=e.sinfo_._restInfoPms;h?h.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=i(\"authInfo.tokenServicesUrl\",t)||i(\"authInfo.tokenServiceUrl\",t)||i(\"tokenServiceUrl\",t),r.shortLivedTokenValidity=i(\"authInfo.shortLivedTokenValidity\",t),r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}a&&r.owningSystemUrl?n():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new l(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,n,o;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&parseFloat(n)>=4.4&&!this._canUsePortalSignInWorkflow(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r,s=e.portalUrl;const i=e.customBaseUrl,n=e.owningTenant,o=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=x(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new P({appId:\"arcgisonline\",popup:!0,popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=A(),t.then((()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,\"https:\"),x(s+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this.defaultOAuthInfo.appId,redirect_uri:g(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=s,this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,r,s){const i={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(i),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?g(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId);const o=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",a=o+\"?\"+m(n);if(s.popup){const e=window.open(a,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new l(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=v(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new l(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:o,resourceUrl:e,serverInfo:r,oAuthInfo:s}):window.location.href=a}};E=e([h(\"esri.identity.IdentityManagerBase\")],E);let L=class extends U.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=y.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,s=r&&q(e,y._legacyFed),i=e.webTierAuth,n=i&&y.normalizeWebTierAuth,o=D[this.server],a=o&&o[this.userId];let h,l,c=this.resources&&this.resources[0],d=r&&y.findServerInfo(t),u={username:this.userId,password:a};if((!i||n)&&(r&&!d&&y.serverInfos.some((e=>(y._isIdProvider(t,e.server)&&(d=e),!!d))),h=d&&y.findCredential(d.server,this.userId),!r||h)){if(!s){if(r)l={serverUrl:c,token:h&&h.token,ssl:h&&h.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!a){let t;return c&&(c=y._sanitizeUrl(c),this._enqueued=1,t=y._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return y.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}h.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&y.credentials.forEach((e=>{const t=y.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(y._hasSameServerInstance(this.server,r)||y._isIdProvider(r,this.server))&&(q(t,y._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&y.findServerInfo(this.server),r=t&&t.owningSystemUrl,s=r&&y.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!s||!s.webTierAuth||y.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=y.credentials.indexOf(this);e>-1&&y.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([a()],L.prototype,\"creationTime\",void 0),e([a()],L.prototype,\"expires\",void 0),e([a()],L.prototype,\"isAdmin\",void 0),e([a()],L.prototype,\"oAuthState\",void 0),e([a()],L.prototype,\"resources\",void 0),e([a()],L.prototype,\"scope\",void 0),e([a()],L.prototype,\"server\",void 0),e([a()],L.prototype,\"ssl\",void 0),e([a()],L.prototype,\"token\",void 0),e([a()],L.prototype,\"tokenRefreshBuffer\",void 0),e([a()],L.prototype,\"userId\",void 0),e([a()],L.prototype,\"validity\",void 0),L=e([h(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n"],"sourceRoot":""}