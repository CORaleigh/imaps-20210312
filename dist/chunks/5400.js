(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5400,7721],{35400:(e,n,t)=>{"use strict";t.r(n),t.d(n,{executeScript:()=>le,extend:()=>ce,extractFieldLiterals:()=>ue,findFunctionCalls:()=>de,functionHelper:()=>ie,referencesFunction:()=>he,referencesMember:()=>fe,validateScript:()=>se});var r=t(39105),o=t(73032),a=t(39718),i=t(61106),c=t(52937),l=t(3470),u=t(53817),s=t(93833),f=t(80080),h=t(94285),d=t(86059),g=t(45674),p=t(28112),E=t(22830),w=t(77890),m=t(29295),y=t(9600),v=t(61759),I=t(88289),N=t(70044),A=t(62386),b=t(993),R=t(88008),S=t(34089),Z=t(7721);const T=100;function O(e){return e instanceof Error?(0,r.reject)(e):(0,r.reject)(new Error(e))}function F(e){return(0,r.resolve)(e)}function C(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(L(e,n.arguments[r]));return(0,r.all)(t)}function x(e,n,t){return(0,r.create)(((r,o)=>{C(e,n).then((a=>{try{r(t(e,n,a))}catch(e){o(e)}}),o)}))}function U(e,n,t){try{return C(e,n).then((o=>{try{const a=t(e,n,o);return function(e){return e&&"function"==typeof e.then}(a)?a:(0,r.resolve)(a)}catch(e){return O(e)}}))}catch(e){return O(e)}}function L(e,n){try{switch(n.type){case"VariableDeclarator":return function(e,n){try{let t=null;return t=null===n.init?(0,r.resolve)(null):L(e,n.init),null!==e.localScope?t.then((t=>(0,r.create)((r=>{if(t===g.v&&(t=null),"Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();e.localScope[o]={value:t,valueset:!0,node:n.init},r(g.v)})))):t.then((t=>(0,r.create)((r=>{if("Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();t===g.v&&(t=null),e.globalScope[o]={value:t,valueset:!0,node:n.init},r(g.v)}))))}catch(e){return O(e)}}(e,n);case"VariableDeclaration":return V(e,n,0);case"BlockStatement":return function(e,n){try{return _(e,n,0)}catch(e){return O(e)}}(e,n);case"FunctionDeclaration":return function(e,n){try{const t=n.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new f.Z(n,e)},(0,r.resolve)(g.v)}catch(e){return O(e)}}(e,n);case"ReturnStatement":return function(e,n){return(0,r.create)(((t,r)=>{null===n.argument?t(new g.R(g.v)):L(e,n.argument).then((e=>{try{t(new g.R(e))}catch(e){r(e)}}),r)}))}(e,n);case"IfStatement":return function(e,n){return(0,r.create)(((t,r)=>{"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type?L(e,n.test).then((o=>{try{!0===o?L(e,n.consequent).then(t,r):!1===o?null!==n.alternate?L(e,n.alternate).then(t,r):t(g.v):r(new Error((0,v.H5)(n.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(e){r(e)}}),r):r(new Error((0,v.H5)(n.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ExpressionStatement":return function(e,n){try{return"AssignmentExpression"===n.expression.type?L(e,n.expression):(n.expression.type,L(e,n.expression).then((e=>(0,r.create)((n=>{n(e===g.v?g.v:new g.I(e))})))))}catch(e){return(0,r.reject)(e)}}(e,n);case"UpdateExpression":return function(e,n){try{const t=n.argument;if("MemberExpression"===t.type){const o={t:null};return L(e,t.object).then((n=>{let a=null;return o.t=n,!0===t.computed?a=L(e,t.property):"Identifier"===t.property.type&&(a=(0,r.resolve)(t.property.name)),a})).then((e=>(0,r.create)((t=>{const r=o.t;let a;if((0,g.a)(r)){if(!(0,g.k)(e))throw new Error("Invalid Parameter");if(e<0&&(e=r.length+e),e<0||e>=r.length)throw new Error("Assignment outside of array bounds");a=(0,g.t)(r[e]),r[e]="++"===n.operator?a+1:a-1}else if(r instanceof p.Z){if(!1===(0,g.g)(e))throw new Error("Dictionary accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=(0,g.t)(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}else{if(!(r instanceof y.Z))throw(0,g.b)(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.g)(e))throw new Error("Feature accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=(0,g.t)(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1)}))))}return(0,r.create)(((t,r)=>{const o="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!o)throw new Error("Invalid identifier");let a;return null!==e.localScope&&void 0!==e.localScope[o]?(a=(0,g.t)(e.localScope[o].value),e.localScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void 0!==e.globalScope[o]?(a=(0,g.t)(e.globalScope[o].value),e.globalScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void r(new Error("Variable not recognised"))}))}catch(e){return(0,r.reject)(e)}}(e,n);case"AssignmentExpression":return function(e,n){return(0,r.create)(((t,o)=>{const a=n.left;if("MemberExpression"===a.type)L(e,n.right).then((i=>{try{L(e,a.object).then((c=>{try{let l=null;if(!0===a.computed)l=L(e,a.property);else{if("Identifier"!==a.property.type)throw new Error("Expected computed or identifier for assignemnt target");l=(0,r.resolve)(a.property.name)}l.then((e=>{try{if((0,g.a)(c)){if(!(0,g.k)(e))throw new Error("Invalid Parameter");if(e<0&&(e=c.length+e),e<0||e>c.length)throw new Error("Assignment outside of array bounds");if(e===c.length){if("="!==n.operator)throw new Error("Invalid Parameter");c[e]=z(i,n.operator,c[e],n)}else c[e]=z(i,n.operator,c[e],n)}else if(c instanceof p.Z){if(!1===(0,g.g)(e))throw new Error("Dictionary accessor must be a string");if(!0===c.hasField(e))c.setField(e,z(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,z(i,n.operator,null,n))}}else{if(!(c instanceof y.Z))throw(0,g.b)(c)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.g)(e))throw new Error("Feature accessor must be a string");if(!0===c.hasField(e))c.setField(e,z(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,z(i,n.operator,null,n))}}t(g.v)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o);else{const r=a.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[r])return void L(e,n.right).then((a=>{try{e.localScope[r]={value:z(a,n.operator,e.localScope[r].value,n),valueset:!0,node:n.right},t(g.v)}catch(e){o(e)}}),o);void 0!==e.globalScope[r]?L(e,n.right).then((a=>{try{e.globalScope[r]={value:z(a,n.operator,e.globalScope[r].value,n),valueset:!0,node:n.right},t(g.v)}catch(e){o(e)}}),o):o(new Error("Cannot assign undeclared variable"))}}))}(e,n);case"ForStatement":return function(e,n){try{return null!==n.init?L(e,n.init).then((()=>(0,r.create)(((t,r)=>{k(e,n,{testResult:!0,lastAction:g.v},(e=>{t(e)}),(e=>{r(e)}),0)})))):(0,r.create)(((t,r)=>{k(e,n,{testResult:!0,lastAction:g.v},(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return(0,r.reject)(e)}}(e,n);case"ForInStatement":return function(e,n){return(0,r.create)(((t,o)=>{L(e,n.right).then((a=>{try{let i=null;i="VariableDeclaration"===n.left.type?L(e,n.left):(0,r.resolve)(),i.then((()=>{try{let r="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(r=e.name)}else"Identifier"===n.left.type&&(r=n.left.name);if(!r)throw new Error((0,v.H5)(n,"RUNTIME","INVALIDVARIABLE"));r=r.toLowerCase();let i=null;if(null!==e.localScope&&void 0!==e.localScope[r]&&(i=e.localScope[r]),null===i&&void 0!==e.globalScope[r]&&(i=e.globalScope[r]),null===i)return void o(new Error((0,v.H5)(n,"RUNTIME","VARIABLENOTDECLARED")));(0,g.a)(a)||(0,g.g)(a)?H(e,n,a,{reject:o,resolve:t},i):(0,g.b)(a)?function(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(g.v);P(e,n,t,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:t},i):a instanceof p.Z||a instanceof y.Z?function(e,n,t,r,o){try{H(e,n,t.keys(),r,o,"k")}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:t},i):(0,g.q)(a)?j(a.iterator(e.abortSignal),e,n,a,i,(e=>{t(e)}),(e=>{o(e)}),0):H(e,n,[],{reject:o,resolve:t},i)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}))}(e,n);case"BreakStatement":return(0,r.resolve)(g.m);case"EmptyStatement":return(0,r.resolve)(g.v);case"ContinueStatement":return(0,r.resolve)(g.n);case"TemplateElement":return function(e,n){return(0,r.resolve)(n.value?n.value.cooked:"")}(0,n);case"TemplateLiteral":return function(e,n){return(0,r.create)((t=>{const r=[];(0,m.Dt)(n.expressions,((n,t,o,a)=>L(e,t).then((e=>{r[o]=(0,g.d)(e)})))).then((()=>{let e="",o=0;for(const t of n.quasis)e+=t.value?t.value.cooked:"",!1===t.tail&&(e+=r[o]?r[o]:"",o++);t(e)}))}))}(e,n);case"Identifier":return B(e,n);case"MemberExpression":return function(e,n){try{return L(e,n.object).then((t=>{try{return null===t?(0,r.reject)(new Error((0,v.H5)(n,"RUNTIME","NOTFOUND"))):!1===n.computed?"Identifier"===n.property.type?t instanceof p.Z||t instanceof y.Z?(0,r.resolve)(t.field(n.property.name)):t instanceof a.Z?(0,r.resolve)(G(t,n.property.name,e,n)):(0,r.reject)(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE"))):(0,r.reject)(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE"))):L(e,n.property).then((o=>(0,r.create)(((r,i)=>{if(t instanceof p.Z||t instanceof y.Z)(0,g.g)(o)?r(t.field(o)):i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if(t instanceof a.Z)(0,g.g)(o)?r(G(t,o,e,n)):i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,g.a)(t))if((0,g.k)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=t.length+o),o>=t.length||o<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[o])}else i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,g.b)(t))if((0,g.k)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=t.length()+o),o>=t.length()||o<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t.get(o))}else i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,g.g)(t))if((0,g.k)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=t.length+o),o>=t.length||o<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[o])}else i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else i(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")))}))))}catch(e){return O(e)}}))}catch(e){return O(e)}}(e,n);case"Literal":return F(n.value);case"CallExpression":return function(e,n){try{if("Identifier"!==n.callee.type)return O((0,v.H5)(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];return t.value instanceof g.N?t.value.fn(e,n):t.value instanceof f.Z?ne(e,n,t.value.definition):O((0,v.H5)(n,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];return t.value instanceof g.N?t.value.fn(e,n):t.value instanceof f.Z?ne(e,n,t.value.definition):O((0,v.H5)(n,"RUNTIME","NOTAFUNCTION"))}return O((0,v.H5)(n,"RUNTIME","NOTFOUND"))}catch(e){return O(e)}}(e,n);case"UnaryExpression":return function(e,n){try{return L(e,n.argument).then((e=>(0,r.create)(((t,r)=>{(0,g.i)(e)&&"!"===n.operator?t(!e):"-"===n.operator?t(-1*(0,g.t)(e)):"+"===n.operator?t(1*(0,g.t)(e)):"~"===n.operator?t(~(0,g.t)(e)):r(new Error((0,v.H5)(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))))}catch(e){return O(e)}}(e,n);case"BinaryExpression":return function(e,n){try{return Promise.all([L(e,n.left),L(e,n.right)]).then((e=>(0,r.create)(((t,r)=>{const o=e[0],a=e[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":t((0,g.j)((0,g.t)(o),(0,g.t)(a),n.operator));case"==":t((0,g.e)(o,a));break;case"!=":t(!(0,g.e)(o,a));break;case"<":case">":case"<=":case">=":t((0,g.h)(o,a,n.operator));break;case"+":(0,g.g)(o)||(0,g.g)(a)?t((0,g.d)(o)+(0,g.d)(a)):t((0,g.t)(o)+(0,g.t)(a));break;case"-":t((0,g.t)(o)-(0,g.t)(a));break;case"*":t((0,g.t)(o)*(0,g.t)(a));break;case"/":t((0,g.t)(o)/(0,g.t)(a));break;case"%":t((0,g.t)(o)%(0,g.t)(a));break;default:r(new Error((0,v.H5)(n,"RUNTIME","OPERATORNOTRECOGNISED")))}}))))}catch(e){return O(e)}}(e,n);case"LogicalExpression":return function(e,n){return(0,r.create)(((t,r)=>{"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type?"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type?L(e,n.left).then((o=>{try{if(!(0,g.i)(o))throw new Error((0,v.H5)(n,"RUNTIME","ONLYBOOLEAN"));switch(n.operator){case"||":!0===o?t(o):L(e,n.right).then((e=>{try{if(!(0,g.i)(e))throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;case"&&":!1===o?t(o):L(e,n.right).then((e=>{try{if(!(0,g.i)(e))throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;default:throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"))}}catch(e){r(e)}}),r):r(new Error((0,v.H5)(n.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error((0,v.H5)(n.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ConditionalExpression":return O((0,v.H5)(n,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,n){try{const t=[];for(let r=0;r<n.elements.length;r++)t.push(L(e,n.elements[r]));return(0,r.all)(t).then((e=>(0,r.create)(((t,r)=>{for(let t=0;t<e.length;t++){if((0,g.c)(e[t]))return void r(new Error((0,v.H5)(n,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[t]===g.v&&(e[t]=null)}t(e)}))))}catch(e){return O(e)}}(e,n);case"ObjectExpression":return function(e,n){try{const t=[];for(let r=0;r<n.properties.length;r++)t.push(L(e,n.properties[r]));return(0,r.all)(t).then((e=>(0,r.create)((n=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];if((0,g.c)(r.value))throw new Error("Illegal Argument");if(!1===(0,g.g)(r.key))throw new Error("Illegal Argument");r.value===g.v?t[r.key.toString()]=null:t[r.key.toString()]=r.value}const r=new p.Z(t);r.immutable=!1,n(r)}))))}catch(e){return O(e)}}(e,n);case"Property":return function(e,n){try{return L(e,n.value).then((t=>(0,r.create)((r=>{"Identifier"===n.key.type?r({key:n.key.name,value:t}):L(e,n.key).then((e=>{r({key:e,value:t})}))}))))}catch(e){return(0,r.reject)(e)}}(e,n);default:return O((0,v.H5)(n,"RUNTIME","UNREOGNISED"))}}catch(e){return O(e)}}function M(e,n,t){try{return L(e,n.body).then((o=>{try{return t.lastAction=o,t.lastAction===g.m||t.lastAction instanceof g.R?(t.testResult=!1,(0,r.resolve)(t)):null!==n.update?L(e,n.update).then((()=>(0,r.resolve)(t))):(0,r.resolve)(t)}catch(e){return(0,r.reject)(e)}}))}catch(e){return(0,r.reject)(e)}}function k(e,n,t,o,a,i){try{(function(e,n,t){try{return null!==n.test?L(e,n.test).then((o=>{try{return!0===e.abortSignal.aborted?(0,r.reject)(new Error("Cancelled")):(t.testResult=o,!1===t.testResult?(0,r.resolve)(t):!0!==t.testResult?(0,r.reject)(new Error((0,v.H5)(n,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):M(e,n,t))}catch(e){return(0,r.reject)(e)}})):M(e,n,t)}catch(e){return(0,r.reject)(e)}})(e,n,t).then((()=>{try{!0===t.testResult?++i>T?(i=0,setTimeout((()=>{k(e,n,t,o,a,i)}),0)):k(e,n,t,o,a,i):t.lastAction instanceof g.R?o(t.lastAction):o(g.v)}catch(e){a(e)}}),(e=>{a(e)}))}catch(e){a(e)}}function D(e,n,t,r,o,a,i,c,l,u){try{if(r<=a)return void c(g.v);o.value="k"===i?t[a]:a,L(e,n.body).then((s=>{try{s instanceof g.R?c(s):s===g.m?c(g.v):++u>T?(u=0,setTimeout((()=>{D(e,n,t,r,o,a+1,i,c,l,u)}),0)):D(e,n,t,r,o,a+1,i,c,l,u)}catch(e){l(e)}}),(e=>{l(e)}))}catch(e){l(e)}}function P(e,n,t,r,o,a,i,c,l){try{if(t.length()<=o)return void i(g.v);r.value="k"===a?t.get(o):o,L(e,n.body).then((u=>{u instanceof g.R?i(u):u===g.m?i(g.v):++l>T?(l=0,setTimeout((()=>{P(e,n,t,r,o+1,a,i,c,l)}),0)):P(e,n,t,r,o+1,a,i,c,l)}),(e=>{c(e)}))}catch(e){c(e)}}function H(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(g.v);D(e,n,t,t.length,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function j(e,n,t,r,o,a,i,c){try{e.next().then((l=>{try{if(null===l)a(g.v);else{const u=y.Z.createFromGraphicLikeObject(l.geometry,l.attributes,r);u._underlyingGraphic=l,o.value=u,L(n,t.body).then((l=>{try{l===g.m?a(g.v):l instanceof g.R?a(l):++c>T?(c=0,setTimeout((()=>{j(e,n,t,r,o,a,i,c)}),0)):j(e,n,t,r,o,a,i,c)}catch(e){i(e)}}),(e=>{i(e)}))}}catch(e){i(e)}}),(e=>{i(e)}))}catch(e){i(e)}}function z(e,n,t,r){switch(n){case"=":return e===g.v?null:e;case"/=":return(0,g.t)(t)/(0,g.t)(e);case"*=":return(0,g.t)(t)*(0,g.t)(e);case"-=":return(0,g.t)(t)-(0,g.t)(e);case"+=":return(0,g.g)(t)||(0,g.g)(e)?(0,g.d)(t)+(0,g.d)(e):(0,g.t)(t)+(0,g.t)(e);case"%=":return(0,g.t)(t)%(0,g.t)(e);default:throw new Error((0,v.H5)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function _(e,n,t){try{return t>=n.body.length?(0,r.resolve)(g.v):(0,r.create)(((r,o)=>{L(e,n.body[t]).then((a=>{try{a instanceof g.R||a===g.m||a===g.n||t===n.body.length-1?r(a):_(e,n,t+1).then(r,o)}catch(e){o(e)}}),o)}))}catch(e){return O(e)}}function V(e,n,t){return(0,r.create)(((r,o)=>{t>=n.declarations.length?r(g.v):L(e,n.declarations[t]).then((()=>{t===n.declarations.length-1?r(g.v):V(e,n,t+1).then((()=>{r(g.v)}),o)}),o)}))}let Y=0;function G(e,n,t,r){let o;switch(n=n.toLowerCase()){case"hasz":{const n=e.hasZ;return void 0!==n&&n}case"hasm":{const n=e.hasM;return void 0!==n&&n}case"spatialreference":{let n=e.spatialReference._arcadeCacheId;if(void 0===n){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(Y++,e.spatialReference._arcadeCacheId=Y,n=Y)}const t=new p.Z({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==n&&(t._arcadeCacheId="SPREF"+n.toString()),t}}switch(e.type){case"extent":switch(n){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=e[n];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(n){case"rings":return o=e.cache._arcadeCacheId,void 0===o&&(Y++,o=Y,e.cache._arcadeCacheId=o),new d.Z(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polygon"}break;case"point":switch(n){case"x":case"y":case"z":case"m":return void 0!==e[n]?e[n]:null;case"type":return"Point"}break;case"polyline":switch(n){case"paths":return o=e.cache._arcadeCacheId,void 0===o&&(Y++,o=Y,e.cache._arcadeCacheId=o),new d.Z(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(n){case"points":return o=e.cache._arcadeCacheId,void 0===o&&(Y++,o=Y,e.cache._arcadeCacheId=o),new h.Z(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case"type":return"Multipoint"}}throw new Error((0,v.H5)(r,"RUNTIME","PROPERTYNOTFOUND"))}function B(e,n){return(0,r.create)(((t,r)=>{const o=n.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[o])if(void 0===e.globalScope[o])r(new Error((0,v.H5)(n,"RUNTIME","VARIABLENOTFOUND")));else{const n=e.globalScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=L(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}else{const n=e.localScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=L(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}}))}const q={};function J(e){return null===e?"":(0,g.a)(e)||(0,g.b)(e)?"Array":(0,g.o)(e)?"Date":(0,g.g)(e)?"String":(0,g.i)(e)?"Boolean":(0,g.k)(e)?"Number":e instanceof w.Z?"Attachment":e instanceof E.Z?"Portal":e instanceof p.Z?"Dictionary":e instanceof y.Z?"Feature":e instanceof i.Z?"Point":e instanceof u.Z?"Polygon":e instanceof s.Z?"Polyline":e instanceof l.Z?"Multipoint":e instanceof c.Z?"Extent":(0,g.c)(e)?"Function":(0,g.q)(e)?"FeatureSet":(0,g.r)(e)?"FeatureSetCollection":e===g.v?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function W(e,n,t,o){return(0,r.create)(((r,a)=>{L(e,n.arguments[t]).then((i=>{try{if((0,g.e)(i,o))return void L(e,n.arguments[t+1]).then(r,a);{const i=n.arguments.length-t;return 1===i?void L(e,n.arguments[t]).then(r,a):(2===i&&r(null),3===i?void L(e,n.arguments[t+2]).then(r,a):void W(e,n,t+2,o).then(r,a))}}catch(e){a(e)}}),a)}))}function Q(e,n,t,o){return(0,r.create)(((r,a)=>{!0===o?L(e,n.arguments[t+1]).then(r,a):3==n.arguments.length-t?L(e,n.arguments[t+2]).then(r,a):L(e,n.arguments[t+2]).then((o=>{try{if(!1===(0,g.i)(o))return void a(new Error("WHEN needs boolean test conditions"));Q(e,n,t+2,o).then(r,a)}catch(e){a(e)}}))}))}function K(e,n){try{const t=e.length,o=Math.floor(t/2);return 0===t?(0,r.resolve)([]):1===t?(0,r.resolve)([e[0]]):(0,r.create)(((a,i)=>{const c=[K(e.slice(0,o),n),K(e.slice(o,t),n)];(0,r.all)(c).then((e=>{try{$(e[0],e[1],n,[]).then(a,i)}catch(e){i(e)}}),i)}))}catch(e){return O(e)}}function $(e,n,t,o){return(0,r.create)(((r,a)=>{const i=o;e.length>0||n.length>0?e.length>0&&n.length>0?t(e[0],n[0]).then((c=>{try{isNaN(c)&&(c=1),c<=0?(i.push(e[0]),e=e.slice(1)):(i.push(n[0]),n=n.slice(1)),$(e,n,t,o).then(r,a)}catch(e){a(e)}}),a):e.length>0?(i.push(e[0]),$(e=e.slice(1),n,t,o).then(r,a)):n.length>0&&(i.push(n[0]),n=n.slice(1),$(e,n,t,o).then(r,a)):r(o)}))}function X(e,n){const t=e.length,r=Math.floor(t/2);return n||(n=function(e,n){return e<n?-1:e===n?0:1}),0===t?[]:1===t?[e[0]]:function(e,n,t){const r=[];for(;e.length>0||n.length>0;)if(e.length>0&&n.length>0){let o=t(e[0],n[0]);isNaN(o)&&(o=1),o<=0?(r.push(e[0]),e=e.slice(1)):(r.push(n[0]),n=n.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):n.length>0&&(r.push(n[0]),n=n.slice(1));return r}(X(e.slice(0,r),n),X(e.slice(r,t),n),n)}function ee(e,n,t){try{const o=e.body;if(t.length!==e.params.length)return O(new Error("Invalid Parameter calls to function."));for(let r=0;r<t.length;r++){const o=e.params[r];"Identifier"===o.type&&(n.localScope[o.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}return L(n,o).then((e=>(0,r.create)(((n,t)=>{e instanceof g.R?n(e.value):e!==g.m?e!==g.n?n(e instanceof g.I?e.value:e):t(new Error("Cannot Continue from a Function")):t(new Error("Cannot Break from a Function"))}))))}catch(e){return(0,r.reject)(e)}}function ne(e,n,t){return U(e,n,(function(n,r,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(t,a,o)}))}function te(e){return function(){const n={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(n.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(e.definition,n,arguments)}}(0,I.r)(q,x),(0,N.r)(q,x),(0,S.r)(q,x),(0,b.r)(q,x),(0,A.r)(q,x),(0,R.r)(q,x),(0,Z.registerFunctions)({functions:q,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:x,standardFunctionAsync:U}),q.typeof=function(e,n){return x(e,n,(function(e,n,t){(0,g.p)(t,1,1);const r=J(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},q.iif=function(e,n){return(0,r.create)(((t,r)=>{(0,g.p)(null===n.arguments?[]:n.arguments,3,3),L(e,n.arguments[0]).then((o=>{try{if(!1===(0,g.i)(o))return void r(new Error("IF Function must have a boolean test condition"));Promise.all([L(e,n.arguments[1]),L(e,n.arguments[2])]).then((e=>{t(o?e[0]:e[1])}),r)}catch(e){r(e)}}),r)}))},q.decode=function(e,n){return(0,r.create)(((t,r)=>{n.arguments.length<2?r(new Error("Missing Parameters")):2!==n.arguments.length?(n.arguments.length-1)%2!=0?L(e,n.arguments[0]).then((o=>{try{W(e,n,1,o).then(t,r)}catch(e){r(e)}}),r):r(new Error("Must have a default value result.")):L(e,n.arguments[1]).then(t,r)}))},q.when=function(e,n){try{return n.arguments.length<3?O("Missing Parameters"):n.arguments.length%2==0?O("Must have a default value result."):L(e,n.arguments[0]).then((t=>(0,r.create)(((r,o)=>{!1!==(0,g.i)(t)?Q(e,n,0,t).then(r,o):o(new Error("WHEN needs boolean test conditions"))}))))}catch(e){return O(e)}},q.sort=function(e,n){return U(e,n,(function(e,n,t){(0,g.p)(t,1,2);let o=t[0];if((0,g.b)(o)&&(o=o.toArray()),!1===(0,g.a)(o))return O(Error("Illegal Argument"));if(t.length>1)return!1===(0,g.c)(t[1])?O(Error("Illegal Argument")):K(o,te(t[1]));{let e=o;if(0===e.length)return(0,r.resolve)([]);const n={};for(let t=0;t<e.length;t++){const r=J(e[t]);""!==r&&(n[r]=!0)}if(!0===n.Array||!0===n.Dictionary||!0===n.Feature||!0===n.Point||!0===n.Polygon||!0===n.Polyline||!0===n.Multipoint||!0===n.Extent||!0===n.Function)return(0,r.resolve)(e.slice(0));let t=0,a="";for(const e in n)t++,a=e;return t>1||"String"===a?e=X(e,(function(e,n){if(null==e||e===g.v)return null==n||n===g.v?0:1;if(null==n||n===g.v)return-1;const t=(0,g.d)(e),r=(0,g.d)(n);return t<r?-1:t===r?0:1})):"Number"===a?e=X(e,(function(e,n){return e-n})):"Boolean"===a?e=X(e,(function(e,n){return e===n?0:n?-1:1})):"Date"===a&&(e=X(e,(function(e,n){return n-e}))),(0,r.resolve)(e)}}))};const re={failDefferred:O,resolveDeffered:F,fixSpatialReference:g.f,parseArguments:C,standardFunction:x,standardFunctionAsync:U,evaluateIdentifier:B,arcadeCustomFunction:te};for(const e in q)q[e]={value:new g.N(q[e]),valueset:!0,node:null};const oe=function(){};function ae(e){console.log(e)}(oe.prototype=q).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},oe.prototype.pi={value:Math.PI,valueset:!0,node:null};const ie=re;function ce(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:x,standardFunctionAsync:U,failDefferred:O,evaluateIdentifier:B,arcadeCustomFunctionHandler:te};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)q[e]={value:new g.N(n.functions[e]),valueset:!0,node:null},oe.prototype[e]=q[e];for(let e=0;e<n.signatures.length;e++)(0,v.gW)(n.signatures[e],"async")}function le(e,n){let t=n.spatialReference;null==t&&(t=new o.Z({wkid:102100}));const a=function(e,n){const t=new oe;null==e&&(e={}),null==n&&(n={});const r=new p.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new g.N(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:y.Z.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}(n.vars,n.customfunctions);return L({spatialReference:t,services:n.services,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console?n.console:ae,lrucache:n.lrucache,localScope:null,depthCounter:1},e.body[0].body).then((e=>(0,r.create)(((n,t)=>{e instanceof g.R&&(e=e.value),e instanceof g.I&&(e=e.value),e===g.v&&(e=null),e!==g.m?e!==g.n?e instanceof g.N||e instanceof f.Z?t(new Error("Cannot return FUNCTION")):n(e):t(new Error("Cannot return CONTINUE")):t(new Error("Cannot return BREAK"))}))))}function ue(e,n){return(0,v.mb)(e)}function se(e,n){return(0,v.FS)(e,n,"full")}function fe(e,n){return(0,v.bV)(e,n)}function he(e,n){return(0,v.w8)(e,n)}function de(e){return(0,v.Vf)(e)}},7721:(e,n,t)=>{"use strict";t.r(n),t.d(n,{registerFunctions:()=>w});var r=t(39718),o=t(61106),a=t(52937),i=t(3470),c=t(53817),l=t(93833),u=t(56885),s=t(23838),f=t(45674),h=t(3181),d=t(28022),g=t(18136);function p(e){return 0===s.i8.indexOf("4.")?c.Z.fromExtent(e):new c.Z({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function E(e){if((0,f.p)(e,2,2),e[0]instanceof r.Z&&e[1]instanceof r.Z);else if(e[0]instanceof r.Z&&null===e[1]);else if(e[1]instanceof r.Z&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function w(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null===t[0]||null===t[1]||(0,g.ED)(t[0],t[1])}))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.kK)(t[0],t[1])}))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.W4)(t[0],t[1])}))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.jU)(t[0],t[1])}))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.uh)(t[0],t[1])}))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.r3)(t[0],t[1])}))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null!==t[1]&&(0,g.Nm)(t[0],t[1])}))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return(0,f.p)(t,2,2),t[0]===t[1]||(t[0]instanceof r.Z&&t[1]instanceof r.Z?(0,g.fS)(t[0],t[1]):!(!(0,f.o)(t[0])||!(0,f.o)(t[1]))&&t[0].getTime()===t[1].getTime())}))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,3,3),t[0]instanceof r.Z&&t[1]instanceof r.Z)return(0,g.LV)(t[0],t[1],(0,f.d)(t[2]));if(t[0]instanceof r.Z&&null===t[1])return!1;if(t[1]instanceof r.Z&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null===t[0]||null===t[1]?null:(0,g.wf)(t[0],t[1])}))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){const a=[];if(0===(o=(0,f.E)(o)).length)throw new Error("Function called with wrong number of Parameters");if(1===o.length)if((0,f.a)(o[0])){const e=(0,f.E)(o[0]);for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.Z))throw new Error("Illegal Argument");a.push(e[n])}}else{if(!(0,f.b)(o[0])){if(o[0]instanceof r.Z)return(0,f.f)((0,d.r1)(o[0]),n.spatialReference);if(null===o[0])return null;throw new Error("Illegal Argument")}{const e=(0,f.E)(o[0].toArray());for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.Z))throw new Error("Illegal Argument");a.push(e[n])}}}else for(let e=0;e<o.length;e++)if(null!==o[e]){if(!(o[e]instanceof r.Z))throw new Error("Illegal Argument");a.push(o[e])}return 0===a.length?null:(0,g.G0)(a)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null!==t[0]&&null===t[1]?(0,d.r1)(t[0]):null===t[0]?null:(0,g.e5)(t[0],t[1])}))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return E(t=(0,f.E)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,d.r1)(t[1]):null===t[1]?(0,d.r1)(t[0]):(0,g.Sp)(t[0],t[1])}))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,2),!(t[1]instanceof a.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return null===t[1]?null:(0,g.oq)(t[0],t[1])}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,2),!(t[1]instanceof l.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return null===t[1]?[(0,d.r1)(t[0])]:(0,g.z7)(t[0],t[1])}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.E)(o))[0])return 0;if((0,f.q)(o[0]))return o[0].sumArea((0,d.EI)((0,f.u)(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.a)(o[0])||(0,f.b)(o[0])){const e=(0,f.H)(o[0],n.spatialReference);return null===e?0:(0,g.CJ)(e,(0,d.EI)((0,f.u)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.CJ)(o[0],(0,d.EI)((0,f.u)(o[1],-1)))}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.E)(o))[0])return 0;if((0,f.q)(o[0]))return o[0].sumArea((0,d.EI)((0,f.u)(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.a)(o[0])||(0,f.b)(o[0])){const e=(0,f.H)(o[0],n.spatialReference);return null===e?0:(0,g.Y4)(e,(0,d.EI)((0,f.u)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.Y4)(o[0],(0,d.EI)((0,f.u)(o[1],-1)))}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.E)(o))[0])return 0;if((0,f.q)(o[0]))return o[0].sumLength((0,d.Lz)((0,f.u)(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.a)(o[0])||(0,f.b)(o[0])){const e=(0,f.G)(o[0],n.spatialReference);return null===e?0:(0,g.sz)(e,(0,d.Lz)((0,f.u)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.sz)(o[0],(0,d.Lz)((0,f.u)(o[1],-1)))}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.E)(o))[0])return 0;if((0,f.q)(o[0]))return o[0].sumLength((0,d.Lz)((0,f.u)(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.a)(o[0])||(0,f.b)(o[0])){const e=(0,f.G)(o[0],n.spatialReference);return null===e?0:(0,g.kQ)(e,(0,d.Lz)((0,f.u)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.kQ)(o[0],(0,d.Lz)((0,f.u)(o[1],-1)))}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){o=(0,f.E)(o),(0,f.p)(o,2,3);let a=o[0];((0,f.a)(o[0])||(0,f.b)(o[0]))&&(a=(0,f.J)(o[0],n.spatialReference));let i=o[1];if(((0,f.a)(o[1])||(0,f.b)(o[1]))&&(i=(0,f.J)(o[1],n.spatialReference)),!(a instanceof r.Z))throw new Error("Illegal Argument");if(!(i instanceof r.Z))throw new Error("Illegal Argument");return(0,g.TE)(a,i,(0,d.Lz)((0,f.u)(o[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,f.E)(t),(0,f.p)(t,2,3);const r=t[0],a=t[1];if(!(r instanceof o.Z))throw new Error("Illegal Argument");if(!(a instanceof o.Z))throw new Error("Illegal Argument");const i=new l.Z({paths:[],spatialReference:r.spatialReference});return i.addPath([r,a]),(0,g.kQ)(i,(0,d.Lz)((0,f.u)(t[2],-1)))}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return t[0]instanceof c.Z||t[0]instanceof l.Z?(0,g.Cz)(t[0],o,(0,d.Lz)((0,f.u)(t[2],-1))):t[0]instanceof a.Z?(0,g.Cz)(p(t[0]),o,(0,d.Lz)((0,f.u)(t[2],-1))):t[0]}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return t[0]instanceof c.Z||t[0]instanceof l.Z?(0,g.j2)(t[0],o,(0,d.Lz)((0,f.u)(t[2],-1))):t[0]instanceof a.Z?(0,g.j2)(p(t[0]),o,(0,d.Lz)((0,f.u)(t[2],-1))):t[0]}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,4),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return(0,g.D$)(t[0],o,(0,f.A)((0,f.u)(t[2],!0)),(0,d.Lz)((0,f.u)(t[3],-1)))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?(0,d.r1)(t[0]):(0,g.f3)(t[0],o,(0,d.Lz)((0,f.u)(t[2],-1)))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?(0,d.r1)(t[0]):(0,g.rd)(t[0],o,(0,d.Lz)((0,f.u)(t[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,2,6),null===t[0])return null;if(!(t[0]instanceof c.Z||t[0]instanceof l.Z))throw new Error("Illegal Argument");const r=(0,f.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const o=(0,f.t)((0,f.u)(t[4],10));if(isNaN(o))throw new Error("Illegal Argument");const a=(0,f.t)((0,f.u)(t[5],0));if(isNaN(a))throw new Error("Illegal Argument");return(0,g.cv)(t[0],r,(0,d.Lz)((0,f.u)(t[2],-1)),(0,f.d)((0,f.u)(t[3],"round")).toLowerCase(),o,a)}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,f.E)(t),(0,f.p)(t,2,3);let i=t[0];if(null===i)return null;if(!(i instanceof r.Z))throw new Error("Illegal Argument");i instanceof a.Z&&(i=c.Z.fromExtent(i));const l=(0,f.t)(t[1]);if(isNaN(l))throw new Error("Illegal Argument");const u=(0,f.u)(t[2],null);if(null===u)return(0,g.U1)(i,l);if(u instanceof o.Z)return(0,g.U1)(i,l,u);throw new Error("Illegal Argument")}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,u){if(u=(0,f.E)(u),(0,f.p)(u,1,1),null===u[0])return null;let s=u[0];if(((0,f.a)(u[0])||(0,f.b)(u[0]))&&(s=(0,f.J)(u[0],n.spatialReference)),null===s)return null;if(!(s instanceof r.Z))throw new Error("Illegal Argument");return s instanceof o.Z?(0,f.f)((0,d.r1)(u[0]),n.spatialReference):s instanceof c.Z?s.centroid:s instanceof l.Z?(0,h.s9)(s):s instanceof i.Z?(0,h.Ay)(s):s instanceof a.Z?s.center:null}))},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,s){s=(0,f.E)(s),(0,f.p)(s,1,1);const h=[];if(null===s[0])return null;if(!(s[0]instanceof r.Z))throw new Error("Illegal Argument");return s[0]instanceof o.Z||s[0]instanceof a.Z?[(0,f.f)((0,d.r1)(s[0]),n.spatialReference)]:(0,g.og)(s[0]).then((e=>{if(e instanceof c.Z){const n=[],t=[];for(let r=0;r<e.rings.length;r++)if(e.isClockwise(e.rings[r])){const t=(0,u.im)({rings:[e.rings[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(t)}else t.push({ring:e.rings[r],pt:e.getPoint(r,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(e instanceof l.Z){const n=[];for(let t=0;t<e.paths.length;t++){const r=(0,u.im)({paths:[e.paths[t]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(r)}return n}if(s[0]instanceof i.Z){const e=(0,f.f)((0,d.r1)(s[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)h.push(e.getPoint(n));return h}return null}))}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.Gg)(t[0])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.E)(t),(0,f.p)(t,1,1),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,g.og)(t[0])}))})}},18136:(e,n,t)=>{"use strict";t.d(n,{f3:()=>O,oq:()=>s,r3:()=>h,jU:()=>d,z7:()=>f,Cz:()=>L,e5:()=>b,ED:()=>y,TE:()=>g,fS:()=>p,D$:()=>U,Y4:()=>P,rd:()=>F,j2:()=>M,kQ:()=>H,wf:()=>S,kK:()=>E,Gg:()=>N,cv:()=>T,Nm:()=>v,CJ:()=>k,sz:()=>D,LV:()=>I,U1:()=>x,og:()=>A,Sp:()=>R,W4:()=>w,G0:()=>Z,uh:()=>m});t(61106);var r=t(56885),o=(t(36348),t(92673));function a(e){var n;return Array.isArray(e)?null==(n=e[0])?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function i(e){return e?Array.isArray(e)?e.map(i):e.toJSON?e.toJSON():e:e}function c(e){return Array.isArray(e)?e.map((e=>(0,r.im)(e))):(0,r.im)(e)}let l;async function u(e,n){return(await async function(){return l||(l=(0,o.bA)("geometryEngineWorker",{strategy:"distributed"})),l}()).invoke("executeGEOperation",{operation:e,parameters:i(n)})}async function s(e,n){return c(await u("clip",[a(e),e,n]))}async function f(e,n){return c(await u("cut",[a(e),e,n]))}function h(e,n){return u("contains",[a(e),e,n])}function d(e,n){return u("crosses",[a(e),e,n])}function g(e,n,t){return u("distance",[a(e),e,n,t])}function p(e,n){return u("equals",[a(e),e,n])}function E(e,n){return u("intersects",[a(e),e,n])}function w(e,n){return u("touches",[a(e),e,n])}function m(e,n){return u("within",[a(e),e,n])}function y(e,n){return u("disjoint",[a(e),e,n])}function v(e,n){return u("overlaps",[a(e),e,n])}function I(e,n,t){return u("relate",[a(e),e,n,t])}function N(e){return u("isSimple",[a(e),e])}async function A(e){return c(await u("simplify",[a(e),e]))}async function b(e,n){return c(await u("difference",[a(e),e,n]))}async function R(e,n){return c(await u("symmetricDifference",[a(e),e,n]))}async function S(e,n){return c(await u("intersect",[a(e),e,n]))}async function Z(e,n=null){const t=function(e,n){let t;return Array.isArray(e)?t=e:(t=[],t.push(e),null!=n&&t.push(n)),t}(e,n);return c(await u("union",[a(t),t]))}async function T(e,n,t,r,o,i){return c(await u("offset",[a(e),e,n,t,r,o,i]))}async function O(e,n,t,r=!1){const o=[a(e),e,n,t,r];return c(await u("buffer",o))}async function F(e,n,t,r,o,i){const l=[a(e),e,n,t,r,o,i];return c(await u("geodesicBuffer",l))}function C(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}async function x(e,n,t){var r;if(null==e)throw new Error("Illegal Argument Exception");const o=e.spatialReference;t=null!=(r=t)?r:C(e);const a=e.constructor.fromJSON(await u("rotate",[o,e,n,t]));return a.spatialReference=o,a}async function U(e,n,t,r){return c(await u("generalize",[a(e),e,n,t,r]))}async function L(e,n,t){return c(await u("densify",[a(e),e,n,t]))}async function M(e,n,t,r=0){return c(await u("geodesicDensify",[a(e),e,n,t,r]))}function k(e,n){return u("planarArea",[a(e),e,n])}function D(e,n){return u("planarLength",[a(e),e,n])}function P(e,n,t){return u("geodesicArea",[a(e),e,n,t])}function H(e,n,t){return u("geodesicLength",[a(e),e,n,t])}}}]);
//# sourceMappingURL=5400.js.map