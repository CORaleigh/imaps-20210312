{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/ImageryLayerView.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryGraphicsView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Path.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/viewStateUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/LayerView.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["x","t","e","i","s","target","pixelFormat","internalFormat","dataType","wrapMode","width","height","_","super","this","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","y","transforms","dvs","source","requestRender","bind","_texture","dispose","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","h","o","u","a","toScreenNoRotation","d","c","l","Math","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","resize","getRenderedRasterPixels","setData","renderedRasterPixels","document","createElement","render","getContext","ready","registerRenderPass","name","brushes","children","drawPhase","prepareRenderPasses","pixelBlock","extent","originalPixelBlock","filter","getAsRGBA","createImageData","data","set","putImageData","Uint8Array","buffer","n","arguments","view","layer","popupEnabled","popupTemplate","getRequiredFields","m","geometry","outFields","outSpatialReference","spatialReference","type","returnTopmostRaster","showNoDataRecords","w","layerOptions","returnDomainValues","pixelSize","queryVisibleRasters","then","canResume","timeExtent","isEmpty","prototype","g","container","_graphicsView","_graphics","_updateGraphics","stationary","state","r","xmin","ymin","xmax","ymax","size","requestAsImageElement","signal","_getVectorFieldExportParams","fetchImage","renderer","_pixelData","pixelData","getGraphicsFromPixelData","rasterInfo","update","updating","catch","error","suspended","Promise","resolve","toMap","attributes","graphics","requestUpdateCallback","requestUpdate","destroy","removeChild","addChild","updateRequested","fullExtent","p","symbolTileSize","max","ceil","floor","_bitmapView","strategy","removeAllChildren","version","imageMaxHeight","imageMaxWidth","imageNormalizationSupported","fetchSource","_fetchImage","updateExports","applyRenderer","applyFilter","length","map","intersects","imageElement","clone","imagery","_exportImageVersion","subview","getPixelData","hitTest","increaseRasterJobHandlerUsage","_setSubView","handles","add","watch","on","redraw","decreaseRasterJobHandlerUsage","remove","isUpdating","format","uninstall","attach","install","readOnly","left","right","top","bottom","_get","Number","String","json","write","base","key","typeMap","polygon","types","read","path","rect","clips","moving","attached","lastUpdateId","fadeTransitionEnabled","opacity","visible","blendMode","effect","notifyChange","whenLayerView","destroyed","when","detach","minScale","maxScale","isFulfilled","isResolved","_set","isVisibleAtScale","scale","abs","cos","sin","round","f","_imagePromise","hidpi","imageRotationSupported","valid","_singleExport","min","worldScreenWidth","_tiledExport","async","all","fadeIn","includes","fadeOut","console","center","_export","scales","getTileCoverage","forEach","getTileBounds","push","parent","id","title","declaredClass","get","getSuspendInfo","legendEnabled","updatingHandles","_override","_clearOverride","suspendInfo","viewNotReady","loaded","layerNotLoaded","layerInvisible","Boolean","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"mappings":"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","file":"chunks/6685.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,b as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t){return t&&\"render\"in t}function c(t){return t&&!(\"render\"in t)}function l(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class _ extends u{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{_ as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./webgl/enums.js\";import{brushes as r}from\"./brushes.js\";import s from\"./webgl/WGLContainer.js\";class t extends s{prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[r.bitmap],target:()=>this.children,drawPhase:e.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import p from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import a from\"../../tasks/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,o){const{layer:t}=this;if(!e)throw new s(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t});const{popupEnabled:i}=t,n=u(t,o);if(!i||!r(n))throw new s(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:i,popupTemplate:n});const c=await n.getRequiredFields(),m=new a;m.geometry=e,m.outFields=c,m.outSpatialReference=e.spatialReference;const l=this.view.resolution,y=\"2d\"===this.view.type?new p(l,l,this.view.spatialReference):new p(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:d,showNoDataRecords:w}=n.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},h={returnDomainValues:!0,returnTopmostRaster:d,pixelSize:y,showNoDataRecords:w};return t.queryVisibleRasters(m,h).then((e=>e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}};return e([o()],c.prototype,\"layer\",void 0),e([o()],c.prototype,\"suspended\",void 0),e([o(i)],c.prototype,\"timeExtent\",void 0),e([o()],c.prototype,\"view\",void 0),c=e([t(\"esri.views.layers.ImageryLayerView\")],c),c};export default n;export{n as ImageryLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import t from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{enumeration as r}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{debounce as a,isAbortError as o,after as n}from\"../../../../core/promiseUtils.js\";import p from\"../../../../geometry/Extent.js\";import{createScreenPoint as h}from\"../../../../core/screenUtils.js\";import c from\"../../../../Graphic.js\";import l from\"../../../../support/GraphicsCollection.js\";import m from\"../../../layers/LayerView.js\";import{Container as d}from\"../../engine/Container.js\";import u from\"../graphics/GraphicsView2D.js\";import{LayerView2DMixin as x}from\"../LayerView2D.js\";const g=t.getLogger(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\");let y=class extends(x(m)){constructor(){super(...arguments),this.container=new d,this._graphicsView=null,this.type=\"Graphics\",this._graphics=new l,this._updateGraphics=a((async(e,t)=>{if(!e.stationary)return;const i=e.state,r=new p({xmin:i.extent.xmin,ymin:i.extent.ymin,xmax:i.extent.xmax,ymax:i.extent.ymax,spatialReference:i.spatialReference}),s=e.state.size[0],a=e.state.size[1],o={};o.timeExtent=this.timeExtent,o.requestAsImageElement=!1,o.signal=t;const h=this._getVectorFieldExportParams({extent:r,width:s,height:a}),c=await this.layer.fetchImage(h.extent,h.width,h.height,o),l=this.layer.renderer;if(\"vector-field\"===l.type){this._pixelData={extent:h.extent,pixelBlock:c.pixelData.pixelBlock};const t=await l.getGraphicsFromPixelData(c.pixelData,\"vector-uv\"===this.layer.rasterInfo.dataType);this._graphicsView.update(e),await n(0).then((()=>{this._graphics.set(\"items\",t)}))}}))}get updating(){var e;return null==(e=this._graphicsView)?void 0:e.updating}update(e){this._updateGraphics(e).catch((e=>{o(e)||g.error(e)}))}hitTest(e,t){if(this.suspended)return Promise.resolve(null);const i=this.view.toMap(h(e,t));return Promise.resolve(new c({attributes:{},geometry:i,layer:this.layer}))}attach(){this._graphicsView=new u({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate()})}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}moveStart(){}viewChange(){}moveEnd(){}install(e){this.container.addChild(this._graphicsView.container),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._graphicsView.container),e.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}_getVectorFieldExportParams(e){var t,i;let{extent:r,width:s,height:a}=e;const o=this.layer,n=null==(t=o.fullExtent)?void 0:t.xmin,p=null==(i=o.fullExtent)?void 0:i.ymax;let h;\"vector-field\"===o.renderer.type&&(h=o.renderer.symbolTileSize),h=Math.max(h||0,30),s=Math.ceil(s*(1/h)),a=Math.ceil(a*(1/h));const c=(r.xmax-r.xmin)/s,l=(r.ymax-r.ymin)/a;return r.xmin=n+Math.floor((r.xmin-n)/c)*c,r.xmax=n+Math.ceil((r.xmax-n)/c)*c,r.ymin=p+Math.floor((r.ymin-p)/l)*l,r.ymax=p+Math.ceil((r.ymax-p)/l)*l,{extent:r,width:s,height:a}}};e([i()],y.prototype,\"container\",void 0),e([i()],y.prototype,\"layer\",void 0),e([i()],y.prototype,\"timeExtent\",void 0),e([i()],y.prototype,\"updating\",null),e([i()],y.prototype,\"_graphicsView\",void 0),e([r({graphics:\"Graphics\"})],y.prototype,\"type\",void 0),y=e([s(\"esri.views.2d.layers.imagery.ImageryGraphicsView2D\")],y);var w=y;export default w;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import t from\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{enumeration as i}from\"../../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{createScreenPoint as a}from\"../../../../core/screenUtils.js\";import n from\"../../../../Graphic.js\";import{mosaicPixelData as l}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import p from\"../../../layers/LayerView.js\";import{Container as m}from\"../../engine/Container.js\";import c from\"../../engine/ImageryBitmapSource.js\";import{BitmapContainer as h}from\"../../engine/BitmapContainer.js\";import{LayerView2DMixin as u}from\"../LayerView2D.js\";import g from\"../support/ExportStrategy.js\";const d=t.getLogger(\"esri.views.2d.layers.imagery.ImageryView2D\");let y=class extends(u(p)){constructor(){super(...arguments),this.container=new m,this.type=\"Imagery\",this._bitmapView=null}get updating(){var e;return null==(e=this.strategy)?void 0:e.updating}update(e){this.strategy.update(e).catch((e=>{s(e)||d.error(e)}))}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(e,t){if(this.suspended)return Promise.resolve(null);const r=this.view.toMap(a(e,t));return Promise.resolve(new n({attributes:{},geometry:r,layer:this.layer}))}attach(){const e=this.layer.version>=10,t=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,r=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new h,this.strategy=new g({container:this._bitmapView,imageNormalizationSupported:e,imageMaxHeight:t,imageMaxWidth:r,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()})}moveStart(){}viewChange(){}moveEnd(){}install(e){this.container.addChild(this._bitmapView),e.addChild(this.container)}uninstall(e){this.container.removeChild(this._bitmapView),e.removeChild(this.container)}redraw(){this.strategy.updateExports((e=>{e.source instanceof HTMLImageElement?e.requestRender():this.layer.applyRenderer({pixelBlock:e.source.pixelBlock}).then((t=>{const r=e.source;r.pixelBlock=t.pixelBlock,r.filter=e=>this.layer.applyFilter(e),this.container.requestRender()}))}))}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const e=this.strategy.container.children;if(1===e.length&&e[0].source)return{extent:e[0].source.extent,pixelBlock:e[0].source.originalPixelBlock};if(e.length>1){const t=this.view.extent,r=e.map((e=>e.source)).filter((e=>e.extent&&e.extent.intersects(t))).map((e=>({extent:e.extent,pixelBlock:e.originalPixelBlock}))),i=l(r,t);return i?{extent:i.extent,pixelBlock:i.pixelBlock}:null}return null}_fetchImage(e,t,r,i){return(i=i||{}).timeExtent=this.timeExtent,i.requestAsImageElement=!0,this.layer.fetchImage(e,t,r,i).then((e=>e.imageElement?e.imageElement:this.layer.applyRenderer(e.pixelData,{signal:i.signal}).then((t=>{const r=new c(t.pixelBlock,t.extent.clone(),e.pixelData.pixelBlock);return r.filter=e=>this.layer.applyFilter(e),r}))))}};e([r()],y.prototype,\"container\",void 0),e([r()],y.prototype,\"layer\",void 0),e([r()],y.prototype,\"strategy\",void 0),e([r()],y.prototype,\"timeExtent\",void 0),e([r()],y.prototype,\"updating\",null),e([i({imagery:\"Imagery\"})],y.prototype,\"type\",void 0),y=e([o(\"esri.views.2d.layers.imagery.ImageryView2D\")],y);var x=y;export default x;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{init as s,watch as i}from\"../../../core/watchUtils.js\";import{RefreshableLayerView as a}from\"../../layers/RefreshableLayerView.js\";import o from\"../../layers/LayerView.js\";import{ImageryLayerView as h}from\"../../layers/ImageryLayerView.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import u from\"./imagery/ImageryGraphicsView2D.js\";import l from\"./imagery/ImageryView2D.js\";let n=class extends(h(a(p(o)))){constructor(){super(...arguments),this._exportImageVersion=-1}get pixelData(){return this.updating?null:this.subview.getPixelData()}get updating(){return!(this.subview&&!this.subview.updating)}hitTest(e,t){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(e,t)}update(e){var t;null==(t=this.subview)||t.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([s(this,\"layer.exportImageServiceParameters.version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),this.watch(\"timeExtent\",(()=>{this.subview.timeExtent=this.timeExtent,this.requestUpdate()})),this.layer.on(\"redraw\",(()=>this.subview.redraw())),i(this.layer,\"renderer\",(()=>this._setSubView()))],\"imagerylayerview-update\")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove(\"imagerylayerview-update\"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||this.subview.isUpdating()}_setSubView(){var e;let t=\"Imagery\";var r,s;(\"vector-field\"===(null==(e=this.layer.renderer)?void 0:e.type)&&\"lerc\"===this.layer.format&&(t=\"Graphics\"),this.subview&&this.subview.type===t)||(null==(r=this.subview)||r.uninstall(this.container),null==(s=this.subview)||s.destroy(),this.subview=\"Imagery\"===t?new l({layer:this.layer,view:this.view}):new u({layer:this.layer,view:this.view}),this.subview.attach(),this.subview.install(this.container));this.requestUpdate()}};e([t()],n.prototype,\"pixelData\",null),e([t({readOnly:!0})],n.prototype,\"updating\",null),e([t()],n.prototype,\"subview\",void 0),n=e([r(\"esri.views.2d.layers.ImageryLayerView2D\")],n);var m=n;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,n,o){const{resolution:r,size:u}=o;return t[0]=r*(Math.round(n[0]/r)+u[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+u[1]%2*.5),t}function r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}function a(t,n){const[o,r,u,a]=t,[s,c,i,e]=n;return!(o>i||u<s||r>e||a<c)}export{a as bboxIntersects,u as getBBox,r as getOuterSize,o as snapToPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{debounce as o}from\"../../../../core/promiseUtils.js\";import r from\"../../../../core/Accessor.js\";import{getInfo as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import a from\"../../../../geometry/Extent.js\";import{create as p}from\"../../../../geometry/support/aaBoundingRect.js\";import n from\"../../../../layers/support/TileInfo.js\";import m from\"../../tiling/TileKey.js\";import l from\"../../tiling/TileInfoView.js\";import{getOuterSize as h,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as d}from\"../../engine/Bitmap.js\";const u=p(),g=[0,0],f=new m(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends r{constructor(t){super(t),this._imagePromise=null,this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=o((async(t,e)=>{const i=t.state,o=s(i.spatialReference),r=this.hidpi?t.pixelRatio:1;if(!t.stationary||this.destroyed)return;this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):h(g,i);const a=Math.floor(g[0]*r)>this.imageMaxWidth||Math.floor(g[1]*r)>this.imageMaxHeight,p=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),n=!this.imageNormalizationSupported&&p,m=!a&&!n,l=this.imageRotationSupported?i.rotation:0;if(m)this._imagePromise=this._singleExport(i,g,l,r,e);else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);n&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,l,r,e)}return this._imagePromise.then((async t=>{this._imagePromise=null,await Promise.all(t.map((t=>(this.container.addChild(t),t.fadeIn()))));for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{this.container.removeChild(e)}))})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e)?console.error(\"ExportStrategy.updateExports doesn't support promise yet\"):(e.invalidateTexture(),e.requestRender())}}_export(t,e,i,o,r,s){return Promise.resolve().then((()=>this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}))).then((i=>{const s=new d(i);return s.x=t.xmin,s.y=t.ymax,s.resolution=t.width/e,s.rotation=o,s.pixelRatio=r,s}))}_singleExport(t,e,i,o,r){c(u,t.center,t.resolution,e);const s=new a(u[0],u[1],u[2],u[3],t.spatialReference);return this._export(s,e[0],e[1],i,o,r).then((t=>[t]))}_tiledExport(t,e,i,o,r){const s=n.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new l(s),m=p.getTileCoverage(t);if(!m)return null;const h=[];return m.forEach(((s,n,m,l)=>{f.set(s,n,m,l),p.getTileBounds(u,f);const c=new a(u[0],u[1],u[2],u[3],t.spatialReference);h.push(this._export(c,e,e,i,o,r))})),Promise.all(h)}};t([e()],y.prototype,\"_imagePromise\",void 0),t([e()],y.prototype,\"container\",void 0),t([e()],y.prototype,\"fetchSource\",void 0),t([e()],y.prototype,\"hidpi\",void 0),t([e()],y.prototype,\"imageMaxWidth\",void 0),t([e()],y.prototype,\"imageMaxHeight\",void 0),t([e()],y.prototype,\"imageRotationSupported\",void 0),t([e()],y.prototype,\"imageNormalizationSupported\",void 0),t([e()],y.prototype,\"requestUpdate\",void 0),t([e()],y.prototype,\"updating\",null),y=t([i(\"esri.views.2d.layers.support.ExportStrategy\")],y);var S=y;export default S;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n"],"sourceRoot":""}