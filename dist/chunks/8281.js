(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[8281],{8281:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var i=t(56140),s=(t(95830),t(36544),t(68055),t(79881)),a=t(87566),o=(t(10923),t(57002),t(86035),t(95986)),n=t(36654),l=t(91535),u=t(47977),p=t(66849),c=t(97274),y=t(59472),d=t(30590),f=t(58385),m=t(73032),B=t(61106),b=t(53817),h=t(93833),C=(t(36348),t(15988)),g=t(76194),_=t(36405),v=t(69489);function k(e){return g.default.fromJSON(e).features.map((e=>e.geometry))}let P=class extends f.wq{constructor(e){super(e),this.directions=null,this.facilities=null,this.incidents=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routes=null}readFacilities(e){return k(e)}readIncidents(e){return k(e)}readPointBarriers(e,r){return k(r.barriers)}readPolylineBarriers(e){return k(e)}readPolygonBarriers(e){return k(e)}readRoutes(e){return function(e){return e.features.map((r=>{const t=m.Z.fromJSON(e.spatialReference),i=C.default.fromJSON(r);return(0,y.pC)(i.geometry)&&(i.geometry.spatialReference=t),i}))}(e)}};(0,i._)([(0,s.Cb)({type:[v.Z]})],P.prototype,"directions",void 0),(0,i._)([(0,s.Cb)({type:[B.Z]})],P.prototype,"facilities",void 0),(0,i._)([(0,d.r)("facilities")],P.prototype,"readFacilities",null),(0,i._)([(0,s.Cb)({type:[B.Z]})],P.prototype,"incidents",void 0),(0,i._)([(0,d.r)("incidents")],P.prototype,"readIncidents",null),(0,i._)([(0,s.Cb)({type:[_.Z]})],P.prototype,"messages",void 0),(0,i._)([(0,s.Cb)({type:[B.Z]})],P.prototype,"pointBarriers",void 0),(0,i._)([(0,d.r)("pointBarriers",["barriers"])],P.prototype,"readPointBarriers",null),(0,i._)([(0,s.Cb)({type:[h.Z]})],P.prototype,"polylineBarriers",void 0),(0,i._)([(0,d.r)("polylineBarriers")],P.prototype,"readPolylineBarriers",null),(0,i._)([(0,s.Cb)({type:[b.Z]})],P.prototype,"polygonBarriers",void 0),(0,i._)([(0,d.r)("polygonBarriers")],P.prototype,"readPolygonBarriers",null),(0,i._)([(0,s.Cb)({type:[C.default]})],P.prototype,"routes",void 0),(0,i._)([(0,d.r)("routes")],P.prototype,"readRoutes",null),P=(0,i._)([(0,a.j)("esri.tasks.support.ClosestFacilitySolveResult")],P);const R=P,Z=(0,u.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});var A=t(10532);let N=class extends((0,A.Y)(o.Z)){constructor(e){super(e),this.url=null}solve(e,r){return async function(e,r,t){const i=[],s=[],a={},o={},u=(0,p.en)(e);return r.incidents&&r.incidents.features&&(0,c.et)(r.incidents.features,s,"incidents.features",a),r.facilities&&r.facilities.features&&(0,c.et)(r.facilities.features,s,"facilities.features",a),r.pointBarriers&&r.pointBarriers.features&&(0,c.et)(r.pointBarriers.features,s,"pointBarriers.features",a),r.polylineBarriers&&r.polylineBarriers.features&&(0,c.et)(r.polylineBarriers.features,s,"polylineBarriers.features",a),r.polygonBarriers&&r.polygonBarriers.features&&(0,c.et)(r.polygonBarriers.features,s,"polygonBarriers.features",a),(0,l.aX)(s).then((e=>{for(const r in a){const t=a[r];i.push(r),o[r]=e.slice(t[0],t[1])}return(0,c.Wf)(o,i)?(0,c.bI)(u.path):Promise.resolve({dontCheck:!0})})).then((e=>{("dontCheck"in e?e.dontCheck:e.hasZ)||(0,c.ef)(o,i);for(const e in o)o[e].forEach(((t,i)=>{r.get(e)[i].geometry=t}));let s={query:{...u.query,f:"json",...Z.toQueryParams(r)}};return t&&(s={...t,...s}),(0,n.default)(`${u.path}/solveClosestFacility`,s)})).then((e=>R.fromJSON(e.data)))}(this.url,e,r)}};(0,i._)([(0,s.Cb)()],N.prototype,"url",void 0),N=(0,i._)([(0,a.j)("esri.tasks.ClosestFacilityTask")],N);const S=N}}]);
//# sourceMappingURL=8281.js.map