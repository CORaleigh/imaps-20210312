{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/layers/support/ExportImageParameters.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/sublayerUtils.js","webpack://imaps/./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipArea.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/ClipRect.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Geometry.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/Path.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/MapImageLayerView.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/viewStateUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/LayerView.js","webpack://imaps/./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["n","visible","definitionExpression","labelingInfo","labelsVisible","opacity","minScale","maxScale","renderer","source","y","super","arguments","this","_scale","view","layer","hasDynamicLayers","e","visibleSublayers","map","toExportImageJSON","length","JSON","stringify","serviceSublayers","_get","_set","handles","remove","add","allSublayers","on","notifyChange","propertyName","id","join","filter","reduce","s","scale","commitProperty","sublayers","r","t","i","a","o","forEach","unshift","some","dpi","format","imageFormat","transparent","imageTransparency","gdbVersion","dynamicLayers","layers","layerDefs","readOnly","prototype","type","Number","flatten","originIdOf","mapLayerId","slice","reverse","toArray","layerDefinition","xoffset","Math","max","abs","yoffset","stops","size","maxSize","minSize","f","floor","event","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","x","target","pixelFormat","internalFormat","dataType","wrapMode","width","height","_","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","transforms","dvs","requestRender","bind","_texture","dispose","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","h","u","toScreenNoRotation","d","c","l","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","resize","getRenderedRasterPixels","setData","renderedRasterPixels","document","createElement","render","getContext","ready","registerRenderPass","name","brushes","children","drawPhase","prepareRenderPasses","pixelBlock","extent","originalPixelBlock","getAsRGBA","createImageData","data","set","putImageData","Uint8Array","buffer","left","right","top","bottom","String","json","write","base","key","typeMap","polygon","geometry","clone","types","read","path","rect","clips","moving","attached","lastUpdateId","updateRequested","container","fadeTransitionEnabled","requestUpdate","blendMode","effect","whenLayerView","then","destroyed","attach","when","detach","suspended","isUpdating","isFulfilled","isResolved","update","canResume","isVisibleAtScale","m","Promise","reject","p","get","async","popupEnabled","defaultPopupTemplateEnabled","push","sublayer","popupTemplate","all","load","catch","createQuery","createFetchPopupFeaturesQueryGeometry","outFields","_loadArcadeModules","arcadeUtils","hasGeometryOperations","maxAllowableOffset","queryFeatures","features","value","imageParameters","timeExtent","isEmpty","_exportImageVersion","strategy","error","imageMaxWidth","imageMaxHeight","version","_bitmapContainer","addChild","fetchSource","fetchImage","imageRotationSupported","imageNormalizationSupported","hidpi","destroy","removeChild","removeAllChildren","updating","timestamp","refreshTimestamp","cos","sin","round","g","_imagePromise","state","spatialReference","stationary","xmin","valid","xmax","_singleExport","min","worldScreenWidth","_tiledExport","fadeIn","includes","fadeOut","console","resolve","signal","ymax","center","_export","scales","getTileCoverage","getTileBounds","parent","title","declaredClass","getSuspendInfo","legendEnabled","updatingHandles","_override","_clearOverride","suspendInfo","viewNotReady","loaded","layerNotLoaded","layerInvisible","Boolean","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","indexOf","keyField","defaultPopupTemplate","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","ymin","toMap","intersects"],"mappings":"sQAImqB,MAAMA,EAAE,CAACC,QAAQ,mBAAmBC,qBAAqB,YAAYC,aAAa,mBAAmBC,cAAc,mBAAmBC,QAAQ,mBAAmBC,SAAS,mBAAmBC,SAAS,mBAAmBC,SAAS,mBAAmBC,OAAO,oBAAoB,IAAIC,EAAE,eAAc,OAAE,YAAI,cAAcC,SAASC,WAAWC,KAAKC,OAAO,KAAKD,KAAKE,KAAK,KAAK,UAAUF,KAAKG,MAAMH,KAAKE,KAAK,KAAK,oBAAoB,IAAIF,KAAKI,iBAAiB,OAAO,KAAK,MAAMC,EAAEL,KAAKM,iBAAiBC,KAAKF,GAAGA,EAAEG,sBAAsB,OAAOH,EAAEI,OAAOC,KAAKC,UAAUN,GAAG,KAAK,uBAAuB,OAAOL,KAAKG,QAAO,QAAEH,KAAKM,iBAAiBN,KAAKG,MAAMS,iBAAiBZ,KAAKG,OAAO,UAAUE,GAAGL,KAAKa,KAAK,WAAWR,IAAIL,KAAKc,KAAK,QAAQT,GAAGL,KAAKe,QAAQC,OAAO,SAASX,GAAGL,KAAKe,QAAQE,IAAI,CAACZ,EAAEa,aAAaC,GAAG,UAAS,IAAKnB,KAAKoB,aAAa,sBAAsBf,EAAEc,GAAG,mBAAmBd,GAAGL,KAAKoB,aAAajC,EAAEkB,EAAEgB,kBAAkB,UAAU,aAAa,MAAMhB,EAAEL,KAAKM,iBAAiB,OAAOD,EAAEA,EAAEI,OAAO,QAAQJ,EAAEE,KAAKF,GAAGA,EAAEiB,KAAKC,KAAK,KAAK,UAAU,KAAK,gBAAgB,MAAMlB,EAAEL,KAAKM,iBAAiBkB,QAAQnB,GAAG,MAAMA,EAAEhB,uBAAuB,OAAOgB,EAAEI,OAAOC,KAAKC,UAAUN,EAAEoB,QAAO,CAAEpB,EAAEqB,KAAKrB,EAAEqB,EAAEJ,IAAII,EAAErC,qBAAqBgB,IAAI,KAAK,KAAK,YAAY,OAAO,MAAML,KAAKC,OAAOD,KAAKC,OAAOD,KAAKE,MAAMF,KAAKE,KAAKyB,OAAO,EAAE,UAAUtB,GAAGL,KAAKE,OAAOF,KAAKC,OAAOI,EAAEL,KAAKoB,aAAa,UAAU,cAAcpB,KAAK4B,eAAe,UAAU5B,KAAK4B,eAAe,aAAa5B,KAAK4B,eAAe,iBAAiB5B,KAAK4B,eAAe,cAAc,MAAMvB,EAAEL,KAAKG,MAAM,OAAOE,IAAIA,EAAEuB,eAAe,OAAOvB,EAAEuB,eAAe,eAAevB,EAAEuB,eAAe,qBAAqBvB,EAAEuB,eAAe,gBAAgB5B,KAAKa,KAAK,YAAY,GAAG,EAAE,YAAYR,GAAGL,KAAKc,KAAK,UAAUT,GAAG,uBAAuB,MAAMA,EAAE,GAAG,IAAIL,KAAKG,MAAM,OAAOE,EAAE,MAAMqB,EAAE1B,KAAKG,MAAM0B,UAAUC,EAAEJ,IAAI,MAAMK,EAAE/B,KAAK2B,MAAMK,EAAE,IAAID,EAAEE,EAAE,IAAIP,EAAEjC,UAAUsC,GAAGL,EAAEjC,SAASyC,EAAE,IAAIR,EAAEhC,UAAUqC,GAAGL,EAAEhC,SAASgC,EAAEtC,UAAU4C,GAAGC,GAAGC,KAAKR,EAAEG,UAAUH,EAAEG,UAAUM,QAAQL,GAAGzB,EAAE+B,QAAQV,KAAKA,GAAGA,EAAES,QAAQL,GAAG,MAAMC,EAAE/B,KAAKa,KAAK,oBAAoB,OAAOkB,GAAGA,EAAEtB,SAASJ,EAAEI,QAAQsB,EAAEM,MAAK,CAAEX,EAAEI,IAAIzB,EAAEyB,KAAKJ,IAAIrB,EAAE0B,EAAE,SAAS,MAAM1B,EAAEL,KAAKG,MAAM,IAAIuB,EAAE,CAACY,IAAIjC,EAAEiC,IAAIC,OAAOlC,EAAEmC,YAAYC,YAAYpC,EAAEqC,kBAAkBC,WAAWtC,EAAEsC,YAAY,MAAM,OAAO3C,KAAKI,kBAAkBJ,KAAK4C,cAAclB,EAAEkB,cAAc5C,KAAK4C,cAAclB,EAAE,IAAIA,EAAEmB,OAAO7C,KAAK6C,OAAOC,UAAU9C,KAAK8C,WAAWpB,KAAI,OAAE,EAAC,QAAE,CAACqB,UAAS,KAAMlD,EAAEmD,UAAU,gBAAgB,OAAM,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMlD,EAAEmD,UAAU,mBAAmB,OAAM,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,QAAQ,OAAM,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMlD,EAAEmD,UAAU,SAAS,OAAM,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMlD,EAAEmD,UAAU,YAAY,OAAM,OAAE,EAAC,QAAE,CAACC,KAAKC,UAAUrD,EAAEmD,UAAU,QAAQ,OAAM,OAAE,EAAC,QAAE,OAAInD,EAAEmD,UAAU,kBAAa,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,UAAU,OAAM,OAAE,EAAC,QAAE,CAACC,KAAK,OAAKpD,EAAEmD,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMlD,EAAEmD,UAAU,mBAAmB,MAAMnD,GAAE,OAAE,EAAC,OAAE,6CAA6CA,I,6BCAr/G,SAASQ,EAAEA,EAAElB,EAAE6C,GAAG,OAAG7C,EAAEgE,SAAQ,EAAGtB,UAAUxB,KAAKA,IAAII,SAASJ,EAAEI,WAAwBJ,EAAEgC,MAAMhC,GAAGA,EAAE+C,WAAW,YAAYpB,GAAG3B,EAAE+C,WAAW,YAAYpB,GAAG3B,EAAE+C,WAAW,YAAYpB,GAAG3B,EAAE+C,WAAW,gBAAgBpB,GAAG3B,EAAE+C,WAAW,WAAWpB,GAAG3B,EAAE+C,WAAW,iBAAiBpB,GAAG3B,EAAE+C,WAAW,UAAUpB,MAAMF,EAAEzB,EAAElB,IAAG,SAASA,EAAEkB,EAAElB,EAAE6C,GAAG,QAAQ3B,EAAEgC,MAAMhC,IAAI,MAAMlB,EAAEkB,EAAET,OAAO,SAAST,GAAG,cAAcA,EAAE8D,MAAM9D,EAAEkE,aAAahD,EAAEiB,MAAMnC,EAAEwD,YAAYxD,EAAEwD,aAAaX,EAAEW,cAActC,EAAE+C,WAAW,YAAY,GAAG/C,EAAE+C,WAAW,gBAAgB,GAAG/C,EAAE+C,WAAW,WAAW,GAAG/C,EAAE+C,WAAW,iBAAiB,OAAOtB,EAAEzB,EAAElB,GAAG,SAAS2C,EAAEzB,EAAElB,GAAG,IAAIkB,IAAIA,EAAEI,OAAO,OAAM,EAAG,MAAMqB,EAAE3C,EAAEmE,QAAQC,UAAUJ,SAAQ,EAAGtB,UAAUxB,KAAKA,GAAGA,EAAEmD,UAAUD,YAAYhD,KAAKF,GAAGA,EAAEiB,KAAKkC,UAAU,GAAGnD,EAAEI,OAAOqB,EAAErB,OAAO,OAAM,EAAG,IAAIuB,EAAE,EAAE,MAAME,EAAEJ,EAAErB,OAAO,IAAI,MAAMa,GAAGS,KAAK1B,EAAE,CAAC,KAAK2B,EAAEE,GAAGJ,EAAEE,KAAKD,GAAGC,IAAI,GAAGA,GAAGE,EAAE,OAAM,EAAG,OAAM,EAAG,SAASF,EAAE3B,GAAG,QAAQA,GAAGA,EAAEgC,MAAMhC,GAAG,MAAMA,EAAEZ,UAAUY,EAAEoD,iBAAiB,MAAMpD,EAAEoD,gBAAgBhE,W,kECA18B,SAASsC,EAAEA,EAAE1B,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAEqD,QAAQC,KAAKC,IAAI7B,EAAE4B,KAAKE,IAAIxD,EAAEqD,UAAU,YAAYrD,GAAGA,EAAEyD,QAAQH,KAAKC,IAAI7B,EAAE4B,KAAKE,IAAIxD,EAAEyD,SAAS,IAAI/B,EAAEA,EAAoH,SAAS5C,EAAE4C,EAAE5C,GAAG,MAAM,iBAAiB4C,EAAEA,EAAEA,GAAGA,EAAEgC,OAAOhC,EAAEgC,MAAMtD,OAAjL,SAAWsB,GAAG,IAAI1B,EAAE,EAAElB,EAAE,EAAE,IAAI,IAAI2C,EAAE,EAAEA,EAAEC,EAAEtB,OAAOqB,IAAI,CAAC,MAAMJ,EAAEK,EAAED,GAAGkC,KAAK,iBAAiBtC,IAAIrB,GAAGqB,EAAEvC,KAAK,OAAOkB,EAAElB,EAAwEkB,CAAE0B,EAAEgC,OAAO5E,EAAE,SAAS2C,EAAEC,EAAE1B,GAAG,IAAIA,EAAE,OAAO0B,EAAE,MAAMD,EAAEzB,EAAEmB,QAAQO,GAAG,SAASA,EAAEkB,OAAO1C,KAAKF,IAAI,MAAM4D,QAAQnC,EAAEoC,QAAQxC,GAAGrB,EAAE,OAAOlB,EAAE2C,EAAEC,GAAG5C,EAAEuC,EAAEK,IAAI,KAAK,IAAIL,EAAE,EAAE,MAAMQ,EAAEJ,EAAErB,OAAO,GAAG,IAAIyB,EAAE,OAAOH,EAAE,IAAI,IAAI5C,EAAE,EAAEA,EAAE+C,EAAE/C,IAAIuC,GAAGI,EAAE3C,GAAG,MAAMgF,EAAER,KAAKS,MAAM1C,EAAEQ,GAAG,OAAOyB,KAAKC,IAAIO,EAAEpC,GAAG,SAASL,EAAErB,GAAG,MAAMlB,EAAEkB,GAAGA,EAAEV,SAAS+B,EAAE,WAAWrB,GAAGA,EAAEgE,OAAOhE,EAAEgE,MAAMC,aAAa,EAAE,EAAE,IAAInF,EAAE,OAAOuC,EAAE,MAAMQ,EAAE,oBAAoB/C,EAAE2C,EAAEJ,EAAEvC,EAAEoF,iBAAiB7C,EAAE,GAAG,WAAWvC,EAAE8D,KAAK,OAAOlB,EAAEG,EAAE/C,EAAEqF,QAAQ,GAAG,iBAAiBrF,EAAE8D,KAAK,CAAC,IAAI5C,EAAE6B,EAAE,OAAO/C,EAAEsF,iBAAiBtC,SAAShD,IAAIkB,EAAE0B,EAAE1B,EAAElB,EAAEqF,WAAWnE,EAAE,GAAG,iBAAiBlB,EAAE8D,KAAK,CAAC,IAAI5C,EAAE6B,EAAE,OAAO/C,EAAEuF,gBAAgBvC,SAAShD,IAAIkB,EAAE0B,EAAE1B,EAAElB,EAAEqF,WAAWnE,EAAE,OAAOlB,EAAE8D,KAAKf,E,mKCAxY,SAASyC,EAAE5C,EAAE1B,EAAE2B,GAAG,MAAMN,EAAE,CAACkD,OAAO,KAAKC,YAAY,KAAKC,eAAe,KAAKC,SAAS,KAAKC,SAAS,OAAO,OAAO3E,GAAG2B,IAAIN,EAAEuD,MAAM5E,EAAEqB,EAAEwD,OAAOlD,GAAG,IAAI,IAAED,EAAEL,GAAG,MAAMyD,UAAU,IAAE,YAAYpD,EAAE,KAAK1B,GAAE,GAAIP,QAAQE,KAAKoF,oCAAoC/E,EAAEL,KAAKqF,qBAAoB,EAAGrF,KAAKsF,WAAW,EAAEtF,KAAKuF,WAAW,CAAC,EAAE,GAAGvF,KAAKwF,aAAQ,EAAOxF,KAAKyF,WAAW,EAAEzF,KAAK0F,WAAW,EAAE1F,KAAK2F,SAAS,EAAE3F,KAAK4F,QAAQ,KAAK5F,KAAK6F,YAAO,EAAO7F,KAAK2E,EAAE,EAAE3E,KAAKH,EAAE,EAAEG,KAAK8F,WAAW,CAACC,KAAI,UAAK/F,KAAKJ,OAAOmC,EAAE/B,KAAKgG,cAAchG,KAAKgG,cAAcC,KAAKjG,MAAM,UAAUA,KAAKkG,WAAWlG,KAAKkG,SAASC,UAAUnG,KAAKkG,SAAS,MAAM,qBAAqB,OAAOlG,KAAKiF,QAAQjF,KAAKoG,aAAapG,KAAKkF,SAASlF,KAAKqG,aAAa,aAAa,YAAO,IAASrG,KAAKwF,QAAQxF,KAAKwF,QAAQxF,KAAKqG,aAAa,WAAWtE,GAAG/B,KAAKwF,QAAQzD,EAAE,aAAa,OAAO/B,KAAK4F,QAAQ,WAAW7D,GAAG/B,KAAK4F,QAAQ7D,EAAE/B,KAAKsG,oBAAoB,mBAAmB,OAAOtG,KAAK4F,mBAAmBW,iBAAiBvG,KAAK4F,QAAQY,cAAcxG,KAAK4F,QAAQV,OAAO,kBAAkB,OAAOlF,KAAK4F,mBAAmBW,iBAAiBvG,KAAK4F,QAAQa,aAAazG,KAAK4F,QAAQX,MAAM,YAAY,YAAO,IAASjF,KAAK6F,OAAO7F,KAAK6F,OAAO7F,KAAKoG,YAAY,UAAUrE,GAAG/B,KAAK6F,OAAO9D,EAAE,aAAaA,GAAGjC,MAAM4G,aAAa3E,GAAG/B,KAAK2G,cAAc5E,GAAG,oBAAoB/B,KAAKqF,sBAAsBrF,KAAKqF,qBAAoB,EAAGrF,KAAKoF,qCAAqCpF,KAAKgG,iBAAiB,aAAaY,GAAG,MAAM1E,GAAE,OAAElC,KAAK8F,WAAWC,MAAMc,EAAE5E,GAAG2E,EAAEE,mBAAmB,CAAC,EAAE,GAAG9G,KAAK2E,EAAE3E,KAAKH,GAAGkH,EAAE/G,KAAK0F,WAAW1F,KAAKyF,WAAWmB,EAAElB,WAAWsB,EAAED,EAAE/G,KAAKiF,MAAMgC,EAAEF,EAAE/G,KAAKkF,OAAOP,EAAEhB,KAAKuD,GAAGlH,KAAK2F,SAAS,KAAI,OAAEzD,EAAEA,GAAE,OAAE2E,EAAE5E,KAAI,OAAEC,EAAEA,GAAE,OAAE8E,EAAE,EAAEC,EAAE,KAAI,OAAE/E,EAAEA,GAAGyC,IAAG,OAAEzC,EAAEA,GAAE,QAAG8E,EAAE,GAAGC,EAAE,KAAI,OAAE/E,EAAEA,GAAE,OAAE8E,EAAEC,KAAI,OAAEjH,KAAK8F,WAAWC,IAAIa,EAAEO,gBAAgBjF,GAAG,mBAAmBH,GAAG/B,KAAKkG,WAAWnE,EAAEqF,OAAOpH,KAAKkG,SAASmB,WAAWC,WAAWtH,KAAKkG,SAASqB,iBAAiBvH,KAAKkG,SAASsB,gBAAgBzF,EAAE0F,eAAe,MAAMC,QAAQ3F,GAAG1B,GAAGL,KAAKkG,UAAUnE,EAAE4F,YAAY3H,KAAKkG,SAAS7F,GAAG,eAAeqH,QAAQ3F,IAAI,IAAI1B,EAAE,IAAIL,KAAK4H,MAAM,OAAO,OAAOvH,EAAEL,KAAKkG,WAAW7F,EAAE8F,eAAenG,KAAKkG,SAAS,MAAM,IAAIlG,KAAKqF,oBAAoB,OAAOrF,KAAKqF,qBAAoB,EAAGrF,KAAKkG,WAAWlG,KAAKJ,OAAOI,KAAKkG,SAASvB,EAAE5C,EAAE/B,KAAKoG,YAAYpG,KAAKqG,cAAcrG,KAAKkG,SAASvB,EAAE5C,IAAI,MAAMC,EAAEhC,KAAKJ,OAAO,GAAGoC,EAAE,CAAC,GAAGhC,KAAKkG,SAAS2B,OAAO7H,KAAKoG,YAAYpG,KAAKqG,cAA38E,SAAWtE,GAAG,OAAOA,GAAG,WAAWA,EAAs7EgF,CAAE/E,GAAG,GAAGA,aAAa,IAAE,CAAC,MAAMD,EAAEC,EAAE8F,0BAA0B9H,KAAKkG,SAAS6B,QAAQhG,EAAEiG,2BAA2BhI,KAAKkG,SAAS6B,QAAzgF,SAAWhG,GAAG,MAAM1B,EAAE4H,SAASC,cAAc,UAAU,OAAO7H,EAAE4E,MAAMlD,EAAEkD,MAAM5E,EAAE6E,OAAOnD,EAAEmD,OAAOnD,EAAEoG,OAAO9H,EAAE+H,WAAW,OAAO/H,EAAo5E4G,CAAEjF,SAA3jF,SAAWD,GAAG,OAAOA,KAAK,WAAWA,IAA+hFiF,CAAEhF,IAAIhC,KAAKkG,SAAS6B,QAAQ/F,GAAGhC,KAAKqI,aAAarI,KAAKkG,SAAS6B,QAAQ,MAAM,WAAW/H,KAAKsG,oBAAoB,WAAWtG,KAAKsG,uB,mFCA7/F,MAAMvE,UAAU,IAAE,oBAAoBL,GAAG,MAAMK,EAAEL,EAAE4G,mBAAmB,CAACC,KAAK,SAASC,QAAQ,CAAC,YAAU5D,OAAO,IAAI5E,KAAKyI,SAASC,UAAU,WAAQ,MAAM,IAAI5I,MAAM6I,oBAAoBjH,GAAGK,M,8CCAiT,QAAzmB,MAAQ,YAAY1B,EAAE0B,EAAEC,GAAGhC,KAAK4I,WAAWvI,EAAEL,KAAK6I,OAAO9G,EAAE/B,KAAK8I,mBAAmB9G,EAAE,YAAY,OAAOhC,KAAK4I,WAAW5I,KAAK4I,WAAW3D,MAAM,EAAE,aAAa,OAAOjF,KAAK4I,WAAW5I,KAAK4I,WAAW1D,OAAO,EAAE,OAAO7E,GAAG,MAAM0B,EAAE/B,KAAK4I,WAAW,IAAI7G,EAAE,OAAO,MAAMC,EAAEhC,KAAKwB,OAAO,CAACoH,WAAW7G,IAAIkF,EAAEjF,EAAE4G,WAAWG,YAAYnC,EAAEvG,EAAE2I,gBAAgBhH,EAAE4G,WAAW3D,MAAMjD,EAAE4G,WAAW1D,QAAQ0B,EAAEqC,KAAKC,IAAIjC,GAAG5G,EAAE8I,aAAavC,EAAE,EAAE,GAAG,0BAA0B,MAAMvG,EAAEL,KAAKwB,OAAO,CAACoH,WAAW5I,KAAK4I,aAAa,MAAM,CAAC3D,MAAM5E,EAAEuI,WAAW3D,MAAMC,OAAO7E,EAAEuI,WAAW1D,OAAO8C,qBAAqB,IAAIoB,WAAW/I,EAAEuI,WAAWG,YAAYM,Y,yLCAhI,IAAIhJ,EAAE,cAAc,OAAIA,GAAE,OAAE,EAAC,OAAE,uCAAuCA,GAAW,QAAFA,ECA1F,IAAIqB,EAAE,IAAIM,EAAEN,EAAE,cAAc,EAAE,cAAc5B,SAASC,WAAWC,KAAKiD,KAAK,OAAOjD,KAAKsJ,KAAK,KAAKtJ,KAAKuJ,MAAM,KAAKvJ,KAAKwJ,IAAI,KAAKxJ,KAAKyJ,OAAO,KAAK,QAAQ,OAAO,IAAI/H,EAAE,CAAC4H,KAAKtJ,KAAKsJ,KAAKC,MAAMvJ,KAAKuJ,MAAMC,IAAIxJ,KAAKwJ,IAAIC,OAAOzJ,KAAKyJ,SAAS,cAAc,OAAOzJ,KAAKa,KAAK,YAAY,GAAG,KAAI,OAAE,EAAC,QAAE,CAACoC,KAAK,CAACC,OAAOwG,QAAQC,KAAK,CAACC,OAAM,MAAO5H,EAAEgB,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACC,OAAOwG,QAAQC,KAAK,CAACC,OAAM,MAAO5H,EAAEgB,UAAU,aAAQ,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACC,OAAOwG,QAAQC,KAAK,CAACC,OAAM,MAAO5H,EAAEgB,UAAU,WAAM,IAAQ,OAAE,EAAC,QAAE,CAACC,KAAK,CAACC,OAAOwG,QAAQC,KAAK,CAACC,OAAM,MAAO5H,EAAEgB,UAAU,cAAS,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMf,EAAEgB,UAAU,UAAU,MAAMhB,EAAEN,GAAE,OAAE,EAAC,OAAE,uCAAuCM,GAAW,QAAFA,E,ICAlcnC,E,gEAAE,MAAMmH,EAAE,CAAC6C,KAAK,IAAEC,IAAI,OAAOC,QAAQ,CAAClB,OAAO,IAAEmB,QAAQ,MAAI,IAAI7K,EAAEU,EAAE,cAAc,EAAE,cAAcC,SAASC,WAAWC,KAAKiD,KAAK,WAAWjD,KAAKiK,SAAS,KAAK,cAAc,OAAOjK,KAAKa,KAAK,YAAY,GAAG,EAAE,QAAQ,OAAO,IAAIhB,EAAE,CAACoK,SAASjK,KAAKiK,SAASC,aAAY,OAAE,EAAC,QAAE,CAACC,MAAMnD,EAAE2C,KAAK,CAACS,KAAK,KAAER,OAAM,MAAOzK,EAAE6D,UAAU,gBAAW,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAM5D,EAAE6D,UAAU,UAAU,MAAM7D,EAAEU,GAAE,OAAE,EAAC,OAAE,uCAAuCV,GAAW,QAAFA,ECA9pB,IAAI,EAAE,cAAc,EAAE,cAAcW,SAASC,WAAWC,KAAKiD,KAAK,OAAOjD,KAAKqK,KAAK,GAAG,cAAc,OAAOrK,KAAKa,KAAK,YAAY,GAAG,KAAI,OAAE,EAAC,QAAE,CAACoC,KAAK,CAAC,CAAC,CAACC,UAAUyG,KAAK,CAACC,OAAM,MAAO,EAAE5G,UAAU,YAAO,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAM,EAAEC,UAAU,UAAU,MAAM,GAAE,OAAE,EAAC,OAAE,mCAAmC,GAAW,QAAF,ECAuE,EAAE,WAAS,CAAC8G,IAAI,OAAOD,KAAK,EAAEE,QAAQ,CAACO,KAAK,EAAED,KAAK,EAAEJ,SAAS,KAAK,EAAEjI,IAAI,IAAIC,EAAE,cAAcD,EAAE,cAAclC,SAASC,WAAWC,KAAKuK,MAAM,IAAI,EAAEvK,KAAKwK,QAAO,EAAGxK,KAAKyK,UAAS,EAAGzK,KAAK0K,cAAc,EAAE1K,KAAK2K,iBAAgB,EAAG,aAAa,IAAI5I,EAAE/B,KAAK4K,YAAY5K,KAAK4K,UAAU,IAAI,KAAG5K,KAAK4K,UAAUC,uBAAsB,EAAG7K,KAAK4K,UAAUpL,QAAQ,EAAEQ,KAAK4K,UAAUL,MAAMvK,KAAKuK,MAAMvK,KAAKe,QAAQE,IAAI,EAAC,UAAEjB,KAAK,aAAa+B,IAAI/B,KAAK4K,YAAY5K,KAAK4K,UAAUxL,SAAS2C,GAAG/B,KAAKE,OAAO6B,GAAG/B,KAAK2K,iBAAiB3K,KAAKE,KAAK4K,mBAAkB,IAAI,UAAE9K,KAAK,CAAC,gBAAgB,cAAa,KAAM,IAAI+B,EAAE1B,EAAEL,KAAK4K,YAAY5K,KAAK4K,UAAUpL,QAAQ,OAAOuC,EAAE,OAAO1B,EAAEL,KAAKG,YAAO,EAAOE,EAAEb,SAASuC,EAAE,MAAK,IAAI,UAAE/B,KAAK,CAAC,oBAAoB+B,IAAI/B,KAAK4K,YAAY5K,KAAK4K,UAAUG,UAAUhJ,MAAK,IAAI,UAAE/B,KAAK,CAAC,iBAAiB+B,IAAI/B,KAAK4K,YAAY5K,KAAK4K,UAAUI,OAAOjJ,MAAK,GAAI/B,KAAKuK,MAAMpJ,GAAG,UAAS,KAAMnB,KAAK4K,UAAUL,MAAMvK,KAAKuK,MAAMvK,KAAKoB,aAAa,cAAc,OAAOW,EAAE/B,KAAKE,OAAO6B,EAAEkJ,cAAcjL,KAAKE,KAAK+K,cAAcjL,KAAKG,OAAO+K,MAAMnJ,IAAIA,IAAI/B,MAAMA,KAAKyK,UAAUzK,KAAKmL,YAAYnL,KAAKoL,SAASpL,KAAK8K,gBAAgB9K,KAAKyK,UAAS,MAAM,SAAUzK,KAAKqL,OAAOH,MAAK,KAAMlL,KAAKyK,UAAUzK,KAAKmL,YAAYnL,KAAKoL,SAASpL,KAAK8K,gBAAgB9K,KAAKyK,UAAS,MAAM,SAAU,UAAUzK,KAAKyK,WAAWzK,KAAKsL,SAAStL,KAAKyK,UAAS,GAAIzK,KAAKe,QAAQC,OAAO,cAAchB,KAAK2K,iBAAgB,EAAG,eAAe,OAAO3K,KAAKyK,WAAWzK,KAAKuL,YAAYvL,KAAK2K,iBAAiB3K,KAAKwL,cAAc,iBAAiBzJ,GAAG,IAAI1B,GAAE,EAAG,MAAMqB,EAAE1B,KAAKG,MAAM6B,EAAEN,EAAEjC,SAASqC,EAAEJ,EAAEhC,SAAS,GAAG,MAAMsC,GAAG,MAAMF,EAAE,CAAC,IAAIJ,GAAGM,EAAEE,GAAGJ,GAAGJ,GAAGK,GAAGC,IAAIN,GAAE,IAAKQ,GAAGH,GAAGD,IAAII,GAAE,GAAI7B,EAAEqB,GAAGQ,EAAE,OAAO7B,EAAE,gBAAgBL,KAAK2K,kBAAkB3K,KAAK2K,iBAAgB,EAAG3K,KAAKuL,WAAWvL,KAAKE,KAAK4K,iBAAiB,cAAc/I,IAAI/B,KAAKyL,eAAezL,KAAK0L,cAAc1L,KAAKc,KAAK,mBAAmBiB,GAAG/B,KAAK2K,kBAAkB3K,KAAKuL,YAAYvL,KAAK2K,iBAAgB,EAAG3K,KAAK2L,OAAO5J,KAAK/B,KAAK2K,iBAAgB,EAAG,aAAa,OAAM,EAAG,cAAc,OAAM,EAAG,YAAY,QAAQ7K,MAAM8L,aAAa5L,KAAK6L,iBAAiB7L,KAAKE,KAAKyB,SAAS,OAAO,OAAE,EAAC,QAAE,CAACsB,KAAK,EAAE,IAAIlB,GAAG,MAAM1B,GAAE,OAAE0B,EAAE/B,KAAKa,KAAK,SAAS,GAAGb,KAAKc,KAAK,QAAQT,OAAO4B,EAAEe,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,cAAS,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,gBAAW,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,iBAAY,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,iBAAY,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMd,EAAEe,UAAU,wBAAmB,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,uBAAkB,IAAQ,OAAE,EAAC,WAAKf,EAAEe,UAAU,WAAW,OAAM,OAAE,EAAC,WAAKf,EAAEe,UAAU,YAAO,GAAQf,GAAE,OAAE,EAAC,OAAE,qCAAqCA,GAAGA,I,uRCA1iF,MAAM+E,EAAEA,IAAI,IAAI8E,EAAE,cAAc9E,EAAE,yBAAyB3G,EAAE0B,GAAG,MAAM5B,MAAM+B,GAAGlC,KAAK,IAAIK,EAAE,OAAO0L,QAAQC,OAAO,IAAI,IAAE,uCAAuC,gCAAgC,CAAC7L,MAAM+B,KAAK,MAAM+J,EAAEjM,KAAKkM,IAAI,cAAclF,EAAE,GAAG8E,EAAEK,UAAU,MAAMjK,EAAE,IAAI7B,EAAEZ,UAAUwM,GAAG5L,EAAEZ,SAASiC,EAAE,IAAIrB,EAAEX,UAAUuM,GAAG5L,EAAEX,SAAS,GAAGW,EAAEjB,SAAS8C,GAAGR,EAAE,GAAGrB,EAAEwB,UAAUxB,EAAEwB,UAAUM,QAAQ2J,QAAQ,GAAGzL,EAAE+L,aAAa,CAAC,MAAMlK,GAAE,OAAE7B,EAAE,IAAI0B,EAAEsK,6BAA4B,KAAK,QAAEnK,IAAI8E,EAAEsF,KAAK,CAACC,SAASlM,EAAEmM,cAActK,MAAM/C,EAAE+C,EAAEL,UAAU2B,UAAUjD,IAAIuL,SAASC,QAAQU,IAAItN,GAAG,MAAM4H,EAAEC,EAAEzG,KAAI,OAAQgM,SAASrK,EAAEsK,cAAc9K,YAAYQ,EAAEwK,OAAOC,OAAM,SAAU,MAAM1K,EAAEC,EAAE0K,cAAcX,GAAE,QAAElK,GAAGA,EAAEsC,MAAM,KAAKwC,GAAE,OAAE,CAAClH,SAASuC,EAAEvC,SAAS0E,MAAM4H,IAAIjF,EAAEhH,KAAK6M,sCAAsCxM,EAAEwG,GAAG5E,EAAEgI,SAASjD,EAAE/E,EAAE6K,gBAAgB,OAAE5K,EAAER,GAAG,MAAMoK,QAAQ9L,KAAK+M,mBAAmBrL,GAA+E,OAA5EoK,GAAGA,EAAEkB,YAAYC,sBAAsBvL,KAAKO,EAAEiL,mBAAmBlG,EAAE/B,MAAM4B,UAAgB3E,EAAEiL,cAAclL,IAAImL,YAAY,aAAa,gBAAErG,IAAItF,QAAO,CAAEpB,EAAEyB,IAAIA,EAAEuL,MAAM,IAAIhN,KAAKyB,EAAEuL,OAAOhN,GAAG,IAAImB,QAAQnB,GAAG,MAAMA,IAAI,YAAY,IAAIA,EAAEyB,EAAE,SAAQhC,MAAM8L,aAAc,OAAOvL,EAAEL,KAAKsN,kBAAkB,OAAOxL,EAAEzB,EAAEkN,aAAczL,EAAE0L,SAAS,mBAAmBnN,GAAG,GAAGA,EAAE6L,IAAI,0BAA0B,OAAO,YAAM,OAAO,OAAE,EAAC,WAAKJ,EAAE9I,UAAU,uBAAkB,IAAQ,OAAE,EAAC,WAAK8I,EAAE9I,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAK8I,EAAE9I,UAAU,iBAAY,GAAQ8I,GAAE,OAAE,EAAC,OAAE,wCAAwCA,GAAGA,G,qCCA/mC,MAAM,EAAE,cAAY,4CAA4C,IAAI7E,EAAE,cAAc,GAAE,SAAE,OAAE,QAAM,cAAcnH,SAASC,WAAWC,KAAKyN,qBAAqB,EAAE,UAAU,OAAO,KAAK,OAAOpN,GAAGL,KAAK0N,SAAS/B,OAAOtL,GAAGsM,OAAOtM,KAAI,kBAAEA,IAAI,EAAEsN,MAAMtN,MAAM,SAAS,MAAMuN,cAAcvN,EAAEwN,eAAe9L,EAAE+L,QAAQhM,GAAG9B,KAAKG,MAAM6B,EAAEF,GAAG,KAAKJ,EAAEI,GAAG,GAAG9B,KAAK+N,iBAAiB,IAAI,IAAE/N,KAAK4K,UAAUoD,SAAShO,KAAK+N,kBAAkB/N,KAAK0N,SAAS,IAAI,IAAE,CAAC9C,UAAU5K,KAAK+N,iBAAiBE,YAAYjO,KAAKkO,WAAWjI,KAAKjG,MAAM8K,cAAc9K,KAAK8K,cAAc7E,KAAKjG,MAAM4N,cAAcvN,EAAEwN,eAAe9L,EAAEoM,uBAAuBnM,EAAEoM,4BAA4B1M,EAAE2M,OAAM,IAAKrO,KAAKsN,gBAAgB,IAAI,IAAE,CAACpN,KAAKF,KAAKE,KAAKC,MAAMH,KAAKG,QAAQH,KAAKe,QAAQE,KAAI,UAAEjB,KAAKsN,gBAAgB,WAAWjN,IAAIL,KAAKyN,sBAAsBpN,IAAIL,KAAKyN,oBAAoBpN,EAAEL,KAAK8K,oBAAoB,4BAA4B,SAAS9K,KAAK0N,SAASY,UAAUtO,KAAKe,QAAQC,OAAO,4BAA4BhB,KAAKsN,gBAAgBgB,UAAUtO,KAAKsN,gBAAgB,KAAKtN,KAAKyN,qBAAqB,EAAEzN,KAAK4K,UAAU2D,YAAYvO,KAAK+N,kBAAkB/N,KAAK+N,iBAAiBS,oBAAoB,aAAa,cAAc,UAAUxO,KAAK8K,gBAAgB,sCAAsCzK,EAAE0B,GAAG,OAAO,OAAE1B,EAAE0B,EAAE/B,KAAKE,MAAM,kBAAkBF,KAAK8K,gBAAgB,aAAa,OAAO9K,KAAK0N,SAASe,UAAUzO,KAAK2K,gBAAgB,WAAWtK,EAAE0B,EAAED,EAAEE,GAAG,OAAOhC,KAAKG,MAAM+N,WAAW7N,EAAE0B,EAAED,EAAE,CAACyL,WAAWvN,KAAKsN,gBAAgBC,WAAWmB,UAAU1O,KAAK2O,oBAAoB3M,OAAM,OAAE,EAAC,WAAKiF,EAAEjE,UAAU,gBAAW,IAAQ,OAAE,EAAC,WAAKiE,EAAEjE,UAAU,gBAAW,GAAQiE,GAAE,OAAE,EAAC,OAAE,6CAA6CA,GAAW,QAAFA,G,oOCAxoF,MAAMlF,EAAE4B,KAAKuD,GAAG,IAAI,SAAS/H,EAAEA,GAAG,OAAOA,EAAE4C,EAAsI,SAAS,EAAEA,EAAEG,GAAG,MAAMJ,EAAE3C,EAAE+C,EAAEyD,UAAUkB,EAAElD,KAAKE,IAAIF,KAAKiL,IAAI9M,IAAIG,EAAE0B,KAAKE,IAAIF,KAAKkL,IAAI/M,KAAKJ,EAAEsF,GAAG9E,EAAE8B,KAAK,OAAOjC,EAAE,GAAG4B,KAAKmL,MAAM9H,EAAE/E,EAAEP,EAAEmF,GAAG9E,EAAE,GAAG4B,KAAKmL,MAAM9H,EAAEH,EAAEnF,EAAEO,GAAGF,E,eCAgrB,MAAM,GAAE,UAAIgN,EAAE,CAAC,EAAE,GAAG5K,EAAE,IAAI,IAAE,EAAE,EAAE,EAAE,GAAGQ,EAAoE,KAApEA,EAAwF,KAAxFA,GAAoH,EAApHA,GAAmJ,EAAnJA,GAA4J,EAAI,IAAI9E,EAAE,cAAc,UAAE,YAAYkC,GAAGjC,MAAMiC,GAAG/B,KAAKgP,cAAc,KAAKhP,KAAKqO,MAAM1J,EAAQ3E,KAAK4N,cAAcjJ,EAAgB3E,KAAK6N,eAAelJ,EAAiB3E,KAAKmO,uBAAuBxJ,EAAyB3E,KAAKoO,4BAA4BzJ,EAA8B3E,KAAK2L,QAAO,eAAE,MAAO5J,EAAE1B,KAAK,MAAM2B,EAAED,EAAEkN,MAAM/M,GAAE,QAAEF,EAAEkN,kBAAkBpN,EAAE9B,KAAKqO,MAAMtM,EAAE0D,WAAW,EAAE,IAAI1D,EAAEoN,YAAYnP,KAAKmL,UAAU,OAAOnL,KAAKmO,wBAAwBY,EAAE,GAAG/M,EAAEgC,KAAK,GAAG+K,EAAE,GAAG/M,EAAEgC,KAAK,IAAI,EAAE+K,EAAE/M,GAAG,MAAMC,EAAE0B,KAAKS,MAAM2K,EAAE,GAAGjN,GAAG9B,KAAK4N,eAAejK,KAAKS,MAAM2K,EAAE,GAAGjN,GAAG9B,KAAK6N,eAAe5B,EAAE/J,IAAIF,EAAE6G,OAAOuG,KAAKlN,EAAEmN,MAAM,IAAIrN,EAAE6G,OAAOyG,KAAKpN,EAAEmN,MAAM,IAAIlQ,GAAGa,KAAKoO,6BAA6BnC,EAAEH,GAAG7J,IAAI9C,EAAE8H,EAAEjH,KAAKmO,uBAAuBnM,EAAE2D,SAAS,EAAE,GAAGmG,EAAE9L,KAAKgP,cAAchP,KAAKuP,cAAcvN,EAAE+M,EAAE9H,EAAEnF,EAAEzB,OAAO,CAAC,IAAI0B,EAAE4B,KAAK6L,IAAIxP,KAAK4N,cAAc5N,KAAK6N,gBAAgB1O,IAAI4C,EAAE4B,KAAK6L,IAAIxN,EAAEyN,iBAAiB1N,IAAI/B,KAAKgP,cAAchP,KAAK0P,aAAa1N,EAAED,EAAEkF,EAAEnF,EAAEzB,GAAG,OAAOL,KAAKgP,cAAc9D,MAAK,MAACiB,IAAUnM,KAAKgP,cAAc,WAAWjD,QAAQU,IAAI1K,EAAExB,KAAKwB,IAAI/B,KAAK4K,UAAUoD,SAASjM,GAAGA,EAAE4N,aAAa,IAAI,MAAMtP,KAAKL,KAAK4K,UAAUnC,SAAS1G,EAAE6N,SAASvP,IAAIA,EAAEwP,UAAU3E,MAAK,KAAMlL,KAAK4K,UAAU2D,YAAYlO,SAASsM,OAAO5K,IAAI,MAAM/B,KAAKgP,cAAc,KAAKjN,OAAO,KAAK,WAAW,eAAe,OAAO,OAAO/B,KAAKgP,cAAc,cAAcjN,GAAG,IAAI,MAAM1B,KAAKL,KAAK4K,UAAUnC,SAAS,CAAC,IAAIpI,EAAEjB,UAAUiB,EAAEuH,MAAM,OAAO7F,EAAE1B,GAAGyP,QAAQnC,MAAM,6DAA6DtN,EAAEiG,oBAAoBjG,EAAE2F,kBAAkB,QAAQjE,EAAE1B,EAAE2B,EAAEE,EAAEJ,EAAEJ,GAAG,OAAOqK,QAAQgE,UAAU7E,MAAK,IAAKlL,KAAKiO,YAAYlM,EAAE4B,KAAKS,MAAM/D,EAAEyB,GAAG6B,KAAKS,MAAMpC,EAAEF,GAAG,CAAC6D,SAASzD,EAAEuD,WAAW3D,EAAEkO,OAAOtO,MAAMwJ,MAAMlJ,IAAI,MAAMN,EAAE,IAAI,IAAEM,GAAG,OAAON,EAAEiD,EAAE5C,EAAEqN,KAAK1N,EAAE7B,EAAEkC,EAAEkO,KAAKvO,EAAEgE,WAAW3D,EAAEkD,MAAM5E,EAAEqB,EAAEiE,SAASzD,EAAER,EAAE+D,WAAW3D,EAAEJ,KAAK,cAAcK,EAAE1B,EAAE2B,EAAEE,EAAEJ,IDAzlF,SAAWC,EAAE5C,EAAE+C,EAAEJ,GAAG,MAAM+E,EAAE5E,GAAG9C,GAAGuC,EAAEsF,GAAGlF,EAAEE,EAAE,GAAGE,EAASH,EAAE,GAAG8E,EAAE7E,EAAEN,EAAEK,EAAE,GAAGE,EAAED,EAAEgF,EAAEjF,EAAE,GAAG8E,EAAE7E,EAAEN,EAAEK,EAAE,GAAGE,EAAED,EAAEgF,ECA2/E,CAAE,EAAEjF,EAAEmO,OAAOnO,EAAE2D,WAAWrF,GAAG,MAAMqB,EAAE,IAAI,IAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAGK,EAAEmN,kBAAkB,OAAOlP,KAAKmQ,QAAQzO,EAAErB,EAAE,GAAGA,EAAE,GAAG2B,EAAEE,EAAEJ,GAAGoJ,MAAMnJ,GAAG,CAACA,KAAK,aAAaA,EAAE1B,EAAE2B,EAAEE,EAAEJ,GAAG,MAAMJ,EAAE,WAAS,CAACsC,KAAK3D,EAAE6O,iBAAiBnN,EAAEmN,iBAAiBkB,OAAO,CAACrO,EAAEJ,SAASsK,EAAE,IAAI,IAAEvK,GAAGoK,EAAEG,EAAEoE,gBAAgBtO,GAAG,IAAI+J,EAAE,OAAO,KAAK,MAAMlF,EAAE,GAAG,OAAOkF,EAAE3J,SAAQ,CAAET,EAAEvC,EAAE2M,EAAE7E,KAAK9C,EAAE+E,IAAIxH,EAAEvC,EAAE2M,EAAE7E,GAAGgF,EAAEqE,cAAc,EAAEnM,GAAG,MAAM6C,EAAE,IAAI,IAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAGjF,EAAEmN,kBAAkBtI,EAAE0F,KAAKtM,KAAKmQ,QAAQnJ,EAAE3G,EAAEA,EAAE2B,EAAEE,EAAEJ,OAAOiK,QAAQU,IAAI7F,MAAK,OAAE,EAAC,WAAK/G,EAAEmD,UAAU,qBAAgB,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,iBAAY,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,mBAAc,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,qBAAgB,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,sBAAiB,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,8BAAyB,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,mCAA8B,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,qBAAgB,IAAQ,OAAE,EAAC,WAAKnD,EAAEmD,UAAU,WAAW,MAAMnD,GAAE,OAAE,EAAC,OAAE,gDAAgDA,GAAW,QAAFA,G,wMCAjuG,IAAIoM,EAAE,eAAc,QAAE,QAAE,OAAE,iBAAe,eAAO,YAAY5L,GAAGP,MAAMO,GAAGL,KAAKG,MAAM,KAAKH,KAAKuQ,OAAO,KAAK,aAAavQ,KAAKqL,OAAOsB,OAAOtM,IAAI,GAAG,2BAA2BA,EAAEkI,KAAK,CAAC,MAAMzG,EAAE9B,KAAKG,OAAOH,KAAKG,MAAMmB,IAAI,QAAQI,EAAE1B,KAAKG,OAAOH,KAAKG,MAAMqQ,OAAO,WAAW,MAAM,cAAYxQ,KAAKyQ,eAAe9C,MAAM,aAAa,+CAA+CjM,YAAYI,MAAMzB,GAAGA,MAAM,kBAAkB,MAAMA,EAAEA,GAAG,MAAMA,EAAE,EAAEA,EAAE,OAAOA,EAAEL,KAAKkM,IAAI,kBAAkB7L,EAAEL,KAAKkM,IAAI,uBAAuB,gBAAgB,OAAOlM,KAAK4L,YAAY,kBAAkB,OAAO5L,KAAK0Q,iBAAiB,oBAAoB,OAAO1Q,KAAKuL,YAAW,IAAKvL,KAAKG,MAAMwQ,cAAc,eAAe,SAAS3Q,KAAK4Q,iBAAiB5Q,KAAK4Q,gBAAgBnC,UAAUzO,KAAKwL,cAAc,cAAc,OAAM,IAAKxL,KAAKkM,IAAI,iBAAiB,YAAY7L,QAAG,IAASA,EAAEL,KAAK6Q,UAAU,UAAUxQ,GAAGL,KAAK8Q,eAAe,WAAW,YAAY,OAAO9Q,KAAKkM,IAAI,qBAAqBlM,KAAKkM,IAAI,eAAelM,KAAKkM,IAAI,iBAAiBlM,KAAKZ,UAAS,EAAG,iBAAiB,MAAMiB,EAAEL,KAAKuQ,QAAQvQ,KAAKuQ,OAAOhF,UAAUvL,KAAKuQ,OAAOQ,YAAY,GAAU,OAAL/Q,KAAcE,MAAdF,KAAsBE,KAAKmI,QAAQhI,EAAE2Q,cAAa,GAAIhR,KAAKG,OAAOH,KAAKG,MAAM8Q,SAAS5Q,EAAE6Q,gBAAe,GAAIlR,KAAKZ,UAAUiB,EAAE8Q,gBAAe,GAAI9Q,EAAE,aAAa,OAAM,KAAK,OAAE,EAAC,WAAK4L,EAAEjJ,UAAU,cAAc,OAAM,OAAE,EAAC,WAAKiJ,EAAEjJ,UAAU,aAAQ,IAAQ,OAAE,EAAC,WAAKiJ,EAAEjJ,UAAU,cAAS,IAAQ,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMkJ,EAAEjJ,UAAU,YAAY,OAAM,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMkJ,EAAEjJ,UAAU,cAAc,OAAM,OAAE,EAAC,QAAE,CAACD,UAAS,KAAMkJ,EAAEjJ,UAAU,gBAAgB,OAAM,OAAE,EAAC,QAAE,CAACC,KAAKmO,QAAQrO,UAAS,KAAMkJ,EAAEjJ,UAAU,WAAW,OAAM,OAAE,EAAC,WAAKiJ,EAAEjJ,UAAU,UAAU,MAAMiJ,GAAE,OAAE,EAAC,OAAE,gCAAgCA,GAAW,QAAFA,G,+ECArqEE,eAAenK,EAAEA,EAAE+E,EAAE/E,EAAEwK,eAAe,KAAI,QAAEzF,GAAG,MAAM,GAAG,MAAM7E,QAAQ6E,EAAEsK,kBAAkBrP,EAAEsP,SAASC,oBAAoB7P,GAAGqF,GAAGyK,cAAc3K,EAAE4K,YAAYxP,EAAEyP,cAAcvS,EAAEwS,cAAcxN,GAAGnC,EAAE,GAAGE,EAAE0N,SAAS,KAAK,MAAM,CAAC,KAAK,MAAM9N,EAAEJ,QAAQ,QAAEM,GAAG,GAAG8J,GAAE,QAAE9J,EAAEsP,OAAO,IAAIpP,KAAKJ,IAAI,OAAOG,GAAG6J,EAAEQ,KAAKrK,GAAG6J,GAAGjF,IAAG,QAAE7E,EAAEsP,OAAOzK,KAAK,IAAIiF,EAAE8F,QAAQ/K,IAAIiF,EAAEQ,KAAKzF,GAAGiF,GAAG3M,IAAG,QAAE6C,EAAEsP,OAAOnS,KAAK,IAAI2M,EAAE8F,QAAQzS,IAAI2M,EAAEQ,KAAKnN,GAAGgF,GAAGA,EAAEhC,SAAS9B,IAAI,MAAMwR,SAAS5F,GAAG5L,EAAEyL,GAAGG,IAAG,QAAEjK,EAAEsP,OAAOrF,KAAK,IAAIH,EAAE8F,QAAQ3F,IAAIH,EAAEQ,KAAKL,MAAMH,EAAE,SAAS/E,EAAEkF,EAAEhF,GAAG,OAAOgF,EAAEO,cAAcP,EAAEO,eAAc,QAAEvF,IAAIA,EAAEoF,8BAA6B,QAAEJ,EAAE6F,sBAAsB7F,EAAE6F,qBAAqB,O,iHCA9f,SAAS7P,EAAEF,EAAEC,EAAEC,EAAEC,EAAE,IAAI,KAAG,IAAIR,EAAE,GAAG,OAAOO,EAAEgB,KAAKvB,EAAEM,EAAEC,EAAEyD,gBAAgB,GAAG,OAAOzD,EAAEgB,KAAK,CAAC,MAAMnB,EAAEG,EAAE8P,2BAA2BhQ,GAAGG,EAAED,EAAE+P,wBAAwBtQ,GAAE,QAAEQ,KAAKA,EAAE+P,OAAOhQ,EAAEiN,mBAAkB,QAAEhN,IAAG,QAAED,EAAEiN,kBAAkBlN,EAAEF,EAAE,MAAMgK,EAAE/J,EAAE4C,EAAEjD,EAAEuK,EAAElK,EAAElC,EAAE6B,EAAEsF,EAAEjF,EAAE4C,EAAEjD,EAAEuF,EAAElF,EAAElC,EAAE6B,GAAGwN,iBAAiB/K,GAAGlC,EAAE,OAAOC,EAAEkN,KAAKzL,KAAK6L,IAAI1D,EAAE9E,GAAG9E,EAAEgQ,KAAKvO,KAAK6L,IAAIvD,EAAEhF,GAAG/E,EAAEoN,KAAK3L,KAAKC,IAAIkI,EAAE9E,GAAG9E,EAAE+N,KAAKtM,KAAKC,IAAIqI,EAAEhF,GAAG/E,EAAEgN,iBAAiB/K,EAAEjC,EAAE,SAASA,EAAE7B,EAAEyB,EAAE3C,GAAG,MAAM+C,EAAE/C,EAAEgT,MAAM9R,GAAG,QAAG,QAAE6B,IAAmBD,EAAEC,GAAE,SAAI/C,EAAEuC,GAAG0Q,WAAWtQ,GAAG,MAAMJ,EAAE,IAAI","file":"chunks/4005.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"../../core/Accessor.js\";import{combinedViewLayerTimeExtentProperty as i}from\"./commonProperties.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";import{isExportDynamic as o}from\"./sublayerUtils.js\";import l from\"../../views/View.js\";const n={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends(a(t)){constructor(){super(...arguments),this._scale=null,this.view=null}destroy(){this.layer=this.view=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&o(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(n[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,s)=>(e[s.id]=s.definitionExpression,e)),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\"),this.commitProperty(\"timeExtent\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}set version(e){this._set(\"version\",e)}get visibleSublayers(){const e=[];if(!this.layer)return e;const s=this.layer.sublayers,r=s=>{const t=this.scale,i=0===t,a=0===s.minScale||t<=s.minScale,o=0===s.maxScale||t>=s.maxScale;s.visible&&(i||a&&o)&&(s.sublayers?s.sublayers.forEach(r):e.unshift(s))};s&&s.forEach(r);const t=this._get(\"visibleSublayers\");return!t||t.length!==e.length||t.some(((s,r)=>e[r]!==s))?e:t}toJSON(){const e=this.layer;let s={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};e([s({readOnly:!0})],y.prototype,\"dynamicLayers\",null),e([s({readOnly:!0})],y.prototype,\"hasDynamicLayers\",null),e([s()],y.prototype,\"layer\",null),e([s({readOnly:!0})],y.prototype,\"layers\",null),e([s({readOnly:!0})],y.prototype,\"layerDefs\",null),e([s({type:Number})],y.prototype,\"scale\",null),e([s(i)],y.prototype,\"timeExtent\",void 0),e([s()],y.prototype,\"version\",null),e([s({type:l})],y.prototype,\"view\",void 0),e([s({readOnly:!0})],y.prototype,\"visibleSublayers\",null),y=e([r(\"esri.layers.mixins.ExportImageParameters\")],y);export{y as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,b as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t){return t&&\"render\"in t}function c(t){return t&&!(\"render\"in t)}function l(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class _ extends u{constructor(t=null,e=!0){super(),this.requestRenderOnSourceChangedEnabled=e,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{_ as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./webgl/enums.js\";import{brushes as r}from\"./brushes.js\";import s from\"./webgl/WGLContainer.js\";class t extends s{prepareRenderPasses(s){const t=s.registerRenderPass({name:\"bitmap\",brushes:[r.bitmap],target:()=>this.children,drawPhase:e.MAP});return[...super.prepareRenderPasses(s),t]}}export{t as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{eachAlways as a}from\"../../core/promiseUtils.js\";import{loadArcade as p}from\"../../support/arcadeOnDemand.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";import{getRequiredFields as l,getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const c=c=>{let m=class extends c{async fetchPopupFeatures(e,t){const{layer:o}=this;if(!e)return Promise.reject(new s(\"mapimagelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:o}));const p=this.get(\"view.scale\"),c=[],m=async e=>{const o=0===e.minScale||p<=e.minScale,s=0===e.maxScale||p>=e.maxScale;if(e.visible&&o&&s)if(e.sublayers)e.sublayers.forEach(m);else if(e.popupEnabled){const o=u(e,{...t,defaultPopupTemplateEnabled:!1});r(o)&&c.push({sublayer:e,popupTemplate:o})}},n=o.sublayers.toArray().map(m);await Promise.all(n);const d=c.map((async({sublayer:o,popupTemplate:s})=>{await o.load().catch((()=>{}));const a=o.createQuery(),p=r(t)?t.event:null,u=i({renderer:o.renderer,event:p}),c=this.createFetchPopupFeaturesQueryGeometry(e,u);a.geometry=c,a.outFields=await l(o,s);const m=await this._loadArcadeModules(s);m&&m.arcadeUtils.hasGeometryOperations(s)||(a.maxAllowableOffset=c.width/u);return(await o.queryFeatures(a)).features}));return(await a(d)).reduce(((e,r)=>r.value?[...e,...r.value]:e),[]).filter((e=>null!=e))}canResume(){var e,r;return!!super.canResume()&&(null==(e=this.imageParameters)||null==(r=e.timeExtent)||!r.isEmpty)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return p()}};return e([t()],m.prototype,\"imageParameters\",void 0),e([t()],m.prototype,\"layer\",void 0),e([t()],m.prototype,\"suspended\",void 0),m=e([o(\"esri.views.layers.MapImageLayerView\")],m),m};export default c;export{c as MapImageLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{init as a}from\"../../../core/watchUtils.js\";import{RefreshableLayerView as o}from\"../../layers/RefreshableLayerView.js\";import{ExportImageParameters as m}from\"../../../layers/support/ExportImageParameters.js\";import p from\"../../layers/LayerView.js\";import{createQueryGeometry as h}from\"../../support/drapedUtils.js\";import{MapImageLayerView as n}from\"../../layers/MapImageLayerView.js\";import{BitmapContainer as d}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as g}from\"./LayerView2D.js\";import u from\"./support/ExportStrategy.js\";const c=t.getLogger(\"esri.views.2d.layers.MapImageLayerView2D\");let l=class extends(n(o(g(p)))){constructor(){super(...arguments),this._exportImageVersion=-1}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{s(e)||c.error(e)}))}attach(){const{imageMaxWidth:e,imageMaxHeight:t,version:r}=this.layer,i=r>=10.3,s=r>=10;this._bitmapContainer=new d,this.container.addChild(this._bitmapContainer),this.strategy=new u({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:e,imageMaxHeight:t,imageRotationSupported:i,imageNormalizationSupported:s,hidpi:!0}),this.imageParameters=new m({view:this.view,layer:this.layer}),this.handles.add(a(this.imageParameters,\"version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),\"mapimagelayerview-update\")}detach(){this.strategy.destroy(),this.handles.remove(\"mapimagelayerview-update\"),this.imageParameters.destroy(),this.imageParameters=null,this._exportImageVersion=-1,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return h(e,t,this.view)}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.imageParameters.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],l.prototype,\"strategy\",void 0),e([r()],l.prototype,\"updating\",void 0),l=e([i(\"esri.views.2d.layers.MapImageLayerView2D\")],l);var y=l;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,n,o){const{resolution:r,size:u}=o;return t[0]=r*(Math.round(n[0]/r)+u[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+u[1]%2*.5),t}function r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}function a(t,n){const[o,r,u,a]=t,[s,c,i,e]=n;return!(o>i||u<s||r>e||a<c)}export{a as bboxIntersects,u as getBBox,r as getOuterSize,o as snapToPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{debounce as o}from\"../../../../core/promiseUtils.js\";import r from\"../../../../core/Accessor.js\";import{getInfo as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import a from\"../../../../geometry/Extent.js\";import{create as p}from\"../../../../geometry/support/aaBoundingRect.js\";import n from\"../../../../layers/support/TileInfo.js\";import m from\"../../tiling/TileKey.js\";import l from\"../../tiling/TileInfoView.js\";import{getOuterSize as h,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as d}from\"../../engine/Bitmap.js\";const u=p(),g=[0,0],f=new m(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends r{constructor(t){super(t),this._imagePromise=null,this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=o((async(t,e)=>{const i=t.state,o=s(i.spatialReference),r=this.hidpi?t.pixelRatio:1;if(!t.stationary||this.destroyed)return;this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):h(g,i);const a=Math.floor(g[0]*r)>this.imageMaxWidth||Math.floor(g[1]*r)>this.imageMaxHeight,p=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),n=!this.imageNormalizationSupported&&p,m=!a&&!n,l=this.imageRotationSupported?i.rotation:0;if(m)this._imagePromise=this._singleExport(i,g,l,r,e);else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);n&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,l,r,e)}return this._imagePromise.then((async t=>{this._imagePromise=null,await Promise.all(t.map((t=>(this.container.addChild(t),t.fadeIn()))));for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{this.container.removeChild(e)}))})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e)?console.error(\"ExportStrategy.updateExports doesn't support promise yet\"):(e.invalidateTexture(),e.requestRender())}}_export(t,e,i,o,r,s){return Promise.resolve().then((()=>this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}))).then((i=>{const s=new d(i);return s.x=t.xmin,s.y=t.ymax,s.resolution=t.width/e,s.rotation=o,s.pixelRatio=r,s}))}_singleExport(t,e,i,o,r){c(u,t.center,t.resolution,e);const s=new a(u[0],u[1],u[2],u[3],t.spatialReference);return this._export(s,e[0],e[1],i,o,r).then((t=>[t]))}_tiledExport(t,e,i,o,r){const s=n.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new l(s),m=p.getTileCoverage(t);if(!m)return null;const h=[];return m.forEach(((s,n,m,l)=>{f.set(s,n,m,l),p.getTileBounds(u,f);const c=new a(u[0],u[1],u[2],u[3],t.spatialReference);h.push(this._export(c,e,e,i,o,r))})),Promise.all(h)}};t([e()],y.prototype,\"_imagePromise\",void 0),t([e()],y.prototype,\"container\",void 0),t([e()],y.prototype,\"fetchSource\",void 0),t([e()],y.prototype,\"hidpi\",void 0),t([e()],y.prototype,\"imageMaxWidth\",void 0),t([e()],y.prototype,\"imageMaxHeight\",void 0),t([e()],y.prototype,\"imageRotationSupported\",void 0),t([e()],y.prototype,\"imageNormalizationSupported\",void 0),t([e()],y.prototype,\"requestUpdate\",void 0),t([e()],y.prototype,\"updating\",null),y=t([i(\"esri.views.2d.layers.support.ExportStrategy\")],y);var S=y;export default S;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}