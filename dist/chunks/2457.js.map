{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js","webpack://imaps/./node_modules/@arcgis/core/chunks/TextureOnly.glsl.js","webpack://imaps/./node_modules/@arcgis/core/chunks/WaterSurface.glsl.js","webpack://imaps/./node_modules/@arcgis/core/chunks/vec4f32.js","webpack://imaps/./node_modules/@arcgis/core/geometry/geometryAdapters/hydrated.js","webpack://imaps/./node_modules/@arcgis/core/geometry/geometryEngine.js","webpack://imaps/./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","webpack://imaps/./node_modules/@arcgis/core/geometry/support/triangulationUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTarget.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/localOrigin.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/Overlay.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/CommonUniformStore.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRep.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ChangeSet.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ResizableFloat32Array.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/statistics/RendererPerformanceInfo.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/SortedRenderGeometryRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/constants.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/support/debugFlags.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Reprojection.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultTextureUnits.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariableMaterialParameters.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js","webpack://imaps/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js"],"names":["c","f","extensions","add","include","output","vertex","uniforms","attributes","varyings","multipassTerrainEnabled","v","falloffEnabled","m","innerColorEnabled","fragment","code","stippleEnabled","roundJoins","roundCaps","stippleIntegerRepeatsEnabled","OITEnabled","Object","freeze","__proto__","build","n","a","p","u","linearDepth","l","receiveShadows","Float32Array","r","t","e","o","s","i","_","w","N","U","create","clone","fromValues","createView","zeros","ones","unitX","unitY","unitZ","unitW","ZEROS","ONES","UNIT_X","UNIT_Y","UNIT_Z","UNIT_W","convertToGEGeometry","cache","_geVersion","convertJSONToGeometry","exportPoint","hasZ","hasM","x","getPointX","y","getPointY","spatialReference","z","getPointZ","getPointM","exportPolygon","rings","exportPaths","exportPolyline","paths","exportMultipoint","points","exportPoints","exportExtent","xmin","getXMin","ymin","getYMin","xmax","getXMax","ymax","getYMax","getZExtent","zmin","vmin","zmax","vmax","getMExtent","mmin","mmax","Array","isArray","g","d","E","h","A","R","I","S","j","J","O","center","extent","V","Error","constructor","fromJSON","B","D","H","L","b","k","q","C","byteLength","Uint32Array","minReduction","originalIndices","componentOffsets","length","Math","floor","ceil","M","sqrt","buffer","indices","uniqueCount","super","this","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","view","renderCoordsHelper","toRenderCoords","push","geometry","lines","forEach","origin","endpoint","endRenderSpace","transform","createRenderGeometry","map","_updateMaterial","_geometry","recreateGeometry","recreate","_material","materialParameters","_createLineGeometries","addGeometry","width","color","stippleOffColor","stipplePattern","isClosed","falloff","innerColor","innerWidth","stippleIntegerRepeats","polygonOffset","renderOccluded","writeDepth","attached","setParameterValues","Float64Array","attributeData","position","removeDuplicateStartEnd","_resources","_transform","object","transformation","createResources","_stage","removeMany","geometries","removeAllGeometries","createGeometries","visible","setVisible","addMany","destroyResources","isPickable","castShadow","createExternalResources","forEachExternalMaterial","processDirtyLayer","id","layer","remove","dispose","destroyExternalResources","T","mode","requiresAlignment","applyElevationAlignmentBuffer","array","offset","verticalDistanceToGround","sampledElevation","geometryZWithOffset","NONE","UPDATE","RECREATE","calculateOffsetRenderUnits","featureExpressionInfoContext","meterUnitOffset","getElevation","index","pathLengths","count","holeIndices","polygons","outlines","intensity","direction","castShadows","sh","_renderTarget","colorTarget","depthStencilTarget","target","pixelFormat","dataType","wrapMode","samplingMode","hasMipmap","maxAnisotropy","height","colorTexture","resize","bindFramebuffer","descriptor","generateMipmap","vec3","resolution","renderLocalOrigin","pixelRatio","renderTargets","fbo","valid","lastUsed","colorWithoutRasterImage","highlight","water","occluded","drawPass","disposeRenderTargetMemory","validateUsage","getGpuMemoryUsage","_uniforms","proj","uShadowMapDistance","viewportPixelSz","lightingMainDirection","hasUniform","technique","refCount","refZeroFrame","_context","_perConstructorInstances","Map","_frameCounter","_keepAliveFrameCount","viewingMode","clear","key","get","set","acquire","release","delete","size","commonUniformStore","getPrograms","async","shader","reload","Promise","all","name","find","refCnt","glMaterial","_textureRep","_techniqueRep","onMaterialChanged","_id2glMaterialRef","ownMaterial","getGLMaterial","material","techniqueRep","textureRep","incRefCnt","decRefCnt","getRefCnt","updateParameters","materialRepository","error","ROOT_ORIGIN_ID","_origins","_gridSize","testOrigin","getOrigin","random","abs","round","window","_object","Uint16Array","data","exclusive","console","log","rctx","offscreenRenderingHelper","scenelightingData","shadowMap","ssaoHelper","sliceHelper","camera","lastFrameCamera","pass","slot","highlightDepthTexture","renderOccludedMask","hasOccludees","adds","removes","updates","allocator","deallocator","renderGeometry","prune","indexCount","_array","_size","subarray","waterTextureRepository","configuration","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","pbrMode","useCustomDTRExponentForWater","ssrEnabled","useSSR","highStepCount","cullAboveGround","generateSource","ready","updating","loadTextures","program","projectionMatrix","setUniform2fv","nearFar","getViewport","lighting","setUniforms","bindRepo","setUniform4fv","viewInverseTransposeMatrix","blending","transparent","depthTest","func","depthWrite","colorWrite","enableOffset","setPipelineState","P","arguments","isDraped","prototype","acquireAndReleaseExisting","getTechniqueConfig","params","animation","time","setUniform1f","animationSpeed","shadowMappingEnabled","ensureResource","_updateShadowState","_updateSSRState","bindProgram","bindPass","setElapsedTimeUniform","from","to","isVisible","hasHighlights","transformationNormal","first","drawCalls","triangles","hasHiddenInstances","begin","end","type","_dataByOrigin","_hasHighlights","_hasOccludees","_rctx","_materialRep","_glMaterials","_bufferWriter","createBufferWriter","vao","isEmpty","updateGeometries","addAndRemoveGeometries","updateRenderCommands","vertexBufferLayout","stride","optimalCount","sparseCount","toAdd","toRemove","elementCount","createData","removeAndRebuild","removeByErasing","append","vertexBuffers","byteSize","setData","setSubData","drawCommandsDirty","updateType","instances","instanceParameters","highlights","occludees","write","invTranspTransformation","drawCommandsDefault","drawCommandsHighlight","drawCommandsOccludees","drawCommandsShadowHighlightRest","stats","default","shadowHighlightRest","layout","sort","values","update","ensureResources","beginSlot","ensureParameters","getTechnique","getPipelineState","bind","bindDraw","ensureAttributeLocations","bindVAO","primitiveType","renderCommands","drawArrays","vertexAttributeLocations","erase","glMaterials","_pendingAddsRemoves","_changes","_materialRenderers","_sortedMaterialRenderers","_hasWater","rendersOccluded","forAll","stopAtTime","updateAddsRemoves","hasWater","modify","updateSortedMaterialRenderers","notifyChange","pushNew","materialRenderer","updateLogic","render","insertOrder","renderPriority","has","removeUnorderedIndex","sortedMaterialRenderers","hasAlpha","sphericalHarmonics","main","PI","_renderLighting","_shOrder","_oldSunlight","ambient","diffuse","setUniform3fv","_info","groundLightingFactor","globalFactor","setLightDirectionUniform","setUniform3f","setUniform4f","lights","_overlays","_rendersOccluded","_lighting","_localOrigins","_handles","_layerRenderers","_sortedLayerRenderersDirty","_sortedLayerRenderers","_geometries","globalUnitScale","longitudeCyclical","renderView","renderingContext","_renderContext","_stippleTextureRepository","_shaderTechniqueRepository","stippleTextureRepository","emitContentChanged","_materialRepository","textureRepository","updateRendersOccluded","_compositingHelper","compositingHelper","_bindParameters","inverseViewport","screenToWorldRatio","screenToWorldRatioGlobalWM","slicePlane","ssaoEnabled","linearDepthTexture","linearDepthTextureUnit","lastFrameColorTexture","lastFrameColorTextureUnit","reprojectionMat","terrainLinearDepthTexture","terrainLinearDepthTextureUnit","geometryLinearDepthTexture","geometryLinearDepthTextureUnit","multipassGeometryEnabled","scheduler","registerTask","commitChanges","destroy","updateSortedLayerRenderers","updateHasHighlights","updateHasWater","boundingSphere","ensureLayerRenderer","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","warn","graphicUid","numViews","_screenToWorldRatio","views","viewport","hasNonZeroSizedView","isValid","setClearColor","clearSafe","setViewParameters","drawDebugTexture","layerView","renderer","drapeSourceType","fullOpacity","bindTemporaryFramebuffer","draw","_temporaryRenderTarget","composite","getTexture","generateMipMap","resetRenderOccludedMask","hotReload","intersectRenderGeometry","min","range","max","X","Y","intersect","getShaderTransformation","addIntersectionResult","layerUid","calculateShaderTransformation","metadata","results","ground","dist","normal","intersector","drapedLayerOrder","options","store","ray","stopAnimationsAtTime","watch","allLayerViews","keys","Set","near","far","viewMatrix","setGLViewport","fullViewport","onContentChanged","onHasHighlightsChanged","onRendersOccludedChanged","ensureDebugPatternResources","_debugTextureTechnique","pipeline","setUniform1i","bindTexture","_debugPatternTexture","_quadVAO","Uint8Array","layerRenderers","constructOnly","Boolean","readOnly","relativeElevation","mapPosition","colorFeature","F","sizeFeature","opacityFeature","join","uniformSize","projectionSuccess","SCENEVIEW_HITTEST_RETURN_INTERSECTOR","SCENEVIEW_LOCKING_LOG","HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED","HIGHLIGHTS_PROFILE_TO_CONSOLE","DECONFLICTOR_SHOW_VISIBLE","DECONFLICTOR_SHOW_INVISIBLE","DECONFLICTOR_SHOW_GRID","LABELS_SHOW_BORDER","OVERLAY_DRAW_DEBUG_TEXTURE","OVERLAY_SHOW_CENTER","SHOW_POI","TESTS_DISABLE_UPDATE_THRESHOLDS","DISABLE_DECONFLICTOR_VISIBILITY_OFFSET","DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES","DRAW_MESH_GEOMETRY_NORMALS","FEATURE_TILE_FETCH_SHOW_TILES","FEATURE_TILE_TREE_SHOW_TILES","TERRAIN_TILE_TREE_SHOW_TILES","I3S_TREE_SHOW_TILES","I3S_SHOW_MODIFICATIONS","ENABLE_PROFILE_DEPTH_RANGE","DISABLE_FAST_UPDATES","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES","EDITING_RECALCULATE_MANIPULATORS_DURING_TRANSFORM","vvSize","vvOpacity","constants","vvColor","stippleUVMaxEnabled","stippleOffColorEnabled","bindUniforms","bindView","bindViewCustomOrigin","setUniformMatrix4fv","vvInstancingEnabled","vvSizeEnabled","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvColorEnabled","setUniform1fv","vvColorValues","vvColorColors","bindUniformsWithOpacity","vvOpacityEnabled","vvOpacityValues","vvOpacityOpacities","bindUniformsForSymbols","vvSymbolAnchor","setUniformMatrix3fv","vvSymbolRotationMatrix","waveStrength","waveTextureRepeat","flowStrength","flowOffset","setUniform2f","waveDirection","waveVelocity","DIFFUSE","NORMAL","EMISSION","OCCLUSION","METALLIC_ROUGHNESS","SSAO","SHADOW_MAP","Default","vvSizeValue","subdivisionFactor","uv0","auxpos1","auxpos2","sizeFeatureAttribute","colorFeatureAttribute","opacityFeatureAttribute","stippleTextureBind","miterLimit","swap","stencilWrite","sceneHasOcludees","stencilTest","occluder","_occluderPipelineTransparent","_occluderPipelineOpaque","_occluderPipelineMaskWrite","_occludeePipelineState","factor","units","vertexColors","_vertexAttributeLocations","techniqueConfig","createLayout","cap","intersectDrapedLineGeometry","intersectLineGeometry","selectionMode","vertexAttributes","Number","MAX_VALUE","point","Z","unprojectFromRenderScreen","$","eye","ee","te","ie","se","G","projectToRenderScreen","frustum","W","rayBeginPoint","rayEndPoint","vec3f","f32","vec2f","vec4f","requiresTransparent","colorRequiresTransparent","targetSlot","_updateOccludeeState","getPassParameters","vvFastUpdate","numJoinSubdivisions","createBuffer","numCapSubdivisions","K","Q","texture","patternId","patternToTextureData","internalFormat","reduce","slice"],"mappings":"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","file":"chunks/2457.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{symbolAlphaCutoff as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{RibbonVertexPosition as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{OutputDepth as l}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";import{LineStipple as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{PiUtils as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";function c(c){const f=new t;f.extensions.add(\"GL_OES_standard_derivatives\"),f.include(d),f.include(s,c),f.include(p,c),1===c.output&&f.include(l,c),f.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"cameraNearFar\",\"vec2\").add(\"pixelRatio\",\"float\").add(\"miterLimit\",\"float\").add(\"screenSize\",\"vec2\"),f.attributes.add(\"position\",\"vec3\"),f.attributes.add(\"subdivisionFactor\",\"float\"),f.attributes.add(\"uv0\",\"vec2\"),f.attributes.add(\"auxpos1\",\"vec3\"),f.attributes.add(\"auxpos2\",\"vec3\"),f.varyings.add(\"vColor\",\"vec4\"),f.varyings.add(\"vpos\",\"vec3\"),f.varyings.add(\"linearDepth\",\"float\"),c.multipassTerrainEnabled&&f.varyings.add(\"depth\",\"float\");const v=c.falloffEnabled,m=c.innerColorEnabled;return m&&f.varyings.add(\"vLineDistance\",\"float\"),v&&f.varyings.add(\"vLineDistanceNorm\",\"float\"),c.falloffEnabled&&f.fragment.uniforms.add(\"falloff\",\"float\"),c.innerColorEnabled&&(f.fragment.uniforms.add(\"innerColor\",\"vec4\"),f.fragment.uniforms.add(\"innerWidth\",\"float\")),f.vertex.code.add(e`\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n`),f.vertex.code.add(e`\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n`),f.vertex.code.add(e`\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --> we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ${c.multipassTerrainEnabled?\"depth = pos.z;\":\"\"}\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n`),f.vertex.code.add(e`\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  `),c.stippleEnabled&&f.vertex.code.add(e`\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    `),f.vertex.code.add(e`\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the \"outside or \"inside\" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    `),c.roundJoins?f.vertex.code.add(e`\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      `):f.vertex.code.add(e`\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  `),f.vertex.code.add(e`\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  `),c.roundCaps?f.vertex.code.add(e`\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    `):f.vertex.code.add(e`\n    capDisplacementDir *= subdivisionFactor;\n    `),f.vertex.code.add(e`\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ${v||m?e`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:\"\"}\n\n  ${m?e`vLineDistance = lineDist;`:\"\"}\n  ${v?e`vLineDistanceNorm = lineDist / lineWidth;`:\"\"}\n\n  pos.xy += dpos;\n  `),c.stippleEnabled&&(f.vertex.code.add(e`\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    `),c.stippleIntegerRepeatsEnabled&&f.vertex.code.add(e`\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      `),f.vertex.code.add(e`\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ${c.stippleIntegerRepeatsEnabled?\"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;\":\"float wholeNumberOfRepeatsScale = 1.0;\"}\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    `)),f.vertex.code.add(e`\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  `),c.multipassTerrainEnabled&&(f.fragment.include(n),f.include(a,c)),f.include(r,c),f.fragment.uniforms.add(\"intrinsicColor\",\"vec4\"),f.fragment.include(i),f.fragment.code.add(e`\n  void main() {\n    discardBySlice(vpos);\n    ${c.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  `),c.innerColorEnabled&&(f.fragment.uniforms.add(\"pixelRatio\",\"float\"),f.fragment.code.add(e`\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    `)),f.fragment.code.add(e`\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  `),c.falloffEnabled&&f.fragment.code.add(e`\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    `),f.fragment.code.add(e`\n    if (finalColor.a < ${e.float(o)}) {\n      discard;\n    }\n\n    ${7===c.output?e`gl_FragColor = vec4(finalColor.a);`:\"\"}\n    ${0===c.output?e`gl_FragColor = highlightSlice(finalColor, vpos);`:\"\"}\n    ${0===c.output&&c.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    ${4===c.output?e`gl_FragColor = vec4(1.0);`:\"\"}\n    ${1===c.output?e`outputDepth(linearDepth);`:\"\"}\n  }\n  `),f}var f=Object.freeze({__proto__:null,build:c});export{f as R,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as r}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ScreenSpacePass as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";function n(){const n=new r;return n.include(o),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"color\",\"vec4\"),n.fragment.code.add(e`\n    void main() {\n      vec4 texColor = texture2D(tex, uv);\n      gl_FragColor = texColor * color;\n    }\n  `),n}var a=Object.freeze({__proto__:null,build:n});export{a as T,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{OutputHighlight as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ReadShadowMap as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{WaterDistortion as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{ForwardLinearDepth as g}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{NormalUtils as c}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js\";import{Water as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js\";function p(p){const u=new a;return u.include(r,{linearDepth:!1}),u.attributes.add(\"position\",\"vec3\"),u.attributes.add(\"uv0\",\"vec2\"),u.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"localOrigin\",\"vec3\"),u.vertex.uniforms.add(\"waterColor\",\"vec4\"),0!==p.output&&7!==p.output||(u.include(c,p),u.include(g,p),u.varyings.add(\"vuv\",\"vec2\"),u.varyings.add(\"vpos\",\"vec3\"),u.varyings.add(\"vnormal\",\"vec3\"),u.varyings.add(\"vtbnMatrix\",\"mat3\"),p.multipassTerrainEnabled&&u.varyings.add(\"depth\",\"float\"),u.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(d)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vuv = uv0;\n        vpos = position;\n\n        vnormal = getLocalUp(vpos, localOrigin);\n        vtbnMatrix = getTBNMatrix(vnormal);\n\n        ${p.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n\n        gl_Position = transformPosition(proj, view, vpos);\n        ${0===p.output?\"forwardLinearDepth();\":\"\"}\n      }\n    `)),p.multipassTerrainEnabled&&(u.fragment.include(t),u.include(l,p)),7===p.output&&(u.include(i,p),u.fragment.uniforms.add(\"waterColor\",\"vec4\"),u.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n          ${p.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n          gl_FragColor = vec4(waterColor.a);\n        }\n      `)),0===p.output&&(u.include(v,p),u.include(i,p),p.receiveShadows&&u.include(s,p),u.include(m,p),u.fragment.uniforms.add(\"waterColor\",\"vec4\").add(\"lightingMainDirection\",\"vec3\").add(\"lightingMainIntensity\",\"vec3\").add(\"camPos\",\"vec3\").add(\"timeElapsed\",\"float\").add(\"view\",\"mat4\"),u.fragment.include(o),u.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        ${p.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        vec3 localUp = vnormal;\n        // the created normal is in tangent space\n        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n\n        // we rotate the normal according to the tangent-bitangent-normal-Matrix\n        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);\n        vec3 v = -normalize(vpos - camPos);\n        vec3 l = normalize(-lightingMainDirection);\n        float shadow = ${p.receiveShadows?e`1.0 - readShadowMap(vpos, linearDepth)`:\"1.0\"};\n        vec4 vPosView = view*vec4(vpos, 1.0);\n        vec4 final = vec4(getSeaColor(n, v, l, waterColor.rgb, lightingMainIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz), waterColor.w);\n\n        // gamma correction\n        gl_FragColor = delinearizeGamma(final);\n        gl_FragColor = highlightSlice(gl_FragColor, vpos);\n        ${p.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),2===p.output&&(u.include(c,p),u.include(v,p),u.include(i,p),u.varyings.add(\"vpos\",\"vec3\"),u.varyings.add(\"vuv\",\"vec2\"),u.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(d)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vuv = uv0;\n          vpos = position;\n\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),u.fragment.uniforms.add(\"timeElapsed\",\"float\"),u.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n\n          // the created normal is in tangent space and foam\n          vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n          tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);\n\n          gl_FragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);\n        }\n    `)),5===p.output&&(u.varyings.add(\"vpos\",\"vec3\"),u.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(d)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vpos = position;\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),u.fragment.uniforms.add(\"waterColor\",\"vec4\"),u.fragment.code.add(e`\n        void main() {\n          gl_FragColor = waterColor;\n        }\n    `)),4===p.output&&(u.include(n),u.varyings.add(\"vpos\",\"vec3\"),u.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(d)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vpos = position;\n        gl_Position = transformPosition(proj, view, vpos);\n      }\n    `),u.include(i,p),u.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        outputHighlight();\n      }\n    `)),u}var u=Object.freeze({__proto__:null,build:p});export{u as W,p as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(4)}function r(n){const r=new Float32Array(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function t(n,r,t,a){const e=new Float32Array(4);return e[0]=n,e[1]=r,e[2]=t,e[3]=a,e}function a(n,r){return new Float32Array(n,r,4)}function e(){return n()}function u(){return t(1,1,1,1)}function o(){return t(1,0,0,0)}function s(){return t(0,1,0,0)}function c(){return t(0,0,1,0)}function i(){return t(0,0,0,1)}const f=e(),l=u(),_=o(),w=s(),N=c(),U=i();var y=Object.freeze({__proto__:null,create:n,clone:r,fromValues:t,createView:a,zeros:e,ones:u,unitX:o,unitY:s,unitZ:c,unitW:i,ZEROS:f,ONES:l,UNIT_X:_,UNIT_Y:w,UNIT_Z:N,UNIT_W:U});export{l as O,_ as U,f as Z,r as a,a as b,n as c,s as d,c as e,t as f,i as g,w as h,N as i,U as j,u as o,o as u,y as v,e as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../Point.js\";import n from\"../Extent.js\";import t from\"../Multipoint.js\";import o from\"../Polygon.js\";import i from\"../Polyline.js\";const r={convertToGEGeometry:s,exportPoint:a,exportPolygon:c,exportPolyline:h,exportMultipoint:m,exportExtent:x};function s(e,n){if(null==n)return null;let t=\"cache\"in n?n.cache._geVersion:void 0;return null==t&&(t=e.convertJSONToGeometry(n),\"cache\"in n&&(n.cache._geVersion=t)),t}function a(n,t,o){const i=n.hasZ(t),r=n.hasM(t),s=new e({x:n.getPointX(t),y:n.getPointY(t),spatialReference:o});return i&&(s.z=n.getPointZ(t)),r&&(s.m=n.getPointM(t)),s.cache._geVersion=t,s}function c(e,n,t){const i=new o({rings:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return i.cache._geVersion=n,i}function h(e,n,t){const o=new i({paths:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return o.cache._geVersion=n,o}function m(e,n,o){const i=new t({hasZ:e.hasZ(n),hasM:e.hasM(n),points:e.exportPoints(n),spatialReference:o});return i.cache._geVersion=n,i}function x(e,t,o){const i=e.hasZ(t),r=e.hasM(t),s=new n({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:o});if(i){const n=e.getZExtent(t);s.zmin=n.vmin,s.zmax=n.vmax}if(r){const n=e.getMExtent(t);s.mmin=n.vmin,s.mmax=n.vmax}return s.cache._geVersion=t,s}export{r as hydratedAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{a as n}from\"../chunks/geometryEngineBase.js\";import{hydratedAdapter as e}from\"./geometryAdapters/hydrated.js\";function r(n){return Array.isArray(n)?n[0].spatialReference:n&&n.spatialReference}function t(e){return n.extendedSpatialReferenceInfo(e)}function u(t,u){return n.clip(e,r(t),t,u)}function i(t,u){return n.cut(e,r(t),t,u)}function o(t,u){return n.contains(e,r(t),t,u)}function c(t,u){return n.crosses(e,r(t),t,u)}function f(t,u,i){return n.distance(e,r(t),t,u,i)}function l(t,u){return n.equals(e,r(t),t,u)}function a(t,u){return n.intersects(e,r(t),t,u)}function s(t,u){return n.touches(e,r(t),t,u)}function p(t,u){return n.within(e,r(t),t,u)}function g(t,u){return n.disjoint(e,r(t),t,u)}function m(t,u){return n.overlaps(e,r(t),t,u)}function d(t,u,i){return n.relate(e,r(t),t,u,i)}function x(t){return n.isSimple(e,r(t),t)}function w(t){return n.simplify(e,r(t),t)}function E(t,u=!1){return n.convexHull(e,r(t),t,u)}function h(t,u){return n.difference(e,r(t),t,u)}function A(t,u){return n.symmetricDifference(e,r(t),t,u)}function y(t,u){return n.intersect(e,r(t),t,u)}function R(t,u=null){return n.union(e,r(t),t,u)}function I(t,u,i,o,c,f){return n.offset(e,r(t),t,u,i,o,c,f)}function v(t,u,i,o=!1){return n.buffer(e,r(t),t,u,i,o)}function S(t,u,i,o,c,f){return n.geodesicBuffer(e,r(t),t,u,i,o,c,f)}function j(t,u,i=!0){return n.nearestCoordinate(e,r(t),t,u,i)}function J(t,u){return n.nearestVertex(e,r(t),t,u)}function N(t,u,i,o){return n.nearestVertices(e,r(t),t,u,i,o)}function O(n){return\"xmin\"in n?\"center\"in n?n.center:null:\"x\"in n?n:\"extent\"in n?n.extent.center:null}function V(e,r,t){var u;if(null==e)throw new Error(\"Illegal Argument Exception\");const i=e.spatialReference;if(null==(t=null!=(u=t)?u:O(e)))throw new Error(\"Illegal Argument Exception\");const o=e.constructor.fromJSON(n.rotate(e,r,t));return o.spatialReference=i,o}function z(e,r){var t;if(null==e)throw new Error(\"Illegal Argument Exception\");const u=e.spatialReference;if(null==(r=null!=(t=r)?t:O(e)))throw new Error(\"Illegal Argument Exception\");const i=e.constructor.fromJSON(n.flipHorizontal(e,r));return i.spatialReference=u,i}function B(e,r){var t;if(null==e)throw new Error(\"Illegal Argument Exception\");const u=e.spatialReference;if(null==(r=null!=(t=r)?t:O(e)))throw new Error(\"Illegal Argument Exception\");const i=e.constructor.fromJSON(n.flipVertical(e,r));return i.spatialReference=u,i}function D(t,u,i,o){return n.generalize(e,r(t),t,u,i,o)}function H(t,u,i){return n.densify(e,r(t),t,u,i)}function L(t,u,i,o=0){return n.geodesicDensify(e,r(t),t,u,i,o)}function b(t,u){return n.planarArea(e,r(t),t,u)}function k(t,u){return n.planarLength(e,r(t),t,u)}function q(t,u,i){return n.geodesicArea(e,r(t),t,u,i)}function C(t,u,i){return n.geodesicLength(e,r(t),t,u,i)}export{v as buffer,u as clip,o as contains,E as convexHull,c as crosses,i as cut,H as densify,h as difference,g as disjoint,f as distance,l as equals,t as extendedSpatialReferenceInfo,z as flipHorizontal,B as flipVertical,D as generalize,q as geodesicArea,S as geodesicBuffer,L as geodesicDensify,C as geodesicLength,y as intersect,a as intersects,x as isSimple,j as nearestCoordinate,J as nearestVertex,N as nearestVertices,I as offset,m as overlaps,b as planarArea,k as planarLength,d as relate,V as rotate,w as simplify,A as symmetricDifference,s as touches,R as union,p as within};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){const u=n.byteLength/(4*f),c=new Uint32Array(n,0,u*f);let s=new Uint32Array(u);const a=i&&i.minReduction||0,h=i&&i.originalIndices||null,g=i&&i.componentOffsets||null;let y=0;if(g)for(let t=0;t<g.length-1;t++){const n=g[t+1]-g[t];n>y&&(y=n)}else y=u;const U=Math.floor(1.1*y)+1;(null==o||o.length<2*U)&&(o=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)o[t]=0;let w=0;const A=!!g&&!!h,m=A?h.length:u,b=A?new Uint32Array(h.length):null,d=1.96;let p=0!==a?Math.ceil(4*d*d/(a*a)*a*(1-a)):m,M=1,q=g?g[1]:m;for(let t=0;t<m;t++){if(t===p){const n=1-w/t;if(n+d*Math.sqrt(n*(1-n)/t)<a)return null;p*=2}if(t===q){for(let t=0;t<2*U;t++)o[t]=0;if(h)for(let t=g[M-1];t<g[M];t++)b[t]=s[h[t]];q=g[++M]}const n=A?h[t]:t,r=n*f,i=l(c,r,f);let u=i%U,y=w;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(c,r,t*f,f)){y=s[t];break}}u++,u>=U&&(u-=U)}y===w&&(o[2*u]=i,o[2*u+1]=n+1,w++),s[n]=y}if(0!==a&&1-w/u<a)return null;if(A){for(let t=g[M-1];t<b.length;t++)b[t]=s[h[t]];s=b}const x=new Uint32Array(f*w);w=0;for(let t=0;t<m;t++)if(s[t]===w){r(c,(A?h[t]:t)*f,x,w*f,f),w++}if(h&&!A){const t=new Uint32Array(h.length);for(let n=0;n<t.length;n++)t[n]=s[h[n]];s=t}return{buffer:x.buffer,indices:s,uniqueCount:w}}function e(t,n,e,r){for(let l=0;l<r;l++)if(t[n+l]!==t[e+l])return!1;return!0}function r(t,n,e,r,l){for(let o=0;o<l;o++)e[r+o]=t[n+o]}function l(t,n,e){let r=0;for(let l=0;l<e;l++)r=t[n+l]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let o=null;export default n;export{n as deduplicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{Z as r,c as s}from\"../../../../chunks/vec3f64.js\";import{s as i}from\"../../../../chunks/vec3.js\";import{i as o,t as n}from\"../../../../chunks/mat4.js\";import{c as l}from\"../../../../chunks/mat4f64.js\";import{g as a,c as h}from\"../../../../chunks/vec4.js\";import{RibbonLineMaterial as p}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createGeometry as d}from\"../../layers/graphics/lineUtils.js\";import{f,c as _,a as c}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as m}from\"./Object3DVisualElement.js\";class u extends m{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=f(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,r=s(),o=s(),n=100,l=[];i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),this.geometry=[l]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;o(g),n(g,g,t),this.transform=g;const{points:r}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[r]}setGeometryFromSegments(e,t=r){o(g),n(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){a(e,this._color)||(h(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&a(r,this._innerColor)||(this._innerColor=h(_(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!a(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?c(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new p(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=d(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=l();export{u as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{e as r}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{Object3D as i}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as o}from\"../../webgl-engine/lib/WebGLLayer.js\";import{VisualElement as a}from\"./VisualElement.js\";class c extends a{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new o({isPickable:!1});e.add(s);const r=new i({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),e.processDirtyLayer(s.id),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{c as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../core/compilerUtils.js\";import{unwrapOr as t}from\"../../../../core/maybe.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import{e as o}from\"../../../../chunks/mat4.js\";import{projectBuffer as r,computeLinearTransformation as i}from\"../../../../geometry/projection.js\";import{c as s}from\"../../../../chunks/mat4f64.js\";import{isDehydratedPoint as a}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{isSamplePosition as l,getElevationAtPoint as c}from\"../../support/ElevationProvider.js\";import{updateVertexAttributeAuxpos1w as u}from\"./graphicUtils.js\";function f(e,t,n,o,i,s,a,l,c,u,f){const m=j[f.mode];let p,d,g=0;if(r(e,t,n,o,c.spatialReference,i,l))return m.requiresAlignment(f)?(g=m.applyElevationAlignmentBuffer(o,i,s,a,l,c,u,f),p=s,d=a):(p=o,d=i),r(p,c.spatialReference,d,s,u.spatialReference,a,l)?g:void 0}function m(n,o,r,i,s){const u=(a(n)?n.z:l(n)?n.array[n.offset+2]:n[2])||0;switch(r.mode){case\"on-the-ground\":{const e=t(c(o,n,\"ground\"),0);return s&&(s.verticalDistanceToGround=0,s.sampledElevation=e),e}case\"relative-to-ground\":{const e=t(c(o,n,\"ground\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"relative-to-scene\":{const e=t(c(o,n,\"scene\"),0),a=r.geometryZWithOffset(u,i);return s&&(s.verticalDistanceToGround=a,s.sampledElevation=e),a+e}case\"absolute-height\":{const e=r.geometryZWithOffset(u,i);if(s){const r=t(c(o,n,\"ground\"),0);s.verticalDistanceToGround=e-r,s.sampledElevation=r}return e}default:return e(r.mode),0}}function p(e,t,n){return null==t||null==n?e.definedChanged:\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?T.UPDATE:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function g(e){return\"absolute-height\"!==e}function v(e,t,n,r,s){const a=m(t,n,s,r,O);u(e,O.verticalDistanceToGround);const l=O.sampledElevation,c=o(x,e.transformation);C[0]=t.x,C[1]=t.y,C[2]=a;return i(t.spatialReference,C,c,r.spatialReference)?e.transformation=c:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),l}function E(e,n,o,r,i,s){let a=0;const l=s.spatialReference;n*=3,r*=3;for(let c=0;c<i;++c){const i=e[n+0],c=e[n+1],u=e[n+2],f=t(s.getElevation(i,c,u,l,\"ground\"),0);a+=f,o[r+0]=i,o[r+1]=c,o[r+2]=f,n+=3,r+=3}return a/i}function h(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"ground\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function y(e,n,o,r,i,s,a,l){let c=0;const u=l.calculateOffsetRenderUnits(a),f=l.featureExpressionInfoContext,m=s.spatialReference;n*=3,r*=3;for(let p=0;p<i;++p){const i=e[n+0],a=e[n+1],l=e[n+2],p=t(s.getElevation(i,a,l,m,\"scene\"),0);c+=p,o[r+0]=i,o[r+1]=a,o[r+2]=null==f?l+p+u:p+u,n+=3,r+=3}return c/i}function A(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function R(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,o*=3;for(let u=0;u<r;++u){const r=e[t+0],i=e[t+1],s=e[t+2];n[o+0]=r,n[o+1]=i,n[o+2]=null==c?s+l:l,t+=3,o+=3}return 0}var T;!function(e){e[e.NONE=0]=\"NONE\",e[e.UPDATE=1]=\"UPDATE\",e[e.RECREATE=2]=\"RECREATE\"}(T||(T={}));const j={\"absolute-height\":{applyElevationAlignmentBuffer:R,requiresAlignment:A},\"on-the-ground\":{applyElevationAlignmentBuffer:E,requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:y,requiresAlignment:()=>!0}},x=s(),O={verticalDistanceToGround:0,sampledElevation:0},C=n();export{T as SymbolUpdateType,v as applyElevationAlignmentForHUD,f as applyPerVertexElevationAlignment,p as elevationModeChangeUpdateType,m as evaluateElevationAlignmentAtPoint,d as needsElevationUpdates2D,g as needsElevationUpdates3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isClockwise as n}from\"./coordsUtils.js\";import{earcut as t}from\"../../core/libs/earcut/earcut.js\";import{deduplicate as e}from\"./meshUtils/deduplicate.js\";function o(n){const o=l(n.rings,n.hasZ,1),s=[];let i=0,c=0;for(const e of o.polygons){const n=e.count,r=e.index,l=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*n),h=e.holeIndices.map((n=>n-r)),f=new Uint32Array(t(l,h,3));s.push({position:l,faces:f}),i+=l.length,c+=f.length}const h=r(s,i,c),f=e(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(f.buffer),h.faces=f.indices,h}function r(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const c of n){for(let n=0;n<c.position.length;n++)o[l++]=c.position[n];for(let n=0;n<c.faces.length;n++)r[s++]=c.faces[n]+i;i=l/3}return{position:o,faces:r}}function l(n,t,e){const o=n.length,r=new Array(o),l=new Array(o),c=new Array(o);let h=0,f=0,g=0,a=0;for(let s=0;s<o;++s)a+=n[s].length;const u=new Float64Array(3*a);let p=0;for(let d=o-1;d>=0;d--){const a=n[d],y=1===e&&i(a);if(y&&1!==o)r[h++]=a;else{let n=a.length;for(let t=0;t<h;++t)n+=r[t].length;const e={index:p,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=a.length,a.length>0&&(c[g++]={index:p,count:a.length}),p=y?s(a,a.length-1,-1,u,p,a.length,t):s(a,0,1,u,p,a.length,t);for(let o=0;o<h;++o){const n=r[o];e.holeIndices[o]=p,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}h=0,e.count>0&&(l[f++]=e)}}for(let i=0;i<h;++i){const n=r[i];n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}return f<o&&(l.length=f),g<o&&(c.length=g),{position:u,polygons:l,outlines:c}}function s(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}function i(t){return!n(t,!1,!1)}export{l as pathsToTriangulationInfo,o as triangulate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as s,f as t}from\"../../../../chunks/vec3f64.js\";class i{constructor(i=s(),c=t(.57735,.57735,.57735),n=!0){this.intensity=i,this.direction=c,this.castShadows=n}}class c{constructor(i=s(),c=t(.57735,.57735,.57735)){this.intensity=s(),this.direction=s(),this.intensity=i,this.direction=c}}class n{constructor(t=s()){this.intensity=t}}class o{constructor(){this.sh={r:[0],g:[0],b:[0]}}}export{n as AmbientLight,c as FillLight,i as MainLight,o as SphericalHarmonicsLight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import\"../../../core/mathUtils.js\";import{generateUID as e}from\"../../../core/uid.js\";import\"../../../chunks/builtins.js\";import{getGpuMemoryUsage as r}from\"../../webgl/Util.js\";import t from\"../../webgl/FramebufferObject.js\";class i{constructor(r,i){this.id=e(),this._renderTarget=null,this._renderTarget=new t(r,{colorTarget:0,depthStencilTarget:0},{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9987,hasMipmap:i,maxAnisotropy:8,width:0,height:0})}dispose(){this._renderTarget.dispose(),this._renderTarget=null}getTexture(){return this._renderTarget?this._renderTarget.colorTexture:null}isValid(){return null!==this._renderTarget}resize(e,r){this._renderTarget.resize(e,r)}bind(e){e.bindFramebuffer(this._renderTarget)}generateMipMap(){this._renderTarget.colorTexture.descriptor.hasMipmap&&this._renderTarget.colorTexture.generateMipmap()}disposeRenderTargetMemory(){this._renderTarget&&this._renderTarget.resize(0,0)}getGpuMemoryUsage(){let e=0;return this._renderTarget&&(e+=r(this._renderTarget)),e}}export{i as OverlayRenderTarget};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{a as n,f as t}from\"../../../../chunks/vec3f64.js\";class r{constructor(n,t){this.vec3=n,this.id=t}}function s(t,s){return new r(n(t),s)}function c(n,s,c,e){return new r(t(n,s,c),e)}export{r as LocalOrigin,c as fromValues,s as fromVector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{OverlayRenderTarget as r}from\"./OverlayRenderTarget.js\";import{fromValues as t}from\"../webgl-engine/lib/localOrigin.js\";class s{constructor(s){this.extent=e(),this.resolution=0,this.renderLocalOrigin=t(0,0,0,\"O\"),this.pixelRatio=1,this.renderTargets={color:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},colorWithoutRasterImage:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},highlight:{fbo:new r(s,!1),valid:!1,lastUsed:1/0},water:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},occluded:{fbo:new r(s,!0),valid:!1,lastUsed:1/0}}}dispose(){this.renderTargets.color.fbo.dispose(),this.renderTargets.colorWithoutRasterImage.fbo.dispose(),this.renderTargets.highlight.fbo.dispose(),this.renderTargets.water.fbo.dispose(),this.renderTargets.occluded.fbo.dispose()}drawRenderTargets(e,r,t){const s=this.renderTargets;s.color.valid=e.drawPass(0,s.color.fbo,r),s.highlight.valid=e.drawPass(5,s.highlight.fbo,r),s.water.valid=e.drawPass(3,s.water.fbo,r),s.occluded.valid=e.drawPass(0,s.occluded.fbo,r,1),s.colorWithoutRasterImage.valid=t&&e.drawPass(0,s.colorWithoutRasterImage.fbo,r,2)}computeRenderTargetValidityBitfield(){const e=this.renderTargets;return+e.color.valid|+e.colorWithoutRasterImage.valid<<1|+e.highlight.valid<<2|+e.water.valid<<3|+e.occluded.valid<<4}validateUsage(e,r){if(e.valid)e.lastUsed=r;else if(r-e.lastUsed>a)e.fbo.disposeRenderTargetMemory(),e.lastUsed=1/0;else if(e.lastUsed<1/0)return!0;return!1}collectUnusedMemory(e){let r=!1;return r=this.validateUsage(this.renderTargets.color,e)||r,r=this.validateUsage(this.renderTargets.colorWithoutRasterImage,e)||r,r=this.validateUsage(this.renderTargets.highlight,e)||r,r=this.validateUsage(this.renderTargets.occluded,e)||r,r=this.validateUsage(this.renderTargets.water,e)||r,r}getGpuMemoryUsage(){return this.renderTargets.color.fbo.getGpuMemoryUsage()+this.renderTargets.colorWithoutRasterImage.fbo.getGpuMemoryUsage()+this.renderTargets.highlight.fbo.getGpuMemoryUsage()+this.renderTargets.water.fbo.getGpuMemoryUsage()+this.renderTargets.occluded.fbo.getGpuMemoryUsage()}}const a=1e3;export{s as Overlay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{removeUnordered as r}from\"../../../../../core/arrayUtils.js\";class s{constructor(){this._uniforms={proj:[],uShadowMapDistance:[],viewportPixelSz:[],lightingMainDirection:[]}}dispose(){this._uniforms=null}getPrograms(r){return this._uniforms[r]||[]}subscribeProgram(r){for(const s in this._uniforms)r.hasUniform(s)&&this._uniforms[s].push(r)}unsubscribeProgram(s){for(const i in this._uniforms)r(this._uniforms[i],s)}}export{s as CommonUniformStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";class t{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}class r{constructor(e){this._context=e,this._perConstructorInstances=new Map,this._frameCounter=0,this._keepAliveFrameCount=1200}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}dispose(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.dispose())))),this._perConstructorInstances.clear()}acquire(e,r){const s=r.key;let n=this._perConstructorInstances.get(e);n||(n=new Map,this._perConstructorInstances.set(e,n));let o=n.get(s);return void 0===o&&(o=new t(new e(this._context,r)),n.set(s,o)),++o.refCount,o.technique}acquireAndReleaseExisting(t,r,s){return e(s)?this.acquire(t,r):r.key===s.key&&s instanceof t?s:(this.release(s),this.acquire(t,r))}release(t){if(e(t))return;const r=this._perConstructorInstances.get(t.constructor).get(t.key);r.refCount-=1,0===r.refCount&&(r.refZeroFrame=this._frameCounter)}frameUpdate(){this._frameCounter++,this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((t,r)=>{0===t.refCount&&t.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(t.technique.dispose(),e.delete(r))})),0===e.size&&this._perConstructorInstances.delete(t)}))}getProgramsUsingUniform(e){return this._context.commonUniformStore.getPrograms(e)}async hotReload(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{const s=async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>{e.technique.reload(this._context)})))};e.push(s(t,r))})),await Promise.all(e)}}export{r as ShaderTechniqueRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=[{output:0,name:\"color\"},{output:1,name:\"depth\"},{output:2,name:\"normal\"},{output:3,name:\"depthShadowMap\"},{output:4,name:\"highlight\"},{output:5,name:\"draped\"},{output:6,name:\"occlusion\"},{output:7,name:\"alpha\"}];function u(u,o){return u+\"_\"+t.find((t=>t.output===o)).name}export{t as ShaderOutputTypes,u as getShaderOutputID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{assert as i}from\"./Util.js\";import{getShaderOutputID as r,ShaderOutputTypes as a}from\"../core/shaderLibrary/ShaderOutputOptions.js\";const s=t.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRep\");class o{constructor(e){this.refCnt=0,this.glMaterial=e}incRefCnt(){++this.refCnt}decRefCnt(){--this.refCnt,i(this.refCnt>=0)}getRefCnt(){return this.refCnt}getGLMaterial(){return this.glMaterial}}class n{constructor(e,t,i){this._textureRep=e,this._techniqueRep=t,this.onMaterialChanged=i,this._id2glMaterialRef=new Map}dispose(){this._textureRep.dispose()}acquire(e,t){this.ownMaterial(e);const i=r(e.id,t);let a=this._id2glMaterialRef.get(i);if(null==a){const r=e.getGLMaterial({material:e,techniqueRep:this._techniqueRep,textureRep:this._textureRep,output:t});return a=new o(r),a.incRefCnt(),this._id2glMaterialRef.set(i,a),r}return a.incRefCnt(),a.getGLMaterial()}release(e,t){const i=r(e.id,t),a=this._id2glMaterialRef.get(i);if(a.decRefCnt(),0===a.getRefCnt()){const e=a.getGLMaterial();e&&e.dispose(),this._id2glMaterialRef.delete(i)}}materialChanged(e){for(const t of a)if(5!==t.output&&6!==t.output){const i=this._id2glMaterialRef.get(r(e.id,t.output));if(i&&i.getGLMaterial()){const e=i.getGLMaterial();e.updateParameters&&e.updateParameters()}}this.onMaterialChanged&&this.onMaterialChanged(e)}ownMaterial(t){e(t.materialRepository)&&t.materialRepository!==this&&s.error(\"Material is already owned by a different material repository\"),t.materialRepository=this}}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import i from\"../../../../geometry/SpatialReference.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{f as r}from\"../../../../chunks/vec3.js\";import{projectBuffer as o}from\"../../../../geometry/projection.js\";import{I as e}from\"../../../../chunks/mat4f64.js\";import{Object3D as n}from\"./Object3D.js\";import{Geometry as a}from\"./Geometry.js\";import{fromValues as h}from\"./localOrigin.js\";import{WebGLLayer as c}from\"./WebGLLayer.js\";import{RibbonLineMaterial as m}from\"../materials/RibbonLineMaterial.js\";let _=0;const d=\"rg_\";class g{constructor(){this.ROOT_ORIGIN_ID=d+\"root_\"+_++,this._origins=new Map,this._gridSize=42e5}getOrigin(i){const s=this._origins.get(this.ROOT_ORIGIN_ID);if(null==s){if(t(g.testOrigin)){const t=g.testOrigin;return this._origins.set(this.ROOT_ORIGIN_ID,h(t[0],t[1],t[2],this.ROOT_ORIGIN_ID)),this.getOrigin(i)}const s=h(i[0]+Math.random()-.5,i[1]+Math.random()-.5,i[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);return this._origins.set(this.ROOT_ORIGIN_ID,s),s}r(l,i,s.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]);const o=this._gridSize;if(l[0]<o&&l[1]<o&&l[2]<o)return s;const e=Math.round(i[0]/o),n=Math.round(i[1]/o),a=Math.round(i[2]/o),c=`${d}${e}/${n}/${a}`;let m=this._origins.get(c);return m||(m=h(e*o,n*o,a*o,c),this._origins.set(c,m)),m}_drawOriginBox(t){const s=window.view,r=s._stage;if(null==this._object){this._material=new m({width:2,color:[0,1,0,1]}),r.add(this._material);const t=new c({isPickable:!1});this._object=new n({castShadow:!1}),r.add(this._object),t.add(this._object),r.add(t)}const h=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],_=h.length,d=new Array(3*_),g=new Uint16Array(2*(_-1)),l=.5*this._gridSize;for(let i=0;i<_;i++)d[3*i+0]=t[0]+(1&h[i]?l:-l),d[3*i+1]=t[1]+(2&h[i]?l:-l),d[3*i+2]=t[2]+(4&h[i]?l:-l),i>0&&(g[2*i+0]=i-1,g[2*i+1]=i);o(d,i.WebMercator,0,d,s.spatialReference,0,_);const O=new a([[\"position\",{size:3,data:d,exclusive:!0}]],[[\"position\",g]],2);r.add(O),this._object.addGeometry(O,this._material,e),console.log(this._origins.size,t)}}const l=s();!function(t){t.testOrigin=null}(g||(g={}));var O=g;export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport s from\"./Camera.js\";class e{constructor(e,i,h,r,a,l){this.rctx=e,this.offscreenRenderingHelper=i,this.scenelightingData=h,this.shadowMap=r,this.ssaoHelper=a,this.sliceHelper=l,this.camera=null,this.lastFrameCamera=new s,this.pass=0,this.slot=0,this.highlightDepthTexture=null,this.renderOccludedMask=t,this.hasOccludees=!1}resetRenderOccludedMask(){this.renderOccludedMask=t}get isHighlightPass(){return 5===this.pass}}const t=13;export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";class r{constructor(){this.adds=new e,this.removes=new e,this.updates=new e({allocator:e=>e||new s,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}}class s{}class t{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}export{r as ChangeSet,t as MaterialChangeSet,s as RenderGeometryUpdate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{MaterialChangeSet as e}from\"./ChangeSet.js\";function r(r){const n=new Map,a=r=>{let t=n.get(r);return t||(t=new e,n.set(r,t)),t};return r.adds.forAll((e=>{t(e)&&a(e.material).adds.push(e)})),r.removes.forAll((e=>{t(e)&&a(e.material).removes.push(e)})),r.updates.forAll((e=>{t(e.renderGeometry)&&a(e.renderGeometry.material).updates.push(e)})),n}function t(e){return e.data.indexCount>=1}export{r as splitRenderGeometryChangeSetByMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as r}from\"../../../../core/mathUtils.js\";class t{constructor(t){null==t?t=16:t<65536&&(t=r(t)),this._array=new Float32Array(t),this._size=0}resize(r,t){if(this._size=r,this._size>this._array.length){let r=this._array.length||1;for(;r<this._size;)r*=2;const s=new Float32Array(r);return t&&s.set(this._array),this._array=s,!0}const s=2*this._size;if(s<=this._array.length){let r=this._array.length;for(;r>=s;)r=Math.floor(r/2);const a=new Float32Array(r);return t&&a.set(this._array.subarray(0,r)),this._array=a,!0}return!1}append(r){const t=this._size;this.resize(this._size+r.length,!0),this._array.set(r,t)}erase(r,t){for(let s=r;s<t;++s)this._array[s]=0}get array(){return this._array}get size(){return this._size}}export{t as ResizableFloat32Array};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,defaultDepthWriteParams as p,defaultColorWriteParams as u}from\"../../../webgl/renderState.js\";import{View as h}from\"../core/shaderLibrary/util/View.glsl.js\";import{DefaultTextureUnits as l}from\"../lib/DefaultTextureUnits.js\";import{Slice as d}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as c}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{blendingDefault as m,OITBlending as g,OITDepthTest as f,OITDepthWrite as b,getOITPolygonOffset as y}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as w}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ReadShadowMap as T}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{ScreenSpaceReflections as v}from\"../core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js\";import{WaterDistortion as S}from\"../core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{W as j}from\"../../../../chunks/WaterSurface.glsl.js\";class x extends t{constructor(r,e){super(r,e),this.waterTextureRepository=r.waterTextureRepository}initializeProgram(r){const e=x.shader.get(),t=this.configuration,i=e.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:r.viewingMode,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,receiveShadows:t.receiveShadows,pbrMode:3,useCustomDTRExponentForWater:!0,ssrEnabled:t.useSSR,highStepCount:!0,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new a(r.rctx,i.generateSource(\"vertex\"),i.generateSource(\"fragment\"),s)}ensureResource(r){return this.waterTextureRepository.ready||this.waterTextureRepository.updating||this.waterTextureRepository.loadTextures(r),this.waterTextureRepository.ready?2:1}bindPass(r,e,t){h.bindProjectionMatrix(this.program,t.camera.projectionMatrix),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),this.program.setUniform2fv(\"viewportDim\",[r.getViewport().width,r.getViewport().height]),w(this.program,r,t)),0===this.configuration.output&&(t.lighting.setUniforms(this.program,!1),v.bindUniforms(this.program,r,t)),0!==this.configuration.output&&2!==this.configuration.output||(S.bindUniforms(this.program,e),this.waterTextureRepository.bindRepo(r)),this.program.setUniform4fv(\"waterColor\",e.color),4===this.configuration.output&&c.bindOutputHighlight(r,this.program,t)}bindDraw(r){h.bindView(this.program,r),0!==this.configuration.output&&7!==this.configuration.output||h.bindCamPosition(this.program,r.origin,r.camera.viewInverseTransposeMatrix),0===this.configuration.output&&T.bindUniforms(this.program,r,l.SHADOW_MAP),0!==this.configuration.output&&7!==this.configuration.output&&4!==this.configuration.output||d.bindUniformsWithOrigin(this.program,this.configuration,r)}setPipelineState(r){const e=this.configuration,t=3===r,i=2===r;return n({blending:2!==e.output&&4!==e.output&&e.transparent?t?m:g(r):null,depthTest:{func:f(r)},depthWrite:t?e.writeDepth&&p:b(r),colorWrite:u,polygonOffset:t||i?null:y(e.enableOffset)})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}x.shader=new e(j,(()=>import(\"../shaders/WaterSurface.glsl.js\")));class P extends i{constructor(){super(...arguments),this.output=0,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.useSSR=!1,this.isDraped=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}r([o({count:8})],P.prototype,\"output\",void 0),r([o()],P.prototype,\"receiveShadows\",void 0),r([o()],P.prototype,\"slicePlaneEnabled\",void 0),r([o()],P.prototype,\"transparent\",void 0),r([o()],P.prototype,\"enableOffset\",void 0),r([o()],P.prototype,\"writeDepth\",void 0),r([o()],P.prototype,\"useSSR\",void 0),r([o()],P.prototype,\"isDraped\",void 0),r([o({count:4})],P.prototype,\"transparencyPassType\",void 0),r([o()],P.prototype,\"multipassTerrainEnabled\",void 0),r([o()],P.prototype,\"cullAboveGround\",void 0);export{x as WaterTechnique,P as WaterTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../lib/GLMaterial.js\";import{WaterTechnique as e}from\"./WaterTechnique.js\";class a extends t{constructor(t){super(t),this.updateParameters()}updateParameters(t){this.technique=this.techniqueRep.acquireAndReleaseExisting(e,this.material.getTechniqueConfig(this.output,t),this.technique)}beginSlot(t){if(2===this.output)return 22===t;if(5===this.output)return null==t;if(4===this.output)return 3===t;let e=3;return this.material.params.transparent&&(e=this.material.params.writeDepth?5:8),t===e}setElapsedTimeUniform(t){const e=.001*this.material.animation.time;t.setUniform1f(\"timeElapsed\",e*this.material.params.animationSpeed)}_updateShadowState(t){t.shadowMappingEnabled!==this.material.params.receiveShadows&&this.material.setParameterValues({receiveShadows:t.shadowMappingEnabled})}_updateSSRState(t){t.ssrEnabled!==this.material.params.ssrEnabled&&this.material.setParameterValues({ssrEnabled:t.ssrEnabled})}ensureResources(t){return this.technique.ensureResource(t)}ensureParameters(t){0===this.output&&(this._updateShadowState(t),this._updateSSRState(t)),this.updateParameters(t)}bind(t,e){t.bindProgram(this.technique.program),this.technique.bindPass(t,this.material.params,e),2!==this.output&&0!==this.output||this.setElapsedTimeUniform(this.technique.program)}}export{a as WaterGLMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as t,d as o}from\"../../../../../chunks/mat4.js\";import{a as r}from\"../../../../../chunks/mat4f64.js\";class s{constructor(s,i,n,f,m,a){this.from=s,this.to=i,this.isVisible=n,this.hasHighlights=f,this.hasOccludees=m,this.transformation=a,null!=a&&(this.transformationNormal=r(a),t(this.transformationNormal,this.transformationNormal),o(this.transformationNormal,this.transformationNormal))}}function i(t){return t.sort(((t,o)=>t.from===o.from?t.to>o.to?1:t.to<o.to?-1:0:t.from>o.from?1:t.from<o.from?-1:0))}function n(t,o){return t.first+t.count>=o.from}function f(t,o){const r=t=>({first:t.from,count:t.to-t.from});if(0===t.length)return void t.push(r(o));const s=t[t.length-1];if(n(s,o)){const t=o.from-s.first+o.to-o.from;s.count=t}else t.push(r(o))}export{s as Instance,f as addOrMerge,i as sortInstancesAccordingToRange};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{once as t}from\"../../../../core/accessorSupport/utils.js\";import s from\"../../../../core/PerformanceSampler.js\";import{startMeasurement as r}from\"../../../webgl/Measurement.js\";const i=[\"prepare\",\"shadowmap\",\"lineardepth\",\"normals\",\"ssao\",\"opaque\",\"opaque edges\",\"transparent\",\"transparent edges\",\"hudvisibility\",\"transparent terrain\",\"atmosphere\",\"laserline\",\"occluded\",\"antialiasing\",\"highlights\",\"hudOccluded\",\"hudNotoccluded\"];class a{constructor(){this.triangles=0,this.drawCalls=0}reset(){this.triangles=0,this.drawCalls=0}}function o(t,s,r){e(r)&&(r.drawCalls+=t,r.triangles+=s)}class n extends s{constructor(){super(\"total\"),this.total=0,this.frameCount=0}}class l{constructor(){this._startTime=0,this._lastSample=0,this._enableGPUTimer=0,this.totalTime=new n,this.gpuTime=new s(\"gpu\",9),this.renderPassTimings=i.map((e=>new s(e))),this.stats=new a}enableGPUTimer(){return++this._enableGPUTimer,{remove:t((()=>--this._enableGPUTimer))}}prerender(e){this._startTime=this._lastSample=performance.now(),this._enableGPUTimer&&(this._gpuTimer=r(e))}advance(e){const t=performance.now();this.renderPassTimings[e].record(t-this._lastSample),this._lastSample=t}postrender(){e(this._gpuTimer)&&(this._gpuTimer.stop((t=>e(t)&&this.gpuTime.record(t)),16),this._gpuTimer=null);const t=performance.now()-this._startTime;this.totalTime.record(t),this.totalTime.total+=t,this.totalTime.frameCount++}}export{a as RenderStats,n as RenderTime,l as RendererPerformanceInfo,o as addToRenderStats,i as performanceStatsCategories};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../../core/maybe.js\";import{m as s,c as a,d as i}from\"../../../../../chunks/mat4.js\";import{c as r}from\"../../../../../chunks/mat4f64.js\";import{assert as n,setMatrixTranslation3 as o}from\"../../lib/Util.js\";import{acquireMaterials as d,releaseMaterials as l,calculateTransformRelToOrigin as h}from\"./utils.js\";import{someMap as m}from\"../../../../../core/MapUtils.js\";import{glLayout as c}from\"../../../support/buffer/glUtil.js\";import u from\"../../../../webgl/BufferObject.js\";import{getStride as g}from\"../../../../webgl/Util.js\";import f from\"../../../../webgl/VertexArrayObject.js\";import{ResizableFloat32Array as p}from\"../../lib/ResizableFloat32Array.js\";import{WaterGLMaterial as w}from\"../WaterGLMaterial.js\";import{Instance as b,sortInstancesAccordingToRange as C,addOrMerge as y}from\"./Instance.js\";import{addToRenderStats as _}from\"../../statistics/RendererPerformanceInfo.js\";class v{constructor(e,t,s){this.type=\"MergedRenderer\",this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this._rctx=e,this._material=s,this._materialRep=t,this._glMaterials=d(this._material,this._materialRep),this._bufferWriter=s.createBufferWriter()}dispose(){l(this._material,this._materialRep),this._dataByOrigin&&(this._dataByOrigin.forEach((e=>{e.vao.dispose(!0),e.vao=null})),this._dataByOrigin.clear(),this._dataByOrigin=null),this._glMaterials&&(this._glMaterials.forEach((e=>{e&&e.dispose()})),this._glMaterials.clear(),this._glMaterials=null)}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&m(this._glMaterials,(e=>e instanceof w))}get rendersOccluded(){return!this.isEmpty&&1!==this._material.renderOccluded}modify(e){this.updateGeometries(e.updates),this.addAndRemoveGeometries(e.adds,e.removes),this.updateRenderCommands()}addAndRemoveGeometries(e,t){const s=this._bufferWriter,a=s.vertexBufferLayout,i=a.stride/4,r=this._dataByOrigin,d=H(r,s,e,t);d.forEach(((e,t)=>{d.delete(t);const s=e.optimalCount,l=e.sparseCount;let h=r.get(t);if(null==h)n(s>0),h=this.createData(a,s,e.origin),r.set(t,h);else if(0===s)return h.vao.dispose(!0),h.vao=null,void r.delete(t);const m=s<e.sparseCount/2,c=m?s:l,u=R,g=h.buffer.size,f=h.buffer.array,p=h.buffer.resize(c,!1);m||p?this.removeAndRebuild(h,e.toRemove,i,f,u):e.toRemove.length>0?(this.removeByErasing(h,e.toRemove,i,u),e.toAdd.length>0&&(u.end=g)):(u.begin=g,u.end=g);const w=B;o(w,-e.origin[0],-e.origin[1],-e.origin[2]),this.append(h,e.toAdd,i,w,u);const b=h.vao.vertexBuffers.geometry;if(b.byteSize!==h.buffer.array.buffer.byteLength)b.setData(h.buffer.array);else{const{begin:e,end:t}=u;if(e<t){const s=h.buffer.array,a=4,i=e*a,r=t*a;b.setSubData(s,i,i,r)}}h.drawCommandsDirty=!0}))}updateGeometries(e){const t=this._bufferWriter,s=t.vertexBufferLayout.stride/4;for(const a of e){const e=a.updateType,i=a.renderGeometry,r=this._dataByOrigin.get(i.origin.id),o=r&&r.instances.get(i.id);if(!o)return;if(1&e&&(o.isVisible=i.instanceParameters.visible),9&e){const e=i.instanceParameters.visible;o.hasHighlights=!!i.instanceParameters.highlights&&e}if(16&e&&(o.hasOccludees=!!i.instanceParameters.occludees),6&e){const e=r.buffer.array,a=r.vao;h(i,D,j),t.write({transformation:D,invTranspTransformation:j},i.data,t.vertexBufferLayout.createView(e.buffer),o.from),n(o.from+t.elementCount(i.data)===o.to,\"material VBO layout has changed\"),a.vertexBuffers.geometry.setSubData(e,o.from*s*4,o.from*s*4,o.to*s*4)}r.drawCommandsDirty=!0}}updateRenderCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,m(e.instances,(t=>(t.isVisible?(t.hasHighlights&&(this._hasHighlights=!0,e.hasHighlights=!0),t.hasOccludees&&(this._hasOccludees=!0,e.hasOccludees=!0)):e.hasHiddenInstances=!0,e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees)))}));const e=e=>{if(e.drawCommandsDefault=null,e.drawCommandsHighlight=null,e.drawCommandsOccludees=null,e.drawCommandsShadowHighlightRest=null,e.stats={default:0,highlight:0,occludees:0,shadowHighlightRest:0},0===e.instances.size)return;if(!O(e)){const t=4*e.buffer.size/g(e.vao.layout.geometry);return e.drawCommandsDefault=[{first:0,count:t}],void(e.stats={default:t,highlight:0,occludees:0,shadowHighlightRest:0})}const t=C([...e.instances.values()]);e.drawCommandsDefault=[],e.drawCommandsHighlight=[],e.drawCommandsOccludees=[],e.drawCommandsShadowHighlightRest=[];for(const a of t)a.isVisible&&(a.hasOccludees?y(e.drawCommandsOccludees,a):y(e.drawCommandsDefault,a),a.hasHighlights?y(e.drawCommandsHighlight,a):y(e.drawCommandsShadowHighlightRest,a));const s=e=>{let t=0;for(const s of e)t+=s.count;return t/3};e.stats={default:s(e.drawCommandsDefault),highlight:s(e.drawCommandsHighlight),occludees:s(e.drawCommandsOccludees),shadowHighlightRest:s(e.drawCommandsShadowHighlightRest)}};this._dataByOrigin.forEach((t=>{t.drawCommandsDirty&&(e(t),t.drawCommandsDirty=!1)}))}updateLogic(e){return this._material.update(e)}render(s,a,i,r){const n=this._rctx,o=this._glMaterials.get(a.pass),d=5===a.pass||7===a.pass,l=6===a.pass,h=!(d||l);let m=s;if(3===a.pass&&null===m&&(m=22),!o||2!==o.ensureResources(n)||null!=m&&!o.beginSlot(m)||d&&!this._hasHighlights)return!1;o.ensureParameters(i);const c=o.getTechnique(),u=o.getPipelineState(m,!1);n.setPipelineState(u),o.bind(n,i);let g=!1;return this._dataByOrigin.forEach((s=>{if(e(s.drawCommandsDefault)&&e(s.drawCommandsHighlight)&&e(s.drawCommandsOccludees)&&e(s.drawCommandsShadowHighlightRest))return;if(d&&!s.hasHighlights)return;i.origin=s.origin,c.bindDraw(i),c.ensureAttributeLocations(s.vao),n.bindVAO(s.vao);const a=c.primitiveType;let f=d?s.drawCommandsHighlight:l&&O(s)?s.drawCommandsShadowHighlightRest:s.drawCommandsDefault;const p=d?s.stats.highlight:l&&O(s)?s.stats.shadowHighlightRest:s.stats.default;if(t(f)&&(this.renderCommands(n,a,f),_(f.length,p,r),g=!0),h&&(f=s.drawCommandsOccludees,t(f))){const e=o.getPipelineState(m,!0);n.setPipelineState(e),this.renderCommands(n,a,f),n.setPipelineState(u),_(f.length,s.stats.occludees,r),g=!0}})),g}renderCommands(e,t,s){for(let a=0;a<s.length;a++)e.drawArrays(t,s[a].first,s[a].count)}createData(e,t,s){return{instances:new Map,vao:new f(this._rctx,this._material.vertexAttributeLocations,{geometry:c(e)},{geometry:u.createVertex(this._rctx,35044)}),buffer:new p(t),optimalCount:0,origin:s,hasHiddenInstances:!1,hasHighlights:!1,hasOccludees:!1,drawCommandsDirty:!1,drawCommandsDefault:null,drawCommandsOccludees:null,drawCommandsHighlight:null,drawCommandsShadowHighlightRest:null,stats:{default:0,highlight:0,occludees:0,shadowHighlightRest:0}}}removeAndRebuild(e,t,s,a,i){for(const h of t){const t=h.id,a=e.instances.get(t);e.optimalCount-=(a.to-a.from)*s,e.instances.delete(t)}let r=0;const n=e.buffer.array;i.begin=0,i.end=0;let o=-1,d=-1,l=0;e.instances.forEach((e=>{const t=e.from*s,i=e.to*s,h=i-t;o!==d&&d!==t?(n.set(a.subarray(o,d),l),l+=d-o,o=t):-1===o&&(o=t),d=i,e.from=r/s,r+=h,e.to=r/s})),o!==d&&n.set(a.subarray(o,d),l),i.end=r}removeByErasing(e,t,s,a){a.begin=1/0,a.end=-1/0;let i=-1,r=-1;for(const n of t){const t=n.id,o=e.instances.get(t),d=o.from*s,l=o.to*s;i!==r&&r!==d?(e.buffer.erase(i,r),i=d):-1===i&&(i=d),r=l,e.instances.delete(t),e.optimalCount-=l-d,d<a.begin&&(a.begin=d),l>a.end&&(a.end=l)}i!==r&&e.buffer.erase(i,r)}append(e,r,o,d,l){const h=this._bufferWriter;for(const m of r){const r=t(m.transformation)?s(D,d,m.transformation):d;a(j,r),i(j,j);const c=l.end;h.write({transformation:r,invTranspTransformation:j},m.data,h.vertexBufferLayout.createView(e.buffer.array.buffer),l.end/o);const u=h.elementCount(m.data)*o,g=c+u;n(null==e.instances.get(m.id));const f=m.instanceParameters.visible,p=!!m.instanceParameters.highlights&&f,w=!!m.instanceParameters.occludees,C=new b(c/o,g/o,f,p,w);e.instances.set(m.id,C),e.optimalCount+=u,l.end+=u}}get test(){return{material:this._material,glMaterials:this._glMaterials}}}function H(e,t,s,a){const i=new Map,r=t.vertexBufferLayout.stride/4,n=(s,a)=>{const n=s.origin,o=e.get(n.id);let d=i.get(n.id);null==d&&(d={optimalCount:null==o?0:o.optimalCount,sparseCount:null==o?0:o.buffer.size,toAdd:[],toRemove:[],origin:n.vec3},i.set(n.id,d));const l=t.elementCount(s.data)*r;a?(d.optimalCount+=l,d.sparseCount+=l,d.toAdd.push(s)):(d.optimalCount-=l,d.toRemove.push(s))};for(const o of s)n(o,!0);for(const o of a)n(o,!1);return i}function O(e){return e.hasOccludees||e.hasHighlights||e.hasHiddenInstances}const R={begin:0,end:0},B=r(),D=r(),j=r();export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{applySome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/PooledArray.js\";import a from\"../../../../core/Accessor.js\";import{someMap as o}from\"../../../../core/MapUtils.js\";import{materialPredicate as n}from\"./Material.js\";import{ChangeSet as d}from\"./ChangeSet.js\";import{splitRenderGeometryChangeSetByMaterial as h}from\"./rendererUtils.js\";import l from\"../materials/renderers/MergedRenderer.js\";let p=class extends a{constructor(){super(...arguments),this._pendingAddsRemoves=new Map,this._changes=new d,this._materialRenderers=new Map,this._sortedMaterialRenderers=new i,this._hasHighlights=!1,this._hasWater=!1}dispose(){this._changes.prune(),this._materialRenderers&&(this._materialRenderers.forEach((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear())}get updating(){return this._pendingAddsRemoves.size>0||this._changes.updates.length>0}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return o(this._materialRenderers,(e=>e.rendersOccluded))}stopAnimationsAtTime(e){this._sortedMaterialRenderers.forAll((t=>r(t.material.animation,(r=>r.stopAtTime(e)))))}get isEmpty(){return!this.updating&&0===this._materialRenderers.size}commitChanges(){let e=!1;if(!this.updating)return!1;this.updateAddsRemoves();const r=h(this._changes);let t=!1,s=!1;return r.forEach(((r,i)=>{let a=this._materialRenderers.get(i);if(!a&&r.adds.length>0&&(a=new l(this.rctx,this.materialRepository,i),this._materialRenderers.set(i,a),e=!0,t=!0,s=!0),!a)return;const o=t||a.hasHighlights,n=s||a.hasWater;a.modify(r),t=t||o!==a.hasHighlights,s=s||n!==a.hasWater,a.isEmpty&&(this._materialRenderers.delete(i),a.dispose(),e=!0)})),this._changes.clear(),this._pendingAddsRemoves.clear(),e&&this.updateSortedMaterialRenderers(),t&&(this._hasHighlights=o(this._materialRenderers,(e=>e.hasHighlights))),s&&(this._hasWater=o(this._materialRenderers,(e=>e.hasWater))),this.notifyChange(\"updating\"),!0}add(e){if(0===e.length)return;const r=0===this._pendingAddsRemoves.size;for(const t of e)this._pendingAddsRemoves.set(t,0);r&&this.notifyChange(\"updating\")}remove(e){const r=0===this._pendingAddsRemoves.size;for(const t of e){const e=this._pendingAddsRemoves.get(t);0===e?this._pendingAddsRemoves.set(t,2):2!==e&&this._pendingAddsRemoves.set(t,1)}r&&this._pendingAddsRemoves.size>0&&this.notifyChange(\"updating\")}modify(e,r){const t=0===this._changes.updates.length;for(const s of e){const e=this._changes.updates.pushNew();e.renderGeometry=s,e.updateType=r}t&&this._changes.updates.length>0&&this.notifyChange(\"updating\")}updateLogic(e){let r=!1;return this._sortedMaterialRenderers.forAll((({materialRenderer:t})=>{t.updateLogic&&t.updateLogic(e)&&(r=!0)})),r}draw(e,r){for(let t=0;t<this._sortedMaterialRenderers.length;t++){const s=this._sortedMaterialRenderers.data[t];n(s.material,e)&&s.materialRenderer.render(null,e,r,null)}}updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear();let e=0;this._materialRenderers.forEach(((r,t)=>{t.insertOrder=e++,this._sortedMaterialRenderers.push({material:t,materialRenderer:r})})),this._sortedMaterialRenderers.sort(((e,r)=>{const t=r.material.renderPriority-e.material.renderPriority;return 0!==t?t:e.material.insertOrder-r.material.insertOrder}))}updateAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._pendingAddsRemoves.forEach(((e,r)=>{switch(e){case 0:this._changes.adds.push(r);break;case 1:this._changes.removes.push(r)}}));let e=0;for(;e<this._changes.updates.length;){const r=this._changes.updates.data[e].renderGeometry;this._pendingAddsRemoves.has(r)?this._changes.updates.removeUnorderedIndex(e):e++}}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};e([t()],p.prototype,\"rctx\",void 0),e([t()],p.prototype,\"materialRepository\",void 0),e([t()],p.prototype,\"updating\",null),p=e([s(\"esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer\")],p);export{p as SortedRenderGeometryRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"./DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,separateBlendingParams as l,defaultColorWriteParams as h}from\"../../../webgl/renderState.js\";import{T as c}from\"../../../../chunks/TextureOnly.glsl.js\";class u extends t{initializeProgram(e){const r=u.shader.get().build();return new a(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),s)}initializePipeline(){return this.configuration.hasAlpha?n({blending:l(770,1,771,771),colorWrite:h}):n({colorWrite:h})}}u.shader=new r(c,(()=>import(\"../core/shaderLibrary/util/TextureOnly.glsl.js\")));class m extends o{constructor(){super(...arguments),this.hasAlpha=!1}}e([i()],m.prototype,\"hasAlpha\",void 0);export{u as TextureTechnique,m as TextureTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clamp as n}from\"../../../../core/mathUtils.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{m as i,s,g as o}from\"../../../../chunks/vec3.js\";import{MainLight as r,FillLight as e,AmbientLight as c,SphericalHarmonicsLight as a}from\"./Lightsources.js\";import{elementwiseProduct as h,scalarProduct as f,add as m}from\"../lib/LongVectorMath.js\";function u(n){return(n+1)*(n+1)}function l(n){return 2*n+1}function g(t){return n(Math.floor(Math.sqrt(t)-1),0,2)}function p(n,t,i){const s=n[0],o=n[1],r=n[2],e=i||[];return e.length=u(t),t>=0&&(e[0]=.28209479177),t>=1&&(e[1]=.4886025119*s,e[2]=.4886025119*r,e[3]=.4886025119*o),t>=2&&(e[4]=1.09254843059*s*o,e[5]=1.09254843059*o*r,e[6]=.31539156525*(3*r*r-1),e[7]=1.09254843059*s*r,e[8]=.54627421529*(s*s-o*o)),e}function y(n,t){const i=u(n),s=t||{r:[],g:[],b:[]};s.r.length=s.g.length=s.b.length=i;for(let o=0;o<i;o++)s.r[o]=s.g[o]=s.b[o]=0;return s}function b(n,t){const s=g(t.r.length);for(const o of n)i(v,o.direction),p(v,s,P),h(P,w),f(P,o.intensity[0],k),m(t.r,k),f(P,o.intensity[1],k),m(t.g,k),f(P,o.intensity[2],k),m(t.b,k);return t}function H(n,t){p(v,0,P);for(const i of n)t.r[0]+=P[0]*w[0]*i.intensity[0]*4*Math.PI,t.g[0]+=P[0]*w[0]*i.intensity[1]*4*Math.PI,t.b[0]+=P[0]*w[0]*i.intensity[2]*4*Math.PI;return t}function M(n,t,i){y(t,i.sphericalHarmonics.sh),s(i.main.intensity,0,0,0);let h=!1;const f=d,u=j,l=I;f.length=0,u.length=0,l.length=0;for(const s of n)s instanceof r&&!h?(o(i.main.direction,s.direction),i.main.intensity[0]=s.intensity[0],i.main.intensity[1]=s.intensity[1],i.main.intensity[2]=s.intensity[2],i.main.castShadows=s.castShadows,h=!0):s instanceof r||s instanceof e?f.push(s):s instanceof c?u.push(s):s instanceof a&&l.push(s);b(f,i.sphericalHarmonics.sh),H(u,i.sphericalHarmonics.sh);for(const s of l)m(i.sphericalHarmonics.sh.r,s.sh.r),m(i.sphericalHarmonics.sh.g,s.sh.g),m(i.sphericalHarmonics.sh.b,s.sh.b)}const d=[],j=[],I=[],P=[0],k=[0],v=t(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,p as computeCoefficients,y as initSHCoefficients,u as numberOfCoefficients,l as numberOfCoefficientsInBand,g as orderFromNumberOfCoefficients,H as projectAmbientLights,b as projectFillLights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as i,f as t}from\"../../../../chunks/vec3f64.js\";import{m as n,g as r,a as s,b as o}from\"../../../../chunks/vec3.js\";import{combineLights as e}from\"./SphericalHarmonics.js\";const h=i(),g=.4;class l{constructor(){this._renderLighting={main:{intensity:i(),direction:t(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],g:[0],b:[0]}}},this._shOrder=2,this._oldSunlight={direction:i(),ambient:{color:i(),intensity:0},diffuse:{color:i(),intensity:0}}}setLightDirectionUniform(i){i.setUniform3fv(\"lightingMainDirection\",this._renderLighting.main.direction)}setUniforms(i,t=!1){if(t){const t=(1-this._info.groundLightingFactor)*(1-this._info.globalFactor);i.setUniform1f(\"lightingFixedFactor\",t)}else i.setUniform1f(\"lightingFixedFactor\",0);i.setUniform1f(\"lightingGlobalFactor\",this._info.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv(\"lightingMainIntensity\",this._renderLighting.main.intensity),i.setUniform1f(\"ambientBoostFactor\",g);const n=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]):1===this._shOrder?(i.setUniform4f(\"lightingAmbientSH_R\",n.r[0],n.r[1],n.r[2],n.r[3]),i.setUniform4f(\"lightingAmbientSH_G\",n.g[0],n.g[1],n.g[2],n.g[3]),i.setUniform4f(\"lightingAmbientSH_B\",n.b[0],n.b[1],n.b[2],n.b[3])):2===this._shOrder&&(i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]),i.setUniform4f(\"lightingAmbientSH_R1\",n.r[1],n.r[2],n.r[3],n.r[4]),i.setUniform4f(\"lightingAmbientSH_G1\",n.g[1],n.g[2],n.g[3],n.g[4]),i.setUniform4f(\"lightingAmbientSH_B1\",n.b[1],n.b[2],n.b[3],n.b[4]),i.setUniform4f(\"lightingAmbientSH_R2\",n.r[5],n.r[6],n.r[7],n.r[8]),i.setUniform4f(\"lightingAmbientSH_G2\",n.g[5],n.g[6],n.g[7],n.g[8]),i.setUniform4f(\"lightingAmbientSH_B2\",n.b[5],n.b[6],n.b[7],n.b[8]))}set(i){this._info=i,e(i.lights,this._shOrder,this._renderLighting),n(this._oldSunlight.direction,this._renderLighting.main.direction);const t=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*t,this._oldSunlight.ambient.color[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*t,this._oldSunlight.ambient.color[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*t,this._oldSunlight.ambient.intensity=1,this._oldSunlight.diffuse.color[0]=this._renderLighting.main.intensity[0]*t,this._oldSunlight.diffuse.color[1]=this._renderLighting.main.intensity[1]*t,this._oldSunlight.diffuse.color[2]=this._renderLighting.main.intensity[2]*t,this._oldSunlight.diffuse.intensity=1;const l=r(h,this._oldSunlight.diffuse.color);s(l,l,g*this._info.globalFactor),o(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,l)}get globalFactor(){return this._info.globalFactor}get old(){return this._oldSunlight}}export{l as SceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as r,isNone as t,unwrap as i}from\"../../../core/maybe.js\";import s from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/PooledArray.js\";import h from\"../../../core/Accessor.js\";import{generateUID as l}from\"../../../core/uid.js\";import{f as d,c as u}from\"../../../chunks/vec3f64.js\";import p from\"../../../core/Handles.js\";import{init as c}from\"../../../core/watchUtils.js\";import{o as g,i as m,t as y}from\"../../../chunks/mat4.js\";import{c as _}from\"../../../chunks/vec2f64.js\";import{IntersectorResult as f}from\"../webgl-engine/lib/intersectorUtils.js\";import{Task as R}from\"../../support/Scheduler.js\";import{someMap as w}from\"../../../core/MapUtils.js\";import x from\"../../webgl/Texture.js\";import{vertexCount as b}from\"../../webgl/Util.js\";import{createEmptyDepthTexture as T,createQuadVAO as v}from\"../webgl-engine/lib/glUtil3D.js\";import{AmbientLight as C}from\"../webgl-engine/lighting/Lightsources.js\";import O from\"../webgl-engine/lib/Camera.js\";import j from\"../support/debugFlags.js\";import{AutoDisposableMixin as L,autoDispose as G}from\"../webgl-engine/lib/AutoDisposable.js\";import{OverlayRenderTarget as V}from\"./OverlayRenderTarget.js\";import{Overlay as S}from\"./Overlay.js\";import{CommonUniformStore as U}from\"../webgl-engine/core/shaderTechnique/CommonUniformStore.js\";import{ShaderTechniqueRepository as E}from\"../webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js\";import D from\"../webgl-engine/lib/GLMaterialRep.js\";import M from\"../webgl-engine/lib/GridLocalOriginFactory.js\";import A from\"../webgl-engine/lib/RenderContext.js\";import{SortedRenderGeometryRenderer as P}from\"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";import{TextureTechniqueConfiguration as H,TextureTechnique as W}from\"../webgl-engine/lib/TextureTechnique.js\";import{SceneLighting as q}from\"../webgl-engine/lighting/SceneLighting.js\";import{StippleTextureRepository as F}from\"../webgl-engine/materials/lineStippleUtils.js\";const k=s.getLogger(\"esri.views.3d.webgl-engine.lib.OverlayRenderer\");let z=class extends(L(h)){constructor(e){super(e),this._overlays=null,this._hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._lighting=new q,this._localOrigins=new M,this._handles=new p,this._layerRenderers=new Map,this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers=new a,this._geometries=new Map,this.globalUnitScale=1,this.longitudeCyclical=null}initialize(){this._rctx=this.renderView.renderingContext,this._renderContext=new A(this._rctx,null,null,null,null,null),this._stippleTextureRepository=new F,this.waterTextureRepository=this.renderView.waterTextureRepository,this._shaderTechniqueRepository=new E({rctx:this._rctx,viewingMode:2,commonUniformStore:new U,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),c(this.waterTextureRepository,\"loadingState\",(()=>this.emitContentChanged())),this._materialRepository=new D(this.renderView.textureRepository,this._shaderTechniqueRepository),this._materialRepository.onMaterialChanged=e=>{(e.renderOccluded&J)>0!==this._rendersOccluded&&this.updateRendersOccluded(),this.emitContentChanged(),this.notifyChange(\"updating\")},this._compositingHelper=this.renderView.compositingHelper,this._lighting.set({lights:[new C(d(1,1,1))],groundLightingFactor:1,globalFactor:0}),this._bindParameters={slot:null,highlightDepthTexture:T(this._rctx),camera:N,inverseViewport:_(),origin:null,screenToWorldRatio:null,screenToWorldRatioGlobalWM:null,shadowMappingEnabled:!1,slicePlane:null,ssaoEnabled:!1,hasOccludees:!1,linearDepthTexture:null,linearDepthTextureUnit:0,lastFrameColorTexture:null,lastFrameColorTextureUnit:0,reprojectionMat:null,ssrEnabled:!1,lighting:this._lighting,transparencyPassType:3,terrainLinearDepthTexture:null,terrainLinearDepthTextureUnit:0,geometryLinearDepthTexture:null,geometryLinearDepthTextureUnit:0,multipassTerrainEnabled:!1,cullAboveGround:!0,multipassGeometryEnabled:!1},this._handles.add(this.scheduler.registerTask(R.STAGE,(()=>this.commitChanges()),(()=>this.updating)))}dispose(){this._handles.destroy(),this._layerRenderers.forEach((e=>e.dispose())),this._layerRenderers.clear(),this._bindParameters.highlightDepthTexture.dispose(),this._bindParameters.highlightDepthTexture=null,this._shaderTechniqueRepository.dispose(),this._shaderTechniqueRepository=null}get updating(){return this._sortedLayerRenderersDirty||w(this._layerRenderers,(e=>e.updating))||this.waterTextureRepository.updating}get hasOverlays(){return r(this._overlays)}get gpuMemoryUsage(){return r(this._overlays)?this._overlays[0].getGpuMemoryUsage()+this._overlays[1].getGpuMemoryUsage():0}get overlays(){return this._overlays}forEachOverlay(e){r(this._overlays)&&(e(this._overlays[0],0),e(this._overlays[1],1))}ensureOverlays(){if(t(this._overlays)){const e=this.renderView.renderingContext;this._overlays=[new S(e),new S(e)]}}disposeOverlays(){r(this._overlays)&&(this._overlays.forEach((e=>e.dispose())),this._overlays=null)}commitChanges(){let e=!1;this._layerRenderers.forEach(((r,t)=>{r.commitChanges()&&(e=!0),r.isEmpty&&(this._layerRenderers.delete(t),this._sortedLayerRenderersDirty=!0,this._handles.remove(t))})),this._sortedLayerRenderersDirty&&(this.updateSortedLayerRenderers(),e=!0),e&&(this.notifyChange(\"updating\"),this.emitContentChanged(),this.updateHasHighlights(),this.updateRendersOccluded(),this.updateHasWater())}addGeometries(e,r,i){for(const s of e)null==s.origin&&(s.origin=this._localOrigins.getOrigin(s.boundingSphere)),t(s.id)&&(s.id=l()),this._geometries.set(s.id,s);this.ensureLayerRenderer(r).add(e),2===i&&this.notifyGraphicGeometryChanged(e,r)}removeGeometries(e,r,t){for(const n of e)this._geometries.delete(i(n.id));const s=this._layerRenderers.get(r);s&&(s.remove(e),2===t&&this.notifyGraphicGeometryChanged(e,r))}updateGeometries(e,r,t){const i=this._layerRenderers.get(r);if(i)switch(i.modify(e,t),t){case 4:case 2:return this.notifyGraphicGeometryChanged(e,r);case 1:return this.notifyGraphicVisibilityChanged(e,r)}else k.warn(\"Attempted to update geometry for nonexistent layer\")}notifyGraphicGeometryChanged(e,r){if(t(r.notifyGraphicGeometryChanged))return;let i;for(const t of e){const e=t.graphicUid;e!==i&&(r.notifyGraphicGeometryChanged(e),i=e)}}notifyGraphicVisibilityChanged(e,r){if(t(r.notifyGraphicVisibilityChanged))return;let i;for(const t of e){const e=t.graphicUid;e!==i&&(r.notifyGraphicVisibilityChanged(e),i=e)}}updateHighlights(e,r){const t=this._layerRenderers.get(r);t?t.modify(e,8):k.warn(\"Attempted to update highlights for nonexistent layer\")}isEmpty(){return 0===this._geometries.size&&!j.OVERLAY_DRAW_DEBUG_TEXTURE}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}updateLogic(e){let r=!1;return this._layerRenderers.forEach((t=>{t.updateLogic(e)&&(r=!0)})),r}updateLayerOrder(){this._sortedLayerRenderersDirty=!0}drawPass(e,t,s,n=0){if(0===s.numViews)return!1;if(this._screenToWorldRatio=s.pixelRatio*Math.abs(s.views[0].extent[2]-s.views[0].extent[0])/Math.abs(s.views[0].viewport[2]-s.views[0].viewport[0]),this.isEmpty()||5===e&&!this.hasHighlights||3===e&&!this.hasWater)return!1;if(!this.hasNonZeroSizedView(s))return!1;const o=s.width,a=s.height;if(!t.isValid())return!1;t.resize(o,a);const h=this._rctx;if(N.pixelRatio=s.pixelRatio||1,this._renderContext.pass=e,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToWorldRatioGlobalWM=this._screenToWorldRatio*this.globalUnitScale,t.bind(h),h.setClearColor(0,0,0,0),h.clearSafe(16384),1===n&&(this._renderContext.renderOccludedMask=J),j.OVERLAY_DRAW_DEBUG_TEXTURE&&1!==n)for(let r=0;r<s.numViews;r++)this.setViewParameters(s.views[r],N),this.drawDebugTexture(o,a,I[s.index%I.length]);return this._layerRenderers.size>0&&this._sortedLayerRenderers.forAll((({layerView:l,renderer:d})=>{if(2===n&&r(l)&&0===l.drapeSourceType)return;const u=r(l)&&r(l.fullOpacity)&&l.fullOpacity<1&&0===e;u&&(this.bindTemporaryFramebuffer(this._rctx,o,a),h.clearSafe(16384));for(let e=0;e<s.numViews;e++)this.setViewParameters(s.views[e],N),d.draw(this._renderContext,this._bindParameters);u&&r(this._temporaryRenderTarget)&&(t.bind(h),this._compositingHelper.composite(this._temporaryRenderTarget.getTexture(),2,i(i(l).fullOpacity)))})),h.bindFramebuffer(null),t.generateMipMap(),this._renderContext.resetRenderOccludedMask(),!0}bindTemporaryFramebuffer(e,r,i){t(this._temporaryRenderTarget)&&(this._temporaryRenderTarget=new V(e,!1)),this._temporaryRenderTarget.resize(r,i),this._temporaryRenderTarget.bind(e)}async reloadShaders(){await this._shaderTechniqueRepository.hotReload()}intersect(e,r,t){let i=0;this._geometries.forEach((s=>{if(t&&!t(s))return;this.intersectRenderGeometry(s,r,0,e,i);const n=this.longitudeCyclical;n&&(s.boundingSphere[0]-s.boundingSphere[3]<n.min&&this.intersectRenderGeometry(s,r,n.range,e,i),s.boundingSphere[0]+s.boundingSphere[3]>n.max&&this.intersectRenderGeometry(s,r,-n.range,e,i)),i++}))}intersectRenderGeometry(e,t,i,s,n){let o=0;r(e.transformation)&&(i+=e.transformation[12],o=e.transformation[13]),X[0]=t[0]-i,X[1]=t[1]-o,X[2]=1,Y[0]=t[0]-i,Y[1]=t[1]-o,Y[2]=0,e.screenToWorldRatio=this._screenToWorldRatio,e.material.intersect(e,null,e.getShaderTransformation(),s,X,Y,((r,t,i)=>{this.addIntersectionResult(i,e.material.renderPriority,n,s,e.layerUid,e.graphicUid)}),e.calculateShaderTransformation,!0)}addIntersectionResult(e,r,t,i,s,n){const o={type:\"external\",metadata:{layerUid:s,graphicUid:n}},a=s=>{s.set(o,null,i.results.ground.dist,i.results.ground.normal,i.results.ground.transformation,r,null,null,e,t),s.intersector=\"OverlayRenderer\"};if((null==i.results.min.drapedLayerOrder||r>=i.results.min.drapedLayerOrder)&&(null==i.results.min.dist||i.results.ground.dist<=i.results.min.dist)&&a(i.results.min),0!==i.options.store&&(null==i.results.max.drapedLayerOrder||r<i.results.max.drapedLayerOrder)&&(null==i.results.max.dist||i.results.ground.dist>i.results.max.dist)&&a(i.results.max),2===i.options.store){const e=new f(i.ray);a(e),i.results.all.push(e)}}stopAnimationsAtTime(e){this._sortedLayerRenderers.forAll((r=>r.renderer.stopAnimationsAtTime(e)))}ensureLayerRenderer(e){let r=this._layerRenderers.get(e);return r||(r=new P({rctx:this._rctx,materialRepository:this._materialRepository}),this._layerRenderers.set(e,r),this._sortedLayerRenderersDirty=!0,\"fullOpacity\"in e&&this._handles.add(e.watch(\"fullOpacity\",(()=>this.emitContentChanged())),e),this._handles.add(c(r,\"updating\",(()=>this.notifyChange(\"updating\"))),e)),r}updateSortedLayerRenderers(){if(!this._sortedLayerRenderersDirty)return;if(this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers.clear(),0===this._layerRenderers.size)return;const[{view:{allLayerViews:e}}]=this._layerRenderers.keys(),r=new Set(this._layerRenderers.values());e.forEach((e=>{const t=e,i=this._layerRenderers.get(t);i&&(this._sortedLayerRenderers.push(new B(t,i)),r.delete(i))})),r.forEach((e=>{this._sortedLayerRenderers.push(new B(null,e))}))}setViewParameters(e,r){r.viewport=e.viewport;const t=e.extent;g(r.projectionMatrix,0,t[2]-t[0],0,t[3]-t[1],r.near,r.far),m(r.viewMatrix),y(r.viewMatrix,r.viewMatrix,[-e.extent[0],-e.extent[1],0]),r.setGLViewport(this._rctx),this._renderContext.camera=r,this._bindParameters.camera=r,this._bindParameters.inverseViewport[0]=1/r.fullViewport[2],this._bindParameters.inverseViewport[1]=1/r.fullViewport[3]}hasNonZeroSizedView(e){for(let r=0;r<e.numViews;r++){const t=e.views[r];if(t.extent[0]!==t.extent[2]&&t.extent[1]!==t.extent[3])return!0}return!1}emitContentChanged(){this.onContentChanged&&this.onContentChanged()}updateHasWater(){const e=w(this._layerRenderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e)}updateHasHighlights(){const e=w(this._layerRenderers,(e=>e.hasHighlights));e!==this._hasHighlights&&(this._hasHighlights=e,this.onHasHighlightsChanged&&this.onHasHighlightsChanged(this._hasHighlights))}updateRendersOccluded(){const e=w(this._layerRenderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.onRendersOccludedChanged&&this.onRendersOccludedChanged(this.rendersOccluded))}drawDebugTexture(e,r,t){const i=this._rctx;this.ensureDebugPatternResources(e,r);const s=this._debugTextureTechnique.program;i.bindProgram(s),i.setPipelineState(this._debugTextureTechnique.pipeline),s.setUniform4f(\"color\",t[0],t[1],t[2],1),s.setUniform1i(\"tex\",0),i.bindTexture(this._debugPatternTexture,0),i.bindVAO(this._quadVAO),i.drawArrays(5,0,b(this._quadVAO,\"geometry\"))}ensureDebugPatternResources(e,r){if(this._debugPatternTexture)return;const t=new Uint8Array(e*r*4);let i=0;for(let n=0;n<r;n++)for(let s=0;s<e;s++){const o=Math.floor(s/10),a=Math.floor(n/10);o<2||a<2||10*o>e-20||10*a>r-20?(t[i++]=255,t[i++]=255,t[i++]=255,t[i++]=255):(t[i++]=255,t[i++]=255,t[i++]=255,t[i++]=1&o&&1&a?1&s^1&n?0:255:1&o^1&a?0:128)}this._debugPatternTexture=new x(this._rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:e,height:r},t);const s=new H;s.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquireAndReleaseExisting(W,s,this._debugTextureTechnique),this._quadVAO=v(this._rctx)}get test(){return{layerRenderers:this._layerRenderers}}};e([G()],z.prototype,\"_shaderTechniqueRepository\",void 0),e([G()],z.prototype,\"_stippleTextureRepository\",void 0),e([n(),G()],z.prototype,\"waterTextureRepository\",void 0),e([n({constructOnly:!0})],z.prototype,\"renderView\",void 0),e([n({constructOnly:!0})],z.prototype,\"scheduler\",void 0),e([n()],z.prototype,\"globalUnitScale\",void 0),e([n({type:Boolean,readOnly:!0})],z.prototype,\"updating\",null),z=e([o(\"esri.views.3d.terrain.OverlayRenderer\")],z);class B{constructor(e,r){this.layerView=e,this.renderer=r}}const I=[[1,.5,.5],[.5,.5,1],[.5,1,.5]],N=new O;N.near=1,N.far=1e4,N.relativeElevation=null;const X=u(),Y=u(),Z=-2,J=4;export{Z as DRAPED_Z,z as OverlayRenderer,J as overlayRenderOccludedFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{Z as s,O as o}from\"../../../../chunks/vec4f64.js\";const c=1,r=1.2,t=s,a=o;export{r as SUSPEND_RESUME_EXTENT_OPTIMISM,t as TRANSPARENT_UNIT,a as WHITE_UNIT,c as defaultIconElevationOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{slice as t}from\"../../../../core/typedArrayUtil.js\";import{isNone as o,isSome as e,unwrapOr as n}from\"../../../../core/maybe.js\";import{acosClamped as r}from\"../../../../core/mathUtils.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{s,n as a,d as u,a as c}from\"../../../../chunks/vec3.js\";import{projectBuffer as p}from\"../../../../geometry/projection.js\";import{pathsToTriangulationInfo as l}from\"../../../../geometry/support/triangulationUtils.js\";import{Geometry as f}from\"../../webgl-engine/lib/Geometry.js\";import{applyPerVertexElevationAlignment as h}from\"./elevationAlignmentUtils.js\";import{DRAPED_Z as m}from\"../../terrain/OverlayRenderer.js\";import{WHITE_UNIT as y}from\"./constants.js\";function b(t){const o=[],e=[];j(t,e,o);const n=e[0][1].data,r=o[0][1].length,i=new Uint16Array(r);return A(t,e,o),F(t,e,o,i),w(t,e,o,i),v(t,e,o,i),D(t,e,o,i),P(t,e,o,i),U(t,e,o,n),new f(e,o,2)}function g(t,o,e,n){const r=\"polygon\"===t.type?1:0,i=\"polygon\"===t.type?t.rings:t.paths,{position:s,outlines:a}=l(i,t.hasZ,r),u=new Float64Array(s.length),c=h(s,t.spatialReference,0,u,0,s,0,s.length/3,o,e,n),p=null!=c;return{lines:p?d(a,s,u):[],projectionSuccess:p,sampledElevation:c}}function d(t,o,e){const n=new Array;for(const{index:r,count:i}of t){if(i<=1)continue;const t=3*r,s=t+3*i;n.push({position:o.subarray(t,s),mapPosition:e?e.subarray(t,s):void 0})}return n}function z(t,o){const e=\"polygon\"===t.type?1:0,n=\"polygon\"===t.type?t.rings:t.paths,{position:r,outlines:i}=l(n,!1,e),s=p(r,t.spatialReference,0,r,o,0,r.length/3);for(let a=2;a<r.length;a+=3)r[a]=m;return{lines:s?d(i,r):[],projectionSuccess:s}}function j(o,e,n){const{attributeData:{position:r},removeDuplicateStartEnd:i}=o,s=M(r)&&1===i,a=r.length/3-(s?1:0),u=new Uint32Array(2*(a-1)),c=s?t(r,0,r.length-3):r;let p=0;for(let t=0;t<a-1;t++)u[p++]=t,u[p++]=t+1;e.push([\"position\",{size:3,data:c,exclusive:s}]),n.push([\"position\",u])}function A(t,e,n){const r=t.attributeData.mapPosition;o(r)||(n.push([\"mapPos\",n[0][1]]),e.push([\"mapPos\",{size:3,data:r}]))}function F(t,o,r,i){if(e(t.attributeData.colorFeature))return;const s=t.attributeData.color;o.push([\"color\",{size:4,data:n(s,y)}]),r.push([\"color\",i])}function v(t,e,n,r){const i=t.attributeData.colorFeature;o(i)||(e.push([\"colorFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"color\",r]))}function w(t,o,r,i){if(e(t.attributeData.sizeFeature))return;const s=t.attributeData.size;o.push([\"size\",{size:1,data:[n(s,1)]}]),r.push([\"size\",i])}function D(t,e,n,r){const i=t.attributeData.sizeFeature;o(i)||(e.push([\"sizeFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"sizeFeatureAttribute\",r]))}function P(t,e,n,r){const i=t.attributeData.opacityFeature;o(i)||(e.push([\"opacityFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"opacityFeatureAttribute\",r]))}function U(t,o,e,i){if(\"round\"!==t.join)return;const p=i.length/3,l=new Float32Array(p),f=S,h=R;s(f,0,0,0);const m=n(t.uniformSize,1);for(let n=-1;n<p;++n){const t=n<0?p+n:n,o=(n+1)%p;if(s(h,i[3*o+0]-i[3*t+0],i[3*o+1]-i[3*t+1],i[3*o+2]-i[3*t+2]),a(h,h),n>=0){const t=1*((Math.PI-r(u(f,h)))*k)*x(m);l[n]=Math.max(Math.floor(t),0)}c(f,h,-1)}o.push([\"subdivisions\",{size:1,data:l}]),e.push([\"subdivisions\",e[0][1]])}function x(t){return 1.863798+-2.0062872/(1+t/18.2313)**.8856294}function M(t){const o=t.length;return t[0]===t[o-3]&&t[1]===t[o-2]&&t[2]===t[o-1]}const S=i(),R=i(),k=4/Math.PI;export{b as createGeometry,g as geometryToRenderInfo,z as geometryToRenderInfoDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as E}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import I from\"../../../core/Accessor.js\";let T=class extends I{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.SCENEVIEW_LOCKING_LOG=!1,this.HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED=!0,this.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_UPDATE_THRESHOLDS=!1,this.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1,this.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.ENABLE_PROFILE_DEPTH_RANGE=!1,this.DISABLE_FAST_UPDATES=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.EDITING_RECALCULATE_MANIPULATORS_DURING_TRANSFORM=!1}};E([_()],T.prototype,\"SCENEVIEW_HITTEST_RETURN_INTERSECTOR\",void 0),E([_()],T.prototype,\"SCENEVIEW_LOCKING_LOG\",void 0),E([_()],T.prototype,\"HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED\",void 0),E([_()],T.prototype,\"HIGHLIGHTS_PROFILE_TO_CONSOLE\",void 0),E([_()],T.prototype,\"DECONFLICTOR_SHOW_VISIBLE\",void 0),E([_()],T.prototype,\"DECONFLICTOR_SHOW_INVISIBLE\",void 0),E([_()],T.prototype,\"DECONFLICTOR_SHOW_GRID\",void 0),E([_()],T.prototype,\"LABELS_SHOW_BORDER\",void 0),E([_()],T.prototype,\"OVERLAY_DRAW_DEBUG_TEXTURE\",void 0),E([_()],T.prototype,\"OVERLAY_SHOW_CENTER\",void 0),E([_()],T.prototype,\"SHOW_POI\",void 0),E([_()],T.prototype,\"TESTS_DISABLE_UPDATE_THRESHOLDS\",void 0),E([_()],T.prototype,\"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET\",void 0),E([_()],T.prototype,\"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES\",void 0),E([_()],T.prototype,\"DRAW_MESH_GEOMETRY_NORMALS\",void 0),E([_()],T.prototype,\"FEATURE_TILE_FETCH_SHOW_TILES\",void 0),E([_()],T.prototype,\"FEATURE_TILE_TREE_SHOW_TILES\",void 0),E([_()],T.prototype,\"TERRAIN_TILE_TREE_SHOW_TILES\",void 0),E([_()],T.prototype,\"I3S_TREE_SHOW_TILES\",void 0),E([_()],T.prototype,\"I3S_SHOW_MODIFICATIONS\",void 0),E([_()],T.prototype,\"ENABLE_PROFILE_DEPTH_RANGE\",void 0),E([_()],T.prototype,\"DISABLE_FAST_UPDATES\",void 0),E([_()],T.prototype,\"LOD_INSTANCE_RENDERER_DISABLE_UPDATES\",void 0),E([_()],T.prototype,\"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL\",void 0),E([_()],T.prototype,\"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES\",void 0),E([_()],T.prototype,\"EDITING_RECALCULATE_MANIPULATORS_DURING_TRANSFORM\",void 0),T=E([o(\"esri.views.3d.support.DebugFlags\")],T);const S=new T;export default S;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function a(a,r){0===r.output&&r.receiveShadows?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.code.add(e`\n      void forwardLinearDepth() { linearDepth = gl_Position.w; }\n    `)):1===r.output||3===r.output?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),a.vertex.code.add(e`\n      void forwardLinearDepth() {\n        linearDepth = (-position_view().z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n      }\n    `)):a.vertex.code.add(e`\n      void forwardLinearDepth() {}\n    `)}export{a as ForwardLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,i){t.vertex.uniforms.add(\"intrinsicWidth\",\"float\"),i.vvSize?(t.attributes.add(\"sizeFeatureAttribute\",\"float\"),t.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),t.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),t.vertex.code.add(e`\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    `)):(t.attributes.add(\"size\",\"float\"),t.vertex.code.add(e`\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    `)),i.vvOpacity?(t.attributes.add(\"opacityFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvOpacityNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    `)):t.vertex.code.add(e`\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    `),i.vvColor?(t.attributes.add(\"colorFeatureAttribute\",\"float\"),t.vertex.constants.add(\"vvColorNumber\",\"int\",8),t.vertex.code.add(e`\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    `)):(t.attributes.add(\"color\",\"vec4\"),t.vertex.code.add(e`\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    `))}export{t as RibbonVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.code.add(t`\n    float normals2FoamIntensity(vec3 n, float waveStrength){\n      float normalizationFactor =  max(0.015, waveStrength);\n      return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);\n    }\n  `)}function n(o){o.fragment.code.add(t`\n    vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){\n      return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;\n    }\n  `)}export{n as FoamColor,o as FoamIntensity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function p(e,p){e.constants.add(\"stippleAlphaColorDiscard\",\"float\",.001),e.constants.add(\"stippleAlphaHighlightDiscard\",\"float\",.5),p.stippleEnabled?t(e,p):l(e)}function t(p,t){p.vertex.uniforms.add(\"stipplePatternPixelSizeInv\",\"float\"),t.stippleUVMaxEnabled&&p.varyings.add(\"stipplePatternUvMax\",\"float\"),p.varyings.add(\"stipplePatternUv\",\"float\"),p.fragment.uniforms.add(\"stipplePatternTexture\",\"sampler2D\"),t.stippleOffColorEnabled&&p.fragment.uniforms.add(\"stippleOffColor\",\"vec4\"),p.fragment.code.add(e`\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ${t.stippleUVMaxEnabled?\"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);\":\"\"}\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }`),t.stippleOffColorEnabled?p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    `):p.fragment.code.add(e`\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    `)}function l(p){p.fragment.code.add(e`\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  `)}export{p as LineStipple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function n(n,r){1===r.viewingMode?n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return normalize(pos + origin);\n      }\n    `):n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return vec3(0.0, 0.0, 1.0); // WARNING: up-axis dependent code\n      }\n    `),1===r.viewingMode?n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `):n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = vec3(1.0, 0.0, 0.0);\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `)}export{n as NormalUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`\n    vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n    {\n      return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n    }\n    `),a.add(e`\n    float integratedRadiance(float cosTheta2, float roughness)\n    {\n      return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n    }\n    `),a.add(e`\n    vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n    {\n      float cosTheta2 = 1.0 - RdotNG * RdotNG;\n      float intRadTheta = integratedRadiance(cosTheta2, roughness);\n\n      // Calculate the integrated directional radiance of the ground and the sky\n      float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\n      float sky = 2.0 - ground;\n      return (ground * ambientGround + sky * ambientSky) * 0.5;\n    }\n    `)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{PiUtils as o}from\"./PiUtils.glsl.js\";import{AnalyticalSkyModel as t}from\"./AnalyticalSkyModel.glsl.js\";function n(n,a){const r=n.fragment.code;n.include(o),3===a.pbrMode||4===a.pbrMode?(r.add(e`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${a.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),r.add(e`\n    vec3 fresnelReflection(float angle, vec3 f0, float f90) {\n      return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n    }\n    `),r.add(e`\n    float normalDistributionWater(float NdotH, float roughness)\n    {\n      float r2 = roughness * roughness;\n      float NdotH2 = NdotH * NdotH;\n      float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\n      return r2 / denom;\n    }\n    `),r.add(e`\n    float geometricOcclusionKelemen(float LoH)\n    {\n        return 0.25 / (LoH * LoH);\n    }\n    `),r.add(e`\n    vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n    {\n      vec3  F = fresnelReflection(props.VdotH, F0, F0Max);\n      float dSun = normalDistributionWater(props.NdotH, roughness);\n      float V = geometricOcclusionKelemen(props.LdotH);\n\n      float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\n      float strengthSunHaze  = 1.2;\n      float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\n\n      return ((dSun + dSunHaze) * V) * F;\n    }\n\n    vec3 tonemapACES(const vec3 x) {\n      return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n    }\n    `)):1!==a.pbrMode&&2!==a.pbrMode||(n.include(t),r.add(e`\n    struct PBRShadingInfo\n    {\n        float NdotL;                  // cos angle between normal and light direction\n        float NdotV;                  // cos angle between normal and view direction\n        float NdotH;                  // cos angle between normal and half vector\n        float VdotH;                  // cos angle between view direction and half vector\n        float LdotH;                  // cos angle between view light direction and half vector\n        float NdotNG;                 // cos angle between normal and normal of the ground\n        float RdotNG;                 // cos angle between view direction reflected of the normal and normal of the ground\n        float NdotAmbDir;             // cos angle between view direction and the fill light in ambient illumination\n        float NdotH_Horizon;          // cos angle between normal and half vector defined with horizon illumination\n        vec3 skyRadianceToSurface;         // integrated radiance of the sky based on the surface roughness (used for specular reflection)\n        vec3 groundRadianceToSurface;      // integrated radiance of the ground based on the surface roughness (used for specular reflection)\n        vec3 skyIrradianceToSurface;       // irradiance of the sky (used for diffuse reflection)\n        vec3 groundIrradianceToSurface;    // irradiance of the ground (used for diffuse reflection)\n\n        float averageAmbientRadiance;      // average ambient radiance used to deduce black level in gamut mapping\n        float ssao;                   // ssao coefficient\n        vec3 albedoLinear;            // linear color of the albedo\n        vec3 f0;                      // fresnel value at normal incident light\n        vec3 f90;                     // fresnel value at 90o of incident light\n\n        vec3 diffuseColor;            // diffuse color of the material used in environment illumination\n        float metalness;              // metalness of the material\n        float roughness;              // roughness of the material\n    };\n    `),r.add(e`\n    float normalDistribution(float NdotH, float roughness)\n    {\n        float a = NdotH * roughness;\n        float b = roughness / (1.0 - NdotH * NdotH + a * a);\n        return b * b * INV_PI;\n    }\n    `),r.add(e`\n    const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\n    const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\n    const vec2 c2 = vec2(-1.04, 1.04);\n\n    vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\n        vec4 r = roughness * c0 + c1;\n        float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\n        return c2 * a004 + r.zw;\n    }\n    `),r.add(e`\n    vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\n      vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\n      vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\n\n      // From diffuse illumination calculate reflected color\n      vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\n\n      // From specular illumination calculate reflected color\n      vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\n      vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\n      vec3 specularComponent = specularColor * indirectSpecular;\n\n      return (diffuseComponent + specularComponent);\n    }\n    `),r.add(e`\n    float gamutMapChanel(float x, vec2 p){\n      return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n    }`),r.add(e`\n    vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\n      vec3 outColor;\n      vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\n      outColor.x = gamutMapChanel(inColor.x, p) ;\n      outColor.y = gamutMapChanel(inColor.y, p) ;\n      outColor.z = gamutMapChanel(inColor.z, p) ;\n      return outColor;\n    }\n    `))}export{n as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function t(t){t.vertex.code.add(o`\n    const float PI = 3.141592653589793;\n  `),t.fragment.code.add(o`\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    `)}export{t as PiUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";function t(t){t.fragment.include(a),t.fragment.uniforms.add(\"uShadowMapTex\",\"sampler2D\"),t.fragment.uniforms.add(\"uShadowMapNum\",\"int\"),t.fragment.uniforms.add(\"uShadowMapDistance\",\"vec4\"),t.fragment.uniforms.add(\"uShadowMapMatrix\",\"mat4\",4),t.fragment.uniforms.add(\"uDepthHalfPixelSz\",\"float\"),t.fragment.code.add(e`\n    int chooseCascade(float _linearDepth, out mat4 mat) {\n      vec4 distance = uShadowMapDistance;\n      float depth = _linearDepth;\n\n      //choose correct cascade\n      int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\n\n      mat = i == 0 ? uShadowMapMatrix[0] : i == 1 ? uShadowMapMatrix[1] : i == 2 ? uShadowMapMatrix[2] : uShadowMapMatrix[3];\n\n      return i;\n    }\n\n    vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\n      vec4 lv = mat * vec4(_vpos, 1.0);\n      lv.xy /= lv.w;\n      return 0.5 * lv.xyz + vec3(0.5);\n    }\n\n    vec2 cascadeCoordinates(int i, vec3 lvpos) {\n      return vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n    }\n\n    float readShadowMapDepth(vec2 uv, sampler2D _depthTex) {\n      return rgba2float(texture2D(_depthTex, uv));\n    }\n\n    float posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {\n      return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n    }\n\n    float filterShadow(vec2 uv, vec3 lvpos, float halfPixelSize, sampler2D _depthTex) {\n      float texSize = 0.5 / halfPixelSize;\n\n      // filter, offset by half pixels\n      vec2 st = fract((vec2(halfPixelSize) + uv) * texSize);\n\n      float s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);\n      float s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);\n\n      return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n    }\n\n    float readShadowMap(const in vec3 _vpos, float _linearDepth) {\n      mat4 mat;\n      int i = chooseCascade(_linearDepth, mat);\n\n      if (i >= uShadowMapNum) { return 0.0; }\n\n      vec3 lvpos = lightSpacePosition(_vpos, mat);\n\n      // vertex completely outside? -> no shadow\n      if (lvpos.z >= 1.0) { return 0.0; }\n      if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\n\n      // calc coord in cascade texture\n      vec2 uv = cascadeCoordinates(i, lvpos);\n\n      return filterShadow(uv, lvpos, uDepthHalfPixelSz, uShadowMapTex);\n    }\n  `)}!function(e){function a(e,a,t){a.shadowMappingEnabled&&(a.shadowMap.bind(e,t),a.shadowMap.bindView(e,a.origin))}function t(e,a,t){a.shadowMappingEnabled&&a.shadowMap.bindView(e,t)}function o(e,a){a.shadowMappingEnabled&&a.shadowMap.bindView(e,a.origin)}e.bindUniforms=a,e.bindViewCustomOrigin=t,e.bindView=o}(t||(t={}));export{t as ReadShadowMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.uniforms.add(\"lastFrameColorMap\",\"sampler2D\"),o.fragment.uniforms.add(\"reprojectionMat\",\"mat4\"),o.fragment.uniforms.add(\"rpProjectionMat\",\"mat4\"),o.fragment.code.add(r`\n  vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n  {\n    vec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\n    vec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\n    reprojectedCoord.xy /= reprojectedCoord.w;\n    return reprojectedCoord.xy*0.5 + 0.5;\n  }\n  `)}!function(r){function o(r,o,e){r.setUniform1i(\"lastFrameColorMap\",e.lastFrameColorTextureUnit),o.bindTexture(e.lastFrameColorTexture,e.lastFrameColorTextureUnit),r.setUniformMatrix4fv(\"reprojectionMat\",e.reprojectionMat),r.setUniformMatrix4fv(\"rpProjectionMat\",e.camera.projectionMatrix)}r.bindUniforms=o}(o||(o={}));export{o as Reprojection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ReadLinearDepth as t}from\"../output/ReadLinearDepth.glsl.js\";import{Reprojection as o}from\"./Reprojection.glsl.js\";function r(r,a){r.fragment.uniforms.add(\"nearFar\",\"vec2\"),r.fragment.uniforms.add(\"depthMapView\",\"sampler2D\"),r.fragment.uniforms.add(\"ssrViewMat\",\"mat4\"),r.fragment.uniforms.add(\"invResolutionHeight\",\"float\"),r.fragment.include(t),r.include(o),r.fragment.code.add(e`\n  const int maxSteps = ${a.highStepCount?\"150;\":\"75;\"}\n\n  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)\n  {\n    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);\n    projectedCoord.xy /= projectedCoord.w;\n    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;\n    return projectedCoord;\n  }\n\n  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)\n  {\n    vec3 viewPos = startPosition;\n    vec3 viewPosEnd = startPosition;\n\n    // Project the start position to the screen\n    vec4 projectedCoordStart = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space\n    float k0 = 1.0/ projectedCoordStart.w;\n\n    // advance the position in the direction of the reflection\n    viewPos += dir;\n\n    vec4 projectedCoordVanishingPoint = applyProjectionMat(rpProjectionMat, dir);\n\n    // Project the advanced position to the screen\n    vec4 projectedCoordEnd = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space\n    float k1 = 1.0/ projectedCoordEnd.w;\n\n    // calculate the reflection direction in the screen space\n    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);\n    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);\n\n    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);\n\n    float projectedCoordDirLength = length(projectedCoordDir);\n    float maxSt = float(maxSteps);\n\n    // normalize the projection direction depending on maximum steps\n    // this determines how blocky the reflection looks\n    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);\n\n    // Normalize the homogeneous camera space coordinates\n    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);\n    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);\n\n    // initialize the variables for ray marching\n    vec2 P = projectedCoordStart.xy;\n    vec3 Q = Q0;\n    float k = k0;\n    float rayStartZ = -startPosition.z; // estimated ray start depth value\n    float rayEndZ = -startPosition.z;   // estimated ray end depth value\n    float prevEstimateZ = -startPosition.z;\n    float rayDiffZ = 0.0;\n    float dDepth;\n    float depth;\n    float rayDiffZOld = 0.0;\n\n    // early outs\n    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)\n      return vec3(P, 0.0);\n\n    for(int i = 0; i < maxSteps-1; i++)\n    {\n      depth = -linearDepthFromTexture(depthMapView, P, nearFar); // get linear depth from the depth buffer\n\n      // estimate depth of the marching ray\n      rayStartZ = prevEstimateZ;\n      dDepth = -rayStartZ - depth;\n      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));\n      rayDiffZ = rayEndZ- rayStartZ;\n      prevEstimateZ = rayEndZ;\n\n      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )\n      {\n        return vec3(P, 0.);\n      }\n\n      // If we detect a hit - return the intersection point, two conditions:\n      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth\n      //  - if difference between dDepth and rayDiffZOld is not too large\n      //  - if difference between dDepth and 0.025/abs(k) is not too large\n      //  - if the sampled depth is not behind far plane or in front of near plane\n\n      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)\n      {\n          return vec3(P, depth);\n      }\n\n      // continue with ray marching\n      P += dP;\n      Q.z += dQ.z;\n      k += dk;\n      rayDiffZOld = rayDiffZ;\n    }\n    return vec3(P, 0.0);\n  }\n  `)}!function(e){function t(e,t,r){r.ssrEnabled&&(e.setUniform1i(\"depthMapView\",r.linearDepthTextureUnit),t.bindTexture(r.linearDepthTexture,r.linearDepthTextureUnit),e.setUniform2fv(\"nearFar\",r.camera.nearFar),e.setUniformMatrix4fv(\"ssrViewMat\",r.camera.viewMatrix),e.setUniform1f(\"invResolutionHeight\",1/r.camera.height),o.bindUniforms(e,t,r))}e.bindUniforms=t}(r||(r={}));export{r as ScreenSpaceReflections};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as v}from\"../../shaderModules/interfaces.js\";function e(e,o){o.vvInstancingEnabled&&(o.vvSize||o.vvColor)&&e.attributes.add(\"instanceFeatureAttribute\",\"vec4\"),o.vvSize?(e.vertex.uniforms.add(\"vvSizeMinSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeMaxSize\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeOffset\",\"vec3\"),e.vertex.uniforms.add(\"vvSizeFactor\",\"vec3\"),e.vertex.uniforms.add(\"vvSymbolRotationMatrix\",\"mat3\"),e.vertex.uniforms.add(\"vvSymbolAnchor\",\"vec3\"),e.vertex.code.add(v`\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    `),e.vertex.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    `),o.vvColor?(e.vertex.constants.add(\"vvColorNumber\",\"int\",8),e.vertex.code.add(v`\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${o.vvInstancingEnabled?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):e.vertex.code.add(v`\n      vec4 vvColor() { return vec4(1.0); }\n    `)}!function(v){function e(v,e){e.vvSizeEnabled&&(v.setUniform3fv(\"vvSizeMinSize\",e.vvSizeMinSize),v.setUniform3fv(\"vvSizeMaxSize\",e.vvSizeMaxSize),v.setUniform3fv(\"vvSizeOffset\",e.vvSizeOffset),v.setUniform3fv(\"vvSizeFactor\",e.vvSizeFactor)),e.vvColorEnabled&&(v.setUniform1fv(\"vvColorValues\",e.vvColorValues),v.setUniform4fv(\"vvColorColors\",e.vvColorColors))}function o(v,o){e(v,o),o.vvOpacityEnabled&&(v.setUniform1fv(\"vvOpacityValues\",o.vvOpacityValues),v.setUniform1fv(\"vvOpacityOpacities\",o.vvOpacityOpacities))}function r(v,o){e(v,o),o.vvSizeEnabled&&(v.setUniform3fv(\"vvSymbolAnchor\",o.vvSymbolAnchor),v.setUniformMatrix3fv(\"vvSymbolRotationMatrix\",o.vvSymbolRotationMatrix))}v.bindUniforms=e,v.bindUniformsWithOpacity=o,v.bindUniformsForSymbols=r}(e||(e={}));export{e as VisualVariables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function e(e){e.fragment.code.add(o`\n    const float GAMMA = 2.2;\n    const float INV_GAMMA = 0.4545454545;\n\n    vec4 delinearizeGamma(vec4 color) {\n      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);\n    }\n\n    vec3 linearizeGamma(vec3 color) {\n      return pow(color, vec3(GAMMA));\n    }\n  `)}export{e as Gamma};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ScreenSpaceReflections as o}from\"./ScreenSpaceReflections.glsl.js\";import{FoamColor as t}from\"./FoamRendering.glsl.js\";import{Gamma as r}from\"./Gamma.glsl.js\";import{PhysicallyBasedRendering as i}from\"./PhysicallyBasedRendering.glsl.js\";function a(a,n){a.include(i,n),a.include(r),a.include(t),n.ssrEnabled&&a.include(o,n),a.fragment.constants.add(\"fresnelSky\",\"vec3\",[.02,1,15]).add(\"fresnelMaterial\",\"vec2\",[.02,.1]).add(\"roughness\",\"float\",.015).add(\"foamIntensityExternal\",\"float\",1.7).add(\"ssrIntensity\",\"float\",.65).add(\"ssrHeightFadeStart\",\"float\",3e5).add(\"ssrHeightFadeEnd\",\"float\",5e5).add(\"waterDiffusion\",\"float\",.775).add(\"waterSeeColorMod\",\"float\",.8).add(\"correctionViewingPowerFactor\",\"float\",.4).add(\"skyZenitColor\",\"vec3\",[.52,.68,.9]).add(\"skyColor\",\"vec3\",[.67,.79,.9]),a.fragment.code.add(e`\n    PBRShadingWater shadingInfo;\n\n    /*\n    *   This function is an approximation for the sky gradient reflected\n    *   the water surface and describes a combination of two fresnel terms.\n    *   @parameter: cosTheta = is the result of max(dot(n,v), 0.0)\n    *   @parameter: horizon = the dominant color of the sky horizon\n    *   @parameter: cosTheta = the dominant color of the sky zenit\n    */\n    vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\n      float exponent = pow((1.0 - cosTheta), fresnelSky[2]);\n      return mix(zenit, horizon, exponent);\n    }\n\n    /*\n    *   This function determines the water color per pixel.\n    *   @parameter: n = normal facing away from the surface\n    *   @parameter: v = view direction facing away from the surface.\n    *   @parameter: l = light direction facing away from the surface\n    *   @parameter: lightIntensity = light intensity, currently between 0...PI\n    *   @parameter: localUp = a normal for the general direction of the surface\n    *   @parameter: shadow = the amount of shadow at this pixel (0 = no shadow)\n    */\n    vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 positionView) {\n\n      float reflectionHit = 0.;\n      vec3 seaWaterColor = linearizeGamma(color);\n      // using half vector to determine the specular light\n      vec3 h = normalize(l + v);\n      shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);\n      shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);\n      shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);\n      shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\n      shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\n      shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\n\n      // angle between vertex normal and view direction\n      float upDotV = max(dot(localUp,v), 0.0);\n      // reflected sky color: the reflected sky color consists of two main colors, the\n      // reflected color at the horizon and the reflected color of the zenit.\n      // the reflected sky color is then an approximation based on the fresnel term.\n      vec3 skyHorizon = linearizeGamma(skyColor);\n      vec3 skyZenit = linearizeGamma(skyZenitColor);\n      vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );\n\n      // we use the upDotL to smoothen out the\n      // reflected color of the water\n      float upDotL = max(dot(localUp,l),0.0);\n\n      // The approximated sky color is adjusted according to the sun position.\n      // This is done as approximation for e.g. night views.\n      float daytimeMod = 0.1 + upDotL * 0.9;\n      skyColor *= daytimeMod;\n\n      // If a water surface is in shadow we just use a slight darkening of the\n      // water surface expressed with this shadowModifier.\n      float shadowModifier = clamp(shadow, 0.8, 1.0);\n\n      // The reflected sky color consists of the fresnel reflection multiplied with the approximated sky color.\n      // The shadow is influencing the frensel term to keep the shadow impression for really near views. As long\n      // as reflection are absent there is a need to have a slight shadow for depth perception.\n      vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);\n      vec3 reflSky = fresnelModifier * skyColor * shadowModifier;\n\n      // The reflected sea color is the input water color combined with the reflected sky color.\n      // The reflected sky color is modified by the incoming light.\n      vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;\n\n      vec3 specular = vec3(0.0);\n      // This prevents the specular light to be rendered when:\n      // - sun is behind a polygon (e.g. sundown for elevated polygons where nDotL might be still ok)\n      // - viewer is under water (for this localUp is better than n)\n      if(upDotV > 0.0 && upDotL > 0.0) {\n        // calculate the cook torrance BRDF but with simplified occlusion\n        vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);\n\n        // Normalize light intensity to be between 0...1. Shadow cancels out specular light here\n        vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;\n\n        specular = shadingInfo.NdotL * incidentLight * specularSun;\n      }\n\n      vec3 foam = vec3(0.0);\n      if(upDotV > 0.0) {\n        foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);\n      }\n      `),n.ssrEnabled?a.fragment.code.add(e`\n      // Convert the world position to view position\n      vec4 viewPosition = vec4(positionView.xyz, 1.0);\n      vec3 viewDir = normalize(viewPosition.xyz);\n      vec4 viewNormalVectorCoordinate = ssrViewMat *vec4(n, 0.0);\n      vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);\n      vec4 viewUp = ssrViewMat *vec4(localUp, 0.0);\n\n      // at steeper viewing angles we use more of a vertex normal (in this case up) then the wave normal\n      // this removes some artifacts of normal mapping\n      float correctionViewingFactor = pow(max(dot(-viewDir, viewUp.xyz), 0.0), correctionViewingPowerFactor);\n      vec3 viewNormalCorrected = mix(viewUp.xyz, viewNormal, correctionViewingFactor);\n\n      vec3 reflected = normalize(reflect(viewDir, viewNormalCorrected));\n\n      // perform screen space reflection to detect hit\n      vec3 hitCoordinate = screenSpaceIntersection( normalize(reflected), viewPosition.xyz, viewDir, viewUp.xyz);\n      vec3 reflectedColor = vec3(0.0);\n\n      // if there is a hit with ssr find reflected color from the reprojeted frame\n      if (hitCoordinate.z > 0.0)\n      {\n        vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);\n\n        // fade out if there if the hit is near end of Y axis\n        vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));\n        float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -positionView.z);\n        reflectionHit = waterDiffusion * clamp(1.0 - (1.3*dCoords.y), 0.0, 1.0) * heightMod;\n\n        reflectedColor = linearizeGamma(texture2D(lastFrameColorMap, reprojectedCoordinate).xyz)* reflectionHit * fresnelModifier.y * ssrIntensity;\n      }\n      float seeColorMod =  mix(waterSeeColorMod, waterSeeColorMod*0.5, reflectionHit);\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES((1. - reflectionHit) * reflSky + reflectedColor + reflSea * seeColorMod + specular + foam);\n    }\n  `):a.fragment.code.add(e`\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES(reflSky + reflSea * waterSeeColorMod + specular + foam);\n    }\n  `)}export{a as Water};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{FoamIntensity as t}from\"./FoamRendering.glsl.js\";function r(r){r.fragment.uniforms.add(\"texWaveNormal\",\"sampler2D\"),r.fragment.uniforms.add(\"texWavePerturbation\",\"sampler2D\"),r.fragment.uniforms.add(\"waveParams\",\"vec4\"),r.fragment.uniforms.add(\"waveDirection\",\"vec2\"),r.include(t),r.fragment.code.add(e`\n      const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);\n\n      vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rg - 1.0;\n      }\n\n      float sampleNoiseTexture(vec2 _uv) {\n        return texture2D(texWavePerturbation, _uv).b;\n      }\n\n      vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rgb - 1.0;\n      }\n\n      float computeProgress(vec2 uv, float time) {\n        return fract(time);\n      }\n\n      float computeWeight(vec2 uv, float time) {\n        float progress = computeProgress(uv, time);\n        return 1.0 - abs(1.0 - 2.0 * progress);\n      }\n\n      vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {\n        float flowStrength = waveParams[2];\n        float flowOffset = waveParams[3];\n\n        vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;\n\n        float progress = computeProgress(uv, time + phaseOffset);\n        float weight = computeWeight(uv, time + phaseOffset);\n\n        vec2 result = uv;\n        result -= flowVector * (progress + flowOffset);\n        result += phaseOffset;\n        result += (time - progress) * FLOW_JUMP;\n\n        return vec3(result, weight);\n      }\n\n      const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;\n      const float TIME_NOISE_STRENGTH = 7.77;\n\n      vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\n        float waveStrength = waveParams[0];\n\n        // overall directional shift in uv's for directional wave movement for\n        // now we do a hard coded scale for wave speed such that a unit length\n        // direction is not too fast.\n        vec2 waveMovement = time * -_waveDir;\n\n        float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\n\n        // compute two perturbed uvs and blend weights\n        // then sample the wave normals at the two positions and blend\n        vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);\n        vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);\n\n        vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\n        vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\n\n        // logic to flatten the wave pattern\n        // scale xy components of the normal, then adjust z (up) component\n        vec3 mixNormal = normalize(normal_A + normal_B);\n        mixNormal.xy *= waveStrength;\n        mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\n\n        return mixNormal;\n      }\n\n      vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {\n        float waveTextureRepeat = waveParams[1];\n        vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\n        float foam  = normals2FoamIntensity(normal, waveParams[0]);\n        return vec4(normal, foam);\n      }\n    `)}!function(e){function t(e,t){e.setUniform1i(\"texWaveNormal\",0),e.setUniform1i(\"texWavePerturbation\",1),e.setUniform4f(\"waveParams\",t.waveStrength,t.waveTextureRepeat,t.flowStrength,t.flowOffset),e.setUniform2f(\"waveDirection\",t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)}e.bindUniforms=t}(r||(r={}));export{r as WaterDistortion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst S={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};export{S as DefaultTextureUnits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as v}from\"../../../../chunks/mat3f64.js\";import{f as a}from\"../../../../chunks/vec3f32.js\";var e;!function(e){e.Default={vvSizeEnabled:!1,vvSizeMinSize:a(1,1,1),vvSizeMaxSize:a(100,100,100),vvSizeOffset:a(0,0,0),vvSizeFactor:a(1,1,1),vvSizeValue:a(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:v()}}(e||(e={}));var o=e;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{isSome as t,unwrap as i,unwrapOr as r}from\"../../../../core/maybe.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as n,parameter as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import p from\"../../../webgl/Program.js\";import{makePipelineState as a,defaultDepthWriteParams as d,defaultColorWriteParams as c}from\"../../../webgl/renderState.js\";import{View as u}from\"../core/shaderLibrary/util/View.glsl.js\";import{Slice as h}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as f}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{VisualVariables as m}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{blendingDefault as g,OITBlending as b,OITDepthTest as v,OITDepthWrite as y,OITPolygonOffset as T}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as E}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{stencilWriteMaskOn as P,stencilToolMaskBaseParams as O,stencilBaseAllZerosParams as x,depthCompareAlways as C,stencilToolTransparentOccluderParams as S,stencilWriteMaskOff as j,stencilToolMaskOccluderParams as W,depthCompareLess as w}from\"../lib/StencilUtils.js\";import{R}from\"../../../../chunks/RibbonLine.glsl.js\";const U={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};class z extends s{constructor(e,t){super(e,t),this.stipplePattern=null,this.stippleTextureBind=null,this.stippleTextureRepository=e.stippleTextureRepository}initializeProgram(e){const t=z.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:i.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,stippleEnabled:i.stippleEnabled,stippleOffColorEnabled:i.stippleOffColorEnabled,stippleUVMaxEnabled:i.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:i.stippleIntegerRepeatsEnabled,roundCaps:i.roundCaps,roundJoins:i.roundJoins,vvColor:i.vvColor,vvSize:i.vvSize,vvInstancingEnabled:!0,vvOpacity:i.vvOpacity,falloffEnabled:i.falloffEnabled,innerColorEnabled:i.innerColorEnabled,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new p(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),U)}dispose(){super.dispose(),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}bindPass(e,o,s){if(u.bindProjectionMatrix(this.program,s.camera.projectionMatrix),4===this.configuration.output&&f.bindOutputHighlight(e,this.program,s),s.multipassTerrainEnabled&&(this.program.setUniform2fv(\"viewportDim\",[e.getViewport().width,e.getViewport().height]),E(this.program,e,s)),this.program.setUniform1f(\"intrinsicWidth\",o.width),this.program.setUniform4fv(\"intrinsicColor\",o.color),this.program.setUniform1f(\"miterLimit\",\"miter\"!==o.join?0:o.miterLimit),this.program.setUniform2fv(\"cameraNearFar\",s.camera.nearFar),this.program.setUniform1f(\"pixelRatio\",s.camera.pixelRatio),this.program.setUniform2f(\"screenSize\",s.camera.fullViewport[2],s.camera.fullViewport[3]),m.bindUniformsWithOpacity(this.program,o),this.stipplePattern!==o.stipplePattern){const e=o.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,e),this.stipplePattern=e}if(this.configuration.stippleEnabled){const r=t(this.stippleTextureBind)?this.stippleTextureBind(e,0)*s.camera.pixelRatio:1;if(this.program.setUniform1i(\"stipplePatternTexture\",0),this.program.setUniform1f(\"stipplePatternPixelSizeInv\",1/r),this.configuration.stippleOffColorEnabled){const e=i(o.stippleOffColor);this.program.setUniform4f(\"stippleOffColor\",e[0],e[1],e[2],e.length>3?e[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f(\"falloff\",o.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv(\"innerColor\",r(o.innerColor,o.color)),this.program.setUniform1f(\"innerWidth\",o.innerWidth*s.camera.pixelRatio))}bindDraw(e){u.bindView(this.program,e),h.bindUniformsWithOrigin(this.program,this.configuration,e)}setPipelineState(e,t){const i=this.configuration,r=3===e,o=2===e;return a({blending:0===i.output||7===i.output?r?g:b(e):null,depthTest:{func:v(e)},depthWrite:r?!i.transparent&&i.writeDepth&&d:y(e),colorWrite:c,stencilWrite:i.sceneHasOcludees?P:null,stencilTest:i.sceneHasOcludees?t?O:x:null,polygonOffset:r||o?i.polygonOffset&&H:T})}initializePipeline(){const e=this.configuration,t=e.polygonOffset&&H;return e.occluder&&(this._occluderPipelineTransparent=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:null,stencilTest:S}),this._occluderPipelineOpaque=a({blending:g,polygonOffset:t,depthTest:C,depthWrite:null,colorWrite:c,stencilWrite:j,stencilTest:W}),this._occluderPipelineMaskWrite=a({blending:null,polygonOffset:t,depthTest:w,depthWrite:null,colorWrite:null,stencilWrite:P,stencilTest:O})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return 5}getPipelineState(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}z.shader=new o(R,(()=>import(\"./RibbonLine.glsl.js\")));const H={factor:0,units:-4};class V extends n{constructor(){super(...arguments),this.output=0,this.occluder=!1,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.vertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.writeDepth=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stippleIntegerRepeatsEnabled=!1,this.roundCaps=!1,this.roundJoins=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}e([l({count:8})],V.prototype,\"output\",void 0),e([l()],V.prototype,\"occluder\",void 0),e([l()],V.prototype,\"slicePlaneEnabled\",void 0),e([l()],V.prototype,\"sliceHighlightDisabled\",void 0),e([l()],V.prototype,\"vertexColors\",void 0),e([l()],V.prototype,\"transparent\",void 0),e([l()],V.prototype,\"polygonOffset\",void 0),e([l()],V.prototype,\"writeDepth\",void 0),e([l()],V.prototype,\"stippleEnabled\",void 0),e([l()],V.prototype,\"stippleOffColorEnabled\",void 0),e([l()],V.prototype,\"stippleIntegerRepeatsEnabled\",void 0),e([l()],V.prototype,\"roundCaps\",void 0),e([l()],V.prototype,\"roundJoins\",void 0),e([l()],V.prototype,\"vvSize\",void 0),e([l()],V.prototype,\"vvColor\",void 0),e([l()],V.prototype,\"vvOpacity\",void 0),e([l()],V.prototype,\"falloffEnabled\",void 0),e([l()],V.prototype,\"innerColorEnabled\",void 0),e([l()],V.prototype,\"sceneHasOcludees\",void 0),e([l({count:4})],V.prototype,\"transparencyPassType\",void 0),e([l()],V.prototype,\"multipassTerrainEnabled\",void 0),e([l()],V.prototype,\"cullAboveGround\",void 0);export{z as RibbonLineTechnique,V as RibbonLineTechniqueConfiguration,U as ribbonVertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{clamp as i}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as s}from\"../../../../core/screenUtils.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{s as n,f as a,d as o,a as u,b as c,g as l,l as h,i as p,k as m}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec2.js\";import{plane as f,lineSegment as v}from\"../../support/geometryUtils.js\";import{isTranslationMatrix as g}from\"../lib/Util.js\";import{isInstanceHidden as b}from\"./renderers/utils.js\";import{newLayout as C}from\"../../support/buffer/InterleavedLayout.js\";import{computeAttachmentOriginLines as q}from\"../lib/geometryDataUtils.js\";import S from\"../lib/GLMaterial.js\";import{Material as A,materialParametersDefaults as y}from\"../lib/Material.js\";import P from\"./VisualVariableMaterialParameters.js\";import{ribbonVertexAttributeLocations as x,RibbonLineTechniqueConfiguration as z,RibbonLineTechnique as E}from\"../shaders/RibbonLineTechnique.js\";const j=t.getLogger(\"esri.views.3d.webgl-engine.materials.RibbonLineMaterial\");class O extends A{constructor(e){super(e,R),this._vertexAttributeLocations=x,this.techniqueConfig=new z,this.layout=this.createLayout()}isClosed(e,t){return M(this.params,e,t)}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(t,i){this.techniqueConfig.output=t;const s=e(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=s,this.techniqueConfig.stippleIntegerRepeatsEnabled=s&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=s&&e(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins=\"round\"===this.params.join,this.techniqueConfig.roundCaps=\"round\"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&e(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=i?i.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!i&&i.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!i||i.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,r,n,a,o,u){u?this.intersectDrapedLineGeometry(e,s,n,a):this.intersectLineGeometry(e,t,i,s,this.params.width,a)}intersectDrapedLineGeometry(e,t,s,r){if(!t.options.selectionMode)return;const n=e.vertexAttributes.get(\"position\").data,a=e.vertexAttributes.get(\"size\");let o=this.params.width;if(this.params.vvSizeEnabled){const t=e.vertexAttributes.get(\"sizeFeatureAttribute\").data[0];o*=i(this.params.vvSizeOffset[0]+t*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);const u=s[0],c=s[1],l=(o/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE;for(let p=0;p<n.length-5;p+=3){const e=n[p],t=n[p+1],s=u-e,r=c-t,a=n[p+3]-e,o=n[p+4]-t,l=i((a*s+o*r)/(a*a+o*o),0,1),m=a*l-s,d=o*l-r,f=m*m+d*d;f<h&&(h=f)}h<l*l&&r()}intersectLineGeometry(e,t,s,r,m,C){if(!r.options.selectionMode||b(t))return;if(!g(s))return void j.error(\"intersection assumes a translation-only matrix\");const q=e.vertexAttributes,S=q.get(\"position\").data;let A=m;if(this.params.vvSizeEnabled){const e=q.get(\"sizeFeatureAttribute\").data[0];A*=i(this.params.vvSizeOffset[0]+e*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else q.has(\"size\")&&(A*=q.get(\"size\").data[0]);const y=r.camera,P=_;d(P,r.point);const x=A*y.pixelRatio/2+4*y.pixelRatio;n(Z[0],P[0]-x,P[1]+x,0),n(Z[1],P[0]+x,P[1]+x,0),n(Z[2],P[0]+x,P[1]-x,0),n(Z[3],P[0]-x,P[1]-x,0);for(let i=0;i<4;i++)if(!y.unprojectFromRenderScreen(Z[i],$[i]))return;f.fromPoints(y.eye,$[0],$[1],ee),f.fromPoints(y.eye,$[1],$[2],te),f.fromPoints(y.eye,$[2],$[3],ie),f.fromPoints(y.eye,$[3],$[0],se);let z=Number.MAX_VALUE;const E=T(this.params,q,e.indices)?S.length-2:S.length-5;for(let i=0;i<E;i+=3){G[0]=S[i]+s[12],G[1]=S[i+1]+s[13],G[2]=S[i+2]+s[14];const e=(i+3)%S.length;if(V[0]=S[e]+s[12],V[1]=S[e+1]+s[13],V[2]=S[e+2]+s[14],f.signedDistance(ee,G)<0&&f.signedDistance(ee,V)<0||f.signedDistance(te,G)<0&&f.signedDistance(te,V)<0||f.signedDistance(ie,G)<0&&f.signedDistance(ie,V)<0||f.signedDistance(se,G)<0&&f.signedDistance(se,V)<0)continue;if(y.projectToRenderScreen(G,k),y.projectToRenderScreen(V,H),k[2]<0&&H[2]>0){a(B,G,V);const e=y.frustum,t=-f.signedDistance(e[4],G)/o(B,f.normal(e[4]));u(B,B,t),c(G,G,B),y.projectToRenderScreen(G,k)}else if(k[2]>0&&H[2]<0){a(B,V,G);const e=y.frustum,t=-f.signedDistance(e[4],V)/o(B,f.normal(e[4]));u(B,B,t),c(V,V,B),y.projectToRenderScreen(V,H)}else if(k[2]<0&&H[2]<0)continue;k[2]=0,H[2]=0;const t=v.distance2(v.fromPoints(k,H,N),P);t<z&&(z=t,l(W,G),l(I,V))}const O=r.rayBeginPoint,L=r.rayEndPoint;if(z<x*x){let e=Number.MAX_VALUE;if(v.closestLineSegmentPoint(v.fromPoints(W,I,N),v.fromPoints(O,L,X),J)){a(J,J,O);const t=h(J);u(J,J,1/t),e=t/p(O,L)}C(e,J)}}computeAttachmentOrigin(e,t){const i=e.vertexAttributes;if(!i)return null;const s=e.indices,r=i.get(\"position\");return q(r,s?s.get(\"position\"):null,s&&T(this.params,i,s),t)}createLayout(){const e=C().vec3f(\"position\").f32(\"subdivisionFactor\").vec2f(\"uv0\").vec3f(\"auxpos1\").vec3f(\"auxpos2\");return this.params.vvSizeEnabled?e.f32(\"sizeFeatureAttribute\"):e.f32(\"size\"),this.params.vvColorEnabled?e.f32(\"colorFeatureAttribute\"):e.vec4f(\"color\"),this.params.vvOpacityEnabled&&e.f32(\"opacityFeatureAttribute\"),e}createBufferWriter(){return new D(this.layout,this.params)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new L(e):void 0}validateParameterValues(e){\"miter\"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}requiresTransparent(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}colorRequiresTransparent(t){return e(t)&&t[3]<1&&t[3]>0}}class L extends S{constructor(e){super(e),this.updateParameters()}updateParameters(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(E,this.material.getTechniqueConfig(this.output,e),this.technique)}beginSlot(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}_updateOccludeeState(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}getPipelineState(e,t){return this.technique.getPipelineState(e,t)}}const R={width:0,color:[1,1,1,1],join:\"miter\",cap:\"butt\",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...y,...P.Default};class D{constructor(e,t){switch(this.params=t,this.numJoinSubdivisions=0,this.vertexBufferLayout=e,this.params.join){case\"miter\":case\"bevel\":this.numJoinSubdivisions=t.stipplePattern?1:0;break;case\"round\":this.numJoinSubdivisions=U}}isClosed(e){return T(this.params,e.vertexAttributes,e.indices)}numCapSubdivisions(e){if(this.isClosed(e))return 0;switch(this.params.cap){case\"butt\":return 0;case\"square\":return 1;case\"round\":return F}}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2*this.numCapSubdivisions(e)+2,i=e.indices.get(\"position\").length/2+1,s=this.isClosed(e);let r=s?2:2*t;const n=s?0:1,a=s?i:i-1;if(e.vertexAttributes.has(\"subdivisions\")){const t=e.vertexAttributes.get(\"subdivisions\").data;for(let e=n;e<a;++e){r+=4+2*t[e]}}else{r+=(a-n)*(2*this.numJoinSubdivisions+4)}return r+=2,r}write(e,t,i,s){const r=K,a=Q,o=Y,u=t.vertexAttributes.get(\"position\").data,c=t.indices&&t.indices.get(\"position\"),h=this.numCapSubdivisions(t);c&&c.length!==2*(u.length/3-1)&&console.warn(\"RibbonLineMaterial does not support indices\");let p=null;t.vertexAttributes.has(\"subdivisions\")&&(p=t.vertexAttributes.get(\"subdivisions\").data);let d=1,f=0;this.params.vvSizeEnabled?f=t.vertexAttributes.get(\"sizeFeatureAttribute\").data[0]:t.vertexAttributes.has(\"size\")&&(d=t.vertexAttributes.get(\"size\").data[0]);let v=[1,1,1,1],g=0;this.params.vvColorEnabled?g=t.vertexAttributes.get(\"colorFeatureAttribute\").data[0]:t.vertexAttributes.has(\"color\")&&(v=t.vertexAttributes.get(\"color\").data);let b=0;this.params.vvOpacityEnabled&&(b=t.vertexAttributes.get(\"opacityFeatureAttribute\").data[0]);const C=u.length/3,q=e.transformation,S=new Float32Array(i.buffer),A=this.vertexBufferLayout.stride/4;let y=s*A;const P=y,x=(e,t,i,s,r,n,a)=>{if(S[y++]=t[0],S[y++]=t[1],S[y++]=t[2],S[y++]=s,S[y++]=r,S[y++]=n,S[y++]=e[0],S[y++]=e[1],S[y++]=e[2],S[y++]=i[0],S[y++]=i[1],S[y++]=i[2],this.params.vvSizeEnabled?S[y++]=f:S[y++]=d,this.params.vvColorEnabled)S[y++]=g;else{const e=Math.min(4*a,v.length-4);S[y++]=v[e+0],S[y++]=v[e+1],S[y++]=v[e+2],S[y++]=v[e+3]}this.params.vvOpacityEnabled&&(S[y++]=b)};y+=A,n(a,u[0],u[1],u[2]),q&&m(a,a,q);const z=this.isClosed(t);if(z){const e=u.length-3;n(r,u[e],u[e+1],u[e+2]),q&&m(r,r,q)}else{l(r,a),n(o,u[3],u[4],u[5]),q&&m(o,o,q);for(let e=0;e<h;++e){const t=1-e/h;x(r,a,o,t,1,-4,0),x(r,a,o,t,1,4,0)}x(r,a,o,0,0,-4,0),x(r,a,o,0,0,4,0),l(r,a),l(a,o)}const E=z?C:C-1;for(let j=z?0:1;j<E;j++){const e=(j+1)%C*3;n(o,u[e+0],u[e+1],u[e+2]),q&&m(o,o,q),x(r,a,o,0,1,-1,j),x(r,a,o,0,1,1,j);const t=p?p[j]:this.numJoinSubdivisions;for(let i=0;i<t;++i){const e=(i+1)/(t+1);x(r,a,o,e,1,-2,j),x(r,a,o,e,1,2,j)}x(r,a,o,1,0,-2,j),x(r,a,o,1,0,2,j),l(r,a),l(a,o)}if(z){y=w(S,P+A,S,y,2*A)}else{x(r,a,o,0,1,-5,E),x(r,a,o,0,1,5,E);for(let e=0;e<h;++e){const t=(e+1)/h;x(r,a,o,t,1,-5,E),x(r,a,o,t,1,5,E)}}w(S,P+A,S,P,A);y=w(S,y-A,S,y,A)}}function w(e,t,i,s,r){for(let n=0;n<r;n++)i[s++]=e[t++];return s}function T(e,t,i){return M(e,t.get(\"position\").data,i?i.get(\"position\"):null)}function M(e,t,i){return!!e.isClosed&&(i?i.length>2:t.length>6)}const F=3,U=1,G=r(),V=r(),B=r(),J=r(),_=r(),k=s(),H=s(),W=r(),I=r(),N=v.create(),X=v.create(),K=r(),Q=r(),Y=r(),Z=[s(),s(),s(),s()],$=[r(),r(),r(),r()],ee=f.create(),te=f.create(),ie=f.create(),se=f.create();export{O as RibbonLineMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import\"../../../../chunks/builtins.js\";import r from\"../../../webgl/Texture.js\";import\"../../../webgl/FramebufferObject.js\";class n{constructor(){this.cache=new Map}dispose(){this.cache.forEach((t=>{e(t.texture)&&(t.texture.dispose(),t.texture=null)})),this.cache.clear()}acquire(e){if(t(e))return null;const n=this.patternId(e),i=this.cache.get(n);if(i)return i.refCount++,i.bind;const s=2,u=this.patternToTextureData(e,2),o=u.length/s,a={refCount:1,texture:null,bind:(e,n)=>(t(a.texture)&&(a.texture=new r(e,{width:u.length,height:1,internalFormat:6406,pixelFormat:6406,dataType:5121,wrapMode:33071},u)),e.bindTexture(a.texture,n),o)};return this.cache.set(n,a),a.bind}release(r){if(t(r))return;const n=this.patternId(r),i=this.cache.get(n);i&&(i.refCount--,0===i.refCount&&(e(i.texture)&&i.texture.dispose(),this.cache.delete(n)))}swap(e,t){const r=this.acquire(t);return this.release(e),r}patternId(e){return e.join(\",\")}patternToTextureData(e,t){const r=e.reduce(((e,t)=>e+t))*t,n=new Uint8Array(r);let i=!0,s=0;for(const u of e){for(let e=0;e<u*t;e++)n[s++]=i?255:0;i=!i}return n}}function i(e){return t(e)?e:e.slice()}function s(e){return[e,e]}export{n as StippleTextureRepository,i as createStipplePattern,s as createStipplePatternSimple};\n"],"sourceRoot":""}