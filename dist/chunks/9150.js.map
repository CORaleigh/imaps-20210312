{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","webpack://imaps/./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["R","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","this","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","s","d","_checkProjection","spatialReference","u","url","responseType","data","p","geometryType","j","fields","E","hasZ","T","q","objectIdField","objectIdFieldType","objectIdFieldName","x","w","timeInfo","push","name","message","unknownFields","length","details","e","some","t","type","editable","nullable","unshift","alias","field","D","startTimeField","get","endTimeField","trackIdField","O","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","hasM","featureStore","_nextObjectId","maxObjectId","S","geometry","_loadInitialFeatures","i","Promise","all","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","n","r","attributes","_assignObjectId","objectId","addMany","fullExtent","start","end","timeExtent","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","o","a","l","uid","y","f","has","m","getFeature","add","isFinite","forEach","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","coordinates","value","done","next","g","h","F","G","b","P","M","lengths","coords","I","crs","properties","RegExp","test","N","c","Set","Number","NEGATIVE_INFINITY","Math","max","id","Object","keys","filter","delete"],"mappings":"0RAIyoC,MAAMA,EAAE,CAACC,gBAAe,EAAGC,aAAa,yCAAyCC,wBAAuB,EAAGC,iCAAgC,EAAGC,gCAA+B,EAAGC,0BAA0B,CAACC,0BAAyB,EAAGC,oBAAmB,EAAGC,8BAA6B,EAAGC,mCAAkC,EAAGC,2BAA0B,EAAGC,kBAAiB,EAAGC,8BAA6B,EAAGC,qCAAoC,EAAGC,sBAAqB,EAAGC,iBAAgB,EAAGC,oBAAmB,EAAGC,6BAA4B,EAAGC,uBAAsB,EAAGC,4BAA2B,IAA8gM,QAAzgM,MAAQ,cAAcC,KAAKC,aAAa,KAAK,UAAUD,KAAKC,cAAcD,KAAKC,cAAcD,KAAKC,aAAaC,UAAUF,KAAKC,aAAaD,KAAKG,gBAAgBH,KAAKI,aAAaJ,KAAKK,yBAAyB,KAAK,WAAWC,GAAG,MAAMC,EAAE,SAASP,KAAKQ,iBAAiBF,EAAEG,kBAAkB,IAAIC,EAAE,KAAQJ,EAAEK,MAAKD,SAAS,aAAEJ,EAAEK,IAAI,CAACC,aAAa,UAAUC,WAAW,QAAEH,IAAG,MAAMI,GAAE,QAAEJ,EAAE,CAACK,aAAaT,EAAES,eAAeC,EAAEV,EAAEW,QAAQH,EAAEG,QAAQ,GAAGC,EAAE,MAAMZ,EAAEa,KAAKb,EAAEa,KAAKL,EAAEK,KAAKC,EAAEN,EAAEC,aAAaM,EAAEf,EAAEgB,gBAAgB,WAAWR,EAAES,kBAAkBT,EAAEU,kBAAkB,aAAa,WAAWC,EAAEnB,EAAEG,kBAAkB,KAAE,IAAIiB,EAAEpB,EAAEqB,SAAS,IAAIP,EAAE,MAAM,IAAI,IAAE,iCAAiC,4EAA4E,GAAG,WAAWN,EAAES,mBAAmBhB,EAAEqB,KAAK,CAACC,KAAK,oCAAoCC,QAAQ,yDAAyDd,IAAIF,EAAEG,QAAQH,EAAEiB,cAAcC,OAAO,GAAGzB,EAAEqB,KAAK,CAACC,KAAK,oCAAoCC,QAAQ,4EAA4EG,QAAQ,CAACF,cAAcjB,EAAEiB,iBAAiBV,EAAE,CAAC,IAAIa,EAAE,KAAKlB,EAAEmB,MAAMC,GAAGA,EAAEP,OAAOR,IAAIa,EAAEE,GAAE,MAAOF,EAAEG,KAAK,mBAAmBH,EAAEI,UAAS,EAAGJ,EAAEK,UAAS,GAAIvB,EAAEwB,QAAQ,CAACC,MAAMpB,EAAEQ,KAAKR,EAAEgB,KAAK,mBAAmBC,UAAS,EAAGC,UAAS,IAAK,IAAI,MAAMH,KAAKpB,EAAE,CAAC,GAAG,MAAMoB,EAAEP,OAAOO,EAAEP,KAAKO,EAAEK,OAAO,MAAML,EAAEK,QAAQL,EAAEK,MAAML,EAAEP,OAAOO,EAAEP,KAAK,MAAM,IAAI,IAAE,mCAAmC,wBAAwB,CAACa,MAAMN,IAAI,GAAGA,EAAEP,OAAOR,IAAIe,EAAEC,KAAK,qBAAqB,IAAI,uBAAqBD,EAAEC,MAAM,MAAM,IAAI,IAAE,mCAAmC,2BAA2BD,EAAEP,QAAQ,CAACa,MAAMN,IAAI,MAAMO,EAAE,GAAG3C,KAAKG,gBAAgB,GAAG,IAAI,MAAM+B,KAAKlB,EAAE,GAAG,qBAAqBkB,EAAEG,MAAM,0BAA0BH,EAAEG,KAAK,CAACH,EAAEI,SAAS,MAAMJ,EAAEI,YAAYJ,EAAEI,SAASJ,EAAEK,SAAS,MAAML,EAAEK,YAAYL,EAAEK,SAAS,MAAMH,GAAE,QAAEF,GAAGA,EAAEK,eAAU,IAASH,EAAEO,EAAET,EAAEL,MAAMO,EAAEpC,KAAKG,gBAAgByB,KAAKM,GAAG,GAAGlC,KAAKI,aAAa,IAAI,IAAEY,GAAGU,EAAE,CAAC,GAAGA,EAAEkB,eAAe,CAAC,MAAMV,EAAElC,KAAKI,aAAayC,IAAInB,EAAEkB,gBAAgBV,GAAGR,EAAEkB,eAAeV,EAAEL,KAAKK,EAAEG,KAAK,qBAAqBX,EAAEkB,eAAe,KAAK,GAAGlB,EAAEoB,aAAa,CAAC,MAAMZ,EAAElC,KAAKI,aAAayC,IAAInB,EAAEoB,cAAcZ,GAAGR,EAAEoB,aAAaZ,EAAEL,KAAKK,EAAEG,KAAK,qBAAqBX,EAAEoB,aAAa,KAAK,GAAGpB,EAAEqB,aAAa,CAAC,MAAMb,EAAElC,KAAKI,aAAayC,IAAInB,EAAEqB,cAAcb,EAAER,EAAEqB,aAAab,EAAEL,MAAMH,EAAEqB,aAAa,KAAKxC,EAAEqB,KAAK,CAACC,KAAK,8CAA8CC,QAAQ,0BAA0BG,QAAQ,CAACN,SAASD,MAAMA,EAAEkB,gBAAgBlB,EAAEoB,eAAevC,EAAEqB,KAAK,CAACC,KAAK,iCAAiCC,QAAQ,8CAA8CG,QAAQ,CAACN,SAASD,KAAKA,EAAE,MAAM,MAAMsB,EAAE,CAACC,SAAS1C,EAAE2C,cAAc,GAAGC,gBAAgB,IAAIxE,EAAEyE,aAAY,QAAEhC,GAAGiC,WAAU,QAAEV,GAAGW,OAAO,KAAKvC,aAAaK,EAAEE,cAAcD,EAAEJ,OAAOD,EAAEG,OAAOD,EAAES,SAASD,IAAI1B,KAAKC,aAAa,IAAI,IAAE,CAACgB,OAAOD,EAAED,aAAaK,EAAEmC,MAAK,EAAGpC,KAAKD,EAAEI,cAAcD,EAAEZ,iBAAiBgB,EAAEE,SAASD,EAAE8B,aAAa,IAAI,IAAE,CAACzC,aAAaK,EAAEmC,MAAK,EAAGpC,KAAKD,MAAMlB,KAAKK,0BAAyB,QAAEsC,EAAEtB,GAAGrB,KAAKyD,cAAc3C,EAAE4C,YAAY,EAAE,MAAMC,GAAE,QAAEjD,EAAE,CAACK,aAAaK,EAAED,KAAKD,EAAEM,kBAAkB,WAAWV,EAAES,kBAAkBF,EAAE,OAAO,KAAI,QAAEI,EAAE,MAAG,IAAI,MAAMS,KAAKyB,EAAEzB,EAAE0B,WAAW1B,EAAE0B,UAAS,SAAE,SAAE,QAAE1B,EAAE0B,SAASxC,EAAEF,GAAE,GAAI,KAAEO,KAAK,OAAOzB,KAAK6D,qBAAqBb,EAAEW,GAAGX,EAAE,iBAAiBd,GAAG,MAAMzB,iBAAiB2B,EAAErB,aAAa+C,GAAG9D,KAAKC,aAAa,aAAa8D,QAAQC,IAAI,EAAC,OAAE5B,EAAE0B,IAAG,QAAE5B,EAAE+B,KAAK7B,IAAG,QAAEF,EAAEgC,QAAQ9B,KAAKpC,KAAKmE,YAAYjC,GAAG,oBAAoBA,EAAE,GAAGE,EAAE,IAAI,OAAOpC,KAAKC,aAAamE,aAAalC,EAAEE,EAAEiC,QAAQ,wBAAwBnC,EAAE,GAAGE,EAAE,IAAI,OAAOpC,KAAKC,aAAaqE,qBAAqBpC,EAAEE,EAAEiC,QAAQ,qBAAqBnC,EAAE,GAAGE,EAAE,IAAI,OAAOpC,KAAKC,aAAasE,mBAAmBrC,EAAEE,EAAEiC,QAAQ,kBAAkBnC,EAAE,GAAGE,EAAE,IAAI,OAAOpC,KAAKC,aAAauE,sBAAsBtC,EAAEE,EAAEiC,QAAQ,qBAAqBnC,EAAEE,GAAG,MAAMoB,aAAaM,EAAExC,cAAchB,GAAGN,KAAKC,aAAawE,EAAE,GAAG,IAAI,MAAMC,KAAKtC,EAAE,CAAC,MAAMA,EAAEpC,KAAKK,2BAA2ByD,GAAE,QAAE9D,KAAKI,aAAaJ,KAAKG,gBAAgBiC,EAAEsC,EAAEC,YAAW,EAAGzC,EAAEe,UAAUa,EAAE5B,EAAEgB,cAActB,KAAKkC,IAAI9D,KAAK4E,gBAAgBxC,EAAEsC,EAAEC,YAAW,GAAID,EAAEC,WAAWvC,EAAEsC,EAAEG,SAASzC,EAAE9B,GAAGmE,EAAE7C,KAAK8C,IAAI,GAAGZ,EAAEgB,QAAQL,GAAGvC,EAAEiB,gBAAgBG,OAAOtD,KAAKC,aAAa8E,WAAW7C,EAAEiB,gBAAgBxB,SAAS,CAAC,MAAMqD,MAAM5C,EAAE6C,IAAInB,GAAG9D,KAAKC,aAAaiF,WAAWhD,EAAEiB,gBAAgBxB,SAASuD,WAAW,CAAC9C,EAAE0B,GAAG,OAAO5B,EAAE,YAAYA,GAAG,MAAM+B,KAAK7B,EAAE8B,QAAQJ,EAAEqB,QAAQ7E,GAAG4B,EAAEuC,EAAE,CAACW,WAAW,GAAGC,cAAc,GAAGC,cAAc,GAAGC,cAAc,IAAI,GAAGnD,GAAGA,EAAEJ,QAAQhC,KAAKwF,eAAef,EAAErC,GAAG0B,GAAGA,EAAE9B,QAAQhC,KAAKyF,kBAAkBhB,EAAEX,GAAGxD,GAAGA,EAAE0B,OAAO,CAAC,IAAI,MAAME,KAAK5B,EAAEmE,EAAEY,cAAczD,MAAK,QAAEM,IAAIlC,KAAKC,aAAauD,aAAakC,eAAepF,GAAG,MAAM,CAACyE,WAAW/E,KAAKC,aAAa8E,WAAWG,WAAWlF,KAAKC,aAAaiF,WAAWS,mBAAmBlB,GAAG,eAAevC,EAAEE,GAAG,MAAMgD,WAAWtB,GAAG5B,GAAGnB,aAAa0D,EAAElB,KAAKmB,EAAEvD,KAAKyE,EAAEtE,cAAcuE,EAAEpF,iBAAiBqF,EAAEtC,aAAa9C,GAAGV,KAAKC,aAAaa,EAAE,GAAG,IAAI,MAAMP,KAAK6B,EAAE,CAAC,GAAG7B,EAAEqD,UAAUa,KAAI,QAAElE,EAAEqD,UAAU,CAACE,EAAElC,MAAK,QAAE,6BAA6B,SAAS,MAAMQ,EAAEpC,KAAKK,2BAA2BqE,GAAE,QAAE1E,KAAKI,aAAaJ,KAAKG,gBAAgBiC,EAAE7B,EAAEoE,YAAY,GAAGD,EAAEZ,EAAElC,KAAK8C,OAAO,CAAC,GAAG1E,KAAK4E,gBAAgBxC,EAAE7B,EAAEoE,YAAYpE,EAAEoE,WAAWvC,EAAE,MAAM7B,EAAEwF,IAAI,CAAC,MAAM3D,EAAE7B,EAAEoE,WAAWkB,GAAG3D,EAAEqD,cAAchF,EAAEwF,KAAK3D,EAAE7B,EAAEqD,WAAWrD,EAAEqD,UAAS,SAAE,QAAErD,EAAEqD,SAASkC,GAAGvF,EAAEqD,SAASnD,iBAAiBqF,IAAIhF,EAAEc,KAAKrB,GAAGuD,EAAElC,MAAK,QAAErB,EAAEoE,WAAWkB,MAAMnF,EAAEoE,SAAQ,QAAE,GAAGhE,EAAE2D,EAAEmB,EAAElB,EAAEmB,IAAI,mBAAmBP,cAAcpD,GAAGE,GAAG,MAAMrB,aAAa+C,EAAEP,KAAKkB,EAAEtD,KAAKuD,EAAEpD,cAAcsE,EAAEnF,iBAAiBoF,EAAErC,aAAasC,GAAG9F,KAAKC,aAAa,IAAI,MAAMM,KAAK6B,EAAE,CAAC,MAAMuC,WAAWvC,EAAEwB,SAASoC,GAAGzF,EAAE0F,EAAE7D,GAAGA,EAAEwD,GAAG,GAAG,MAAMK,EAAE,CAAC/D,EAAEN,MAAK,QAAE,oBAAoBgE,cAAc,SAAS,IAAIE,EAAEI,IAAID,GAAG,CAAC/D,EAAEN,MAAK,QAAE,0BAA0BqE,cAAc,SAAS,MAAME,GAAE,QAAEL,EAAEM,WAAWH,GAAGnC,EAAEY,EAAED,GAAG,GAAGuB,EAAE,CAAC,GAAGlC,KAAI,QAAEkC,GAAG,CAAC9D,EAAEN,MAAK,QAAE,6BAA6B,SAASuE,EAAEvC,UAAS,SAAE,QAAEoC,EAAEH,GAAGG,EAAEvF,iBAAiBoF,GAAG,GAAGzD,EAAE,CAAC,MAAM0B,GAAE,QAAE9D,KAAKI,aAAaJ,KAAKG,gBAAgBgG,EAAExB,WAAWvC,GAAG,GAAG0B,EAAE,CAAC5B,EAAEN,KAAKkC,GAAG,UAAUgC,EAAEO,KAAI,QAAEF,EAAErC,EAAEY,EAAED,EAAEmB,IAAI1D,EAAEN,MAAK,QAAEqE,KAAK,gBAAgB/D,EAAEE,EAAE0B,GAAE,GAAI,MAAMxD,EAAEN,KAAKC,aAAaqB,cAAcwC,GAAGwC,SAASlE,EAAE9B,IAAI4B,EAAE5B,GAAG8B,EAAE9B,GAAG4B,EAAE5B,GAAGN,KAAKyD,gBAAgB,uBAAuBK,GAAG,UAAU,QAAE,KAAEA,GAAG,MAAM,MAAM,IAAI,IAAE,gBAAgB,gC,sGCAl/O,SAASY,EAAExC,GAAG,MAAMuC,EAAE,GAAG,OAAOvC,EAAEqE,SAASrE,GAAGuC,EAAE7C,KAAKM,KAAKuC,EAAE,MAAMX,EAAE,CAAC0C,WAAW,uBAAuBC,gBAAgB,uBAAuBC,WAAW,yBAAyBC,MAAM,oBAAoBC,QAAQ,sBAAsBC,aAAa,uBAAuB,SAASvG,EAAE4B,GAAG,OAAOA,EAAEG,MAAM,IAAI,gBAAgBH,EAAE,MAAM,IAAI,oBAAoB,IAAI,MAAMuC,KAAKvC,EAAE4E,SAASrC,UAAUA,IAAI,SAAS/D,EAAEwB,GAAG,IAAIA,EAAE,OAAO,KAAK,OAAOA,EAAEG,MAAM,IAAI,cAAcH,EAAE6E,YAAY,MAAM,IAAI,aAAa,IAAI,mBAAmB7E,EAAE6E,YAAY,MAAM,IAAI,kBAAkB,IAAI,UAAU,IAAI,MAAMtC,KAAKvC,EAAE6E,kBAAkBtC,EAAE,MAAM,IAAI,eAAe,IAAI,MAAMA,KAAKvC,EAAE6E,YAAY,IAAI,MAAM7E,KAAKuC,QAAQvC,GAAgR,SAAS4D,EAAE5D,GAAG,OAAO,CAAC,MAAM8E,MAAMvC,EAAEwC,KAAK7E,GAAGF,EAAEgF,OAAO,GAAG9E,EAAE,OAAM,EAAG,GAAGqC,EAAEzC,OAAO,EAAE,OAAM,GAAwD,SAASgE,EAAE9D,GAAG,IAAIuC,EAAE,EAAE,IAAI,IAAIrC,EAAE,EAAEA,EAAEF,EAAEF,OAAOI,IAAI,CAAC,MAAMwD,EAAE1D,EAAEE,GAAGsC,EAAExC,GAAGE,EAAE,GAAGF,EAAEF,QAAQyC,GAAGmB,EAAE,GAAGlB,EAAE,GAAGA,EAAE,GAAGkB,EAAE,GAAG,OAAOnB,GAAG,EAAE,SAAS3D,EAAEoB,GAAG,MAAMuC,EAAEvC,EAAE,GAAGE,EAAEF,EAAEA,EAAEF,OAAO,GAAG,OAAOyC,EAAE,KAAKrC,EAAE,IAAIqC,EAAE,KAAKrC,EAAE,IAAIqC,EAAE,KAAKrC,EAAE,IAAIF,EAAEN,KAAK6C,GAAGvC,EAAE,SAAS3B,EAAE2B,EAAEuC,EAAErC,GAAG,OAAOqC,EAAEpC,MAAM,IAAI,aAAa,OAAqL,SAAWH,EAAEuC,EAAErC,GAAG,OAAOuB,EAAEzB,EAAEuC,EAAEsC,YAAY3E,GAAGF,EAA5NiF,CAAEjF,EAAEuC,EAAErC,GAAG,IAAI,kBAAkB,OAA+L,SAAWF,EAAEuC,EAAErC,GAAG,IAAI,MAAMwD,KAAKnB,EAAEsC,YAAYpD,EAAEzB,EAAE0D,EAAExD,GAAG,OAAOF,EAAvPiE,CAAEjE,EAAEuC,EAAErC,GAAG,IAAI,aAAa,OAA+N,SAAWF,EAAEuC,EAAErC,GAAG,OAAOuB,EAAEzB,EAAEuC,EAAEsC,YAAY3E,GAAGF,EAAtQkF,CAAElF,EAAEuC,EAAErC,GAAG,IAAI,eAAe,OAA4O,SAAWF,EAAEuC,EAAErC,GAAG,IAAI,MAAMwD,KAAKnB,EAAEsC,YAAY,CAAC/F,EAAEkB,EAAE0D,EAAE,GAAGxD,GAAG,IAAI,IAAIqC,EAAE,EAAEA,EAAEmB,EAAE5D,OAAOyC,IAAI4C,EAAEnF,EAAE0D,EAAEnB,GAAGrC,GAAG,OAAOF,EAA/UR,CAAEQ,EAAEuC,EAAErC,GAAG,IAAI,QAAQ,OAA4T,SAAWF,EAAEuC,EAAErC,GAAG,OAAOkF,EAAEpF,EAAEuC,EAAEsC,YAAY3E,GAAGF,EAAnWqF,CAAErF,EAAEuC,EAAErC,GAAG,IAAI,UAAU,OAA8U,SAAWF,EAAEuC,EAAErC,GAAG,MAAMwD,EAAEnB,EAAEsC,YAAY/F,EAAEkB,EAAE0D,EAAE,GAAGxD,GAAG,IAAI,IAAIsC,EAAE,EAAEA,EAAEkB,EAAE5D,OAAO0C,IAAI2C,EAAEnF,EAAE0D,EAAElB,GAAGtC,GAAG,OAAOF,EAAzasF,CAAEtF,EAAEuC,EAAErC,IAAqa,SAASpB,EAAEkB,EAAEuC,EAAErC,GAAG,MAAMwD,EAAE9E,EAAE2D,IAAn7B,SAAWvC,GAAG,OAAO8D,EAAE9D,GAA+5B+D,CAAEL,GAAYjC,EAAEzB,EAAE0D,EAAExD,GAAfqF,EAAEvF,EAAE0D,EAAExD,GAAY,SAASiF,EAAEnF,EAAEuC,EAAErC,GAAG,MAAMwD,EAAE9E,EAAE2D,IAA/8B,SAAWvC,GAAG,OAAO8D,EAAE9D,GAA27B2D,CAAED,GAAYjC,EAAEzB,EAAE0D,EAAExD,GAAfqF,EAAEvF,EAAE0D,EAAExD,GAAY,SAASuB,EAAEzB,EAAEuC,EAAErC,GAAG,IAAI,MAAMwD,KAAKnB,EAAE6C,EAAEpF,EAAE0D,EAAExD,GAAGF,EAAEwF,QAAQ9F,KAAK6C,EAAEzC,QAAQ,SAASyF,EAAEvF,EAAEuC,EAAErC,GAAG,IAAI,IAAIwD,EAAEnB,EAAEzC,OAAO,EAAE4D,GAAG,EAAEA,IAAI0B,EAAEpF,EAAEuC,EAAEmB,GAAGxD,GAAGF,EAAEwF,QAAQ9F,KAAK6C,EAAEzC,QAAQ,SAASsF,EAAEpF,EAAEuC,EAAErC,GAAG,MAAMwD,EAAElB,EAAEZ,GAAGW,EAAEvC,EAAEyF,OAAO/F,KAAKgE,EAAElB,GAAGtC,EAAEjB,MAAMe,EAAEyF,OAAO/F,KAAKkC,GAAG,GAAG,SAASrC,EAAES,GAAG,cAAcA,GAAG,IAAI,SAAS,MAAM,sBAAsB,IAAI,SAAS,MAAM,sBAAsB,QAAQ,MAAM,WAAW,SAAS0F,EAAEnD,GAAG,IAAIA,EAAE,MAAM,IAAI,IAAE,sBAAsB,yBAAyB,GAAG,YAAYA,EAAEpC,MAAM,sBAAsBoC,EAAEpC,KAAK,MAAM,IAAI,IAAE,2CAA2C,+CAA+C,CAACxB,KAAK4D,IAAI,MAAMoD,IAAIzF,GAAGqC,EAAE,IAAIrC,EAAE,OAAO,MAAMwD,EAAE,iBAAiBxD,EAAEA,EAAE,SAASA,EAAEC,KAAKD,EAAE0F,WAAWjG,KAAK,KAAK6C,EAAE,IAAIqD,OAAO,oBAAoB,KAAK,IAAInC,IAAIlB,EAAEsD,KAAKpC,GAAG,MAAM,IAAI,IAAE,gCAAgC,mCAAmC,CAACiC,IAAIzF,IAAI,SAAS6F,EAAE/F,EAAEuC,EAAE,IAAI,MAAMrC,EAAE9B,EAAE4B,GAAG0D,EAAE,GAAGsC,EAAE,IAAIC,IAAIlC,EAAE,IAAIkC,IAAI,IAAItC,EAAEG,GAAE,EAAGlF,EAAEsH,OAAOC,kBAAkB9H,EAAE,KAAK4G,GAAE,GAAIpG,aAAaoF,EAAE,MAAM1B,EAAE2C,GAAE,EAAG,OAAO,CAAC,MAAMJ,MAAM9E,EAAE+E,KAAKxC,GAAGrC,EAAE8E,OAAO,GAAGzC,EAAE,CAAC,MAAMvC,EAAE3B,GAAG,IAAIA,EAAEyB,QAAQzB,EAAE,IAAI,KAAK,GAAG2B,EAAE,IAAI,MAAMuC,KAAKmB,EAAEnB,EAAE5C,OAAOK,IAAIuC,EAAEpC,KAAK,oBAAoB,MAAM,CAACpB,OAAO2E,EAAE7E,aAAaoF,EAAEhF,KAAK6E,EAAEtC,YAAY4E,KAAKC,IAAI,EAAEzH,GAAGU,kBAAkBU,EAAEX,kBAAkBsE,EAAE9D,cAAc2C,EAAEuB,IAAI,MAAMrC,SAAStD,EAAEwH,WAAWpG,EAAE8G,GAAGjB,GAAGrF,EAAE,KAAI5B,IAAI6F,IAAIA,EAAErC,EAAExD,EAAE+B,OAAOyB,EAAExD,EAAE+B,QAAQ8D,MAAQH,IAAGA,EAAEF,EAAEpF,EAAEJ,KAAO6G,IAAIA,EAAE,MAAMI,EAAEJ,IAAItB,SAAS0B,EAAE,WAAW1B,IAAItF,EAAEkI,OAAOC,KAAKhH,GAAGiH,QAAQzG,GAAGR,EAAEQ,KAAKqF,OAAOJ,GAAG,WAAWtB,GAAG,MAAM0B,IAAIzG,EAAEwH,KAAKC,IAAIzH,EAAEyG,GAAGhH,EAAEyB,OAAO,EAAEzB,EAAEA,EAAEoI,QAAQzG,GAAGR,EAAEQ,KAAKqF,IAAI,IAAIhH,EAAEyB,SAASzB,EAAEmB,EAAEnB,EAAE,MAAMgH,EAAEhH,EAAE,MAAM6G,GAAG1F,GAAE,CAAC,IAAIQ,GAAE,EAAG,IAAI,MAAMuC,KAAK/C,EAAE,CAAC,GAAGwG,EAAEhC,IAAIzB,GAAG,SAAS,MAAMrC,EAAEV,EAAE+C,GAAG,GAAG,MAAMrC,EAAE,CAACF,GAAE,EAAG+D,EAAEI,IAAI5B,GAAG,SAAS,MAAMC,EAAEjD,EAAEW,GAAG,YAAYsC,GAAGuB,EAAE2C,OAAOnE,GAAGyD,EAAE7B,IAAI5B,GAAGmB,EAAEhE,KAAK,CAACC,KAAK4C,EAAEhC,MAAMgC,EAAEpC,KAAKqC,KAAKuB,EAAEI,IAAI5B,GAAG2C,EAAElF,IAAK,SAASd,EAAEc,EAAEuC,GAAG,OAAr2H,SAAWvC,GAAG,MAAMuC,EAAE,GAAG,OAAO,CAAC,MAAMuC,MAAM5E,EAAE6E,KAAKrB,GAAG1D,EAAEgF,OAAO,GAAGtB,EAAE,OAAOnB,EAAEA,EAAE7C,KAAKQ,IAAuxHwD,CAAlmG,UAAW1D,EAAE0D,EAAE,IAAI,MAAM7E,aAAa2D,EAAElD,kBAAkBlB,GAAGsF,EAAE,OAAO,CAAC,MAAMoB,MAAMtG,EAAEuG,KAAKiB,GAAGhG,EAAEgF,OAAO,GAAGgB,EAAE,OAAO,MAAMtE,SAASkC,EAAEgC,WAAW7B,EAAEuC,GAAG3C,GAAGnF,EAAE,GAAGoF,GAAGhC,EAAEgC,EAAEzD,QAAQqC,EAAE,SAAS,MAAMsB,EAAEC,GAAG,GAAG3F,GAAG,MAAMuF,IAAIG,EAAE1F,KAAK0F,EAAE1F,GAAGuF,GAAG,MAAM/E,EAAE,IAAI,IAAEgF,EAAEvF,EAAE,IAAI,IAAEuF,EAAEF,GAAG,KAAKI,SAASlF,GAA01FoH,CAAE5H,EAAE4B,GAAGuC","file":"chunks/9150.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{WGS84 as t,equals as i}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as s}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import r from\"../../../../request.js\";import{kebabDict as o}from\"../../../support/fieldType.js\";import{convertFromGeometry as a,convertToGeometry as l,convertFromFeatures as d,convertToFeature as u,convertFromFeature as p}from\"../../featureConversionUtils.js\";import y from\"../../../support/FieldsIndex.js\";import{validateGeoJSON as f,inferLayerProperties as m,createOptimizedFeatures as c}from\"./geojson.js\";import{createDrawingInfo as h,createDefaultTemplate as g,createDefaultAttributesFunction as I}from\"../support/clientSideDefaults.js\";import F from\"../../data/FeatureStore.js\";import{project as b,checkProjectionSupport as j}from\"../../data/projectionSupport.js\";import _ from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as E,mixAttributes as T,createFeatureEditSuccessResult as q,createFeatureEditErrorResult as x,simplify as w}from\"../support/sourceUtils.js\";const R={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class D{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(s){const d=[];await this._checkProjection(s.spatialReference);let u=null;if(s.url){u=(await r(s.url,{responseType:\"json\"})).data,await f(u)}const p=m(u,{geometryType:s.geometryType}),j=s.fields||p.fields||[],E=null!=s.hasZ?s.hasZ:p.hasZ,T=p.geometryType,q=s.objectIdField||(\"number\"===p.objectIdFieldType?p.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",x=s.spatialReference||t;let w=s.timeInfo;if(!T)throw new e(\"geojson-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(\"string\"===p.objectIdFieldType&&d.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),j===p.fields&&p.unknownFields.length>0&&d.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:p.unknownFields}}),q){let e=null;j.some((t=>t.name===q&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):j.unshift({alias:q,name:q,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of j){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===q&&(t.type=\"esriFieldTypeOID\"),-1===o.jsonValues.indexOf(t.type))throw new e(\"geojson-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const D={};this._requiredFields=[];for(const e of j)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?D[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new y(j),w){if(w.startTimeField){const e=this._fieldsIndex.get(w.startTimeField);e?(w.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.startTimeField=null}if(w.endTimeField){const e=this._fieldsIndex.get(w.endTimeField);e?(w.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.endTimeField=null}if(w.trackIdField){const e=this._fieldsIndex.get(w.trackIdField);e?w.trackIdField=e.name:(w.trackIdField=null,d.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:w}}))}w.startTimeField||w.endTimeField||(d.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:w}}),w=null)}const O={warnings:d,featureErrors:[],layerDefinition:{...R,drawingInfo:h(T),templates:g(D),extent:null,geometryType:T,objectIdField:q,fields:j,hasZ:!!E,timeInfo:w}};this._queryEngine=new _({fields:j,geometryType:T,hasM:!1,hasZ:E,objectIdField:q,spatialReference:x,timeInfo:w,featureStore:new F({geometryType:T,hasM:!1,hasZ:E})}),this._createDefaultAttributes=I(D,q),this._nextObjectId=p.maxObjectId+1;const S=c(u,{geometryType:T,hasZ:E,objectIdFieldName:\"number\"===p.objectIdFieldType?q:null});if(!i(x,t))for(const e of S)e.geometry&&(e.geometry=a(b(l(e.geometry,T,E,!1),t,x)));return this._loadInitialFeatures(O,S),O}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([E(t,i),j(e.adds,t),j(e.updates,t)]),this._applyEdits(e)}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,n=[];for(const r of t){const t=this._createDefaultAttributes(),i=T(this._fieldsIndex,this._requiredFields,t,r.attributes,!0,e.warnings);i?e.featureErrors.push(i):(this._assignObjectId(t,r.attributes,!0),r.attributes=t,r.objectId=t[s],n.push(r))}if(i.addMany(n),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(n,t),i&&i.length&&this._applyUpdateEdits(n,i),s&&s.length){for(const e of s)n.deleteResults.push(q(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:n}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:n,hasM:r,hasZ:o,objectIdField:a,spatialReference:l,featureStore:u}=this._queryEngine,p=[];for(const d of t){if(d.geometry&&n!==s(d.geometry)){i.push(x(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),r=T(this._fieldsIndex,this._requiredFields,t,d.attributes);if(r)i.push(r);else{if(this._assignObjectId(t,d.attributes),d.attributes=t,null!=d.uid){const t=d.attributes[a];e.uidToObjectId[d.uid]=t}d.geometry&&(d.geometry=b(w(d.geometry,l),d.geometry.spatialReference,l)),p.push(d),i.push(q(d.attributes[a]))}}u.addMany(d([],p,n,o,r,a))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:n,hasZ:r,objectIdField:o,spatialReference:a,featureStore:l}=this._queryEngine;for(const d of t){const{attributes:t,geometry:y}=d,f=t&&t[o];if(null==f){e.push(x(`Identifier field ${o} missing`));continue}if(!l.has(f)){e.push(x(`Feature with object id ${f} missing`));continue}const m=u(l.getFeature(f),i,r,n);if(y){if(i!==s(y)){e.push(x(\"Incorrect geometry type.\"));continue}m.geometry=b(w(y,a),y.spatialReference,a)}if(t){const i=T(this._fieldsIndex,this._requiredFields,m.attributes,t);if(i){e.push(i);continue}}l.add(p(m,i,r,n,o)),e.push(q(f))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(i){try{await j(t,i)}catch{throw new e(\"geojson-layer\",\"Projection not supported\")}}}export default D;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import n from\"../../OptimizedFeature.js\";import t from\"../../OptimizedGeometry.js\";function o(e){const n=[];for(;;){const{value:t,done:o}=e.next();if(o)return n;n.push(t)}}function r(e){const n=[];return e.forEach((e=>n.push(e))),n}const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const n of e.features)n&&(yield n)}}function*u(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const n of e.coordinates)yield*n;break;case\"MultiPolygon\":for(const n of e.coordinates)for(const e of n)yield*e}}function*c(e,o={}){const{geometryType:r,objectIdFieldName:s}=o;for(;;){const{value:u,done:c}=e.next();if(c)return;const{geometry:l,properties:f,id:a}=u;if(l&&i[l.type]!==r)continue;const y=f||{};s&&null!=a&&!y[s]&&(y[s]=a);const p=new n(l?d(new t,l,o):null,y);yield p}}function l(e){for(;;){const{value:n,done:t}=e.next();if(t)return!1;if(n.length>2)return!0}}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let n=0;for(let t=0;t<e.length;t++){const o=e[t],r=e[(t+1)%e.length];n+=o[0]*r[1]-r[0]*o[1]}return n<=0}function p(e){const n=e[0],t=e[e.length-1];return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]||e.push(n),e}function d(e,n,t){switch(n.type){case\"LineString\":return g(e,n,t);case\"MultiLineString\":return m(e,n,t);case\"MultiPoint\":return h(e,n,t);case\"MultiPolygon\":return w(e,n,t);case\"Point\":return b(e,n,t);case\"Polygon\":return P(e,n,t)}}function g(e,n,t){return S(e,n.coordinates,t),e}function m(e,n,t){for(const o of n.coordinates)S(e,o,t);return e}function h(e,n,t){return S(e,n.coordinates,t),e}function w(e,n,t){for(const o of n.coordinates){j(e,o[0],t);for(let n=1;n<o.length;n++)F(e,o[n],t)}return e}function b(e,n,t){return G(e,n.coordinates,t),e}function P(e,n,t){const o=n.coordinates;j(e,o[0],t);for(let r=1;r<o.length;r++)F(e,o[r],t);return e}function j(e,n,t){const o=p(n);f(o)?M(e,o,t):S(e,o,t)}function F(e,n,t){const o=p(n);a(o)?M(e,o,t):S(e,o,t)}function S(e,n,t){for(const o of n)G(e,o,t);e.lengths.push(n.length)}function M(e,n,t){for(let o=n.length-1;o>=0;o--)G(e,n[o],t);e.lengths.push(n.length)}function G(e,n,t){const[o,r,i]=n;e.coords.push(o,r),t.hasZ&&e.coords.push(i||0)}function x(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function I(n){if(!n)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==n.type&&\"FeatureCollection\"!==n.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:n});const{crs:t}=n;if(!t)return;const o=\"string\"==typeof t?t:\"name\"===t.type?t.properties.name:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:t})}function N(e,n={}){const t=s(e),o=[],c=new Set,f=new Set;let a,y=!1,p=Number.NEGATIVE_INFINITY,d=null,g=!1,{geometryType:m=null}=n,h=!1;for(;;){const{value:e,done:n}=t.next();if(n){const e=d&&1===d.length&&d[0]||null;if(e)for(const n of o)n.name===e&&(n.type=\"esriFieldTypeOID\");return{fields:o,geometryType:m,hasZ:y,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:a,unknownFields:r(f)}}const{geometry:s,properties:w,id:b}=e;if(!s||(m||(m=i[s.type]),i[s.type]===m)){if(!y){y=l(u(s))}if(g||(g=null!=b,g&&(a=typeof b,\"number\"===a&&(d=Object.keys(w).filter((e=>w[e]===b))))),g&&\"number\"===a&&null!=b&&(p=Math.max(p,b),d.length>1?d=d.filter((e=>w[e]===b)):1===d.length&&(d=w[d[0]]===b?d:[])),!h&&w){let e=!0;for(const n in w){if(c.has(n))continue;const t=w[n];if(null==t){e=!1,f.add(n);continue}const r=x(t);\"unknown\"!==r?(f.delete(n),c.add(n),o.push({name:n,alias:n,type:r})):f.add(n)}h=e}}}}function T(e,n){return o(c(s(e),n))}export{T as createOptimizedFeatures,N as inferLayerProperties,I as validateGeoJSON};\n"],"sourceRoot":""}