(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[4172,6194],{42738:(t,e,n)=>{"use strict";n.d(e,{a:()=>s,b:()=>c,f:()=>f,i:()=>o,m:()=>i,r:()=>a,s:()=>u,t:()=>l});var r=n(60418);function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e){const n=e[0],r=e[1],o=e[2],s=e[3],i=e[4],a=e[5];let u=n*s-r*o;return u?(u=1/u,t[0]=s*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*a-s*i)*u,t[5]=(r*i-n*a)*u,t):null}function i(t,e,n){const r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],u=e[5],l=n[0],c=n[1],f=n[2],p=n[3],h=n[4],y=n[5];return t[0]=r*l+s*c,t[1]=o*l+i*c,t[2]=r*f+s*p,t[3]=o*f+i*p,t[4]=r*h+s*y+a,t[5]=o*h+i*y+u,t}function a(t,e,n){const r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*l,t[1]=o*c+i*l,t[2]=r*-l+s*c,t[3]=o*-l+i*c,t[4]=a,t[5]=u,t}function u(t,e,n){const r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=o*l,t[2]=s*c,t[3]=i*c,t[4]=a,t[5]=u,t}function l(t,e,n){const r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=o,t[2]=s,t[3]=i,t[4]=r*l+s*c+a,t[5]=o*l+i*c+u,t}function c(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function f(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function p(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}const h=i,y=p;Object.freeze({__proto__:null,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:o,set:function(t,e,n,r,o,s,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=s,t[5]=i,t},invert:s,determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:i,rotate:a,scale:u,translate:l,fromRotation:c,fromScaling:f,fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},subtract:p,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,e){const n=t[0],o=t[1],s=t[2],i=t[3],a=t[4],u=t[5],l=e[0],c=e[1],f=e[2],p=e[3],h=e[4],y=e[5];return Math.abs(n-l)<=r.E*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.E*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-f)<=r.E*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(i-p)<=r.E*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-h)<=r.E*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-y)<=r.E*Math.max(1,Math.abs(u),Math.abs(y))},mul:h,sub:y})},87561:(t,e,n)=>{"use strict";function r(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function o(t,e,n,r){const o=e[r],s=e[r+1];t[r]=n[0]*o+n[2]*s+n[4],t[r+1]=n[1]*o+n[3]*s+n[5]}function s(t,e,n,r=0,s=0,i=2){const a=s||e.length/i;for(let s=r;s<a;s++)o(t,e,n,s*i)}n.d(e,{c:()=>r,t:()=>s});Object.freeze({__proto__:null,create:r,clone:function(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},fromValues:function(t,e,n,r,o,s){const i=new Float32Array(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=s,i},createView:function(t,e){return new Float32Array(t,e,6)},transform:o,transformMany:s})},65353:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(92823);const o=class{constructor(t,e){this._storage=new r.WJ,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e){this._storage.put(t,e,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.clearAll()}}},77293:(t,e,n)=>{"use strict";function r(t,e){for(const[n,r]of t)if(e(r,n))return!0;return!1}n.d(e,{o:()=>r})},43019:(t,e,n)=>{"use strict";function r(t){return"h"in t&&"s"in t&&"v"in t}function o(t){return"l"in t&&"a"in t&&"b"in t}function s(t){return"l"in t&&"c"in t&&"h"in t}function i(t){return"x"in t&&"y"in t&&"z"in t}n.d(e,{_j:()=>M,_Y:()=>x,Y3:()=>_,sJ:()=>w,xr:()=>b});const a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],u=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function l(t,e){const n=[];let r,o;if(t[0].length!==e.length)throw"dimensions do not match";const s=t.length,i=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,o=0;o<i;o++)a+=t[r][o]*e[o];n.push(a)}return n}function c(t){const e=[t.r/255,t.g/255,t.b/255].map((t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4)),n=l(a,e);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function f(t){const e=l(u,[t.x/100,t.y/100,t.z/100]).map((t=>{const e=t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055;return Math.min(1,Math.max(e,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function p(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function h(t){const e=t.l,n=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((t=>t>6/29?t**3:3*(6/29)**2*(t-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function y(t){return p(c(t))}function g(t){return f(h(t))}function m(t){return function(t){const e=t.l,n=t.a,r=t.b,o=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s=s>0?s:s+2*Math.PI,{l:e,c:o,h:s}}(p(c(t)))}function d(t){return f(h(function(t){const e=t.l,n=t.c,r=t.h;return{l:e,a:n*Math.cos(r),b:n*Math.sin(r)}}(t)))}function b(t){return function(t){return"r"in t&&"g"in t&&"b"in t}(t)?t:s(t)?d(t):o(t)?g(t):i(t)?f(t):r(t)?function(t){const e=(t.h+360)%360/60,n=t.s/100,r=t.v/100*255,o=r*n,s=o*(1-Math.abs(e%2-1));let i;switch(Math.floor(e)){case 0:i={r:o,g:s,b:0};break;case 1:i={r:s,g:o,b:0};break;case 2:i={r:0,g:o,b:s};break;case 3:i={r:0,g:s,b:o};break;case 4:i={r:s,g:0,b:o};break;case 5:case 6:i={r:o,g:0,b:s};break;default:i={r:0,g:0,b:0}}return i.r=Math.round(i.r+r-o),i.g=Math.round(i.g+r-o),i.b=Math.round(i.b+r-o),i}(t):t}function x(t){return r(t)?t:function(t){const e=t.r,n=t.g,r=t.b,o=Math.max(e,n,r),s=o-Math.min(e,n,r);let i=o,a=0===s?0:o===e?(n-r)/s%6:o===n?(r-e)/s+2:(e-n)/s+4,u=0===s?0:s/i;return a<0&&(a+=6),a*=60,u*=100,i*=100/255,{h:a,s:u,v:i}}(b(t))}function _(t){return o(t)?t:y(b(t))}function w(t){return s(t)?t:m(b(t))}function M(t,e){const n=y(t);return n.l*=1-e,g(n)}},91535:(t,e,n)=>{"use strict";n.d(e,{aX:()=>v,or:()=>S});var r=n(34926),o=n(59472),s=n(36544),i=n(32656),a=n(27780),u=n(41241),l=n(53817),c=n(93833),f=n(49573),p=n(10923),h=n(56885),y=(n(36348),n(36654));async function g(t,e,n){const r="string"==typeof t?(0,p.mN)(t):t,o=e[0].spatialReference,s=(0,h.Ji)(e[0]),i={...n,query:{...r.query,f:"json",sr:o.wkid?o.wkid:JSON.stringify(o),geometries:JSON.stringify(m(e))}};return function(t,e,n){const r=(0,h.q9)(e);return t.map((t=>{const e=r.fromJSON(t);return e.spatialReference=n,e}))}((await(0,y.default)(r.path+"/simplify",i)).data,s,o)}function m(t){return{geometryType:(0,h.Ji)(t[0]),geometries:t.map((t=>t.toJSON()))}}const d=s.Z.getLogger("esri.geometry.support.normalizeUtils");function b(t){return"polygon"===t[0].type}function x(t){return"polyline"===t[0].type}function _(t,e,n){if(e){const e=function(t,e){if(!(t instanceof c.Z||t instanceof l.Z)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw d.error(t),new i.Z(t)}const n=(0,f.x3)(t),r=[];for(const t of n){const n=[];r.push(n),n.push([t[0][0],t[0][1]]);for(let r=0;r<t.length-1;r++){const o=t[r][0],s=t[r][1],i=t[r+1][0],a=t[r+1][1],u=Math.sqrt((i-o)*(i-o)+(a-s)*(a-s)),l=(a-s)/u,c=(i-o)/u,f=u/e;if(f>1){for(let t=1;t<=f-1;t++){const r=t*e,i=c*r+o,a=l*r+s;n.push([i,a])}const t=(u+Math.floor(f-1)*e)/2,r=c*t+o,i=l*t+s;n.push([r,i])}n.push([i,a])}}return function(t){return"polygon"===t.type}(t)?new l.Z({rings:r,spatialReference:t.spatialReference}):new c.Z({paths:r,spatialReference:t.spatialReference})}(t,1e6);t=(0,u.Sx)(e,!0)}return n&&(t=(0,f.Sy)(t,n)),t}function w(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const n=(0,f.XZ)(r,e);t[0]=r+n*(-2*e)}else if(r<n){const e=(0,f.XZ)(r,n);t[0]=r+e*(-2*n)}}else{const r=t.x;if(r>e){const n=(0,f.XZ)(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<n){const e=(0,f.XZ)(r,n);t=t.clone().offset(e*(-2*n),0)}}return t}function M(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const o=e.cutIndexes[r],s=e.geometries[r],i=(0,f.x3)(s);for(let t=0;t<i.length;t++){const e=i[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const r=e[t][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,f.XZ)(n,180);for(let n=0;n<e.length;n++){const e=s.getPoint(t,n);s.setPoint(t,n,e.clone().offset(r,0))}return!0}}))}if(o===n){if(b(t))for(const e of(0,f.x3)(s))t[o]=t[o].addRing(e);else if(x(t))for(const e of(0,f.x3)(s))t[o]=t[o].addPath(e)}else n=o,t[o]=s}return t}async function v(t,e,n){if(!Array.isArray(t))return v([t],e);const s=e?e.url:r.default.geometryServiceUrl;let i,m,d,b,x,S,Z,O,R=0;const N=[],C=[];for(const e of t)if((0,o.Wi)(e))C.push(e);else if(i||(i=e.spatialReference,m=(0,a.C5)(i),d=i.isWebMercator,S=d?102100:4326,b=f.UZ[S].maxX,x=f.UZ[S].minX,Z=f.UZ[S].plus180Line,O=f.UZ[S].minus180Line),m)if("mesh"===e.type)C.push(e);else if("point"===e.type)C.push(w(e.clone(),b,x));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map((t=>w(t,b,x))),C.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,m);C.push(t.rings?new l.Z(t):t)}else if(e.extent){const t=e.extent,n=(0,f.XZ)(t.xmin,x)*(2*b);let r=0===n?e.clone():(0,f.Sy)(e.clone(),n);t.offset(n,0),t.intersects(Z)&&t.xmax!==b?(R=t.xmax>R?t.xmax:R,r=_(r,d),N.push(r),C.push("cut")):t.intersects(O)&&t.xmin!==x?(R=t.xmax*(2*b)>R?t.xmax*(2*b):R,r=_(r,d,360),N.push(r),C.push("cut")):C.push(r)}else C.push(e.clone());else C.push(e);let J=(0,f.XZ)(R,b),A=-90;const q=J,I=new c.Z;for(;J>0;){const t=360*J-180;I.addPath([[t,A],[t,-1*A]]),A*=-1,J--}if(N.length>0&&q>0){const e=M(N,await async function(t,e,n,r){const o="string"==typeof t?(0,p.mN)(t):t,s=e[0].spatialReference,i={...r,query:{...o.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:(0,h.Ji)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await(0,y.default)(o.path+"/cut",i),{cutIndexes:u,geometries:l=[]}=a.data;return{cutIndexes:u,geometries:l.map((t=>{const e=(0,h.im)(t);return e.spatialReference=s,e}))}}(s,N,I,n)),r=[],i=[];for(let n=0;n<C.length;n++){const s=C[n];if("cut"!==s)i.push(s);else{const s=e.shift(),a=t[n];(0,o.pC)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&s.rings.length>=a.rings.length?(r.push(s),i.push("simplify")):i.push(d?(0,u.$)(s):s)}}if(!r.length)return i;const a=await g(s,r,n),l=[];for(let t=0;t<i.length;t++){const e=i[t];"simplify"!==e?l.push(e):l.push(d?(0,u.$)(a.shift()):a.shift())}return l}const j=[];for(let t=0;t<C.length;t++){const e=C[t];if("cut"!==e)j.push(e);else{const t=N.shift();j.push(!0===d?(0,u.$)(t):t)}}return Promise.resolve(j)}function S(t,e){const n=(0,a.C5)(e);if(n){const[e,r]=n.valid,o=r-e;if(t<e)for(;t<e;)t+=o;if(t>r)for(;t>r;)t-=o}return t}},49573:(t,e,n)=>{"use strict";n.d(e,{UZ:()=>i,x3:()=>l,uS:()=>c,XZ:()=>a,Sy:()=>u});var r=n(73032),o=n(93833),s=n(56885);const i={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new o.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.Z.WebMercator}),minus180Line:new o.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new o.Z({paths:[[[180,-180],[180,180]]],spatialReference:r.Z.WGS84}),minus180Line:new o.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:r.Z.WGS84})}};function a(t,e){return Math.ceil((t-e)/(2*e))}function u(t,e){const n=l(t);for(const t of n)for(const n of t)n[0]+=e;return t}function l(t){return(0,s.oU)(t)?t.rings:t.paths}function c(t){const e=(null==t?void 0:t.isWebMercator)?102100:4326;return[i[e].minX,i[e].maxX]}},24681:(t,e,n)=>{"use strict";function r(t,e,n){return e.flatten((({sublayers:t})=>t)).length!==t.length||(!!t.some((t=>t.originIdOf("minScale")>n||t.originIdOf("maxScale")>n||t.originIdOf("renderer")>n||t.originIdOf("labelingInfo")>n||t.originIdOf("opacity")>n||t.originIdOf("labelsVisible")>n||t.originIdOf("source")>n))||!s(t,e))}function o(t,e,n){return!!t.some((t=>{const e=t.source;return!(!e||"map-layer"===e.type&&e.mapLayerId===t.id&&(!e.gdbVersion||e.gdbVersion===n.gdbVersion))||t.originIdOf("renderer")>2||t.originIdOf("labelingInfo")>2||t.originIdOf("opacity")>2||t.originIdOf("labelsVisible")>2}))||!s(t,e)}function s(t,e){if(!t||!t.length)return!0;const n=e.slice().reverse().flatten((({sublayers:t})=>t&&t.toArray().reverse())).map((t=>t.id)).toArray();if(t.length>n.length)return!1;let r=0;const o=n.length;for(const{id:e}of t){for(;r<o&&n[r]!==e;)r++;if(r>=o)return!1}return!0}function i(t){return!!t&&t.some((t=>null!=t.minScale||t.layerDefinition&&null!=t.layerDefinition.minScale))}n.d(e,{FN:()=>o,ac:()=>i,QV:()=>r})},99322:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>h,JN:()=>f,$o:()=>p});var r=n(56140),o=(n(95830),n(36544)),s=(n(68055),n(79881)),i=n(87566),a=(n(10923),n(57002),n(86035),n(28293)),u=n(32105),l=n(15988);const c=a.Z.ofType(l.default);o.Z.getLogger("esri.support.GraphicsCollection");let f=class extends c{constructor(t){super(t),this.on("before-add",(t=>{t.item||t.preventDefault()})),this.on("after-add",(t=>this._own(t.item))),this.on("after-remove",(({item:t})=>{t.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._unownAll(),this._set("owner",t),this._ownAll())}_createNewInstance(t){return new c(t)}_ownAll(){this.items.forEach((t=>this._own(t)))}_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_unownAll(){this.items.forEach((t=>this._unown(t)))}_unown(t){t.layer===this.owner&&(t.layer=null)}};(0,r._)([(0,s.Cb)()],f.prototype,"owner",null),f=(0,r._)([(0,i.j)("esri.support.GraphicsCollection")],f);const p=(t="graphics")=>({type:f,cast:u.R,set(e){const n=(0,u.Z)(e,this._get(t),f);n.owner=this,this._set(t,n)}});const h=f},95986:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(56140),o=(n(95830),n(36544),n(68055),n(79881)),s=n(87566),i=n(10923),a=(n(57002),n(86035),n(82677));let u=class extends a.default{constructor(...t){super(...t),this.requestOptions=null,this.url=null}normalizeCtorArgs(t,e){return"string"!=typeof t?t:{url:t,...e}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(t){return t?(0,i.mN)(t):null}_encode(t,e,n){const r={};for(const o in t){if("declaredClass"===o)continue;const s=t[o];if(null!=s&&"function"!=typeof s)if(Array.isArray(s)){r[o]=[];for(let t=0;t<s.length;t++)r[o][t]=this._encode(s[t])}else if("object"==typeof s)if(s.toJSON){const t=s.toJSON(n&&n[o]);r[o]=e?t:JSON.stringify(t)}else r[o]=e?s:JSON.stringify(s);else r[o]=s}return r}};(0,r._)([(0,o.Cb)({readOnly:!0})],u.prototype,"parsedUrl",null),(0,r._)([(0,o.Cb)()],u.prototype,"requestOptions",void 0),(0,r._)([(0,o.Cb)({type:String})],u.prototype,"url",void 0),u=(0,r._)([(0,s.j)("esri.tasks.Task")],u);const l=u},76194:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var r=n(56140),o=(n(95830),n(59472)),s=(n(36544),n(68055),n(79881)),i=n(56274),a=n(30590),u=n(87566),l=n(60538),c=(n(10923),n(57002),n(86035),n(58385)),f=n(73032),p=n(56885),h=n(36348),y=n(15988),g=n(70834);const m=new i.Xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d=class extends c.wq{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const n=f.Z.fromJSON(e.spatialReference),r=[];for(let e=0;e<t.length;e++){const s=t[e],i=y.default.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;(0,o.pC)(i.geometry)&&!a&&(i.geometry.spatialReference=n),r.push(i)}return r}writeGeometryType(t,e,n,r){if(t)return void m.write(t,e,n,r);const{features:s}=this;if(s)for(const t of s)if(t&&(0,o.pC)(t.geometry))return void m.write(t.geometry.type,e,n,r)}readQueryGeometry(t,e){if(!t)return null;const n=!!t.spatialReference,r=(0,p.im)(t);return!n&&e.spatialReference&&(r.spatialReference=f.Z.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:n}=this;if(n)for(const t of n)t&&(0,o.pC)(t.geometry)&&t.geometry.spatialReference&&(e.spatialReference=t.geometry.spatialReference.toJSON())}toJSON(t){const e=this.write(null);if(e.features&&Array.isArray(t)&&t.length>0)for(let n=0;n<e.features.length;n++){const r=e.features[n];if(r.geometry){const e=t&&t[n];r.geometry=e&&e.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,n],translate:[r,s]}=t,i=this.features,a=this._getQuantizationFunction(this.geometryType,(t=>Math.round((t-r)/e)),(t=>Math.round((s-t)/n)));for(let t=0,e=i.length;t<e;t++)a((0,o.Wg)(i[t].geometry))||(i.splice(t,1),t--,e--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:n}=this;if(!n)return this;const{translate:[r,s],scale:[i,a]}=n,u=this._getHydrationFunction(t,(t=>t*i+r),(t=>s-t*a));for(const{geometry:t}of e)(0,o.pC)(t)&&u(t);return this.transform=null,this}_quantizePoints(t,e,n){let r,o;const s=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];if(i>0){const t=e(a[0]),i=n(a[1]);t===r&&i===o||(s.push([t-r,i-o]),r=t,o=i)}else r=e(a[0]),o=n(a[1]),s.push([r,o])}return s.length>0?s:null}_getQuantizationFunction(t,e,n){return"point"===t?t=>(t.x=e(t.x),t.y=n(t.y),t):"polyline"===t||"polygon"===t?t=>{const r=(0,p.oU)(t)?t.rings:t.paths,o=[];for(let t=0,s=r.length;t<s;t++){const s=r[t],i=this._quantizePoints(s,e,n);i&&o.push(i)}return o.length>0?((0,p.oU)(t)?t.rings=o:t.paths=o,t):null}:"multipoint"===t?t=>{const r=this._quantizePoints(t.points,e,n);return r.length>0?(t.points=r,t):null}:"extent"===t?t=>t:null}_getHydrationFunction(t,e,n){return"point"===t?t=>{t.x=e(t.x),t.y=n(t.y)}:"polyline"===t||"polygon"===t?t=>{const r=(0,p.oU)(t)?t.rings:t.paths;let o,s;for(let t=0,i=r.length;t<i;t++){const i=r[t];for(let t=0,r=i.length;t<r;t++){const r=i[t];t>0?(o+=r[0],s+=r[1]):(o=r[0],s=r[1]),r[0]=e(o),r[1]=n(s)}}}:"extent"===t?t=>{t.xmin=e(t.xmin),t.ymin=n(t.ymin),t.xmax=e(t.xmax),t.ymax=n(t.ymax)}:"multipoint"===t?t=>{const r=t.points;let o,s;for(let t=0,i=r.length;t<i;t++){const i=r[t];t>0?(o+=i[0],s+=i[1]):(o=i[0],s=i[1]),i[0]=e(o),i[1]=n(s)}}:void 0}};(0,r._)([(0,s.Cb)({type:String,json:{write:!0}})],d.prototype,"displayFieldName",void 0),(0,r._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"exceededTransferLimit",void 0),(0,r._)([(0,s.Cb)({type:[y.default],json:{write:!0}})],d.prototype,"features",void 0),(0,r._)([(0,a.r)("features")],d.prototype,"readFeatures",null),(0,r._)([(0,s.Cb)({type:[g.Z],json:{write:!0}})],d.prototype,"fields",void 0),(0,r._)([(0,s.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:m.read}}})],d.prototype,"geometryType",void 0),(0,r._)([(0,l.c)("geometryType")],d.prototype,"writeGeometryType",null),(0,r._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasM",void 0),(0,r._)([(0,s.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasZ",void 0),(0,r._)([(0,s.Cb)({types:h.qM,json:{write:!0}})],d.prototype,"queryGeometry",void 0),(0,r._)([(0,a.r)("queryGeometry")],d.prototype,"readQueryGeometry",null),(0,r._)([(0,s.Cb)({type:f.Z,json:{write:!0}})],d.prototype,"spatialReference",void 0),(0,r._)([(0,l.c)("spatialReference")],d.prototype,"writeSpatialReference",null),(0,r._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"transform",void 0),d=(0,r._)([(0,u.j)("esri.tasks.support.FeatureSet")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});const b=d}}]);
//# sourceMappingURL=4172.js.map