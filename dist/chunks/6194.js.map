{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/tasks/support/FeatureSet.js"],"names":["h","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","mesh","d","e","super","this","displayFieldName","exceededTransferLimit","features","fields","geometryType","hasM","hasZ","queryGeometry","spatialReference","r","o","s","i","length","n","p","geometry","push","write","type","t","toJSON","Array","isArray","scale","translate","l","a","_getQuantizationFunction","Math","round","y","u","splice","transform","_getHydrationFunction","x","rings","paths","_quantizePoints","points","xmin","ymin","xmax","ymax","String","json","prototype","Boolean","overridePolicy","enabled","read","reader","types","isDefaultToJSON"],"mappings":"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","file":"chunks/6194.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t,unwrap as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as l}from\"../../core/JSONSupport.js\";import a from\"../../geometry/SpatialReference.js\";import{fromJSON as y,isPolygon as u}from\"../../geometry/support/jsonUtils.js\";import{geometryTypes as m}from\"../../geometry.js\";import c from\"../../Graphic.js\";import f from\"../../layers/support/Field.js\";const h=new s({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends l{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){const o=a.fromJSON(r.spatialReference),s=[];for(let i=0;i<e.length;i++){const r=e[i],n=c.fromJSON(r),p=r.geometry&&r.geometry.spatialReference;t(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n)}return s}writeGeometryType(e,r,o,s){if(e)return void h.write(e,r,o,s);const{features:i}=this;if(i)for(const n of i)if(n&&t(n.geometry))return void h.write(n.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=y(e);return!r&&t.spatialReference&&(o.spatialReference=a.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const s of o)s&&t(s.geometry)&&s.geometry.spatialReference&&(r.spatialReference=s.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=e=>Math.round((e-s)/t),p=e=>Math.round((i-e)/o),l=this.features,a=this._getQuantizationFunction(this.geometryType,n,p);for(let y=0,u=l.length;y<u;y++)a(r(l[y].geometry))||(l.splice(y,1),y--,u--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=e=>e*n+s,a=e=>i-e*p,y=this._getHydrationFunction(e,l,a);for(const{geometry:u}of r)t(u)&&y(u);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(p[0]),s=r(p[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths,s=[];for(let i=0,n=o.length;i<n;i++){const e=o[i],n=this._quantizePoints(e,t,r);n&&s.push(n)}return s.length>0?(u(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths;let s,i;for(let n=0,p=o.length;n<p;n++){const e=o[n];for(let o=0,n=e.length;o<n;o++){const n=e[o];o>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let n=0,p=o.length;n<p;n++){const e=o[n];n>0?(s+=e[0],i+=e[1]):(s=e[0],i=e[1]),e[0]=t(s),e[1]=r(i)}}:void 0}};e([o({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),e([o({type:[c],json:{write:!0}})],d.prototype,\"features\",void 0),e([i(\"features\")],d.prototype,\"readFeatures\",null),e([o({type:[f],json:{write:!0}})],d.prototype,\"fields\",void 0),e([o({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),e([p(\"geometryType\")],d.prototype,\"writeGeometryType\",null),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),e([o({types:m,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),e([i(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),e([o({type:a,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),e([o({json:{write:!0}})],d.prototype,\"transform\",void 0),d=e([n(\"esri.tasks.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;export default g;\n"],"sourceRoot":""}