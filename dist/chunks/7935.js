(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[7935],{87040:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});var r=(0,n(71012).c)((function(e){var t;void 0!==(t=function(){function e(n,r,i,s,o){for(;s>i;){if(s-i>600){var l=s-i+1,a=r-i+1,u=Math.log(l),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(l-c)/l)*(a-l/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-a*c/l+h)),Math.min(s,Math.floor(r+(l-a)*c/l+h)),o)}var d=n[r],f=i,m=s;for(t(n,i,r),o(n[s],d)>0&&t(n,i,s);f<m;){for(t(n,f,m),f++,m--;o(n[f],d)<0;)f++;for(;o(n[m],d)>0;)m--}0===o(n[i],d)?t(n,i,m):t(n,++m,s),m<=r&&(i=m+1),r<=m&&(s=m-1)}}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}return function(t,r,i,s,o){e(t,r,i||0,s||t.length-1,o||n)}}())&&(e.exports=t)}))},96233:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(87040);function i(e,t){if(!(this instanceof i))return new i(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function s(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function o(e,t){l(e,0,e.children.length,t,e)}function l(e,t,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=t;o<n;o++)s=e.children[o],a(i,e.leaf?r(s):s);return i}function a(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function m(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(e,t,n,i,s){for(var o,l=[t,n];l.length;)(n=l.pop())-(t=l.pop())<=i||(o=t+Math.ceil((n-t)/i/2)*i,(0,r.q)(e,o,t,n,s),l.push(t,o,o,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!p(e,t))return n;for(var i,s,o,l,a=[];t;){for(i=0,s=t.children.length;i<s;i++)o=t.children[i],p(e,l=t.leaf?r(o):o)&&(t.leaf?n.push(o):g(e,l)?this._all(o,n):a.push(o));t=a.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!p(e,t))return!1;for(var r,i,s,o,l=[];t;){for(r=0,i=t.children.length;r<i;r++)if(s=t.children[r],p(e,o=t.leaf?n(s):s)){if(t.leaf||g(e,o))return!0;l.push(s)}t=l.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(e,t){if(!e)return this;for(var n,r,i,o,l=this.data,a=this.toBBox(e),u=[],c=[];l||u.length;){if(l||(l=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),l.leaf&&-1!==(i=s(e,l.children,t)))return l.children.splice(i,1),u.push(l),this._condense(u),this;o||l.leaf||!g(l,a)?r?(n++,l=r.children[n],o=!1):l=null:(u.push(l),c.push(n),n=0,r=l,l=l.children[0])}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,s=n-t+1,l=this._maxEntries;if(s<=l)return o(i=y(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,r-1))),(i=y([])).leaf=!1,i.height=r;var a,u,c,h,d=Math.ceil(s/l),f=d*Math.ceil(Math.sqrt(l));for(x(e,t,n,f,this.compareMinX),a=t;a<=n;a+=f)for(x(e,a,c=Math.min(a+f-1,n),d,this.compareMinY),u=a;u<=c;u+=d)h=Math.min(u+d-1,c),i.children.push(this._build(e,u,h,r-1));return o(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,s,o,l,a,u,c,d;r.push(t),!t.leaf&&r.length-1!==n;){for(c=d=1/0,i=0,s=t.children.length;i<s;i++)a=h(o=t.children[i]),(u=f(e,o)-a)<d?(d=u,c=a<c?a:c,l=o):u===d&&a<c&&(c=a,l=o);t=l||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),a(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),l=y(n.children.splice(s,n.children.length-s));l.height=n.height,l.leaf=n.leaf,o(n,this.toBBox),o(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(n,l)},_splitRoot:function(e,t){this.data=y([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,s,o,a,u,c,d;for(u=c=1/0,r=t;r<=n-t;r++)o=m(i=l(e,0,r,this.toBBox),s=l(e,r,n,this.toBBox)),a=h(i)+h(s),o<u?(u=o,d=r,c=a<c?a:c):o===u&&a<c&&(c=a,d=r);return d},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:u,i=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,s,o=this.toBBox,u=l(e,0,t,o),c=l(e,n-t,n,o),h=d(u)+d(c);for(i=t;i<n-t;i++)s=e.children[i],a(u,e.leaf?o(s):s),h+=d(u);for(i=n-t-1;i>=t;i--)s=e.children[i],a(c,e.leaf?o(s):s),h+=d(c);return h},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)a(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():o(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},87565:(e,t,n)=>{"use strict";n.d(t,{lt:()=>u,WU:()=>l,ti:()=>o,Qc:()=>c});var r=n(88263),i=n(3766);const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function o(e){e||(e=(0,i.Kd)());let t=e in s;if(!t){const n=e.split("-");n.length>1&&n[0]in s&&(e=n[0],t=!0),t||(e="en")}const[n,r,o="#,##0.###"]=s[e];return{decimal:n,group:r,pattern:o}}function l(e,t){const n=o((t={...t}).locale);t.customs=n;const r=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){const r=(n=n||{}).customs.group,i=n.customs.decimal,s=t.split(";"),o=s[0];if(-1!==(t=s[e<0?1:0]||"-"+o).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const l=a,u=o.match(l);if(!u)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(l,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);const r=t.split("."),i="string"==typeof n.places&&n.places.indexOf(",");let s=n.places;i?s=n.places.substring(i+1):s>=0||(s=(r[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),l=o[1]||"";if(r[1]||n.places){i&&(n.places=n.places.substring(0,i));const e=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;e>l.length&&(o[1]=l.padEnd(Number(e),"0")),s<l.length&&(o[1]=l.substr(0,Number(s)))}else o[1]&&o.pop();const a=r[0].replace(",","");let u=a.indexOf("0");-1!==u&&(u=a.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),-1===a.indexOf("#")&&(o[0]=o[0].substr(o[0].length-u)));let c,h,d=r[0].lastIndexOf(",");if(-1!==d){c=r[0].length-d-1;const e=r[0].substr(0,d);d=e.lastIndexOf(","),-1!==d&&(h=e.length-d-1)}const f=[];for(let e=o[0];e;){const t=e.length-c;f.push(t>0?e.substr(t):e),e=t>0?e.slice(0,t):"",h&&(c=h,h=void 0)}return o[0]=f.reverse().join(n.group||","),o.join(n.decimal||".")}(e,u[0],{decimal:i,group:r,places:n.places,round:n.round}))}(e,r,t)}const a=/[#0,]*[#0](?:\.0*#*)?/;function u(e){const t=o((e=e||{}).locale),n=e.pattern||t.pattern,i=t.group,s=t.decimal;let l=1;if(-1!==n.indexOf("%"))l/=100;else if(-1!==n.indexOf("‰"))l/=1e3;else if(-1!==n.indexOf("¤"))throw new Error("currency notation not supported");const u=n.split(";");return 1===u.length&&u.push("-"+u[0]),{regexp:d(u,(function(t){return(t="(?:"+(0,r.Qs)(t,".")+")").replace(a,(function(t){const n={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},r=t.split(".");let o=e.places;1===r.length&&1!==l&&(r[1]="###"),1===r.length||0===o?n.fractional=!1:(void 0===o&&(o=e.pattern?r[1].lastIndexOf("0")+1:1/0),o&&null==e.fractional&&(n.fractional=!0),!e.places&&o<r[1].length&&(o+=","+r[1].length),n.places=o);const a=r[0].split(",");return a.length>1&&(n.groupSize=a.pop().length,a.length>1&&(n.groupSize2=a.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=h(e),n=d(e.fractional,(function(t){let n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n}),!0);let r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+d(e.exponent,(function(t){return t?"([eE]"+h({signed:e.eSigned})+")":""}))}(n)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:l}}function c(e,t){const n=u(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;let i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],n.factor*=-1}return i=i.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor}function h(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",d(e.signed,(function(e){return e?"[-+]":""}),!0)+d(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=(0,r.Qs)(t))?t="\\s":" "===t&&(t="\\s\\xa0");const n=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+n+"})";return n-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"}),!0)}const d=function(e,t,n){if(!(e instanceof Array))return t(e);const r=[];for(let n=0;n<e.length;n++)r.push(t(e[n]));return f(r.join("|"),n)},f=function(e,t){return"("+(t?"?:":"")+e+")"}},10165:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){const r=new i(e.getPointX(t),e.getPointY(t),n),s=e.hasZ(t),o=e.hasM(t);return s&&(r.z=e.getPointZ(t)),o&&(r.m=e.getPointM(t)),r},exportPolygon:function(e,t,n){return new s(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,n){return new o(e.exportPaths(t),n,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,n){return new l(e.exportPoints(t),n,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),s=new a(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),n);if(r){const n=e.getZExtent(t);s.zmin=n.vmin,s.zmax=n.vmax}if(i){const n=e.getMExtent(t);s.mmin=n.vmin,s.mmax=n.vmax}return s}};class i{constructor(e,t,n){this.x=e,this.y=t,this.spatialReference=n,this.z=void 0,this.m=void 0}}class s{constructor(e,t,n,r){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class o{constructor(e,t,n,r){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class l{constructor(e,t,n,r){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}}class a{constructor(e,t,n,r,i){this.xmin=e,this.ymin=t,this.xmax=n,this.ymax=r,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},78712:(e,t,n)=>{"use strict";n.d(t,{ym:()=>I,RF:()=>p,vY:()=>l,J9:()=>_,U1:()=>b,Ie:()=>N,G6:()=>F});var r=n(56885);const i=(e,t,n)=>[t,n],s=(e,t,n)=>[t,n,e[2]],o=(e,t,n)=>[t,n,e[2],e[3]];function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function a({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function u({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function c(e,t,n){const r=[];let i,s,o,l;for(let c=0;c<n.length;c++){const h=n[c];c>0?(o=a(e,h[0]),l=u(e,h[1]),o===i&&l===s||(r.push(t(h,o-i,l-s)),i=o,s=l)):(i=a(e,h[0]),s=u(e,h[1]),r.push(t(h,i,s)))}return r.length>0?r:null}function h({scale:e,translate:t},n){return n*e[0]+t[0]}function d({scale:e,translate:t},n){return t[1]-n*e[1]}function f(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[i,s]=e.scale;let o=h(e,n[0][0]),l=d(e,n[0][1]);r[0]=t(n[0],o,l);for(let e=1;e<n.length;e++){const a=n[e];o+=a[0]*i,l-=a[1]*s,r[e]=t(a,o,l)}return r}function m(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=f(e,t,n[i]);return r}function g(e,t,n,r,l){return t.points=function(e,t,n,r){return c(e,n?r?o:s:r?s:i,t)}(e,n.points,r,l),t}function p(e,t,n,r,i){return t.x=a(e,n.x),t.y=u(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function y(e,t,n,r,l){const a=function(e,t,n,r){const l=[],a=n?r?o:s:r?s:i;for(let n=0;n<t.length;n++){const r=c(e,a,t[n]);r&&r.length>=3&&l.push(r)}return l.length?l:null}(e,n.rings,r,l);return a?(t.rings=a,t):null}function x(e,t,n,r,l){const a=function(e,t,n,r){const l=[],a=n?r?o:s:r?s:i;for(let n=0;n<t.length;n++){const r=c(e,a,t[n]);r&&r.length>=2&&l.push(r)}return l.length?l:null}(e,n.paths,r,l);return a?(t.paths=a,t):null}function I(e,t){return e&&t?(0,r.wp)(t)?p(e,{},t,!1,!1):(0,r.l9)(t)?x(e,{},t,!1,!1):(0,r.oU)(t)?y(e,{},t,!1,!1):(0,r.aW)(t)?g(e,{},t,!1,!1):(0,r.YX)(t)?(o=!1,l=!1,(i={}).xmin=a(n=e,(s=t).xmin),i.ymin=u(n,s.ymin),i.xmax=a(n,s.xmax),i.ymax=u(n,s.ymax),i!==s&&(o&&(i.zmin=s.zmin,i.zmax=s.zmax),l&&(i.mmin=s.mmin,i.mmax=s.mmax)),i):null:null;var n,i,s,o,l}function _(e,t,n,r,l){return t.points=function(e,t,n,r){return f(e,n?r?o:s:r?s:i,t)}(e,n.points,r,l),t}function b(e,t,n,r,i){return t.x=h(e,n.x),t.y=d(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function N(e,t,n,r,l){return t.rings=function(e,t,n,r){return m(e,n?r?o:s:r?s:i,t)}(e,n.rings,r,l),t}function F(e,t,n,r,l){return t.paths=function(e,t,n,r){return m(e,n?r?o:s:r?s:i,t)}(e,n.paths,r,l),t}},44195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class r{constructor(e=null,t={},n,r){this.displayId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),n&&(this.centroid=n),null!=r&&(this.objectId=r)}get hasGeometry(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}weakClone(){const e=new r(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashIndexed=this.geohashIndexed,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}const i=r},60151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new r;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}const i=r},73127:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class r{constructor(e=[],t=[],n=!1){this.lengths=null!=e?e:[],this.coords=null!=t?t:[],this.hasIndeterminateRingOrder=n}get isPoint(){return 0===this.lengths.length}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}clone(){return new r(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}const i=r},24179:(e,t,n)=>{"use strict";function r(e,t){return e?t?4:3:t?3:2}function i(e,t,n,i,l){if(!t||!t.lengths.length)return null;const a="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const u=e.coords,c=[],h=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:f}=t,m=r(n,i);let g=0;for(const e of d){const t=s(h,f,g,e,n,i,a);t&&c.push(t),g+=e*m}if(c.sort(((e,t)=>{let r=a*e[2]-a*t[2];return 0===r&&n&&(r=e[4]-t[4]),r})),c.length){let e=6*c[0][2];u[0]=c[0][0]/e,u[1]=c[0][1]/e,n&&(e=6*c[0][4],u[2]=0!==e?c[0][3]/e:0),(u[0]<h[0]||u[0]>h[1]||u[1]<h[2]||u[1]>h[3]||n&&(u[2]<h[4]||u[2]>h[5]))&&(u.length=0)}if(!u.length){const e=t.lengths[0]?o(f,0,d[0],n,i):null;if(!e)return null;u[0]=e[0],u[1]=e[1],n&&e.length>2&&(u[2]=e[2])}return e}function s(e,t,n,i,s,o,l=1){const a=r(s,o);let u=n,c=n+a,h=0,d=0,f=0,m=0,g=0;for(let n=0,r=i-1;n<r;n++,u+=a,c+=a){const n=t[u],r=t[u+1],i=t[u+2],o=t[c],l=t[c+1],a=t[c+2];let p=n*l-o*r;m+=p,h+=(n+o)*p,d+=(r+l)*p,s&&(p=n*a-o*i,f+=(i+a)*p,g+=p),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),s&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(m*l>0&&(m*=-1),g*l>0&&(g*=-1),!m)return null;const p=[h,d,.5*m];return s&&(p[3]=f,p[4]=.5*g),p}function o(e,t,n,i,s){const o=r(i,s);let h=t,d=t+o,f=0,m=0,g=0,p=0;for(let t=0,r=n-1;t<r;t++,h+=o,d+=o){const t=e[h],n=e[h+1],r=e[h+2],s=e[d],o=e[d+1],y=e[d+2],x=i?a(t,n,r,s,o,y):l(t,n,s,o);if(x)if(f+=x,i){const e=c(t,n,r,s,o,y);m+=x*e[0],g+=x*e[1],p+=x*e[2]}else{const e=u(t,n,s,o);m+=x*e[0],g+=x*e[1]}}return f>0?i?[m/f,g/f,p/f]:[m/f,g/f]:n>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function l(e,t,n,r){const i=n-e,s=r-t;return Math.sqrt(i*i+s*s)}function a(e,t,n,r,i,s){const o=r-e,l=i-t,a=s-n;return Math.sqrt(o*o+l*l+a*a)}function u(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function c(e,t,n,r,i,s){return[e+.5*(r-e),t+.5*(i-t),n+.5*(s-n)]}n.d(t,{Y:()=>i})},77142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(59472),i=n(36544),s=n(32656),o=n(35470),l=n(50897),a=n(69996),u=n(31036),c=n(95830),h=n(96233);const d={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=(0,h.r)(9,(0,c.Z)("csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex();for(const n of function(e,t){return d.minX=t[0],d.minY=t[1],d.maxX=t[2],d.maxY=t[3],e.search(d)}(this._index,e))t(this._idByBounds.get(n))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}var m=n(44195),g=n(73127),p=n(24179);const y={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new m.Z(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(e.centroid||(e.centroid=(0,p.Y)(new g.Z,e.geometry,t.hasZ,t.hasM)),e.centroid)};const x=class{constructor(e){this.geometryInfo=e,this._boundsStore=new f,this._featuresById=new Map,this._markedIds=new Set,this.events=new o.Z,this.featureAdapter=y}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=(0,l.Ue)(l.Gv);return this._featuresById.forEach((t=>{const n=this._boundsStore.get(t.objectId);n&&(e[0]=Math.min(n[0],e[0]),e[1]=Math.min(n[1],e[1]),e[2]=Math.max(n[2],e[2]),e[3]=Math.max(n[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,n){for(const r of e){const e=this._boundsStore.get(r.objectId);e&&t((0,a.JR)(n,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,n)=>{this._markedIds.has(n)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void i.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.Z("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let o;if(this._markedIds.add(t),n?(e.displayId=n.displayId,o=this._boundsStore.get(t),this._boundsStore.delete(t)):(0,r.pC)(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);o=(0,u.$)(o||(0,l.Ue)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,o),this._featuresById.set(t,e)}_remove(e){return(0,r.pC)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}},71951:(e,t,n)=>{"use strict";n.d(t,{_W:()=>h,iV:()=>m,oj:()=>p});var r=n(27780),i=n(41241),s=n(17333),o=n(10165);const l=[0,0];function a(e,t){if(!t)return null;if("x"in t){const n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,l),null!=t.z&&(n.z=t.z),null!=t.m&&(n.m=t.m),n}if("xmin"in t){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,l),[n.xmax,n.ymax]=e(t.xmax,t.ymax,l),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return"rings"in t?{rings:u(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:u(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:c(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function u(e,t){const n=[];for(const r of e)n.push(c(r,t));return n}function c(e,t){const n=[];for(const r of e){const e=t(r[0],r[1],[0,0]);n.push(e),r.length>2&&e.push(r[2]),r.length>3&&e.push(r[3])}return n}async function h(e,t){if(!t)return;const n=Array.isArray(e)?e.map((e=>{var t;return null==(t=e.geometry)?void 0:t.spatialReference})):[e];await(0,s.iQ)(n.map((e=>({source:e,dest:t}))))}const d=a.bind(null,i.hG),f=a.bind(null,i.R6);function m(e,t,n){return e?(n||(n=t,t=e.spatialReference),(0,r.JY)(t)&&(0,r.JY)(n)&&!(0,r.fS)(t,n)?(0,i.Q8)(t,n)?(0,r.sS)(n)?d(e):f(e):(0,s.oj)(o.N,[e],t,n,null)[0]:e):e}const g=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,n){!e||!e.length||!t||!n||(0,r.fS)(t,n);const i={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null};return this._jobs.push(i),new Promise((e=>{i.resolve=e,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:t,inSpatialReference:n,outSpatialReference:l,resolve:a}=e;(0,i.Q8)(n,l)?(0,r.sS)(l)?a(t.map(d)):a(t.map(f)):a((0,s.oj)(o.N,t,n,l,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};async function p(e,t,n){return g.push(e,t,n)}},31036:(e,t,n)=>{"use strict";n.d(t,{XA:()=>C,h_:()=>H,Yn:()=>V,GH:()=>U,E7:()=>A,ks:()=>q,Uy:()=>R,u0:()=>k,EI:()=>$,cn:()=>W,di:()=>Q,Iv:()=>Y,fQ:()=>b,eG:()=>z,J6:()=>j,oB:()=>ce,zj:()=>ne,$:()=>se,lz:()=>ue,RZ:()=>ee,Nh:()=>te,Jd:()=>y,IN:()=>x,hY:()=>le,lM:()=>K,$g:()=>oe});var r=n(36544),i=n(32656),s=n(56885),o=n(44195),l=n(60151),a=n(73127);function u(e,t){return e?t?4:3:t?3:2}const c=r.Z.getLogger("esri.tasks.support.optimizedFeatureSet"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s},f=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2]},m=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+3]},g=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2],e[n+3]=t[r+3]};function p(e,t,n,r){if(e){if(n)return t&&r?g:f;if(t&&r)return m}else if(t&&r)return f;return d}function y({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function x({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function I({scale:e,translate:t},n){return n*e[0]+t[0]}function _({scale:e,translate:t},n){return t[1]-n*e[1]}function b(e,t,n){return e?t?n?T(e):M(e):n?w(e):N(e):null}function N(e){const t=e.coords;return{x:t[0],y:t[1]}}function F(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function M(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function w(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Z(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function B(e,t){return e&&t?Z:e?v:t?S:F}function E(e,t,n,r,i){const s=B(n,r);for(const n of t){const{geometry:t,attributes:r}=n;let l;t&&(l=s(new a.Z,t)),e.push(new o.Z(l,r,null,r[i]))}return e}function Y(e,t,n){if(!e)return null;const r=u(t,n),i=[];for(let t=0;t<e.coords.length;t+=r){const n=[];for(let i=0;i<r;i++)n.push(e.coords[t+i]);i.push(n)}return t?n?{points:i,hasZ:t,hasM:n}:{points:i,hasZ:t}:n?{points:i,hasM:n}:{points:i}}function G(e,t,n,r,i){const s=u(n,r);for(const n of t){const t=n.geometry,r=n.attributes;let l;t&&(l=P(new a.Z,t,s)),e.push(new o.Z(l,r,null,r[i]))}return e}function P(e,t,n=u(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let i=0;for(const e of t.points)for(let t=0;t<n;t++)r[i++]=e[t];return e}function j(e,t,n){if(!e)return null;const r=u(t,n),{coords:i,lengths:s}=e,o=[];let l=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(i[l++]);t.push(e)}o.push(t)}return t?n?{paths:o,hasZ:t,hasM:n}:{paths:o,hasZ:t}:n?{paths:o,hasM:n}:{paths:o}}function X(e,t,n,r,i){const s=u(n,r);for(const n of t){const t=n.geometry,r=n.attributes;let l;t&&(l=k(new a.Z,t,s)),e.push(new o.Z(l,r,null,r[i]))}return e}function k(e,t,n=u(t.hasZ,t.hasM)){const{lengths:r,coords:i}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<n;e++)i[s++]=t[e];r.push(e.length)}return e}function z(e,t,n){if(!e)return null;const r=u(t,n),{coords:i,lengths:s}=e,o=[];let l=0;for(const e of s){const t=[];for(let n=0;n<e;n++){const e=[];for(let t=0;t<r;t++)e.push(i[l++]);t.push(e)}o.push(t)}return t?n?{rings:o,hasZ:t,hasM:n}:{rings:o,hasZ:t}:n?{rings:o,hasM:n}:{rings:o}}function O(e,t,n,r,i){for(const s of t){const t=s.geometry,l=s.centroid,u=s.attributes;let c;t&&(c=R(new a.Z,t,n,r)),l?e.push(new o.Z(c,u,F(new a.Z,l),u[i])):e.push(new o.Z(c,u,null,u[i]))}return e}function R(e,t,n=t.hasZ,r=t.hasM){return q(e,t.rings,n,r),e}function q(e,t,n,r){const i=u(n,r),{lengths:s,coords:o}=e;let l=0;s.length=o.length=0;for(const e of t){for(const t of e)for(let e=0;e<i;e++)o[l++]=t[e];s.push(e.length)}return e}const L=[],D=[];function C(e,t,n,r,i){L[0]=e;const[s]=V(D,L,t,n,r,i);return L.length=D.length=0,s}function V(e,t,n,r,s,l){if(e.length=0,!n){for(const n of t){const t=n.attributes[l];e.push(new o.Z(null,n.attributes,null,t))}return e}switch(n){case"esriGeometryPoint":return E(e,t,r,s,l);case"esriGeometryMultipoint":return G(e,t,r,s,l);case"esriGeometryPolyline":return X(e,t,r,s,l);case"esriGeometryPolygon":return O(e,t,r,s,l);default:c.error("convertToFeatureSet:unknown-geometry",new i.Z(`Unable to parse unknown geometry type '${n}'`)),e.length=0}return e}function A(e,t,n,r,s,o){const l=e.length;switch(n){case"esriGeometryPoint":E(e,t,r,s,o);break;case"esriGeometryMultipoint":G(e,t,r,s,o);break;case"esriGeometryPolyline":X(e,t,r,s,o);break;case"esriGeometryPolygon":O(e,t,r,s,o);break;default:c.error("convertToFeatureSet:unknown-geometry",new i.Z(`Unable to parse unknown geometry type '${n}'`))}for(let r=0;r<t.length;r++)e[r+l].geometryType=n,e[r+l].insertAfter=t[r].insertAfter,e[r+l].groupId=t[r].groupId;return e}function $(e,t,n,r){D[0]=e,J(L,D,t,n,r);const i=L[0];return L.length=D.length=0,i}function U(e,t,n){if(!e)return null;const r=new a.Z;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),(0,s.wp)(e)?B(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(r,e):(0,s.oU)(e)?R(r,e,t,n):(0,s.l9)(e)?k(r,e,u(t,n)):(0,s.aW)(e)?P(r,e,u(t,n)):void c.error("convertFromGeometry:unknown-geometry",new i.Z(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,n,r){const s=e&&("coords"in e?e:e.geometry);if(!s)return null;switch(t){case"esriGeometryPoint":{let e=N;return n&&r?e=T:n?e=M:r&&(e=w),e(s)}case"esriGeometryMultipoint":return Y(s,n,r);case"esriGeometryPolyline":return j(s,n,r);case"esriGeometryPolygon":return z(s,n,r);default:return void c.error("convertToGeometry:unknown-geometry",new i.Z(`Unable to parse unknown geometry type '${t}'`))}}function J(e,t,n,r,s){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,n,r){let i=N;n&&r?i=T:n?i=M:r&&(i=w);for(const n of t){const{geometry:t,attributes:r}=n,s=t?i(t):null;e.push({attributes:r,geometry:s})}return e}(e,t,r,s);case"esriGeometryMultipoint":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=Y(t,n,r)),e.push({attributes:s,geometry:o})}return e}(e,t,r,s);case"esriGeometryPolyline":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:s}=i;let o;t&&(o=j(t,n,r)),e.push({attributes:s,geometry:o})}return e}(e,t,r,s);case"esriGeometryPolygon":return function(e,t,n,r){for(const i of t){const{geometry:t,attributes:s,centroid:o}=i;let l;if(t&&(l=z(t,n,r)),o){const t=N(o);e.push({attributes:s,centroid:t,geometry:l})}else e.push({attributes:s,geometry:l})}return e}(e,t,r,s);default:c.error("convertToFeatureSet:unknown-geometry",new i.Z(`Unable to parse unknown geometry type '${n}'`))}return e}function W(e){const{objectIdFieldName:t,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:l,geometryType:a,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:h,queryGeometryType:d}=e,f={features:J([],l,a,o,s),fields:i,geometryType:a,objectIdFieldName:t,spatialReference:n,uniqueIdField:c,queryGeometry:Q(h,d,!1,!1)};return r&&(f.transform=r),u&&(f.exceededTransferLimit=u),s&&(f.hasM=s),o&&(f.hasZ=o),f}function H(e,t){const n=new l.Z,{hasM:r,hasZ:s,features:o,objectIdFieldName:a,spatialReference:u,geometryType:h,exceededTransferLimit:d,transform:f,fields:m}=e;return m&&(n.fields=m),n.geometryType=h,n.objectIdFieldName=a||t,n.spatialReference=u,n.objectIdFieldName?(o&&V(n.features,o,h,s,r,n.objectIdFieldName),d&&(n.exceededTransferLimit=d),r&&(n.hasM=r),s&&(n.hasZ=s),f&&(n.transform=f),n):(c.error(new i.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function K(e){const{transform:t,features:n,hasM:r,hasZ:i}=e;if(!t)return e;for(const e of n)e.geometry&&oe(e.geometry,e.geometry,r,i,t),e.centroid&&oe(e.centroid,e.centroid,r,i,t);return e.transform=null,e}function ee(e,t){const{geometryType:n,features:r,hasM:i,hasZ:s}=t;if(!e)return t;for(let t=0;t<r.length;t++){const o=r[t],l=o.weakClone();l.geometry=new a.Z,te(l.geometry,o.geometry,i,s,n,e),o.centroid&&(l.centroid=new a.Z,te(l.centroid,o.centroid,i,s,"esriGeometryPoint",e)),r[t]=l}return t.transform=e,t}function te(e,t,n,r,i,s,o=n,l=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const a=h[i],{coords:c,lengths:d}=t,f=u(n,r),m=u(n&&o,r&&l),g=p(n,r,o,l);if(!d.length)return g(e.coords,c,0,0,y(s,c[0]),x(s,c[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let I,_,b,N,F=0,M=0,v=M;for(const t of d){if(t<a)continue;let n=0;M=v,b=I=y(s,c[F]),N=_=x(s,c[F+1]),g(e.coords,c,M,F,b,N),n++,F+=f,M+=m;for(let r=1;r<t;r++,F+=f)b=y(s,c[F]),N=x(s,c[F+1]),b===I&&N===_||(g(e.coords,c,M,F,b-I,N-_),M+=m,n++,I=b,_=N);n>=a&&(e.lengths.push(n),v=M)}return e.coords.length=v,e.coords.length?e:null}function ne(e,t,n,r,i,s,o=n,l=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const a=h[i],{coords:c,lengths:d}=t,f=u(n,r),m=u(n&&o,r&&l),g=p(n,r,o,l);if(!d.length)return g(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let y=0;const x=s*s;for(const t of d){if(t<a){y+=t*f;continue}const n=e.coords.length/m,r=y,i=y+(t-1)*f;g(e.coords,c,e.coords.length,r,c[r],c[r+1]),ie(e.coords,c,f,x,g,r,i),g(e.coords,c,e.coords.length,i,c[i],c[i+1]);const s=e.coords.length/m-n;s>=a?e.lengths.push(s):e.coords.length=n*m,y+=t*f}return e.coords.length?e:null}function re(e,t,n,r){const i=e[t],s=e[t+1],o=e[n],l=e[n+1],a=e[r],u=e[r+1];let c=o,h=l,d=a-c,f=u-h;if(0!==d||0!==f){const e=((i-c)*d+(s-h)*f)/(d*d+f*f);e>1?(c=a,h=u):e>0&&(c+=d*e,h+=f*e)}return d=i-c,f=s-h,d*d+f*f}function ie(e,t,n,r,i,s,o){let l,a=r,u=0;for(let e=s+n;e<o;e+=n)l=re(t,e,s,o),l>a&&(u=e,a=l);a>r&&(u-s>n&&ie(e,t,n,r,i,s,u),i(e,t,e.length,u,t[u],t[u+1]),o-u>n&&ie(e,t,n,r,i,u,o))}function se(e,t,n,r){if(!t||!t.coords||!t.coords.length)return null;const i=u(n,r);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const n=e[t],r=e[t+1];s=Math.min(s,n),l=Math.max(l,n),o=Math.min(o,r),a=Math.max(a,r)}}return e[0]=s,e[1]=o,e[2]=l,e[3]=a,e}function oe(e,t,n,r,i){const{coords:s,lengths:o}=t,l=n?r?g:f:r?f:d,a=u(n,r);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return l(e.coords,s,0,0,I(i,s[0]),_(i,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=a),e;const[c,h]=i.scale;let m=0;for(let t=0;t<o.length;t++){const n=o[t];e.lengths[t]=n;let r=I(i,s[m]),u=_(i,s[m+1]);l(e.coords,s,m,m,r,u),m+=a;for(let t=1;t<n;t++,m+=a)r+=s[m]*c,u-=s[m+1]*h,l(e.coords,s,m,m,r,u)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function le(e,t,n,r,i,s){const o=u(n,r),l=p(n,r,i,s),a=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let t=0;t<a.length;t+=o)l(e.coords,a,e.coords.length,t,a[t],a[t+1]);return e}function ae(e,t,n,r){let i=0,s=e[r*t],o=e[r*(t+1)];for(let l=1;l<n;l++){const n=s+e[r*(t+l)],a=o+e[r*(t+l)+1],u=(n-s)*(a+o);s=n,o=a,i+=u}return.5*i}function ue(e,t){const{coords:n,lengths:r}=e;let i=0,s=0;for(let e=0;e<r.length;e++)s+=ae(n,i,r[e],t),i+=e;return Math.abs(s)}function ce(e,t){const n=e.clone(),r=e.coords,i=e.lengths;let s=0;for(let e=0;e<i.length;e++){const o=i[e];let l=r[t*s],a=r[t*s+1];for(let e=1;e<o;e++){const i=l+r[t*(s+e)],o=a+r[t*(s+e)+1];n.coords[t*(s+e)]=i,n.coords[t*(s+e)+1]=o,l=i,a=o}s+=o}return n}},61:(e,t,n)=>{"use strict";n.r(t),n.d(t,{csvLatitudeFieldNames:()=>Y,csvLongitudeFieldNames:()=>G,default:()=>R});var r=n(95830),i=n(32656),s=n(10923),o=n(27780),l=n(73032),a=n(41241),u=(n(36348),n(36654)),c=n(17333),h=n(87565),d=n(44195),f=n(73127),m=n(61121),g=n(10165),p=n(56471),y=n(77142),x=n(71951),I=n(21895);const _=/^\s*"([\S\s]*)"\s*$/,b=/""/g,N=[","," ",";","|","\t"];function F(e,t){const n={},r=e.length;for(let i=0;i<r;i++)n[e[i]]=t[i];return n}function*M(e,t,n){let r=0;for(;r<=e.length;){const i=e.indexOf(t,r),s=e.substring(r,i>-1?i:void 0);r+=s.length+1,n&&!s.trim()||(yield s)}}function v(e){const t=e.includes("\r\n")?"\r\n":"\n";return M(e,t,!0)}function w(e,t){return M(e,t,!1)}function S(e){const t=e.trim();let n=0,r="";for(const e of N){const i=t.split(e).length;i>n&&(n=i,r=e)}return""===r?null:r}function*T(e,t,n){let r="",i="",s=0,o=[];e:for(;;){const{value:l,done:a}=e.next();if(a)return;const u=w(l,n);t:for(;;){const{value:e,done:t}=u.next();if(t)break t;if(r+=i+e,i="",s+=Z(e),s%2==0){if(s>0){const e=_.exec(r);if(!e){o=[],r="",s=0;continue e}o.push(e[1].replace(b,'"'))}else o.push(r);r="",s=0}else i=n}0===s?(yield F(t,o),o=[]):i="\n"}}function Z(e){let t=0,n=0;for(n=e.indexOf('"',n);n>=0;)t++,n=e.indexOf('"',n+1);return t}const B=(0,p.bU)("esriGeometryPoint"),E=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],Y=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],G=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"],P=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,j=["csv"],X=[0,0];class k{constructor(e,t){this.x=e,this.y=t}}const z=function(){const e=(0,h.lt)(),t=new RegExp("^"+e.regexp+"$"),n=new RegExp("["+e.group+"\\s\\xa0]","g"),r=e.factor;return function(i){const s=t.exec(i);if(e.factor=r,!s)return NaN;let o=s[1];if(!s[1]){if(!s[2])return NaN;o=s[2],e.factor*=-1}return o=o.replace(n,"").replace(e.decimal,"."),+o*e.factor}}(),O="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;const R=class{constructor(){this._fieldsIndex=null,this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null,this._fieldsIndex=null}async load(e,t={}){const[n]=await Promise.all([this._fetch(e.url,t),this._checkProjection(t&&e.parsing&&e.parsing.spatialReference)]),r=this._parse(n,e);if(this._queryEngine=this._createQueryEngine(n,r),r.layerDefinition.extent=this._queryEngine.fullExtent,r.layerDefinition.timeInfo){const{start:e,end:t}=this._queryEngine.timeExtent;r.layerDefinition.timeInfo.timeExtent=[e,t]}return r}async applyEdits(){throw new i.Z("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer")}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}async _fetch(e,t){if(!e)throw new i.Z("csv-source:invalid-source","url not defined");const n=(0,s.mN)(e);return(await(0,u.default)(n.path,{query:n.query,responseType:"text",signal:t.signal})).data}_parse(e,t){const n=t.parsing||{},r={columnDelimiter:n.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:n.latitudeField,longitudeFieldName:n.longitudeField}},o=v(e);let{value:l}=o.next();if(!l)throw new i.Z("csv","CSV is empty",{csv:e});if(l=l.trim(),!n.columnDelimiter){const e=S(l);if(!e)throw new i.Z("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");r.columnDelimiter=e}const a=l.split(r.columnDelimiter),u=r.layerDefinition={name:(0,s.vt)(t.url,j)||"csv",drawingInfo:B,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:n.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:n.spatialReference||{wkid:102100}}};if(!n.latitudeField||!n.longitudeField){const e=this._inferLocationInfo(a);if(!n.longitudeField&&!e.longitudeFieldName||!n.latitudeField&&!e.latitudeFieldName)throw new i.Z("csv","Unable to identify latitudeField and/or longitudeField from CSV");r.locationInfo={longitudeFieldName:n.longitudeField||e.longitudeFieldName,latitudeFieldName:n.latitudeField||e.latitudeFieldName}}const c=this._inferFields(o,r.columnDelimiter,a,r.locationInfo);if(n.fields&&n.fields.length){const e=new Map;for(const t of n.fields)e.set(t.name.toLowerCase(),t);for(const t of c){const n=e.get(t.name.toLowerCase());if(n){const e=t.name;Object.assign(t,n),t.name=e}}}if(u.fields=c,!u.fields.some((e=>"esriFieldTypeOID"===e.type&&(u.objectIdField=e.name,!0)))){const e={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};u.objectIdField=e.name,u.fields.unshift(e)}if(this._fieldsIndex=new m.Z(u.fields),u.timeInfo){const e=u.timeInfo;if(e.startTimeField){const t=this._fieldsIndex.get(e.startTimeField);t?(e.startTimeField=t.name,t.type="esriFieldTypeDate"):e.startTimeField=null}if(e.endTimeField){const t=this._fieldsIndex.get(e.endTimeField);t?(e.endTimeField=t.name,t.type="esriFieldTypeDate"):e.endTimeField=null}if(e.trackIdField){const t=this._fieldsIndex.get(e.trackIdField);e.trackIdField=t?t.name:null}e.startTimeField||e.endTimeField||(u.timeInfo=null)}return r}_inferLocationInfo(e){let t=null,n=null;const r=t=>e.find((e=>e.toLowerCase()===t));return G.some((e=>(t=r(e),!!t))),Y.some((e=>(n=r(e),!!n))),{longitudeFieldName:t,latitudeFieldName:n}}_inferFields(e,t,n,r){const i=[],s=T(e,n,t),o=[];e:for(;o.length<10;){const{value:e,done:t}=s.next();if(t)break e;o.push(e)}for(const e of n)if(e===r.longitudeFieldName||e===r.latitudeFieldName)i.push({name:e,type:"esriFieldTypeDouble",alias:e});else{const t=o.map((t=>t[e])),n=this._inferFieldType(t),r={name:e,type:null,alias:e};switch(n){case"integer":r.type="esriFieldTypeInteger";break;case"double":r.type="esriFieldTypeDouble";break;case"date":r.type="esriFieldTypeDate",r.length=36;break;default:r.type="esriFieldTypeString",r.length=255}i.push(r)}return i}_inferFieldType(e){if(!e.length)return"string";const t=/[^+-.,0-9]/;return e.map((e=>{let n=!1;if(""!==e){if(t.test(e))n=!0;else{let t=z(e);if(!isNaN(t))return/[.,]/.test(e)||!O(t)||t>214783647||t<-214783648?"double":"integer";if(-1===e.indexOf("E"))n=!0;else{if(t=Number(e),!isNaN(t))return"double";if(-1===e.indexOf(","))n=!0;else{if(e=e.replace(",","."),t=Number(e),!isNaN(t))return"double";n=!0}}}if(n){if(!/^[-]?\d*[.,]?\d*$/.test(e)){const t=new Date(e);return this._isValidDate(t,e)?"date":"string"}return"string"}return"string"}})).reduce(((e,t)=>void 0===e||e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0))}_isValidDate(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;let n=!0;if((0,r.Z)("chrome")&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,r=0;for(;!t&&r<=e.length;)t=!P.test(e[r]),r++;n=!t}}return n}_createQueryEngine(e,t){const{latitudeFieldName:n,longitudeFieldName:r}=t.locationInfo,{objectIdField:i,fields:s,extent:u,timeInfo:h}=t.layerDefinition;let m=[];const p=[],x=new Set,_=new Set,b=[];for(const{name:e,type:t}of s)"esriFieldTypeDate"===t?x.add(e):E.indexOf(t)>-1&&_.add(e),e!==i&&b.push(e);let N=0;const F=v(e);F.next();const M=T(F,b,t.columnDelimiter);e:for(;;){const{value:e,done:t}=M.next();if(t)break e;const s=this._parseCoordinateValue(e[n]),o=this._parseCoordinateValue(e[r]);if(null!=o&&null!=s&&!isNaN(s)&&!isNaN(o)){e[n]=s,e[r]=o;for(const t in e)if(t!==n&&t!==r)if(x.has(t)){const n=new Date(e[t]);e[t]=this._isValidDate(n,e[t])?n.getTime():null}else if(_.has(t)){const n=z(e[t]);isNaN(n)?e[t]=null:e[t]=n}e[i]=N,N++,m.push(new k(o,s)),p.push(e)}}if(!(0,o.fS)({wkid:4326},u.spatialReference))if((0,o.sS)(u.spatialReference))for(const e of m)[e.x,e.y]=(0,a.hG)(e.x,e.y,X);else m=(0,c.oj)(g.N,m,l.Z.WGS84,u.spatialReference,null);const w=new y.Z({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),S=new I.Z({fields:t.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:h,objectIdField:i,spatialReference:u.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:w}),Z=[];for(let e=0;e<m.length;e++){const{x:t,y:n}=m[e],r=p[e];r[i]=e+1,Z.push(new d.Z(new f.Z([],[t,n]),r,null,r[i]))}return w.addMany(Z),S}_parseCoordinateValue(e){if(null==e||""===e)return null;let t=z(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}async _checkProjection(e){try{await(0,x._W)(o.Zn,e)}catch{throw new i.Z("csv-layer","Projection not supported")}}}},56471:(e,t,n)=>{"use strict";n.d(t,{Dm:()=>l,Hq:()=>a,bU:()=>o});var r=n(95830),i=n(82550),s=n(7767);function o(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}function l(e,t){if((0,r.Z)("csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this.${t} = null;`;for(const t in e)n+=`this${t.indexOf(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const r=new Function(n);return()=>new r}catch(n){return()=>({[t]:null,...e})}}function a(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.d9)(e)}}]}},7767:(e,t,n)=>{"use strict";n.d(t,{I4:()=>i,lF:()=>o,ET:()=>s,qP:()=>l,eG:()=>a,lj:()=>c,wW:()=>u});const r=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},a={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=7935.js.map