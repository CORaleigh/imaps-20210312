(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[5864],{40522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,a=n(56140),i=(n(95830),n(36544),n(68055),n(79881)),s=n(87566),o=(n(10923),n(57002),n(86035),n(58385)),l=n(98034);let u=r=class extends o.wq{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*l.fM[this.unit]}clone(){return new r({value:this.value,unit:this.unit})}};(0,a._)([(0,i.Cb)({type:Number,json:{write:!0},nonNullable:!0})],u.prototype,"value",void 0),(0,a._)([(0,i.Cb)({type:l.vU.apiValues,json:{type:l.vU.jsonValues,read:l.vU.read,write:l.vU.write},nonNullable:!0})],u.prototype,"unit",void 0),u=r=(0,a._)([(0,s.j)("esri.TimeInterval")],u);const c=u},60418:(e,t,n)=>{"use strict";n.d(t,{E:()=>r,R:()=>a,a:()=>l,t:()=>o});const r=1e-6,a=Math.random,i=Math.PI/180,s=180/Math.PI;function o(e){return e*i}function l(e){return e*s}Object.freeze({__proto__:null,EPSILON:1e-6,RANDOM:a,toRadian:o,toDegree:l,equals:function(e,t){return Math.abs(e-t)<=1e-6*Math.max(1,Math.abs(e),Math.abs(t))}})},17387:(e,t,n)=>{"use strict";n.d(t,{C:()=>d,a:()=>h,b:()=>l,c:()=>g,d:()=>v,e:()=>M,f:()=>u,g:()=>s,h:()=>f,i:()=>S,j:()=>k,k:()=>p,l:()=>i,m:()=>z,n:()=>b,o:()=>m,p:()=>y,q:()=>x,r:()=>C,s:()=>o,t:()=>w,u:()=>N,v:()=>q,w:()=>R});var r=n(77625),a=n(60418);function i(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function u(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function c(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function h(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function p(e,t){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}function f(e,t){const n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function m(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function b(e,t){const n=t[0],r=t[1],a=t[2];let i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function v(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function g(e,t,n){const r=t[0],a=t[1],i=t[2],s=n[0],o=n[1],l=n[2];return e[0]=a*l-i*o,e[1]=i*s-r*l,e[2]=r*o-a*s,e}function M(e,t,n,r){const a=t[0],i=t[1],s=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=s+r*(n[2]-s),e}function S(e,t,n){const r=t[0],a=t[1],i=t[2];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12],e[1]=n[1]*r+n[5]*a+n[9]*i+n[13],e[2]=n[2]*r+n[6]*a+n[10]*i+n[14],e}function w(e,t,n){const r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function x(e,t,n){const r=n[0],a=n[1],i=n[2],s=n[3],o=t[0],l=t[1],u=t[2];let c=a*u-i*l,d=i*o-r*u,h=r*l-a*o,p=a*h-i*d,f=i*c-r*h,m=r*d-a*c;const y=2*s;return c*=y,d*=y,h*=y,p*=2,f*=2,m*=2,e[0]=o+c+p,e[1]=l+d+f,e[2]=u+h+m,e}const V=(0,r.c)(),_=(0,r.c)();function z(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}let C=u,T=c,F=d,R=p,q=f,k=i,N=m;Object.freeze({__proto__:null,length:i,copy:s,set:o,add:l,subtract:u,multiply:c,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:h,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},distance:p,squaredDistance:f,squaredLength:m,negate:y,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:b,dot:v,cross:g,lerp:M,hermite:function(e,t,n,r,a,i){const s=i*i,o=s*(2*i-3)+1,l=s*(i-2)+i,u=s*(i-1),c=s*(3-2*i);return e[0]=t[0]*o+n[0]*l+r[0]*u+a[0]*c,e[1]=t[1]*o+n[1]*l+r[1]*u+a[1]*c,e[2]=t[2]*o+n[2]*l+r[2]*u+a[2]*c,e},bezier:function(e,t,n,r,a,i){const s=1-i,o=s*s,l=i*i,u=o*s,c=3*i*o,d=3*l*s,h=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*d+a[0]*h,e[1]=t[1]*u+n[1]*c+r[1]*d+a[1]*h,e[2]=t[2]*u+n[2]*c+r[2]*d+a[2]*h,e},random:function(e,t){t=t||1;const n=2*(0,a.R)()*Math.PI,r=2*(0,a.R)()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e},transformMat4:S,transformMat3:w,transformQuat:x,rotateX:function(e,t,n,r){const a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},rotateY:function(e,t,n,r){const a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},rotateZ:function(e,t,n,r){const a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},angle:function(e,t){s(V,e),s(_,t),b(V,V),b(_,_);const n=v(V,_);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:z,equals:function(e,t){const n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],l=t[2];return Math.abs(n-s)<=a.E*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=a.E*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=a.E*Math.max(1,Math.abs(i),Math.abs(l))},sub:C,mul:T,div:F,dist:R,sqrDist:q,len:k,sqrLen:N})},77625:(e,t,n)=>{"use strict";function r(){return[0,0,0]}function a(e){return[e[0],e[1],e[2]]}function i(e,t,n){return[e,t,n]}function s(e){const t=[0,0,0],n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function o(e,t){return new Float64Array(e,t,3)}function l(){return i(1,1,1)}function u(){return i(1,0,0)}function c(){return i(0,1,0)}function d(){return i(0,0,1)}n.d(t,{O:()=>p,Z:()=>h,a:()=>o,b:()=>a,c:()=>r,d:()=>s,f:()=>i});const h=[0,0,0],p=l(),f=u(),m=c(),y=d();Object.freeze({__proto__:null,create:r,clone:a,fromValues:i,fromArray:s,createView:o,zeros:function(){return[0,0,0]},ones:l,unitX:u,unitY:c,unitZ:d,ZEROS:h,ONES:p,UNIT_X:f,UNIT_Y:m,UNIT_Z:y})},77204:(e,t,n)=>{"use strict";n.d(t,{r:()=>c,p:()=>u});var r=n(56140),a=n(79881),i=n(87566),s=n(82677),o=n(59691),l=n(45671);const u=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new o.Z}get updatingHandles(){return this._get("updatingHandles")||new l.t}};return(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,r._)([(0,i.j)("esri.core.HandleOwner")],t),t};let c=class extends(u(s.default)){};c=(0,r._)([(0,i.j)("esri.core.HandleOwner")],c)},59351:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>a,UI:()=>i,q6:()=>s});var r=n(39105);function a(e,t,n){return(0,r.eachAlways)(e.map(((e,r)=>t.apply(n,[e,r]))))}function i(e,t,n){return(0,r.eachAlways)(e.map(((e,r)=>t.apply(n,[e,r])))).then((e=>e.map((e=>e.value))))}function s(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}},94588:(e,t,n)=>{"use strict";n.d(t,{Bg:()=>r,sM:()=>a});n(95830);function r(e){}function a(e){return()=>e}},70834:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r,a=n(56140),i=(n(95830),n(36544),n(68055)),s=n(79881),o=n(56274),l=n(9870),u=n(30590),c=n(87566),d=(n(10923),n(57002),n(86035),n(58385)),h=n(6585),p=n(88210);const f=new o.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=r=class extends d.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let n;try{n=JSON.parse(t)}catch(e){}return n?n.value:null}readValueType(e,{description:t}){let n;try{n=JSON.parse(t)}catch(e){}return n?f.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,a._)([(0,s.Cb)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,a._)([(0,s.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,a._)([(0,s.Cb)()],m.prototype,"description",void 0),(0,a._)([(0,u.r)("description")],m.prototype,"readDescription",null),(0,a._)([(0,s.Cb)({types:h.V5,json:{read:{reader:h.im},write:!0}})],m.prototype,"domain",void 0),(0,a._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,a._)([(0,s.Cb)({type:i.z8,json:{write:!0}})],m.prototype,"length",void 0),(0,a._)([(0,s.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,a._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,a._)([(0,l.J)(p.v)],m.prototype,"type",void 0),(0,a._)([(0,s.Cb)()],m.prototype,"valueType",void 0),(0,a._)([(0,u.r)("valueType",["description"])],m.prototype,"readValueType",null),m=r=(0,a._)([(0,c.j)("esri.layers.support.Field")],m);const y=m},88210:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=new(n(56274).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},2961:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var r=n(49840),a=n(93533);const i={inches:(0,a.En)(1,"meters","inches"),feet:(0,a.En)(1,"meters","feet"),"us-feet":(0,a.En)(1,"meters","us-feet"),yards:(0,a.En)(1,"meters","yards"),miles:(0,a.En)(1,"meters","miles"),"nautical-miles":(0,a.En)(1,"meters","nautical-miles"),millimeters:(0,a.En)(1,"meters","millimeters"),centimeters:(0,a.En)(1,"meters","centimeters"),decimeters:(0,a.En)(1,"meters","decimeters"),meters:(0,a.En)(1,"meters","meters"),kilometers:(0,a.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,a.ty)(1,"meters",r.sv.radius)}},95005:(e,t,n)=>{"use strict";function r(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function i(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){const n=t||i(e),r=e.valueUnit||"unknown";return"unknown"===n?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===r?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}n.d(t,{PS:()=>i,QW:()=>s,iY:()=>r,qh:()=>a})},5328:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getAllSizes:()=>V,getColor:()=>f,getOpacity:()=>m,getRotationAngle:()=>y,getSize:()=>b,getSizeForValue:()=>M,getSizeFromNumberOrVariable:()=>v,getSizeRangeAtScale:()=>S,getVisualVariableValues:()=>w,viewScaleRE:()=>p});var r=n(94588),a=n(59472),i=n(36544),s=n(78745),o=n(15988),l=n(2961),u=n(95005);const c=i.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.default,h=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function f(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"color"===e.type))[0]:e;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i="number"==typeof t,o=i?null:t,l=o&&o.attributes;let u=i?t:null;const d=r.field,{ipData:h,hasExpression:p}=r.cache;let f=r.cache.compiledFunc;if(!d&&!p){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(p){if(!(0,a.pC)(n)||!(0,a.pC)(n.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),s=t.createExecContext(o,i);if(!f){const e=t.createSyntaxTree(r.valueExpression);f=t.createFunction(e),r.cache.compiledFunc=f}u=t.executeFunction(f,s)}else l&&(u=l[d]);const m=r.normalizationField,y=l?parseFloat(l[m]):void 0;if(null!=u&&(!m||i||!isNaN(y)&&0!==y)){isNaN(y)||i||(u/=y);const e=x(u,h);if(e){const t=e[0],i=e[1],o=t===i?r.stops[t].color:s.default.blendColors(r.stops[t].color,r.stops[i].color,e[2],(0,a.pC)(n)?n.color:void 0);return new s.default(o)}}}function m(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i="number"==typeof t,s=i?null:t,o=s&&s.attributes;let l=i?t:null;const u=r.field,{ipData:d,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!u&&!h){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(h){if((0,a.Wi)(n)||(0,a.Wi)(n.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),o=t.createExecContext(s,i);if(!p){const e=t.createSyntaxTree(r.valueExpression);p=t.createFunction(e),r.cache.compiledFunc=p}l=t.executeFunction(p,o)}else o&&(l=o[u]);const f=r.normalizationField,m=o?parseFloat(o[f]):void 0;if(null!=l&&(!f||i||!isNaN(m)&&0!==m)){isNaN(m)||i||(l/=m);const e=x(l,d);if(e){const t=e[0],n=e[1];if(t===n)return r.stops[t].opacity;{const a=r.stops[t].opacity;return a+(r.stops[n].opacity-a)*e[2]}}}}function y(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=r.axis||"heading",s="heading"===i&&"arithmetic"===r.rotationType?90:0,o="heading"===i&&"arithmetic"===r.rotationType?-1:1,l="number"==typeof t?null:t,u=l&&l.attributes,d=r.field,{hasExpression:h}=r.cache;let p=r.cache.compiledFunc,f=0;if(!d&&!h)return f;if(h){if((0,a.Wi)(n)||(0,a.Wi)(n.arcade))return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),s=t.createExecContext(l,i);if(!p){const e=t.createSyntaxTree(r.valueExpression);p=t.createFunction(e),r.cache.compiledFunc=p}f=t.executeFunction(p,s)}else u&&(f=u[d]||0);return f="number"!=typeof f||isNaN(f)?null:s+o*f,f}function b(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=M(function(e,t,n){const r="number"==typeof t,i=r?null:t,s=i&&i.attributes;let o=r?t:null;const{isScaleDriven:l}=e.cache;let d=e.cache.compiledFunc;if(l){const t=(0,a.pC)(n)?n.scale:void 0,r=(0,a.pC)(n)?n.view:void 0;o=null==t||"3d"===r?function(e){let t=null,n=null;const r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}(e):t}else if(!r)switch(e.inputValueType){case"expression":{if((0,a.Wi)(n)||(0,a.Wi)(n.arcade))return void c.error("Use of arcade expressions requires an arcade context");const t={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},r=n.arcade.arcadeUtils,s=r.getViewInfo(t),l=r.createExecContext(i,s);if(!d){const t=r.createSyntaxTree(e.valueExpression);d=r.createFunction(t),e.cache.compiledFunc=d}o=r.executeFunction(d,l);break}case"field":s&&(o=s[e.field]);break;case"unknown":o=null}if(!(0,u.qh)(o))return null;if(r||!e.normalizationField)return o;const h=s?parseFloat(s[e.normalizationField]):null;return(0,u.qh)(h)&&0!==h?o/h:null}(r,t,n),r,t,n,r.cache.ipData);return null==i||isNaN(i)?0:i}function v(e,t,n){return null==e?null:(0,u.iY)(e)?b(e,t,n):(0,u.qh)(e)?e:null}function g(e,t,n){return(0,u.qh)(n)&&e>n?n:(0,u.qh)(t)&&e<t?t:e}function M(e,t,n,r,i){switch(t.transformationType){case"additive":return function(e,t,n,r){return e+(v(t.minSize,n,r)||t.minDataValue)}(e,t,n,r);case"constant":return function(e,t,n){const r=e.stops;let a=r&&r.length&&r[0].size;return null==a&&(a=e.minSize),v(a,t,n)}(t,n,r);case"clamped-linear":return function(e,t,n,r){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=v(t.minSize,n,r),o=v(t.maxSize,n,r),l=(0,a.pC)(r)?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?h*Math.pow(s/2,2):s*s,n=t+i*((e?h*Math.pow(o/2,2):o*o)-t);return e?2*Math.sqrt(n/h):Math.sqrt(n)}return s+i*(o-s)}(e,t,n,r);case"proportional":return function(e,t,n,r){const i=(0,a.pC)(r)?r.shape:void 0,s=e/t.minDataValue,o=v(t.minSize,n,r),l=v(t.maxSize,n,r);let u=null;return u="circle"===i?2*Math.sqrt(s*Math.pow(o/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(s*Math.pow(o,2)):s*o,g(u,o,l)}(e,t,n,r);case"stops":return function(e,t,n,r,a){const[i,s,o]=x(e,a);if(i===s)return v(t.stops[i].size,n,r);{const e=v(t.stops[i].size,n,r);return e+(v(t.stops[s].size,n,r)-e)*o}}(e,t,n,r,i);case"real-world-size":return function(e,t,n,r){const i=((0,a.pC)(r)&&r.resolution?r.resolution:1)*l.a[t.valueUnit],s=v(t.minSize,n,r),o=v(t.maxSize,n,r),{valueRepresentation:u}=t;let c=null;return c="area"===u?2*Math.sqrt(e/h)/i:"radius"===u||"distance"===u?2*e/i:e/i,g(c,s,o)}(e,t,n,r);case"identity":return e;case"unknown":return null}}function S(e,t,n){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===n||t))return null;const a={scale:t,view:n};let i=v(e.minSize,d,a),s=v(e.maxSize,d,a);if(null!=i||null!=s){if(i>s){const e=s;s=i,i=e}return{minSize:i,maxSize:s}}}function w(e,t,n){if(!e.visualVariables)return;const r=[],a=[],i=[],s=[],o=[];for(const t of e.visualVariables)switch(t.type){case"color":a.push(t);break;case"opacity":i.push(t);break;case"rotation":o.push(t);break;case"size":s.push(t)}return a.forEach((e=>{const a=f(e,t,n);r.push({variable:e,value:a})})),i.forEach((e=>{const a=m(e,t,n);r.push({variable:e,value:a})})),o.forEach((e=>{const a=y(e,t,n);r.push({variable:e,value:a})})),s.forEach((e=>{const a=b(e,t,n);r.push({variable:e,value:a})})),r.filter((e=>null!=e.value))}function x(e,t){if(!t)return;let n=0,r=t.length-1;return t.some(((t,a)=>e<t?(r=a,!0):(n=a,!1))),[n,r,(e-t[n])/(t[r]-t[n])]}function V(e,t,n){const a=["proportional","proportional","proportional"];for(const i of e){const e=i.useSymbolValue?"symbol-value":b(i,t,n);switch(i.axis){case"width":a[0]=e;break;case"depth":a[1]=e;break;case"height":a[2]=e;break;case"width-and-depth":a[0]=e,a[1]=e;break;case"all":case void 0:case null:a[0]=e,a[1]=e,a[2]=e;break;default:(0,r.Bg)(i.axis)}}return a}},80882:(e,t,n)=>{"use strict";n.d(t,{Bj:()=>f,Df:()=>c,Bf:()=>d,se:()=>h,tR:()=>p,zb:()=>m,aL:()=>y});var r=n(36544),a=n(68055),i=n(10923),s=n(83477),o=n(93776),l=n(22696);const u=r.Z.getLogger("esri.support.basemapUtils");function c(){return{}}function d(e){for(const t in e){const n=e[t];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[t]}}function h(e,t){var n;let r;if("string"==typeof e){if(!(e in o.s)){const t=Object.keys(o.s).map((e=>`"${e}"`)).join(", ");return u.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(r=t[e]),r||(r=l.default.fromId(e),t&&(t[e]=r))}else r=(0,a.se)(l.default,e);return null!=(n=r)&&n.destroyed&&(u.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function p(e){let t=null;const n=g(e),r=!n.baseLayers.length;for(const e in o.s){const a=V(n,w(o.s[e]),{mustMatchReferences:r});if("equal"===a){t=e;break}"base-layers-equal"===a&&(t=e)}return t}function f(e,t){return e===t||"equal"===V(g(e),g(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(y))}function y(e){if(v(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const n=e.sourceNameToSource[t];if(v(null==n?void 0:n.sourceUrl))return!0}return!1}const b=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function v(e){if(!e)return!1;const t=new i.R9((0,i.hF)(e));return b.test(t.authority)}function g(e){return e?!e.loaded&&e.resourceInfo?w(e.resourceInfo.data):{baseLayers:M(e.baseLayers),referenceLayers:M(e.referenceLayers)}:null}function M(e){return(s.Z.isCollection(e)?e.toArray():e).map(S)}function S(e){return{type:e.type,url:C("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function w(e){return e?{baseLayers:x(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:x(e.baseMapLayers.filter((e=>e.isReference)))}:null}function x(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:C(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function V(e,t,n){return null!=e!=(null!=t)?"not-equal":e?_(e.baseLayers,t.baseLayers)?_(e.referenceLayers,t.referenceLayers)?"equal":n.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function _(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!z(e[n],t[n]))return!1;return!0}function z(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function C(e){return e?(0,i.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},52411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(56140),a=(n(95830),n(36544)),i=(n(68055),n(79881)),s=n(87566),o=(n(10923),n(57002),n(86035),n(58385)),l=n(56885);const u=a.Z.getLogger("esri.tasks.support.ProjectParameters");let c=class extends o.wq{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}get outSR(){return u.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference}set outSR(e){u.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead."),this.outSpatialReference=e}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:(0,l.Ji)(t),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(n.transformForward=this.transformForward),n}};(0,r._)([(0,i.Cb)()],c.prototype,"geometries",void 0),(0,r._)([(0,i.Cb)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),(0,r._)([(0,i.Cb)({json:{read:!1}})],c.prototype,"outSR",null),(0,r._)([(0,i.Cb)()],c.prototype,"transformation",void 0),(0,r._)([(0,i.Cb)()],c.prototype,"transformForward",void 0),c=(0,r._)([(0,s.j)("esri.tasks.support.ProjectParameters")],c);const d=c},17154:(e,t,n)=>{"use strict";n.d(t,{jE:()=>u,c5:()=>b,LU:()=>g,Q4:()=>v,tB:()=>c,T:()=>o,u1:()=>s,pG:()=>p,ZA:()=>d,_F:()=>l});var r=n(33655),a=n(77625),i=n(17387);function s(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],n=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,n),r))}function o(e,t,n){n=n||e;const r=(0,i.d)(e,t);(0,i.s)(n,e[0]-r*t[0],e[1]-r*t[1],e[2]-r*t[2]),(0,i.n)(n,n)}function l(e,t,n){Math.abs(e[0])>Math.abs(e[1])?(0,i.s)(t,0,1,0):(0,i.s)(t,1,0,0),(0,i.c)(n,e,t),(0,i.n)(t,t),(0,i.c)(t,n,e),(0,i.n)(n,n)}function u(e,t){const n=(0,i.l)(e),a=(0,r.Kt)(e[2]/n),s=Math.atan2(e[1]/n,e[0]/n);return(0,i.s)(t,n,a,s),t}function c(e,t,n){const r=n[0]-t[0],a=n[1]-t[1],i=n[2]-t[2];let s=r*r+a*a+i*i;return s?(s=1/Math.sqrt(s),e[0]=r*s,e[1]=a*s,e[2]=i*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}function d(e,t,n,r=(0,a.c)()){const s=(0,i.l)(e),o=(0,i.l)(t),l=(0,i.d)(e,t)/(s*o);if(l<.9999999999999999){const a=Math.acos(l),u=((1-n)*s+n*o)/Math.sin(a),c=u/s*Math.sin((1-n)*a),d=u/o*Math.sin(n*a);return(0,i.a)(M,e,c),(0,i.a)(S,t,d),(0,i.b)(r,M,S)}return(0,i.e)(r,e,t,n)}class h{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,n,r=0,a=!1){return(n-=r)<e?n+=this.ndiff(e-n):n>t&&(n-=this.ndiff(n-t)),a&&n===t&&(n=e),n+r}normalize(e,t=0,n=!1){return this._normalize(this.min,this.max,e,t,n)}clamp(e,t=0){return(0,r.uZ)(e-t,this.min,this.max)+t}monotonic(e,t,n){return e<t?t:t+this.ndiff(e-t,n)}minimalMonotonic(e,t,n){return this._normalize(e,e+this.range,t,n)}center(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}diff(e,t,n){return this.monotonic(e,t,n)-e}shortestSignedDiff(e,t){e=this.normalize(e);const n=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(r)?n:r}contains(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}function p(e,t,n,r){(0,i.f)(f,t,e),(0,i.f)(m,n,e),(0,i.c)(r,f,m),(0,i.n)(r,r),r[3]=-(0,i.d)(e,r)}const f=(0,a.c)(),m=(0,a.c)();function y(e){for(const t in e){const n=e[t];n instanceof Function&&(e[t]=n.bind(e))}return e}const b=y(new h(0,2*Math.PI)),v=y(new h(-Math.PI,Math.PI)),g=y(new h(0,360)),M=((0,a.c)(),(0,a.c)()),S=(0,a.c)()},45671:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(56140),a=n(95844),i=n(79881),s=n(87566),o=n(74386),l=n(3059),u=n(82677),c=n(59691),d=n(80621);let h=class extends u.default{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new c.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,n,r=0){const a=0!=(1&r),i=++this.handleId;a||this.installSyncUpdatingWatch(e,t,i);const s=0!=(2&r)?(0,d.init)(e,t,n,a):e.watch(t,n,a);return this.handles.add(s,i),{remove:()=>{this.handles.remove(i)}}}addOnCollectionPropertyChange(e,t,n,r=0){const a=0!=(2&r),i=++this.handleId;return this.handles.add([(0,d.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,d.on)(e,t,"change",n,a?e=>{n({added:e.items,removed:[],moved:[],target:e})}:void 0)],i),{remove:()=>{this.handles.remove(i)}}}addOnCollectionChange(e,t,n=0){const r=0!=(2&n),a=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],a),r&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(a)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const n=()=>this.handles.remove(t);return e.then(n,n),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,n){const r=this.createSyncUpdatingCallback(),i=(0,l.QU)((()=>(0,a.$z)(e,t)),r);return this.handles.add(i,n),i}createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,o.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};(0,r._)([(0,i.Cb)({readOnly:!0})],h.prototype,"updating",void 0),h=(0,r._)([(0,s.j)("esri.views.support.WatchUpdatingTracking")],h);const p=-42}},0,[[45829,3666,1518,8834,6779,9263,142,7383,5988,3533,2696,7278,2646],[52646,3666,1518,8834,6779,9263,142,7383,5988,3533,2696,7278,2646],[13538,3666,1518,8834,6779,9263,142,7383,5988,3533,2696,7278,2646]]]);
//# sourceMappingURL=layers.js.map