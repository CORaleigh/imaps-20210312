(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[779,5114,9833,9869,8860,5314,6854],{87565:(e,t,i)=>{"use strict";i.d(t,{lt:()=>c,WU:()=>s,ti:()=>a,Qc:()=>d});var o=i(88263),n=i(3766);const r={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function a(e){e||(e=(0,n.Kd)());let t=e in r;if(!t){const i=e.split("-");i.length>1&&i[0]in r&&(e=i[0],t=!0),t||(e="en")}const[i,o,a="#,##0.###"]=r[e];return{decimal:i,group:o,pattern:a}}function s(e,t){const i=a((t={...t}).locale);t.customs=i;const o=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const o=(i=i||{}).customs.group,n=i.customs.decimal,r=t.split(";"),a=r[0];if(-1!==(t=r[e<0?1:0]||"-"+a).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const s=l,c=a.match(s);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(s,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const o=t.split("."),n="string"==typeof i.places&&i.places.indexOf(",");let r=i.places;n?r=i.places.substring(n+1):r>=0||(r=(o[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(r))));const a=String(Math.abs(e)).split("."),s=a[1]||"";if(o[1]||i.places){n&&(i.places=i.places.substring(0,n));const e=void 0!==i.places?i.places:o[1]&&o[1].lastIndexOf("0")+1;e>s.length&&(a[1]=s.padEnd(Number(e),"0")),r<s.length&&(a[1]=s.substr(0,Number(r)))}else a[1]&&a.pop();const l=o[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===l.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));let d,u,p=o[0].lastIndexOf(",");if(-1!==p){d=o[0].length-p-1;const e=o[0].substr(0,p);p=e.lastIndexOf(","),-1!==p&&(u=e.length-p-1)}const h=[];for(let e=a[0];e;){const t=e.length-d;h.push(t>0?e.substr(t):e),e=t>0?e.slice(0,t):"",u&&(d=u,u=void 0)}return a[0]=h.reverse().join(i.group||","),a.join(i.decimal||".")}(e,c[0],{decimal:n,group:o,places:i.places,round:i.round}))}(e,o,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),i=e.pattern||t.pattern,n=t.group,r=t.decimal;let s=1;if(-1!==i.indexOf("%"))s/=100;else if(-1!==i.indexOf("‰"))s/=1e3;else if(-1!==i.indexOf("¤"))throw new Error("currency notation not supported");const c=i.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:p(c,(function(t){return(t="(?:"+(0,o.Qs)(t,".")+")").replace(l,(function(t){const i={signed:!1,separator:e.strict?n:[n,""],fractional:e.fractional,decimal:r,exponent:!1},o=t.split(".");let a=e.places;1===o.length&&1!==s&&(o[1]="###"),1===o.length||0===a?i.fractional=!1:(void 0===a&&(a=e.pattern?o[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(i.fractional=!0),!e.places&&a<o[1].length&&(a+=","+o[1].length),i.places=a);const l=o[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=u(e),i=p(e.fractional,(function(t){let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0);let o=t+i;return i&&(o="(?:(?:"+o+")|(?:"+i+"))"),o+p(e.exponent,(function(t){return t?"([eE]"+u({signed:e.eSigned})+")":""}))}(i)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:r,factor:s}}function d(e,t){const i=c(t),o=new RegExp("^"+i.regexp+"$").exec(e);if(!o)return NaN;let n=o[1];if(!o[1]){if(!o[2])return NaN;n=o[2],i.factor*=-1}return n=n.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(n)*i.factor}function u(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",p(e.signed,(function(e){return e?"[-+]":""}),!0)+p(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=(0,o.Qs)(t))?t="\\s":" "===t&&(t="\\s\\xa0");const i=e.groupSize,n=e.groupSize2;if(n){const e="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+i+"})";return i-n>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const p=function(e,t,i){if(!(e instanceof Array))return t(e);const o=[];for(let i=0;i<e.length;i++)o.push(t(e[i]));return h(o.join("|"),i)},h=function(e,t){return"("+(t?"?:":"")+e+")"}},75138:(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>s,projectGeometry:()=>l});var o=i(34926),n=i(32656),r=i(32797),a=i(52411);async function s(e=null,t){if(o.Z.geometryServiceUrl)return new(0,(await i.e(5393).then(i.bind(i,88201))).default)({url:o.Z.geometryServiceUrl});if(!e)throw new n.Z("internal:geometry-service-url-not-configured");let a;if(a="portal"in e?e.portal||r.Z.getDefault():e,await a.load({signal:t}),a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return new(0,(await i.e(5393).then(i.bind(i,88201))).default)({url:a.helperServices.geometry.url});throw new n.Z("internal:geometry-service-url-not-configured")}async function l(e,t,i=null,o){const r=await s(i,o),l=new a.Z;l.geometries=[e],l.outSpatialReference=t;const c=await r.project(l,{signal:o});if(c&&Array.isArray(c)&&1===c.length)return c[0];throw new n.Z("internal:geometry-service-projection-failed")}},80705:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ye});var o=i(56140),n=(i(95830),i(82550)),r=(i(36544),i(68055),i(79881)),a=i(56274),s=i(87566),l=i(32656),c=i(10923),d=(i(57002),i(86035),i(39105)),u=i(53817),p=i(96071),h=i(23838),f=i(54721),m=i(5328),v=i(31518),y=i(95986),b=i(94588),g=i(73032),_=i(52937),w=i(91535),k=i(70834),S=i(76194),C=i(21544),x=i(58385);let O=class extends x.wq{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};(0,o._)([(0,r.Cb)({type:_.Z})],O.prototype,"extent",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"height",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"href",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"opacity",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"rotation",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"scale",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"visible",void 0),(0,o._)([(0,r.Cb)()],O.prototype,"width",void 0),O=(0,o._)([(0,s.j)("esri.layer.support.MapImage")],O);const A=O;let P=class extends x.wq{constructor(e){super(e),this.itemId=null,this.url=null}};(0,o._)([(0,r.Cb)({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],P.prototype,"itemId",void 0),(0,o._)([(0,r.Cb)({type:String,json:{write:!0}})],P.prototype,"url",void 0),P=(0,o._)([(0,s.j)("esri.tasks.support.DataFile")],P);const M=P,j=new a.Xn({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"});let T=class extends x.wq{constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null}};(0,o._)([(0,r.Cb)()],T.prototype,"jobId",void 0),(0,o._)([(0,r.Cb)({json:{read:j.read}})],T.prototype,"jobStatus",void 0),(0,o._)([(0,r.Cb)({type:[C.Z]})],T.prototype,"messages",void 0),T=(0,o._)([(0,s.j)("esri.tasks.support.JobInfo")],T);const E=T,I=new a.Xn({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});let D=class extends x.wq{constructor(e){super(e),this.distance=0,this.units=null}};(0,o._)([(0,r.Cb)({json:{write:!0}})],D.prototype,"distance",void 0),(0,o._)([(0,r.Cb)({json:{read:I.read,write:I.write}})],D.prototype,"units",void 0),D=(0,o._)([(0,s.j)("esri/tasks/support/LinearUnit")],D);const L=D,R=new a.Xn({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});let N=class extends x.wq{constructor(e){super(e),this.dataType=null,this.value=null}};(0,o._)([(0,r.Cb)({json:{read:R.read,write:R.write}})],N.prototype,"dataType",void 0),(0,o._)([(0,r.Cb)()],N.prototype,"value",void 0),N=(0,o._)([(0,s.j)("esri.tasks.support.ParameterValue")],N);const B=N;let F=class extends x.wq{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};(0,o._)([(0,r.Cb)()],F.prototype,"format",void 0),(0,o._)([(0,r.Cb)({json:{read:{source:"itemID"},write:{target:"itemID"}}})],F.prototype,"itemId",void 0),(0,o._)([(0,r.Cb)()],F.prototype,"url",void 0),F=(0,o._)([(0,s.j)("esri/tasks/support/RasterData")],F);const V=F;let G=class extends y.Z{constructor(e){super(e),this._timers=new Map,this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}destroy(){this._timers.forEach((e=>{clearInterval(e)}))}cancelJob(e,t){const{path:i}=this.parsedUrl,o={...this.requestOptions,...t,query:{f:"json"}};return this._clearTimer(e),(0,f.default)(`${i}/jobs/${e}/cancel`,o).then((e=>E.fromJSON(e.data)))}checkJobStatus(e,t){const{path:i}=this.parsedUrl,o={...this.requestOptions,...t,query:{f:"json"}};return(0,f.default)(`${i}/jobs/${e}`,o).then((e=>E.fromJSON(e.data)))}execute(e,t){return this._constructRequest("execute",e,t).then((e=>{const t=e.data.results||[],i=e.data.messages||[];return{results:t.map(this._decode),messages:i.map((e=>C.Z.fromJSON(e)))}}))}getResultData(e,t,i){const{returnFeatureCollection:o,returnM:n,returnZ:r,outSpatialReference:a,parsedUrl:s}=this,{path:l}=s,c={returnFeatureCollection:o||void 0,returnM:n||void 0,returnZ:r||void 0,outSR:a,returnType:"data",f:"json"},d=this._gpEncode(c,null),u={...this.requestOptions,...i,query:d};return(0,f.default)(`${l}/jobs/${e}/results/${t}`,u).then((e=>this._decode(e.data)))}getResultImage(e,t,i,o){const{path:n}=this.parsedUrl,r={...i.toJSON(),f:"json"},a=this._gpEncode(r),s={...this.requestOptions,...o,query:a};return(0,f.default)(`${n}/jobs/${e}/results/${t}`,s).then((e=>this._decode(e.data)))}async getResultMapImageLayer(e){const{path:t}=this.parsedUrl,o=t.indexOf("/GPServer/"),n=`${t.substring(0,o)}/MapServer/jobs/${e}`;return new(0,(await Promise.all([i.e(8834),i.e(6779),i.e(9263),i.e(142),i.e(6369),i.e(2551),i.e(6814),i.e(5666),i.e(2696),i.e(7278),i.e(5287),i.e(8368)]).then(i.bind(i,62933))).default)({url:n})}submitJob(e,t){return this._constructRequest("submitJob",e,t).then((e=>E.fromJSON(e.data)))}waitForJobCompletion(e,t={}){const{interval:i=1e3,signal:o,statusCallback:n}=t;return(0,d.create)(((t,r)=>{(0,d.onAbort)(o,(()=>{this._clearTimer(e),r((0,d.createAbortError)())})),this._clearTimer(e);const a=setInterval((()=>{this._timers.has(e)||r((0,d.createAbortError)()),this._getJobStatus(e,this.requestOptions).then((i=>{const{jobStatus:o}=i;switch(o){case"job-succeeded":this._clearTimer(e),t(i);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":n&&n(i);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":this._clearTimer(e),r(i);break;default:(0,b.Bg)(o)}}))}),i);this._timers.set(e,a)}))}_clearTimer(e){this._timers.has(e)&&(clearInterval(this._timers.get(e)),this._timers.delete(e))}_constructRequest(e,t,i){const o={},n={},r=[];return this._collectGeometries(t,r,o),(0,w.aX)(r).then((r=>{const{outSpatialReference:a,parsedUrl:s,processExtent:l,processSpatialReference:c,returnFeatureCollection:d,returnM:u,returnZ:p}=this,{path:h}=s;for(const e in o){const t=o[e];n[e]=r.slice(t[0],t[1])}const m=a?a.wkid||a:null,v=c?c.wkid||c:null,y="execute"===e?{returnFeatureCollection:d||void 0,returnM:u||void 0,returnZ:p||void 0}:null,b={...l?{context:{extent:l,outSR:m,processSR:v}}:{"env:outSR":m,"env:processSR":v},...t,...y,f:"json"},g=this._gpEncode(b,null,n),_={...this.requestOptions,...i,query:g};return(0,f.default)(`${h}/${e}`,_)}))}_collectGeometries(e,t,i){for(const o in e){const n=e[o];if(n&&"object"==typeof n&&n instanceof S.default){const{features:e}=n;i[o]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}}}_decode(e){const t=e.dataType,i=B.fromJSON(e);switch(t){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":return i;case"GPDate":i.value=new Date(i.value);break;case"GPDataFile":i.value=M.fromJSON(i.value);break;case"GPLinearUnit":i.value=L.fromJSON(i.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":{const t=e.value.url;i.value=t?M.fromJSON(i.value):S.default.fromJSON(i.value);break}case"GPRasterData":case"GPRasterDataLayer":{const t=e.value.mapImage;i.value=t?A.fromJSON(t):V.fromJSON(i.value);break}case"GPField":i.value=k.Z.fromJSON(i.value);break;case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return i;case"GPMultiValue:GPDate":{const e=i.value;i.value=e.map((e=>new Date(e)));break}case"GPMultiValue:GPDataFile":i.value=i.value.map((e=>M.fromJSON(e)));break;case"GPMultiValue:GPLinearUnit":i.value=i.value.map((e=>L.fromJSON(e)));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":i.value=i.value.map((e=>S.default.fromJSON(e)));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":i.value=i.value.map((e=>e?A.fromJSON(e):V.fromJSON(i.value)));break;case"GPMultiValue:GPField":i.value=i.value.map((e=>k.Z.fromJSON(e)))}return i}_gpEncode(e,t,i){for(const t in e){const i=e[t];Array.isArray(i)?e[t]=JSON.stringify(i.map((e=>this._gpEncode({item:e},!0).item),this)):i instanceof Date&&(e[t]=i.getTime())}return this._encode(e,t,i)}_getJobStatus(e,t){const{path:i}=this.parsedUrl,o=`${i}/jobs/${e}`,n={...this.requestOptions,...t,query:{f:"json"}};return(0,f.default)(o,n).then((e=>E.fromJSON(e.data)))}};(0,o._)([(0,r.Cb)({type:g.Z})],G.prototype,"outSpatialReference",void 0),(0,o._)([(0,r.Cb)({type:_.Z})],G.prototype,"processExtent",void 0),(0,o._)([(0,r.Cb)({type:g.Z})],G.prototype,"processSpatialReference",void 0),(0,o._)([(0,r.Cb)({nonNullable:!0})],G.prototype,"returnFeatureCollection",void 0),(0,o._)([(0,r.Cb)({nonNullable:!0})],G.prototype,"returnM",void 0),(0,o._)([(0,r.Cb)({nonNullable:!0})],G.prototype,"returnZ",void 0),G=(0,o._)([(0,s.j)("esri/tasks/Geoprocessor")],G);const U=G;var $=i(33517),Z=i(12783);function W(e,t){const{graphic:i,renderer:o,symbol:n}=t,r=n.type;if("text"===r||"shield-label-symbol"===r||!("visualVariables"in o)||!o.visualVariables)return;const a=o.getVisualVariablesForType("size"),s=o.getVisualVariablesForType("color"),l=o.getVisualVariablesForType("opacity"),c=o.getVisualVariablesForType("rotation"),d=a&&a[0],u=s&&s[0],h=l&&l[0],f=c&&c[0];if(d){const t="simple-marker"===r?n.style:null,o=(0,m.getSize)(d,i,{shape:t});null!=o&&("simple-marker"===r?e.size=(0,p.Wz)(o):"picture-marker"===r?(e.width=(0,p.Wz)(o),e.height=(0,p.Wz)(o)):"simple-line"===r?e.width=(0,p.Wz)(o):e.outline&&(e.outline.width=(0,p.Wz)(o)))}if(u){const t=(0,m.getColor)(u,i);(t&&"simple-marker"===r||"simple-line"===r||"simple-fill"===r)&&(e.color=t?t.toJSON():void 0)}if(h){const t=(0,m.getOpacity)(h,i);null!=t&&e.color&&(e.color[3]=Math.round(255*t))}f&&(e.angle=-(0,m.getRotationAngle)(o,i))}function J(e){return e&&"bing-maps"===e.type}function q(e){return e&&"csv"===e.type}function z(e){return e&&"feature"===e.type}function H(e){return e&&"geojson"===e.type}function Y(e){return e&&"graphics"===e.type}function X(e){return e&&"group"===e.type}function K(e){return e&&"esri.views.2d.layers.GroupLayerView2D"===e.declaredClass}function Q(e){return e&&"imagery"===e.type}function ee(e){return e&&"kml"===e.type}function te(e){return e&&"map-image"===e.type}function ie(e){return e&&"map-notes"===e.type}function oe(e){return e&&"open-street-map"===e.type}function ne(e){return e&&"stream"===e.type}function re(e){return e&&"tile"===e.type}function ae(e){return e&&"vector-tile"===e.type}function se(e){return e&&"web-tile"===e.type}function le(e){return e&&"wms"===e.type}function ce(e){return e&&"wmts"===e.type}var de=i(70026);const ue={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},pe=new a.Xn({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),he=new a.Xn({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),fe=new v.Z({returnGeometry:!0});function me(e){return e&&(e.path||"image/svg+xml"===e.contentType||e.url&&e.url.endsWith(".svg"))}let ve=class extends y.Z{constructor(...e){super(...e),this._ssExtent=null,this._legendLayers=[],this._legendLayerNameMap={},this._gpServerUrl=null,this._cimVersion=null,this._is11xService=!1,this._gpMetadata=null,this.updateDelay=1e3}get _geoprocessor(){return new U({url:this.url})}get mode(){return this._gpMetadata&&this._gpMetadata.executionType?he.fromJSON(this._gpMetadata.executionType):"sync"}execute(e,t){let i=this.url;const o=i.lastIndexOf("/GPServer/");return o>0&&(i=i.slice(0,o+9)),(0,d.resolve)().then((()=>this._gpServerUrl===i?{data:this._gpMetadata}:(this._gpServerUrl=i,(0,f.default)(i,{query:{f:"json"}})))).then((t=>(this._gpMetadata=t.data,this._cimVersion=this._gpMetadata.cimVersion,this._is11xService=!!this._cimVersion,this._getGpPrintParams(e)))).then((e=>{const i=e=>"sync"===this.mode?e.results&&e.results[0]&&e.results[0].value:this._geoprocessor.getResultData(e.jobId,"Output_File",t).then((e=>e.value));return"async"===this.mode?this._geoprocessor.submitJob(e,t).then((e=>this._geoprocessor.waitForJobCompletion(e.jobId,{interval:this.updateDelay}).then(i))):this._geoprocessor.execute(e,t).then(i)}))}async _createOperationalLayers(e,t){const i=[],o={layerView:null,printTemplate:t,view:e};let n=0;t.scalePreserved&&(n=t.outScale||e.scale);const r=function(e,t){const i=e.allLayerViews.items;if(t===e.scale)return i.filter((e=>!e.suspended));const o=new Array;for(const e of i)K(e.parent)&&!o.includes(e.parent)||!e.visible||t&&"isVisibleAtScale"in e&&!e.isVisibleAtScale(t)||o.push(e);return o}(e,n);for(const e of r){const t=e.layer;if(!t.loaded||X(t))continue;let n;o.layerView=e,n=J(t)?this._createBingMapsLayerJSON(t):q(t)?await this._createCSVLayerJSON(t,o):z(t)?await this._createFeatureLayerJSON(t,o):H(t)?await this._createGeoJSONLayer(t,o):Y(t)?await this._createGraphicsLayerJSON(t,o):Q(t)?this._createImageryLayerJSON(t):ee(t)?await this._createKMLLayerJSON(t,o):te(t)?this._createMapImageLayerJSON(t,o):ie(t)?await this._createMapNotesLayerJSON(o):oe(t)?this._createOpenStreetMapLayerJSON():ne(t)?await this._createStreamLayerJSON(t,o):re(t)?this._createTileLayerJSON(t):ae(t)?await this._createVectorTileLayerJSON(t,o):se(t)?this._createWebTileLayerJSON(t):le(t)?this._createWMSLayerJSON(t):ce(t)?this._createWMTSLayerJSON(t):await this._createScreenshotJSON(t,o),n&&(Array.isArray(n)?i.push(...n):(n.id=t.id,n.title=this._legendLayerNameMap[t.id]||t.title,n.opacity=t.opacity,n.minScale=t.minScale||0,n.maxScale=t.maxScale||0,i.push(n)))}if(n&&i.forEach((e=>{e.minScale=0,e.maxScale=0})),e.graphics&&e.graphics.length){const o=await this._createFeatureCollectionJSON(null,e.graphics,t);o&&i.push(o)}return i}_createBingMapsLayerJSON(e){return{culture:e.culture,key:e.key,type:"BingMaps"+("aerial"===e.style?"Aerial":"hybrid"===e.style?"Hybrid":"Road")}}async _createCSVLayerJSON(e,{layerView:t,printTemplate:i}){let o;if(this._legendLayers&&this._legendLayers.push({id:e.id}),!this._is11xService){const o=await this._getGraphics(t);return this._createFeatureCollectionJSON(e,o,i)}return o={type:"CSV"},e.write(o,{origin:"web-map"}),delete o.popupInfo,delete o.layerType,o.showLabels=i.showLabels&&e.labelsVisible,o}async _createFeatureCollectionJSON(e,t,i){let o;const n={layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}},r={layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}},a={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}},s={layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}},l={layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}};if(l.layerDefinition.name="textLayer",delete l.layerDefinition.drawingInfo,e){if("esri.layers.FeatureLayer"===e.declaredClass||"esri.layers.StreamLayer"===e.declaredClass?n.layerDefinition.name=r.layerDefinition.name=a.layerDefinition.name=s.layerDefinition.name=this._legendLayerNameMap[e.id]||e.get("arcgisProps.title")||e.title:"esri.layers.GraphicsLayer"===e.declaredClass&&(t=e.graphics.items),e.renderer){const t=e.renderer.toJSON();n.layerDefinition.drawingInfo.renderer=t,r.layerDefinition.drawingInfo.renderer=t,a.layerDefinition.drawingInfo.renderer=t,s.layerDefinition.drawingInfo.renderer=t}if(i.showLabels&&e.labelsVisible&&"function"==typeof e.write){var c,d;const t=null==(c=e.write({},{origin:"web-map"}).layerDefinition)||null==(d=c.drawingInfo)?void 0:d.labelingInfo;t&&(o=!0,n.layerDefinition.drawingInfo.labelingInfo=t,r.layerDefinition.drawingInfo.labelingInfo=t,a.layerDefinition.drawingInfo.labelingInfo=t,s.layerDefinition.drawingInfo.labelingInfo=t)}}let p;null!=e&&e.renderer||o||(delete n.layerDefinition.drawingInfo,delete r.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete s.layerDefinition.drawingInfo);const h=e&&e.fields,f=e&&e.renderer;if(h&&f&&"function"==typeof f.collectRequiredFields){const e=new Set;await f.collectRequiredFields(e,h),p=Array.from(e)}if(h){const e=h.map((e=>e.toJSON()));n.layerDefinition.fields=e,r.layerDefinition.fields=e,a.layerDefinition.fields=e,s.layerDefinition.fields=e}const m=t&&t.length;let v;for(let o=0;o<m;o++){const c=t[o]||t.getItemAt(o);if(!1===c.visible||!c.geometry)continue;if(v=c.toJSON(),v.hasOwnProperty("popupTemplate")&&delete v.popupTemplate,v.geometry&&v.geometry.z&&delete v.geometry.z,v.symbol&&v.symbol.outline&&"esriCLS"===v.symbol.outline.type&&!this._is11xService)continue;!this._is11xService&&v.symbol&&v.symbol.outline&&v.symbol.outline.color&&v.symbol.outline.color[3]&&(v.symbol.outline.color[3]=255);const d=e&&e.renderer&&("valueExpression"in e.renderer&&e.renderer.valueExpression||"hasVisualVariables"in e.renderer&&e.renderer.hasVisualVariables());if(!v.symbol&&e&&e.renderer&&d&&!this._is11xService){const t=e.renderer,i=await t.getSymbolAsync(c);if(!i)continue;v.symbol=i.toJSON(),"hasVisualVariables"in t&&t.hasVisualVariables()&&W(v.symbol,{renderer:t,graphic:c,symbol:i})}if(v.symbol&&(v.symbol.angle||delete v.symbol.angle,me(v.symbol)?v.symbol=await this._convertSvgToPictureMarkerSymbolJson(v.symbol):v.symbol.text&&delete v.attributes),(!i||!i.forceFeatureAttributes)&&p&&p.length){const e={};p.forEach((t=>{v.attributes&&v.attributes.hasOwnProperty(t)&&(e[t]=v.attributes[t])})),v.attributes=e}"polygon"===c.geometry.type?n.featureSet.features.push(v):"polyline"===c.geometry.type?r.featureSet.features.push(v):"point"===c.geometry.type?v.symbol&&v.symbol.text?l.featureSet.features.push(v):a.featureSet.features.push(v):"multipoint"===c.geometry.type?s.featureSet.features.push(v):"extent"===c.geometry.type&&(v.geometry=u.Z.fromExtent(c.geometry).toJSON(),n.featureSet.features.push(v))}const y=[n,r,s,a,l].filter((e=>e.featureSet.features.length>0));for(const e of y){const t=e.featureSet.features.every((e=>e.symbol));!t||i&&i.forceFeatureAttributes||e.featureSet.features.forEach((e=>{delete e.attributes})),t&&delete e.layerDefinition.drawingInfo,e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&await this._convertSvgRenderer(e.layerDefinition.drawingInfo.renderer)}return y.length?{featureCollection:{layers:y},showLabels:o}:null}async _createFeatureLayerJSON(e,t){var i,o;let n;this._legendLayers&&this._legendLayers.push({id:e.id});const r=e.renderer;if(e.featureReduction||r&&"dot-density"===r.type&&(!this._is11xService||parseFloat(this._cimVersion)<2.6))return this._createScreenshotJSON(e,t);const{layerView:a,printTemplate:s,view:l}=t,c=r&&("valueExpression"in r&&r.valueExpression||"hasVisualVariables"in r&&r.hasVisualVariables()),d="feature-layer"!==(null==(i=e.source)?void 0:i.type)&&"ogc-feature"!==(null==(o=e.source)?void 0:o.type);if(!this._is11xService&&c||e.featureReduction||d||!r||"field"in r&&null!=r.field&&("string"!=typeof r.field||!e.getField(r.field))){const t=await this._getGraphics(a);n=await this._createFeatureCollectionJSON(e,t,s)}else{var u,p;if(n={id:(h=e.write()).id,title:h.title,opacity:h.opacity,minScale:h.minScale,maxScale:h.maxScale,url:h.url,layerDefinition:h.layerDefinition},n.showLabels=s.showLabels&&e.labelsVisible,this._setURLandToken(n,e),null!=(u=n.layerDefinition)&&null!=(p=u.drawingInfo)&&p.renderer&&(delete n.layerDefinition.minScale,delete n.layerDefinition.maxScale,await this._convertSvgRenderer(n.layerDefinition.drawingInfo.renderer),"visualVariables"in r&&r.visualVariables&&r.visualVariables[0])){const e=r.visualVariables[0];if("size"===e.type&&e.maxSize&&"number"!=typeof e.maxSize&&e.minSize&&"number"!=typeof e.minSize){const t=(0,m.getSizeRangeAtScale)(e,l.scale);n.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=t.minSize,n.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=t.maxSize}}}var h;return n}async _createGeoJSONLayer(e,{layerView:t,printTemplate:i}){this._legendLayers&&this._legendLayers.push({id:e.id});const o=await this._getGraphics(t);return this._createFeatureCollectionJSON(e,o,i)}async _createGraphicsLayerJSON(e,{printTemplate:t}){return this._createFeatureCollectionJSON(e,null,t)}_createImageryLayerJSON(e){this._legendLayers&&this._legendLayers.push({id:e.id});const t={bandIds:e.bandIds,compressionQuality:e.compressionQuality,format:e.format,interpolation:e.interpolation};if((e.mosaicRule||e.definitionExpression)&&(t.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(this._is11xService)e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),e.renderer&&(t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{const i=e.exportImageServiceParameters.combineRendererWithRenderingRule();i&&(t.renderingRule=i.toJSON())}return this._setURLandToken(t,e),t}async _createKMLLayerJSON(e,t){const i=t.printTemplate;if(this._is11xService){const t={type:"kml"};return e.write(t,{origin:"web-map"}),delete t.layerType,t.url=(0,c.Fv)(e.url),t}{const o=[],n=t.layerView;n.allVisibleMapImages.forEach(((t,i)=>{const n={id:`${e.id}_image${i}`,type:"image",title:e.id,minScale:e.minScale||0,maxScale:e.maxScale||0,opacity:e.opacity,extent:t.extent};"data:image/png;base64,"===t.href.substr(0,22)?n.imageData=t.href.substr(22):n.url=t.href,o.push(n)}));const r=[...n.allVisiblePoints.items,...n.allVisiblePolylines.items,...n.allVisiblePolygons.items],a={id:e.id,...await this._createFeatureCollectionJSON(null,r,i)};return o.push(a),o}}_createMapImageLayerJSON(e,{view:t}){let i;const o={id:e.id,subLayerIds:[]};let n=[];const r=t.scale,a=e=>{const t=0===r,i=0===e.minScale||r<=e.minScale,s=0===e.maxScale||r>=e.maxScale;if(e.visible&&(t||i&&s))if(e.sublayers)e.sublayers.forEach(a);else{const t=e.toExportImageJSON(),i={id:e.id,name:e.title,layerDefinition:{drawingInfo:t.drawingInfo,definitionExpression:t.definitionExpression,source:t.source}};n.unshift(i),o.subLayerIds.push(e.id)}};return e.sublayers&&e.sublayers.forEach(a),n.length&&(n=n.map((({id:e,name:t,layerDefinition:i})=>({id:e,name:t,layerDefinition:i}))),i={layers:n,visibleLayers:o.subLayerIds},this._setURLandToken(i,e),this._legendLayers.push(o)),i}async _createMapNotesLayerJSON({layerView:e,printTemplate:t}){const i=[];for(const o of e.graphicsViews()){const e=await this._createFeatureCollectionJSON(o,o.graphics,t);e&&i.push(...e.featureCollection.layers)}return{featureCollection:{layers:i}}}_createOpenStreetMapLayerJSON(){return{type:"OpenStreetMap"}}async _createScreenshotJSON(e,{printTemplate:t,view:i}){const o={type:"image"},n={format:"png",ignoreBackground:!0,layers:[e],rotation:0},r=this._ssExtent||i.extent.clone();let a=96,s=!0,l=!0;if(t.exportOptions){const e=t.exportOptions;e.dpi>0&&(a=e.dpi),e.width>0&&(s=e.width%2==i.width%2),e.height>0&&(l=e.height%2==i.height%2)}if("map-only"===t.layout&&t.scalePreserved&&(!t.outScale||t.outScale===i.scale)&&96===a&&(!s||!l)&&(n.area={x:0,y:0,width:i.width,height:i.height},s||(n.area.width-=1),l||(n.area.height-=1),!this._ssExtent)){const e=i.toMap((0,p.vW)(n.area.width,n.area.height));r.ymin=e.y,r.xmax=e.x,this._ssExtent=r}o.extent=r.clone()._normalize(!0).toJSON();const d=await i.takeScreenshot(n),u=(0,c.sJ)(d.dataUrl);return o.imageData=u.data,o}async _createStreamLayerJSON(e,{layerView:t,printTemplate:i}){this._legendLayers&&this._legendLayers.push({id:e.id});const o=await this._getGraphics(t);return this._createFeatureCollectionJSON(e,o,i)}_createTileLayerJSON(e){const t={customParameters:e.customParameters};return this._setURLandToken(t,e),t}async _createVectorTileLayerJSON(e,t){if(this._is11xService&&e.serviceUrl&&e.styleUrl){const t=h.id&&h.id.findCredential(e.styleUrl),i=h.id&&h.id.findCredential(e.serviceUrl);if(!t&&!i||"2.1.0"!==this._cimVersion){const o={type:"VectorTileLayer"};return o.styleUrl=(0,c.Fv)(e.styleUrl),t&&(o.token=t.token),i&&i.token!==o.token&&(o.additionalTokens=[{url:e.serviceUrl,token:i.token}]),o}}return this._createScreenshotJSON(e,t)}_createWebTileLayerJSON(e){const t={type:"WebTiledLayer",urlTemplate:e.urlTemplate.replace(/\${/g,"{"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(t.subDomains=e.subDomains),t}_createWMSLayerJSON(e){let t;const i=[],o=e=>{e.visible&&(e.sublayers?e.sublayers.forEach(o):e.name&&i.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(o),i.length&&(t={type:"wms",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:i,url:(0,c.Fv)(e.url),version:e.version}),t}_createWMTSLayerJSON(e){const t=e.activeLayer;return{type:"wmts",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:(0,c.Fv)(e.url)}}_setURLandToken(e,t){var i;if(!t.url)return;e.url=(0,c.Fv)(e.url||t.url);const o=null==(i=h.id)?void 0:i.findCredential(t.url);o&&(e.token=o.token)}async _convertSvgToPictureMarkerSymbolJson(e){this._canvas||(this._canvas=document.createElement("canvas"));const t=1024;this._canvas.width=t,this._canvas.height=t;const i=this._canvas.getContext("2d");let o,n;if(e.path){var r;const a=new Path2D(e.path);a.closePath(),i.fillStyle=Array.isArray(e.color)?`rgba(${e.color[0]},${e.color[1]},${e.color[2]},${e.color[3]/255})`:"rgb(0,0,0)",i.fill(a);const s=function(e,t=15){const i=e.canvas.width,o=e.canvas.height,n=e.getImageData(0,0,i,o).data;let r,a,s,l,c,d;e:for(a=o;a--;)for(r=i;r--;)if(n[4*(i*a+r)+3]>t){d=a;break e}if(!d)return null;e:for(r=i;r--;)for(a=d+1;a--;)if(n[4*(i*a+r)+3]>t){c=r;break e}e:for(r=0;r<=c;++r)for(a=d+1;a--;)if(n[4*(i*a+r)+3]>t){s=r;break e}e:for(a=0;a<=d;++a)for(r=s;r<=c;++r)if(n[4*(i*a+r)+3]>t){l=a;break e}return{x:s,y:l,width:c-s,height:d-l}}(i);if(!s)return null;i.clearRect(0,0,t,t);const l=(0,p.F2)(e.size)/Math.max(s.width,s.height);i.scale(l,l);const c=t/l,d=c/2-s.width/2-s.x,u=c/2-s.height/2-s.y;if(i.translate(d,u),Array.isArray(e.color)&&i.fill(a),null!=(r=e.outline)&&r.width&&Array.isArray(e.outline.color)){const t=e.outline;i.lineWidth=(0,p.F2)(t.width)/l,i.lineJoin="round",i.strokeStyle=`rgba(${t.color[0]},${t.color[1]},${t.color[2]},${t.color[3]/255})`,i.stroke(a),s.width+=i.lineWidth,s.height+=i.lineWidth}s.width*=l,s.height*=l;const h=i.getImageData(512-s.width/2,512-s.height/2,Math.ceil(s.width),Math.ceil(s.height));o=h.width,n=h.height,i.canvas.width=o,i.canvas.height=n,i.putImageData(h,0,0)}else{const t="image/svg+xml"===e.contentType?"data:image/svg+xml;base64,"+e.imageData:e.url,r=(await(0,f.default)(t,{responseType:"image"})).data;o=(0,p.F2)(e.width),n=(0,p.F2)(e.height),i.canvas.width=o,i.canvas.height=n,i.drawImage(r,0,0,i.canvas.width,i.canvas.height)}return{type:"esriPMS",imageData:i.canvas.toDataURL("image/png").substr(22),angle:e.angle,contentType:"image/png",height:(0,p.Wz)(n),width:(0,p.Wz)(o),xoffset:e.xoffset,yoffset:e.yoffset}}async _convertSvgRenderer(e){const t=e.type;if("simple"===t&&me(e.symbol))e.symbol=await this._convertSvgToPictureMarkerSymbolJson(e.symbol);else if("uniqueValue"===t||"classBreaks"===t){me(e.defaultSymbol)&&(e.defaultSymbol=await this._convertSvgToPictureMarkerSymbolJson(e.defaultSymbol));const i=e["uniqueValue"===t?"uniqueValueInfos":"classBreakInfos"];if(i)for(const e of i)me(e.symbol)&&(e.symbol=await this._convertSvgToPictureMarkerSymbolJson(e.symbol))}}_getGraphics(e){return e.queryFeatures(fe).then((e=>e.features))}async _getPrintDefinition(e,t){const i=e.view;let o=i.spatialReference;const n={operationalLayers:await this._createOperationalLayers(i,t)};let r=this._ssExtent||e.extent||i.extent;return o&&o.isWrappable&&(r=r.clone()._normalize(!0),o=r.spatialReference),n.mapOptions={extent:r&&r.toJSON(),spatialReference:o&&o.toJSON(),showAttribution:t.attributionVisible},this._ssExtent=null,i.background&&(n.background=i.background.toJSON()),i.rotation&&(n.mapOptions.rotation=-i.rotation),t.scalePreserved&&(n.mapOptions.scale=t.outScale||i.scale),n}async _getGpPrintParams(e){const t=e.template||new de.Z;null==t.showLabels&&(t.showLabels=!0);const i=t.exportOptions;let o;const r=(0,Z.a)(t.layout);if(i&&(o={dpi:i.dpi},"map_only"===r.toLowerCase()||""===r)){const e=i.width,t=i.height;o.outputSize=[e,t]}const a=t.layoutOptions;let s;if(a){let e,t;"Miles"===a.scalebarUnit||"Kilometers"===a.scalebarUnit?(e="Kilometers",t="Miles"):"Meters"!==a.scalebarUnit&&"Feet"!==a.scalebarUnit||(e="Meters",t="Feet"),s={titleText:a.titleText,authorText:a.authorText,copyrightText:a.copyrightText,customTextElements:a.customTextElements,scaleBarOptions:{metricUnit:pe.toJSON(e),metricLabel:ue[e],nonMetricUnit:pe.toJSON(t),nonMetricLabel:ue[t]}}}let c=null;a&&a.legendLayers&&(c=a.legendLayers.map((e=>{this._legendLayerNameMap[e.layerId]=e.title;const t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t})));const d=await this._getPrintDefinition(e,t);if(d.operationalLayers){const e=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),t=/[\u0600-\u06FF]/,i=i=>{const o=i.text,n=i.font,r=n&&n.family&&n.family.toLowerCase();o&&n&&("arial"===r||"arial unicode ms"===r)&&(n.family=e.test(o)?"Arial Unicode MS":"Arial","normal"!==n.style&&t.test(o)&&(n.family="Arial Unicode MS"))},o=()=>{throw new l.Z("print-task:cim-symbol-unsupported","CIMSymbol is not supported by a print service published from ArcMap")};d.operationalLayers.forEach((e=>{var t,n,r;null!=(t=e.featureCollection)&&t.layers?e.featureCollection.layers.forEach((e=>{var t,n,r,a;if(null!=(t=e.layerDefinition)&&null!=(n=t.drawingInfo)&&null!=(r=n.renderer)&&r.symbol){const t=e.layerDefinition.drawingInfo.renderer;"esriTS"===t.symbol.type?i(t.symbol):"CIMSymbolReference"!==t.symbol.type||this._is11xService||o()}null!=(a=e.featureSet)&&a.features&&e.featureSet.features.forEach((e=>{e.symbol&&("esriTS"===e.symbol.type?i(e.symbol):"CIMSymbolReference"!==e.symbol.type||this._is11xService||o())}))})):!this._is11xService&&null!=(n=e.layerDefinition)&&null!=(r=n.drawingInfo)&&r.renderer&&JSON.stringify(e.layerDefinition.drawingInfo.renderer).includes('"type":"CIMSymbolReference"')&&o()}))}e.outSpatialReference&&(d.mapOptions.spatialReference=e.outSpatialReference.toJSON()),(0,n.jB)(d,{exportOptions:o,layoutOptions:s}),(0,n.jB)(d.layoutOptions,{legendOptions:{operationalLayers:null!=c?c:this._legendLayers.slice()}}),this._legendLayers.length=0;const u={Web_Map_as_JSON:JSON.stringify(d),Format:(0,$.a)(t.format),Layout_Template:r};return e.extraParameters&&(0,n.jB)(u,e.extraParameters),u}};(0,o._)([(0,r.Cb)({dependsOn:["url"]})],ve.prototype,"_geoprocessor",null),(0,o._)([(0,r.Cb)()],ve.prototype,"_gpMetadata",void 0),(0,o._)([(0,r.Cb)({dependsOn:["_gpMetadata"],readOnly:!0})],ve.prototype,"mode",null),(0,o._)([(0,r.Cb)()],ve.prototype,"updateDelay",void 0),ve=(0,o._)([(0,s.j)("esri.tasks.PrintTask")],ve);const ye=ve},21544:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(56274),a=i(87566),s=(i(10923),i(57002),i(86035),i(58385));const l=new r.Xn({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let c=class extends s.wq{constructor(e){super(e),this.description=null,this.type=null}};(0,o._)([(0,n.Cb)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,o._)([(0,n.Cb)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=(0,o._)([(0,a.j)("esri.tasks.support.GPMessage")],c);const d=c},70026:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var o=i(56140),n=(i(95830),i(36544)),r=(i(68055),i(79881)),a=i(87765),s=i(87566),l=(i(10923),i(57002),i(86035),i(82677));const c=n.Z.getLogger("esri.tasks.support.PrintTemplate");function d(){(0,a.Mr)(c,"preserveScale",{replacement:"scalePreserved",version:"4.16"})}let u=class extends l.default{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.label=null,this.layout="map-only",this.layoutOptions=null,this.outScale=0,this.scalePreserved=!0,this.showLabels=!0}get preserveScale(){return d(),this.scalePreserved}set preserveScale(e){d(),this.scalePreserved=e}};(0,o._)([(0,r.Cb)()],u.prototype,"attributionVisible",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"exportOptions",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"forceFeatureAttributes",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"format",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"label",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"layout",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"layoutOptions",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"outScale",void 0),(0,o._)([(0,r.Cb)({dependsOn:["scalePreserved"]})],u.prototype,"preserveScale",null),(0,o._)([(0,r.Cb)()],u.prototype,"scalePreserved",void 0),(0,o._)([(0,r.Cb)()],u.prototype,"showLabels",void 0),u=(0,o._)([(0,s.j)("esri.tasks.support.PrintTemplate")],u);const p=u},33517:(e,t,i)=>{"use strict";i.d(t,{i:()=>n,a:()=>r});const o=new(i(56274).Xn)({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),n=o.fromJSON.bind(o),r=o.toJSON.bind(o)},12783:(e,t,i)=>{"use strict";i.d(t,{i:()=>n,a:()=>r});const o=new(i(56274).Xn)({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),n=o.fromJSON.bind(o),r=o.toJSON.bind(o)},62664:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ee});var o=i(56140),n=(i(95830),i(36544)),r=i(79881),a=i(51894),s=i(60263),l=i(87765),c=i(87566),d=(i(10923),i(57002),i(86035),i(10180)),u=i(59691),p=i(80621),h=i(58836),f=(i(40450),i(9200)),m=i(90846),v=i(52243),y=i(19401),b=i(90806),g=i(51474),_=(i(68055),i(82677));let w=class extends _.default{constructor(e){super(e)}get editedBookmark(){var e;return(null==(e=this.bookmark)?void 0:e.clone())||null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};(0,o._)([(0,r.Cb)()],w.prototype,"bookmark",void 0),(0,o._)([(0,r.Cb)({readOnly:!0,dependsOn:["bookmark"]})],w.prototype,"editedBookmark",null),(0,o._)([(0,r.Cb)()],w.prototype,"state",null),(0,o._)([(0,r.Cb)()],w.prototype,"validationState",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"loading",void 0),w=(0,o._)([(0,c.j)("esri.widgets.Bookmarks.UserState")],w);const k=w;var S=i(32656),C=i(39105),x=i(35470),O=i(83477),A=i(65984),P=i(65892),M=i(4338);const j="esri.widgets.Bookmarks.BookmarksViewModel",T=n.Z.getLogger(j),E=O.Z.ofType(P.Z),I={width:128,height:128,format:"png"},D={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0};let L=class extends((0,M._)(x.Z.EventedAccessor)){constructor(e){super(e),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}set bookmarks(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new E}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...D,...e})}get defaultCreateOptions(){return D}set defaultEditOptions(e){this._set("defaultEditOptions",{...D,...e})}get defaultEditOptions(){return D}get state(){const e=this.get("view");return e&&!e.ready?"loading":"ready"}get view(){return this._get("view")}set view(e){e&&"2d"!==e.type&&T.error(new S.Z("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)}async createBookmark(e){const{view:t,defaultCreateOptions:i}=this;if(!t){const e=new S.Z("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return T.error(e),(0,C.reject)(e)}const{takeScreenshot:o,screenshotSettings:n,captureExtent:r,captureViewpoint:a,captureRotation:s,captureScale:l}={...i,...e},c=o?await this._createThumbnail(n):void 0;return new P.Z({...c&&{thumbnail:c},...(a||r)&&{viewpoint:this._createViewpoint({view:t,captureScale:l,captureRotation:s})}})}async editBookmark(e,t){const{view:i,defaultEditOptions:o}=this;if(!i){const e=new S.Z("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return T.error(e),(0,C.reject)(e)}const{takeScreenshot:n,screenshotSettings:r,captureExtent:a,captureViewpoint:s,captureRotation:l,captureScale:c}={...o,...t},d=n?await this._createThumbnail(r):void 0;return d&&(e.thumbnail=d),(s||a)&&(e.viewpoint=this._createViewpoint({view:i,captureScale:c,captureRotation:l})),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{view:t}=this;if(!t){const e=new S.Z("go-to:invalid-view","Cannot go to a bookmark without a view");return T.error(e),(0,C.reject)(e)}const i=null==e?void 0:e.viewpoint;if(!i){const t=new S.Z("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});return T.error(t),(0,C.reject)(t)}this._set("activeBookmark",e);const o={target:i},n=this.callGoTo(o);return this.emit("select-bookmark",{bookmark:e}),this.emit("bookmark-select",{bookmark:e}),n.catch((()=>{})).then((()=>this._set("activeBookmark",null))),n}async _createThumbnail(e){const t=await this.view.takeScreenshot({...I,...e});return new h.Z({url:t.dataUrl})}_createViewpoint({view:e,captureRotation:t,captureScale:i}){var o,n;const r=null==(o=e.viewpoint)?void 0:o.clone();return new A.Z({targetGeometry:null==(n=e.extent)?void 0:n.clone(),rotation:t&&(null==r?void 0:r.rotation)||0,scale:i&&(null==r?void 0:r.scale)||0})}};(0,o._)([(0,r.Cb)({readOnly:!0})],L.prototype,"activeBookmark",void 0),(0,o._)([(0,r.Cb)({type:E,dependsOn:["view","view.map","view.map.bookmarks"]})],L.prototype,"bookmarks",null),(0,o._)([(0,r.Cb)()],L.prototype,"defaultCreateOptions",null),(0,o._)([(0,r.Cb)()],L.prototype,"defaultEditOptions",null),(0,o._)([(0,r.Cb)({dependsOn:["view.ready"],readOnly:!0})],L.prototype,"state",null),(0,o._)([(0,r.Cb)({value:null})],L.prototype,"view",null),L=(0,o._)([(0,c.j)(j)],L);const R=L;var N=i(1073),B=i(25094);const F="esri-bookmarks__bookmark-image-container",V="esri-bookmarks_bookmark-drag-handle",G="esri-bookmarks__authoring-card",U="esri-bookmarks__authoring-form",$="esri-bookmarks__authoring-label",Z="esri-bookmarks__authoring-actions",W="esri-bookmarks__authoring-input--invalid",J="esri-button",q="esri-button--tertiary",z="esri-input",H="esri-icon-bookmark",Y={addBookmark:!0,thumbnail:!0},X=/^https:\/\/.*/i,K=n.Z.getLogger("esri.widgets.Bookmarks");let Q=class extends b.default{constructor(e,t){super(e,t),this._handles=new u.Z,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.goToOverride=null,this.iconClass=H,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new R,this.visibleElements={...Y}}initialize(){this.own([(0,p.init)(this,"viewModel.bookmarks",(()=>this._bookmarksInitialized())),(0,p.init)(this,"editingEnabled",(()=>this._toggleSorting()))])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}get _editMenuItems(){var e,t;const{messages:i,_userState:o}=this,n=null==o||null==(e=o.editedBookmark)||null==(t=e.thumbnail)?void 0:t.url;return[new N.Z({label:null==i?void 0:i.menu.refreshThumbnail,iconClass:"esri-icon-refresh",clickFunction:()=>this._refreshThumbnail()}),new N.Z({label:X.test(n)?null==i?void 0:i.menu.editImageUrl:null==i?void 0:i.menu.useImageUrl,iconClass:"esri-icon-link",clickFunction:()=>this._startUseImageUrl()}),n?new N.Z({label:null==i?void 0:i.menu.removeThumbnail,iconClass:"esri-icon-erase",clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:e,messages:t}=this,i=this._get("_editMenu");i&&i.destroy();const o=new B.Z({iconClass:"esri-icon-handle-horizontal",label:null==t?void 0:t.menu.label});return o.items=e,o}get bookmarkCreationOptions(){return(0,l.Mr)(K,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions}set bookmarkCreationOptions(e){void 0!==e.captureExtent&&(0,l.Mr)(K,"bookmarkCreationOptions.captureExtent",{replacement:"defaultCreateOptions.captureViewpoint",version:"4.17"}),(0,l.Mr)(K,"bookmarkCreationOptions",{replacement:"defaultCreateOptions",version:"4.18"}),this.viewModel.defaultCreateOptions=e}castVisibleElements(e){return{...Y,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,t="loading"===e?this.renderLoading():this.renderBookmarks();return(0,y.j)("div",{class:this.classes("esri-bookmarks esri-widget--panel","esri-widget",{"esri-widget--disabled":this.disabled})},t)}startAddBookmark(){this._userState=new k({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return(0,y.j)("div",{class:"esri-bookmarks__loader-container",key:"loader"},(0,y.j)("div",{class:"esri-bookmarks__loader"}))}renderNoBookmarksContainer(){const{messages:e}=this;return(0,y.j)("div",{class:"esri-widget__content--empty",key:"no-bookmarks"},(0,y.j)("span",{"aria-hidden":"true",class:this.classes("esri-widget__no-bookmark-icon",H)}),(0,y.j)("h1",{class:this.classes("esri-widget__heading","esri-bookmarks__no-bookmarks-heading")},null==e?void 0:e.noBookmarksHeading),(0,y.j)("p",{class:"esri-bookmarks__no-bookmarks-description"},null==e?void 0:e.noBookmarksDescription))}renderAddBookmarkLoading(){var e;return(0,y.j)("div",{key:"adding-bookmark",class:"esri-bookmarks__adding-bookmark"},(0,y.j)("span",{"aria-hidden":"true",class:this.classes("esri-icon-loading-indicator","esri-rotating")}),null==(e=this.messages)?void 0:e.addingBookmark)}renderBookmarkItems(e){if(!e)return null;const{_userState:t,editingEnabled:i}=this;return e.map((e=>i&&e&&t&&("edit"===t.state||"edit-thumbnail"===t.state)&&t.bookmark===e?"edit-thumbnail"===t.state?this.renderEditingBookmarkUrl(t.editedBookmark):this.renderEditingBookmark(t.editedBookmark):this.renderBookmark(e))).toArray()}renderBookmarksContainer(e){var t;const{_userState:i,editingEnabled:o}=this,n="add"===(null==i?void 0:i.state),r=o&&!n?this.renderAddBookmarkButton():null,a=o?n&&i.loading?this.renderAddBookmarkLoading():"add"===(null==i?void 0:i.state)?this.renderAddingBookmark():null:null;return[(0,y.j)("ul",{key:"bookmark-list","aria-label":null==(t=this.messages)?void 0:t.widgetLabel,class:this.classes("esri-bookmarks__list",{"esri-bookmarks__list--sortable":this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),r,a]}renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?(0,y.j)("div",{key:"add-bookmark-item",class:"esri-bookmarks__add-bookmark"},(0,y.j)("button",{class:this.classes(J,q,"esri-bookmarks__add-bookmark-button"),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},(0,y.j)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__add-bookmark-icon","esri-icon-plus")}),null==(e=this.messages)?void 0:e.addBookmark)):null}renderBookmarks(){const{bookmarks:e}=this.viewModel,t=e&&e.filter(Boolean),i=t&&t.length,o=i||this.editingEnabled?this.renderBookmarksContainer(t):null;return[i?null:this.renderNoBookmarksContainer(),o]}renderEditContainer(e){const{messagesCommon:t}=this;return(0,y.j)("div",{key:"edit-container"},(0,y.j)("button",{title:null==t?void 0:t.edit,"aria-label":null==t?void 0:t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:"esri-bookmarks__bookmark-edit-button",type:"button"},(0,y.j)("span",{"aria-hidden":"true",class:"esri-icon-edit"})))}renderDragHandle(e){const{messagesCommon:t}=this,i={"data-bookmark-uid":e.uid};return(0,y.j)("div",Object.assign({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:V,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":null==t?void 0:t.dragHandleLabel,title:null==t?void 0:t.dragHandleTitle},i),(0,y.j)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks_bookmark-drag-handle-icon","esri-icon-handle-vertical")}))}renderBookmarkImageIcon(){return(0,y.j)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__bookmark-icon",H)})}renderBookmarkImage(e){const{visibleElements:t}=this,{thumbnail:i}=e,o=i&&i.url||"";return t.thumbnail&&o?(0,y.j)("img",{src:o,alt:"",class:"esri-bookmarks__image"}):null}renderBookmarkButton(e){const{messagesCommon:t}=this,{name:i}=e,o=i||(null==t?void 0:t.untitled),n=(0,y.j)("div",{class:F},this.renderBookmarkImage(e)||this.renderBookmarkImageIcon());return(0,y.j)("button",{key:"bookmark-button",class:"esri-bookmarks__bookmark-button",bind:this,"data-bookmark":e,onclick:this._goToBookmark,type:"button"},n,(0,y.j)("span",{class:"esri-bookmarks__bookmark-name"},o))}renderBookmark(e){const{activeBookmark:t}=this.viewModel,i={"esri-bookmarks__bookmark--active":t===e},o=this.editingEnabled?this.renderEditContainer(e):null,n={"data-bookmark-uid":e.uid},r=this.editingEnabled?this.renderDragHandle(e):null;return(0,y.j)("li",Object.assign({key:e,class:this.classes("esri-bookmarks__bookmark",i)},n),r,this.renderBookmarkButton(e),o)}renderEditingBookmarkName(e){const{messages:t,_userState:i}=this,o="name-required"===i.validationState;return(0,y.j)("label",{class:$},null==t?void 0:t.title,o?(0,y.j)("strong",null,null==t?void 0:t.invalidTitle):null,(0,y.j)("input",{required:!0,bind:this,class:this.classes(z,o?W:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:null==t?void 0:t.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:e}=this;return(0,y.j)("div",{class:Z},(0,y.j)("input",{type:"button",value:null==e?void 0:e.back,class:this.classes(J,q),onclick:this._closeUrlEditBookmarkForm,bind:this}),(0,y.j)("input",{class:J,type:"submit",value:null==e?void 0:e.add}))}renderEditingBookmarkActions(){const{messagesCommon:e}=this,{bookmark:t}=this._userState;return(0,y.j)("div",{class:Z},(0,y.j)("input",{type:"button",value:null==e?void 0:e.delete,class:this.classes(J,q,"esri-bookmarks__authoring-delete-button"),"data-bookmark":t,onclick:this._deleteBookmark,bind:this}),(0,y.j)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(J,q),onclick:this._closeEditBookmarkForm,bind:this}),(0,y.j)("input",{class:J,type:"submit",value:null==e?void 0:e.save}))}renderEditingBookmarkUrlInput(e){var t;const{messages:i,_userState:o}=this,n=null==(t=e.thumbnail)?void 0:t.url,r=X.test(n)?n:null,a="absolute-url-required"===o.validationState;return(0,y.j)("label",{class:$},a?(0,y.j)("strong",null,null==i?void 0:i.invalidImageUrl):null,(0,y.j)("input",{required:!0,bind:this,class:this.classes(z,a?W:null),type:"text",value:r,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":e,"data-node-ref":"_urlEditInputNode",title:null==i?void 0:i.imageUrlTooltip,placeholder:null==i?void 0:i.imageUrlPlaceholder}))}renderEditingBookmarkUrl(e){const t={"data-bookmark-uid":e.uid};return(0,y.j)("li",Object.assign({key:"edit-bookmark-url-form",class:G},t),(0,y.j)("form",{class:U,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(e),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(e){const t={"data-bookmark-uid":e.uid};return(0,y.j)("li",Object.assign({key:"edit-bookmark-form",class:G},t),(0,y.j)("form",{class:U,onsubmit:this._editBookmarkSubmit,bind:this},(0,y.j)("div",{class:"esri-bookmarks__authoring-container"},(0,y.j)("div",{class:F},this.renderBookmarkImage(e),this._editMenu.render()),this.renderEditingBookmarkName(e)),this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:e,messages:t}=this,i="name-required"===e.validationState;return(0,y.j)("label",{class:$},null==t?void 0:t.title,i?(0,y.j)("strong",null,null==t?void 0:t.invalidTitle):null,(0,y.j)("input",{required:!0,bind:this,class:this.classes(z,i?W:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==t?void 0:t.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:e}=this;return(0,y.j)("div",{class:this.classes(Z)},(0,y.j)("input",{type:"button",value:null==e?void 0:e.cancel,class:this.classes(J,q,"esri-bookmarks__authoring-cancel-button"),onclick:this._endAddBookmark.bind(this),bind:this}),(0,y.j)("input",{class:J,type:"submit",value:null==e?void 0:e.add}))}renderAddingBookmark(){return(0,y.j)("div",{key:"add-bookmark-form",class:G},(0,y.j)("form",{class:U,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){e.stopPropagation();const{_sortableSavedItems:t}=this,i=(0,d.kK)(e);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(i))return;const{_sortable:o,_selectedSortUid:n}=this,r=o.toArray(),a=e.target.getAttribute("data-bookmark-uid"),s=r.indexOf(a);if(" "===i||"Enter"===i){const e=n&&n===a;return this._selectedSortUid=e?null:a,this._sortableSavedItems=e?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===i)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===i&&t)return this._selectedSortUid=null,this._updateSortItems(t,o,a),void this.scheduleRender();if(-1===s||!n)return;const l="ArrowUp"===i?s-1:s+1;var c,u,p;l>=r.length||l<=-1||(u=s,p=l,(c=r).splice(p,0,c.splice(u,1)[0]),this._updateSortItems(r,o,a))}_updateSortItems(e,t,i){t.sort(e),this._sortBookmarks(t),this._focusSortUid=i,this._selectedSortUid=i}_focusDragHandle(e){const{_focusSortUid:t}=this;e&&t&&e.getAttribute("data-bookmark-uid")===t&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:t,editingEnabled:i}=this;if(t)if(e)e.option("disabled",!i);else{const e=g.ZP.create(t,{dataIdAttr:"data-bookmark-uid",handle:`.${V}`,group:"bookmarks",disabled:!i,onSort:()=>this._sortBookmarks(e)});this._sortable=e}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:t}=this.viewModel;if(!t)return;const i=e.toArray();t.sort(((e,t)=>{const o=i.indexOf(e.uid),n=i.indexOf(t.uid);return o>n?1:o<n?-1:0}))}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init",{_handles:t}=this;t.remove(e),t.add((0,p.on)(this,"viewModel.bookmarks","change",(()=>this._bookmarksChanged())),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:t}=this.viewModel,{_handles:i}=this;i.remove(e);const o=t.map((e=>(0,p.watch)(e,["active","name","thumbnail.url"],(()=>this.scheduleRender()))));i.add(o,e),this.scheduleRender()}_showEditBookmarkForm(e){const t=e.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new k({bookmark:t,state:"edit"}),this.viewModel.goTo(t),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:t,_userState:i}=this,o=t&&t.value.trim();o?(i.loading=!0,this.viewModel.createBookmark().then((e=>{e.name=o,this.viewModel.bookmarks.add(e),this._endAddBookmark()}))):i.validationState="name-required"}async _editBookmarkAndClose(e,t){await this.viewModel.editBookmark(e,t),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:t,_userState:i}=this,o=t&&t.value.trim();o?(i.bookmark.name=o,i.bookmark.thumbnail=i.editedBookmark.thumbnail,this._editBookmarkAndClose(i.bookmark,{takeScreenshot:!1})):i.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)}_goToBookmark(e){const t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)}async _refreshThumbnail(){const{_userState:e,_editMenu:t,viewModel:i}=this;e.validationState=void 0,await i.editBookmark(this._userState.editedBookmark,{takeScreenshot:!0,captureExtent:!1,captureViewpoint:!1,captureRotation:!1,captureScale:!1}),t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_removeThumbnail(){const{_userState:e,_editMenu:t}=this;e.editedBookmark.thumbnail=null,e.validationState=void 0,t.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:t,_userState:i}=this,o=t.value;X.test(o)?(o&&(i.editedBookmark.thumbnail=new h.Z({url:o})),this._closeUrlEditBookmarkForm()):i.validationState="absolute-url-required"}};(0,o._)([(0,r.Cb)({type:k}),(0,m.G)(["state","editedBookmark","loading","validationState"])],Q.prototype,"_userState",void 0),(0,o._)([(0,r.Cb)({readOnly:!0,dependsOn:["messages","_userState.editedBookmark.thumbnail.url"]})],Q.prototype,"_editMenuItems",null),(0,o._)([(0,r.Cb)({readOnly:!0,dependsOn:["messages","_editMenuItems"]})],Q.prototype,"_editMenu",null),(0,o._)([(0,r.Cb)({dependsOn:["viewModel.defaultCreateOptions"]})],Q.prototype,"bookmarkCreationOptions",null),(0,o._)([(0,a.B)("viewModel.defaultCreateOptions")],Q.prototype,"defaultCreateOptions",void 0),(0,o._)([(0,a.B)("viewModel.defaultEditOptions")],Q.prototype,"defaultEditOptions",void 0),(0,o._)([(0,a.B)("viewModel.bookmarks")],Q.prototype,"bookmarks",void 0),(0,o._)([(0,m.G)(),(0,r.Cb)()],Q.prototype,"disabled",void 0),(0,o._)([(0,m.G)(),(0,r.Cb)()],Q.prototype,"editingEnabled",void 0),(0,o._)([(0,a.B)("viewModel.goToOverride")],Q.prototype,"goToOverride",void 0),(0,o._)([(0,r.Cb)()],Q.prototype,"iconClass",void 0),(0,o._)([(0,r.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Q.prototype,"label",void 0),(0,o._)([(0,r.Cb)(),(0,m.G)(),(0,f.H)("esri/widgets/Bookmarks/t9n/Bookmarks")],Q.prototype,"messages",void 0),(0,o._)([(0,r.Cb)(),(0,m.G)(),(0,f.H)("esri/t9n/common")],Q.prototype,"messagesCommon",void 0),(0,o._)([(0,r.Cb)(),(0,m.G)(),(0,f.H)("esri/core/t9n/Units")],Q.prototype,"messagesUnits",void 0),(0,o._)([(0,a.B)("viewModel.view")],Q.prototype,"view",void 0),(0,o._)([(0,r.Cb)({type:R}),(0,m.G)(["activeBookmark","state","bookmarks"]),(0,v.s)(["select-bookmark","bookmark-edit","bookmark-select"])],Q.prototype,"viewModel",void 0),(0,o._)([(0,r.Cb)(),(0,m.G)()],Q.prototype,"visibleElements",void 0),(0,o._)([(0,s.p)("visibleElements")],Q.prototype,"castVisibleElements",null),(0,o._)([(0,r.Cb)()],Q.prototype,"endAddBookmark",null),(0,o._)([(0,r.Cb)()],Q.prototype,"startAddBookmark",null),Q=(0,o._)([(0,c.j)("esri.widgets.Bookmarks")],Q);const ee=Q},37629:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>De});var o=i(56140),n=i(7584),r=(i(95830),i(36544)),a=(i(68055),i(79881)),s=i(51894),l=i(87566),c=(i(10923),i(57002),i(86035),i(10180)),d=i(40450),u=i(24258),p=i(9200),h=i(90846),f=i(19401),m=i(90806),v=i(82677);let y=class extends v.default{constructor(e){super(e),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){const e=this.get("format");return e&&e.getDisplayCoordinate(this.get("position.coordinate"))}};(0,o._)([(0,a.Cb)({readOnly:!0,dependsOn:["position","format.currentPattern"]})],y.prototype,"displayCoordinate",null),(0,o._)([(0,a.Cb)()],y.prototype,"format",void 0),(0,o._)([(0,a.Cb)()],y.prototype,"position",void 0),y=(0,o._)([(0,l.j)("esri.widgets.CoordinateConversion.support.Conversion")],y);const b=y;var g=i(32656),_=i(39105),w=i(61106),k=i(35470),S=i(83477),C=i(3766),x=i(14071),O=i(12973),A=(i(89771),i(50764)),P=i(15988),M=i(59691),j=i(80621),T=i(17333),E=i(4338),I=i(75138),D=i(73032),L=i(41241),R=(i(36348),i(52411));const N={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},B=new Array(3);function F(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function V(e){return"number"==typeof e&&isFinite(e)}function G(e){return e&&V(e.x)&&V(e.y)}function U(e,t){if(e.spatialReference.isGeographic&&t){const[i,o]=function(e,t){const i=F(t);return[e[0].toFixed(i),e[1].toFixed(i)]}([e.x,e.y],t);return`${i}, ${o}`}return`${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}function $(e){return"dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}var Z=i(87565),W=i(27780),J=i(3744);function q(e){let t=null;if(e||(e=D.Z.WGS84),e.wkid){if(t=J.e.geogcs(e.wkid),!t)throw new g.Z("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new g.Z("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=J.e.fromString(J.f.PE_TYPE_GEOGCS,e.wkt),!t)throw new g.Z("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function z(e){let t=-1;switch(e){case"automatic":t=J.b.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=J.b.PE_MGRS_STYLE_NEW|J.b.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=J.b.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=J.b.PE_MGRS_STYLE_OLD|J.b.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=J.b.PE_MGRS_STYLE_OLD}return t}function H(e){let t=-1;switch(e){case"latitude-band-indicators":t=J.d.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=J.d.PE_UTM_OPTS_NS}return t}let Y=class extends v.default{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){const e=this.get("conversionInfo.spatialReference")||D.Z.WGS84;return"basemap"===this.name?this._viewSpatialReference:e}set spatialReference(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||D.Z.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map((e=>e.alias)),i=this.currentPattern.replace(new RegExp(`["nsew${t.join()}]`,"gi"),"").replace(/\ /g,"");return new RegExp(`[${i}]`,"g")}convert(e,t){if(!G(e))return(0,_.reject)(new g.Z("format:invalid-point","Could not convert invalid point.",{point:e}));const i=this.get("conversionInfo.convert");return i?(0,_.resolve)().then((()=>i(e))):this._project(e,this.spatialReference,t).then((e=>this._getCoordinate(e).then((t=>({location:e,coordinate:t})))))}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const i=this._getSegmentMatches(e,!1);for(let e=this.coordinateSegments.length-1;e>=0;e--){const o=this.coordinateSegments[e];t=t.replace(o.alias,i[e])}return t}parseUserInput(e){let t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");const i=this._getSegmentMatches(e,!0);for(let e=this.coordinateSegments.length-1;e>=0;e--){const o=this.coordinateSegments[e];t=t.replace(o.alias,i[e])}return t}_getSegmentMatches(e,t){const i=[];for(let o=0;o<this.coordinateSegments.length;o++){const n=this.coordinateSegments[o],r=e.match(n.searchPattern);if(!r){i.push("");continue}let a=r[0];if(e=e.replace(a,"").trim(),n.substitution){const e=t?n.substitution.input(a):n.substitution.output(a);e&&(a=e)}i.push(a)}return i}reverseConvert(e){const t=this.parseUserInput(e),i=this.get("conversionInfo.reverseConvert"),o=$(this.name);let n;if(i)n=i(t);else if("xy"===this.name||"basemap"===this.name)n=function(e,t){const i=e.indexOf(",")>=0?",":" ",[o,n,r]=e.split(i).map((e=>{const t=e.trim();return t?Number(t):null}));if(!V(o)||!V(n))return null;const a=new w.Z({x:o,y:n,spatialReference:t||D.Z.WGS84});return r&&(a.z=r,a.hasZ=!0),a}(t,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":n=function(e,t){const i=[];e=e.replace(/\u2032/g,"'");const o=q(t);return J.P.dms_to_geog(o,1,[e],i)?new w.Z(i[0][0],i[0][1],t||D.Z.WGS84):null}(t,this.spatialReference);break;case"mgrs":{const e="automatic";n=function(e,t,i){const o=[],n=z(i);if(-1===n)return console.warn(`invalid conversionMode: ${i}`),null;const r=q(t);return J.b.mgrs_to_geog_extended(r,1,[e],n,o)?new w.Z(o[0][0],o[0][1],t||D.Z.WGS84):null}(t,this.spatialReference,e);break}case"utm":{const e="latitude-band-indicators";n=function(e,t,i){const o=[],n=H(i);if(-1===n)return console.warn(`invalid conversionMode: ${i}`),null;const r=q(t);return J.d.utm_to_geog(r,1,[e],n,o)?new w.Z(o[0][0],o[0][1],t||D.Z.WGS84):null}(t,this.spatialReference,e);break}case"usng":n=function(e,t){const i=[];!t&&/\(.+27/.test(e)&&(t=D.Z.GCS_NAD_1927);const o=q(t);return J.c.usng_to_geog(o,1,[e],i)?new w.Z(i[0][0],i[0][1],t||D.Z.WGS84):null}(t,this.spatialReference);break;default:n=null}else if(o)return function(e){const{geometryServicePromise:t,coordinate:i,spatialReference:o,formatName:n}=e;return t.then((e=>e.fromGeoCoordinateString({strings:[i],sr:o,conversionType:n}).then((e=>{const t=new w.Z({x:e[0][0],y:e[0][1],spatialReference:o});if(!G(t))throw e;return t})).catch((e=>{throw new g.Z("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({coordinate:t,spatialReference:this.spatialReference,formatName:this.name,geometryServicePromise:this.get("viewModel.geometryServicePromise")});return n?this._project(n,this._viewSpatialReference):(0,_.reject)(new g.Z("format:invalid-input","Could not parse input into point.",{userInput:e}))}_getCoordinate(e){const t=this.get("viewModel.view.scale");if(!G(e))return(0,_.reject)(new g.Z("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const i=F(t);return(0,_.resolve)(function(e,t,i=0){const o=[[e.x,e.y]],n=[],r=q(e.spatialReference);let a=0;switch(t){case"dd":a=J.P.geog_to_dd(r,1,o,i,n);break;case"ddm":a=J.P.geog_to_ddm(r,1,o,i,n);break;case"dms":a=J.P.geog_to_dms(r,1,o,i,n);break;default:return console.warn(`invalid format: ${t}`),null}return a?n[0]:null}(e,this.name,i))}case"mgrs":return(0,_.resolve)(function(e,t,i=0,o=!1){const n=[[e.x,e.y]],r=[],a=q(e.spatialReference);let s=z(t);return-1===s?(console.warn(`invalid conversionMode: ${t}`),null):(o&&(s|=J.b.PE_MGRS_ADD_SPACES),J.b.geog_to_mgrs_extended(a,1,n,i,!1,s,r)?r[0]:null)}(e,"automatic",5,!1));case"usng":return(0,_.resolve)(function(e,t=0,i=!1){const o=[[e.x,e.y]],n=[],r=q(e.spatialReference);return J.c.geog_to_usng(r,1,o,t,!1,i,n)?n[0]:null}(e,5,!1));case"utm":return(0,_.resolve)(function(e,t,i=!1){const o=[[e.x,e.y]],n=[],r=q(e.spatialReference);let a=H(t);return-1===a?(console.warn(`invalid conversionMode: ${t}`),null):(i&&(a|=J.d.PE_UTM_OPTS_ADD_SPACES),J.d.geog_to_utm(r,1,o,a,n)?n[0]:null)}(e,"latitude-band-indicators",!0));default:return(0,_.resolve)(U(e,t))}return $(this.name)?function(e){const{formatName:t,location:i,geometryServicePromise:o}=e,n=N[t]||{},r={coordinates:[[i.x,i.y]],sr:i.spatialReference,conversionType:t,...n};return o.then((e=>e.toGeoCoordinateString(r).then((e=>{const t=e[0];if(!t)throw e;return t})).catch((e=>{throw new g.Z("coordinate-conversion:to-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))))}({formatName:this.name,location:e,geometryServicePromise:this.get("viewModel.geometryServicePromise")}):(0,_.resolve)(U(e,t))}_project(e,t,i){return(0,W.fS)(e.spatialReference,t)||!t?(0,_.resolve)(e):this.get("viewModel.formatterAvailable")&&(0,T.kR)()?(0,_.resolve)((0,T.iV)(e,t)):this.get("viewModel.formatterAvailable")?null:(0,L.Q8)(e,t)?(0,_.resolve)((0,L.iV)(e,t)):function(e,t){const{spatialReference:i,geometryServicePromise:o,location:n,scale:r}=e;if(!i||n.spatialReference.wkid===i.wkid)return(0,_.resolve)({location:n,coordinate:U(n,r)});if((n.spatialReference.isWGS84||n.spatialReference.isWebMercator)&&(i.isWGS84||i.isWebMercator))return(0,_.resolve)({location:(0,L.iV)(n,i),coordinate:U(n,r)});if(B[0]===n&&B[1]===i.wkid)return B[2];B[0]=n,B[1]=i.wkid;const a=o.then((e=>e.project(new R.Z({geometries:[n],outSpatialReference:i}),{signal:t}).then((e=>{if(!G(e[0]))throw e[0];return{location:e[0],coordinate:U(e[0],r)}})).catch((e=>{throw new g.Z("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:e})}))));return B[2]=a,a}({location:e,spatialReference:t,geometryServicePromise:this.get("viewModel.geometryServicePromise"),scale:this.get("viewModel.view.scale")},i).then((e=>e.location))}};(0,o._)([(0,a.Cb)()],Y.prototype,"conversionInfo",void 0),(0,o._)([(0,a.Cb)()],Y.prototype,"coordinateSegments",void 0),(0,o._)([(0,a.Cb)()],Y.prototype,"currentPattern",null),(0,o._)([(0,a.Cb)()],Y.prototype,"defaultPattern",void 0),(0,o._)([(0,a.Cb)({readOnly:!0,dependsOn:["defaultPattern","coordinateSegments"]})],Y.prototype,"hasDisplayProperties",null),(0,o._)([(0,a.Cb)()],Y.prototype,"name",void 0),(0,o._)([(0,a.Cb)({dependsOn:["_viewSpatialReference","name"],type:D.Z})],Y.prototype,"spatialReference",null),(0,o._)([(0,a.Cb)()],Y.prototype,"viewModel",void 0),(0,o._)([(0,a.Cb)({dependsOn:["viewModel.view.spatialReference"],readOnly:!0})],Y.prototype,"_viewSpatialReference",null),(0,o._)([(0,a.Cb)({readOnly:!0,dependsOn:["currentPattern"]})],Y.prototype,"_additionalCharactersPattern",null),Y=(0,o._)([(0,l.j)("esri.widgets.CoordinateConversion.support.Format")],Y);const X=Y,K=(0,Z.ti)().decimal,Q={N:"north",S:"south",E:"east",W:"west"},ee=new RegExp(`-?\\d+[\\.|\\${K}]?\\d*`),te=/^[\\0]+(?=\d)/;function ie(e){const t=e.match(te),i=t?t[0]:"",o=e.indexOf(".")>=0?e.split(".")[1].length:0;return i+(0,Z.WU)(Number(e),{pattern:"###0.###",places:o,round:-1})}function oe(e){return(0,Z.Qc)(e)}const ne="default",re=new w.Z([0,0,500]),ae=`${window.location.pathname}__coordinateConversionWidgetState`,se=r.Z.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),le="view",ce="view-change";let de=0,ue=[],pe=class extends((0,E._)(k.Z.EventedAccessor)){constructor(e){super(e),this._conversionPromise=null,this._handles=new M.Z,this._locationGraphic=null,this._locale=(0,C.Kd)(),this._pointerCount=0,this.conversions=new S.Z,this.formats=new S.Z,this.formatterAvailable=!1,this.geometryServicePromise=null,this.messages=null,this.requestDelay=300,this.locationSymbol=new A.Z({url:(0,O.V)("esri/images/search/search-symbol-32.png"),width:24,height:24}),this.view=null,this._instanceNumber=de,de++,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){(async()=>this.messages=await(0,x.ME)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion"))().then((()=>{if(!this.destroyed&&(this.formats.addMany(function(e){const t=e.abbreviatedDirections.north,i=e.abbreviatedDirections.south,o=e.abbreviatedDirections.east,n=e.abbreviatedDirections.west,r={};r[t]="N",r[i]="S",r[o]="E",r[n]="W";const a=new RegExp(`N|S|${t}|${i}`,"i"),s=new RegExp(`E|W|${o}|${n}`,"i");return[new X({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:ee,substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"Y",description:"northing",searchPattern:ee,substitution:{input:e=>oe(e),output:e=>ie(e)}}],defaultPattern:"X, Y",viewModel:null}),new X({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${K}]?\\d*(?=\\D*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${K}]?\\d*(?=\\D*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}}],defaultPattern:`Y°‎${e.abbreviatedDirections.north}, X°‎${e.abbreviatedDirections.east}`,viewModel:null}),new X({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${K}]?\\d*(?=.*?[N|S|${t}||${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=\\D*?\\s+.*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${K}]?\\d*(?=.*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}}],defaultPattern:`Y°‎ A'${e.abbreviatedDirections.north}, X°‎ B'${e.abbreviatedDirections.east}`,viewModel:null}),new X({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${K}]?\\d*(?=.*?[N|S|${t}|${i}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:a,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=.*?\\s+.*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${K}]?\\d*(?=.*?[E|W|${o}|${n}])`,"i"),substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:e=>r[e],output:t=>e.abbreviatedDirections[Q[t]]}}],defaultPattern:`Y°‎ A' B"${e.abbreviatedDirections.north}, X°‎ C' D"${e.abbreviatedDirections.east}`,viewModel:null}),new X({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:ee,substitution:{input:e=>oe(e),output:e=>ie(e)}},{alias:"Y",description:"latitude",searchPattern:ee,substitution:{input:e=>oe(e),output:e=>ie(e)}}],defaultPattern:"X°‎, Y°‎",viewModel:null}),new X({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new X({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new X({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}(this.messages)),this._loadWidgetState(),this.formats.forEach((e=>{e.viewModel=this,this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name)})),this._handles.add(this.conversions.on("change",this._handleConversionChange),"conversions"),this._handles.add(this.formats.on("change",this._handleFormatChange),"formats"),this._handles.add((0,j.init)(this,"view.map",(()=>{this.geometryServicePromise=(0,I.create)(this.get("view.map.portalItem"))})),ce),(0,T.zD)().then((()=>{this.formatterAvailable=!0})).catch((e=>{se.error(new g.Z("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:e})),this.formatterAvailable=!1})).then((()=>this._handles.add((0,j.init)(this,"view",this._handleViewChange),ce))),0===this.conversions.length)){const e=this.formats.find((e=>"xy"===e.name))||this.formats.getItemAt(0);this.conversions.add(new b({format:e}))}}))}destroy(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null}set currentLocation(e){this._set("currentLocation",e),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:e,view:t}=this,i=null==t?void 0:t.ready;return e?i?"ready":t?"loading":"disabled":"disabled"}get waitingForConversions(){return null!=this._conversionPromise}get _debouncedConvert(){return(0,_.debounce)(((e,t,i)=>(0,_.eachAlways)(e.map((e=>e.convert(t,i))))),this.requestDelay)}setLocation(e){if(this.view.graphics.remove(this._locationGraphic),e){const t=e.clone();t.hasZ&&(t.z=void 0),this._locationGraphic=new P.default({geometry:t,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic)}}convert(e,t){return G(t)?(0,_.resolve)().then((()=>e.convert(t))):(0,_.reject)(new g.Z("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:t}))}goToLocation(e){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){const t=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return t?t.contains(e)?this.callGoTo({target:e}):(0,_.reject)(new g.Z("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})):this.callGoTo({target:e})}return this.callGoTo({target:e})}pause(){this.currentLocation=null,this._handles.remove(le),this.view&&(this.view.cursor=ne,this.view.graphics.remove(this._locationGraphic))}previewConversion(e,t=this.currentLocation||re){return this._convertMany([e],t).then((()=>e.displayCoordinate))}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}reverseConvert(e,t){return t.reverseConvert(e)}async updateConversions(e,t){return t&&t.type&&"point"===t.type?this._convertMany(e,t).then((e=>e.client.concat(e.server))):(this._clearConversions(this.conversions),(0,_.reject)(new g.Z("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:t})))}_cleanUpView(e){e&&(e.graphics.remove(this._locationGraphic),this._handles.remove(le),e.cursor=ne)}_clearConversions(e){e.forEach((e=>{e.position={location:null,coordinate:null}}))}_convertMany(e,t){const{client:i,server:o}=e.reduce(((e,t)=>(e[t.format.getConversionStrategy()].push(t),e)),{client:[],server:[]}),n=(0,_.all)(i.map((e=>e.format.convert(t).then((t=>(e.position=t,e))).catch((()=>{e.position=null}))))),r=e=>e?(this._conversionPromise=null,this.notifyChange("waitingForConversions"),e.map(((e,t)=>{const i=o[t];return e.error?(i.position=null,i):(i.position=e.value,i)}))):[];return this._conversionPromise=o.length>0?this._debouncedConvert(o.map((e=>e.format)),t).then(r,r):(0,_.resolve)([]),this.notifyChange("waitingForConversions"),(0,_.all)([n,this._conversionPromise]).then((e=>({client:e[0],server:e[1]})))}_handleConversionChange(e){e.added.forEach((e=>{const t=e.format;t.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(t,this.currentLocation).then((t=>{e.position=t,this._set("waitingForConversions",!1)})))})),this._saveWidgetState()}_handleFormatChange(e){e.added.forEach((e=>{this._handles.add(e.watch("currentPattern",this._saveWidgetState),e.name),e.viewModel=this})),e.removed.forEach((e=>{e.viewModel=null,this._handles.remove(e.name)}))}_loadWidgetState(){if(0===this._instanceNumber)try{const e=JSON.parse(localStorage.getItem(ae));e&&(ue=e)}catch(e){se.error(new g.Z("coordinate-conversion:invalid-local-storage-json","Could not read from localStorge.",{error:e}))}this._setWidgetState()}_startCaptureMode(){this._handles.remove(le),this.view&&(this.view.cursor="crosshair",this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),le))}_startLiveMode(){this._pointerCount=0,this._handles.remove(le),this.view&&(this.view.cursor=ne,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],le))}_handleViewChange(e,t){t&&t!==e&&this._cleanUpView(t),e&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode())}_onClick(e){if(0===e.button){const t=this.view.toMap(e),i=t&&t.normalize();this.setLocation(i),this.currentLocation=i}}_onPointerDown(e){const{pointerType:t}=e;if(this._pointerCount++,("touch"===t||"pen"===t)&&1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerMove(e){const{pointerType:t}=e;if("mouse"===t||1===this._pointerCount){const t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(){const e=ue[this._instanceNumber];if(e)try{e.formats.forEach((t=>{const i=this.formats.find((e=>e.name===t.name));i&&e.locale===this._locale&&t.currentPattern&&(i.currentPattern=t.currentPattern),i&&t.index>=0&&this.conversions.add(new b({format:i}))}))}catch(e){se.warn(new g.Z("coordinate-conversion:local-storage-read-error","Could not get widget state from stored JSON.",{error:e})),ue[this._instanceNumber]={formats:[],locale:this._locale}}else ue[this._instanceNumber]={formats:[],locale:this._locale}}_saveWidgetState(){const e=this._toJSON();ue[this._instanceNumber]={formats:e,locale:this._locale};try{localStorage.setItem(ae,JSON.stringify(ue))}catch(e){se.error(new g.Z("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:e}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter((e=>{const t=e.name;return"xy"===t||"basemap"===t||$(t)})).map((e=>({name:e.name,currentPattern:e.currentPattern,defaultPattern:e.defaultPattern,index:this.conversions.findIndex((t=>t.format===e))}))).sort(((e,t)=>e.index-t.index)).toArray()}};(0,o._)([(0,a.Cb)()],pe.prototype,"conversions",void 0),(0,o._)([(0,a.Cb)({type:w.Z})],pe.prototype,"currentLocation",null),(0,o._)([(0,a.Cb)()],pe.prototype,"formats",void 0),(0,o._)([(0,a.Cb)()],pe.prototype,"messages",void 0),(0,o._)([(0,a.Cb)()],pe.prototype,"mode",null),(0,o._)([(0,a.Cb)()],pe.prototype,"requestDelay",void 0),(0,o._)([(0,a.Cb)({dependsOn:["messages","view","view.ready"],readOnly:!0})],pe.prototype,"state",null),(0,o._)([(0,a.Cb)()],pe.prototype,"locationSymbol",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],pe.prototype,"waitingForConversions",null),(0,o._)([(0,a.Cb)()],pe.prototype,"view",void 0),(0,o._)([(0,a.Cb)({readOnly:!0,dependsOn:["requestDelay"]})],pe.prototype,"_debouncedConvert",null),pe=(0,o._)([(0,l.j)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],pe);const he=pe,fe="esri-coordinate-conversion__conversion-list",me="esri-coordinate-conversion__row",ve="esri-coordinate-conversion__select-row",ye="esri-coordinate-conversion__tools",be="esri-coordinate-conversion__mode-toggle",ge="esri-coordinate-conversion__row-button",_e="esri-coordinate-conversion__back-button",we="esri-coordinate-conversion__input-coordinate",ke="esri-coordinate-conversion__input-group",Se="esri-coordinate-conversion__heading",Ce="esri-coordinate-conversion__pattern-input",xe="esri-coordinate-conversion__settings-group",Oe="esri-coordinate-conversion__preview-coordinate",Ae="esri-input",Pe="esri-widget__heading",Me="esri-widget--button",je="esri-icon-map-pin",Te="esri-select",Ee=r.Z.getLogger("esri.widgets.CoordinateConversion");let Ie=class extends m.default{constructor(e,t){super(e,t),this._popupMessage=null,this._popupId=null,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.conversions=null,this.currentLocation=null,this.formats=null,this.goToOverride=null,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode=null,this.orientation="auto",this.requestDelay=null,this.view=null,this.viewModel=new he}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return"boolean"!=typeof e||e}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){const e=this.get("viewModel.state"),t="disabled"===e?(0,f.j)("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,i=!t&&this._inputVisible?this._renderInputForm():null,o=!t&&this._settingsVisible?this._renderSettings():null,n=t||i||o?null:this._renderConversionsView(),r=this._popupVisible?this._renderPopup():null,a={"esri-coordinate-conversion--capture-mode":"capture"===this.mode,"esri-disabled":"loading"===e,"esri-coordinate-conversion--no-basemap":"disabled"===e};return(0,f.j)("div",{class:this.classes("esri-coordinate-conversion esri-widget",a)},r,t,n,o,i)}_addConversion(e){const t=e.target,i=t.options[t.options.selectedIndex]["data-format"],o=t["data-index"],n=new b({format:i});t.options.selectedIndex=0,o>=0&&this.conversions.removeAt(o),this.conversions.add(n,o)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const i=t.format;return i.get("hasDisplayProperties")?i:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupId&&(clearTimeout(this._popupId),this._popupId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){const t=e.currentTarget["data-conversion"].displayCoordinate;"clipboardData"in n.Z?n.Z.clipboardData.setData("text",t):e.clipboardData.setData("text/plain",t),this._showPopup(this.messages.copySuccessMessage),e.preventDefault()}_processUserInput(e){const t=(0,c.kK)(e),i=this.viewModel;if("Enter"!==t&&t)this._badInput&&(this._badInput=!1);else{const e=this._coordinateInput["data-format"],t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?i.resume():this.mode="capture",this.currentLocation=e,i.setLocation(e),this._onConvertComplete()})).catch((e=>{Ee.error(e),this._showPopup(this.messages.invalidCoordinate),this._badInput=!0}))}}_reverseConvert(e,t){const i=this.viewModel;return t.reverseConvert(e).then((e=>(this._goToEnabled&&i.goToLocation(e).catch((e=>{Ee.warn(e),this._showPopup(this.messages.locationOffBasemap)})),e)))}_setInputFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._conversionFormat=i}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){const i=this.conversions.find((t=>t.format===e));this._previewConversion=new b({format:e,position:{location:this.currentLocation,coordinate:i&&i.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target,i=t[t.options.selectedIndex]["data-format"];this._settingsFormat=i,this._setPreviewConversion()}_showPopup(e,t=2500){this._popupMessage=e,this._popupVisible?clearTimeout(this._popupId):this._popupVisible=!0,this.scheduleRender(),this._popupId=setTimeout((()=>{this._popupId=null,this._hidePopup()}),t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,i=this._findSettingsFormat();i&&(i.currentPattern=t.value)}_renderConversion(e,t){const{messages:i}=this,o=`${this.id}__list-item-${t}`,n=`${e.format.name} ${i.conversionOutputSuffix}`,r=0===t,a=r||this._expanded,s=r?this._renderFirstConversion(e):this._renderTools(t,e,o),l=r&&!e.displayCoordinate?i.noLocation:e.displayCoordinate,c=(0,f.j)("div",{"aria-label":l,class:"esri-coordinate-conversion__display","data-conversion":e,role:"listitem",tabindex:"0",title:l},l),d=this._renderOptions(this.formats.filter((t=>t!==e.format)));return a?(0,f.j)("li",{"aria-label":n,class:me,id:o,key:e,role:"group",title:n,tabindex:"0"},(0,f.j)("select",{"aria-controls":o,"aria-label":i.selectFormat,class:this.classes(Te,ve),bind:this,"data-index":t,onchange:this._addConversion,title:i.selectFormat},(0,f.j)("option",{"aria-label":e.format.name,selected:!0,title:e.format.name},e.format.name.toUpperCase()),d),c,s):null}_renderCopyButton(e){return(0,f.j)("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(Me,ge),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},(0,f.j)("span",{"aria-hidden":"true",class:"esri-icon-duplicate"}))}_renderFirstConversion(e){const t=this.id,i={"esri-icon-down":!this._expanded,"esri-icon-up":this._expanded},{messages:o,messagesCommon:n}=this,r="live"===this.mode?o.captureMode:o.liveMode,a=this._expanded?n.collapse:n.expand,s=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,l=this.multipleConversions?(0,f.j)("li",{"aria-controls":`${t}__${fe}`,"aria-label":a,bind:this,class:Me,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:a},(0,f.j)("span",{"aria-hidden":"true",class:this.classes(i)})):(0,f.j)("li",{"aria-label":r,bind:this,class:this.classes(Me,be),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:r},(0,f.j)("span",{"aria-hidden":"true",class:je}));return(0,f.j)("ul",{class:ye},s,l)}_renderInputForm(){const e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((t=>t.name===e.name)),i=this.id,o=`${i}__${we}`,n=`${i}__${we}__header`,r=this._renderOptions(this.formats,!0,t),a={"esri-coordinate-conversion__input-coordinate--rejected":this._badInput},{messages:s,messagesCommon:l}=this;return(0,f.j)("div",{"aria-labelledby":n,class:"esri-coordinate-conversion__input-form",key:"esri-coordinate-conversion__input-form",role:"search"},(0,f.j)("div",{class:Se},(0,f.j)("div",{"aria-label":l.back,bind:this,class:this.classes(Me,_e),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),(0,f.j)("h4",{class:Pe,id:n},s.inputCoordTitle)),(0,f.j)("div",{class:ke},(0,f.j)("select",{"aria-controls":o,"aria-label":s.selectFormat,bind:this,class:this.classes(Te,ve),onchange:this._setInputFormat,title:s.selectFormat},r),(0,f.j)("input",{afterCreate:d.Se,"aria-labelledby":n,"aria-required":"true",bind:this,class:this.classes(we,Ae,a),"data-format":e,"data-node-ref":"_coordinateInput",id:o,onkeydown:this._processUserInput,placeholder:s.inputCoordTitle,role:"textbox",spellcheck:!1,title:s.inputCoordTitle,type:"text"})),(0,f.j)("div",{class:ke},(0,f.j)("label",{"aria-label":s.goTo},(0,f.j)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:s.goTo,type:"checkbox"}),s.goTo),(0,f.j)("button",{"aria-label":s.convert,bind:this,class:this.classes("esri-coordinate-conversion__button","esri-button"),onclick:this._processUserInput,title:s.convert,type:"button"},s.convert)))}_renderConversionsView(){const e=`${this.id}__${fe}`,t=this._renderPrimaryTools(),i=this._renderOptions(this.formats),o=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),{messages:n}=this,r=this._expanded?(0,f.j)("div",{class:me},(0,f.j)("select",{"aria-controls":e,"aria-label":n.addConversion,bind:this,class:this.classes(Te,"esri-coordinate-conversion__select-primary"),onchange:this._addConversion,title:n.addConversion},(0,f.j)("option",{disabled:!0,selected:!0,value:""},n.addConversion),i),t):null,a={"esri-coordinate-conversion__conversions-view--expanded":this._expanded,"esri-coordinate-conversion__conversions-view--expand-up":"expand-up"===this.orientation,"esri-coordinate-conversion__conversions-view--expand-down":"expand-down"===this.orientation};return(0,f.j)("div",{class:this.classes("esri-coordinate-conversion__conversions-view",a),key:"esri-coordinate-conversion__main-view"},(0,f.j)("ul",{"aria-expanded":this._expanded?"true":"false",class:fe,id:e},o),r)}_renderOptions(e,t,i){const o=this.conversions.getItemAt(0);return e.map(((e,n)=>{const r=!(t||!o)&&(o.format.name===e.name||this.conversions.map((e=>e.format.name)).includes(e.name));return(0,f.j)("option",{"aria-label":e.name,"data-format":e,disabled:r,key:e.name,selected:n===i,value:e.name},e.name.toUpperCase())})).toArray()}_renderPopup(){return(0,f.j)("div",{class:"esri-coordinate-conversion__popup",role:"alert"},this._popupMessage)}_renderPrimaryTools(){const{messages:e}=this,t="live"===this.mode?e.captureMode:e.liveMode;return(0,f.j)("ul",{class:ye},(0,f.j)("li",{bind:this,class:Me,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},(0,f.j)("span",{"aria-hidden":"true",class:"esri-icon-edit"})),(0,f.j)("li",{bind:this,class:this.classes(Me,be),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:t},(0,f.j)("span",{"aria-hidden":"true",class:je})),(0,f.j)("li",{bind:this,class:Me,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},(0,f.j)("span",{"aria-hidden":"true",class:"esri-icon-settings2"})))}_renderSettings(){const e=this.id,t=`${e}__${Ce}`,i=`${e}__${Ce}__header`,o=`${e}__${Oe}`,n=this.formats.filter((e=>e.hasDisplayProperties)),r=this._findSettingsFormat(),a=n.indexOf(r),s=this._renderOptions(n,!0,a),l=r.get("currentPattern"),{messages:c,messagesCommon:d}=this;return(0,f.j)("div",{"aria-labelledby":i,class:"esri-coordinate__settings",key:"esri-coordinate-conversion__settings"},(0,f.j)("div",{class:Se},(0,f.j)("div",{bind:this,class:this.classes(Me,_e),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:d.back},this._renderBackIcon()),(0,f.j)("h4",{class:Pe,id:i},c.settingsTitle)),(0,f.j)("div",{class:xe},(0,f.j)("label",{for:t},c.changeCoordinateDisplay),(0,f.j)("select",{"aria-label":c.selectFormat,class:Te,bind:this,onchange:this._setSettingsFormat,title:c.selectFormat},s),(0,f.j)("div",{class:"esri-coordinate-conversion__settings-group-horizontal"},(0,f.j)("input",{"aria-controls":o,bind:this,class:this.classes(Ce,Ae),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:c.changeCoordinateDisplay,type:"text",value:l}),(0,f.j)("div",{"aria-controls":t,bind:this,class:Me,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:c.defaultPattern},(0,f.j)("span",{"aria-hidden":"true",class:"esri-icon-refresh"})))),(0,f.j)("div",{class:xe},(0,f.j)("label",null,d.preview,(0,f.j)("div",{class:Oe,id:o,tabindex:"0"},this._previewConversion.displayCoordinate))))}_renderBackIcon(){return(0,f.j)("span",{"aria-hidden":"true",class:(0,d.dZ)()?"esri-icon-right-arrow":"esri-icon-left-arrow"})}_renderTools(e,t,i){const o=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:n}=this;return(0,f.j)("ul",{class:ye,role:"listitem"},o,(0,f.j)("li",{"aria-controls":i,"aria-label":n.removeConversion,bind:this,class:this.classes(Me,ge),"data-index":e,key:`${i}__${Me}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:n.removeConversion},(0,f.j)("span",{"aria-hidden":"true",class:"esri-icon-close"})))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i)}document.execCommand("copy")}_removeConversion(e){const t=e.currentTarget["data-index"];this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode="live"===this.mode?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};(0,o._)([(0,s.B)("viewModel.conversions")],Ie.prototype,"conversions",void 0),(0,o._)([(0,s.B)("viewModel.currentLocation"),(0,h.G)()],Ie.prototype,"currentLocation",void 0),(0,o._)([(0,s.B)("viewModel.formats"),(0,h.G)()],Ie.prototype,"formats",void 0),(0,o._)([(0,s.B)("viewModel.goToOverride")],Ie.prototype,"goToOverride",void 0),(0,o._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ie.prototype,"label",void 0),(0,o._)([(0,a.Cb)(),(0,h.G)(),(0,p.H)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],Ie.prototype,"messages",void 0),(0,o._)([(0,a.Cb)(),(0,h.G)(),(0,p.H)("esri/t9n/common")],Ie.prototype,"messagesCommon",void 0),(0,o._)([(0,s.B)("viewModel.mode"),(0,h.G)()],Ie.prototype,"mode",void 0),(0,o._)([(0,a.Cb)(),(0,h.G)()],Ie.prototype,"orientation",void 0),(0,o._)([(0,s.B)("viewModel.requestDelay")],Ie.prototype,"requestDelay",void 0),(0,o._)([(0,a.Cb)(),(0,h.G)()],Ie.prototype,"multipleConversions",null),(0,o._)([(0,s.B)("viewModel.locationSymbol")],Ie.prototype,"locationSymbol",void 0),(0,o._)([(0,s.B)("viewModel.view"),(0,h.G)()],Ie.prototype,"view",void 0),(0,o._)([(0,a.Cb)({type:he}),(0,h.G)(["viewModel.state","viewModel.waitingForConversions"])],Ie.prototype,"viewModel",void 0),(0,o._)([(0,u.h)()],Ie.prototype,"_copyCoordinateOutput",null),(0,o._)([(0,u.h)()],Ie.prototype,"_removeConversion",null),(0,o._)([(0,u.h)()],Ie.prototype,"_setDefaultPattern",null),(0,o._)([(0,u.h)()],Ie.prototype,"_toggleExpand",null),(0,o._)([(0,u.h)()],Ie.prototype,"_toggleInputVisibility",null),(0,o._)([(0,u.h)()],Ie.prototype,"_toggleMode",null),(0,o._)([(0,u.h)()],Ie.prototype,"_toggleSettingsVisibility",null),Ie=(0,o._)([(0,l.j)("esri.widgets.CoordinateConversion")],Ie);const De=Ie},89288:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(51894),a=i(87566),s=(i(10923),i(57002),i(86035),i(24258)),l=i(9200),c=i(90846),d=i(19401),u=i(73502),p=i(90806),h=i(82677),f=i(59691),m=i(80621);let v=class extends h.default{constructor(e){super(e),this._viewpointHandle=null,this._handles=new f.Z,this.group=null}initialize(){this._handles.add((0,m.on)(this,"view.ui","expand",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&(0,m.whenTrueOnce)(e,"ready",(()=>{this.view===e&&this._watchViewpoint()})))}_viewpointHandleChange(e){this._viewpointHandle&&(e?(0,m.whenTrueOnce)(this.view,"stationary",(()=>this._viewpointHandle.resume())):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const t="3d"===i.type?"camera":"viewpoint",o=(0,m.pausable)(i,t,(()=>this._collapse()));this._handles.add(o,e),this._viewpointHandle=o}}_collapse(){this.expanded=!1}};(0,o._)([(0,n.Cb)({value:!1})],v.prototype,"autoCollapse",null),(0,o._)([(0,n.Cb)({value:!1})],v.prototype,"expanded",null),(0,o._)([(0,n.Cb)()],v.prototype,"group",void 0),(0,o._)([(0,n.Cb)({dependsOn:["view.ready"],readOnly:!0})],v.prototype,"state",null),(0,o._)([(0,n.Cb)({value:null})],v.prototype,"view",null),v=(0,o._)([(0,a.j)("esri.widgets.Expand.ExpandViewModel")],v);const y=v,b="esri-expand__icon-number";let g=class extends p.default{constructor(e,t){super(e,t),this.autoCollapse=null,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new y}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:o}=this;return e?i||t.collapse:o||t.expand}get collapseIconClass(){return"esri-icon-collapse"}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return(0,u.isWidget)(this.content)?this.content.iconClass:"esri-icon-expand"}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={"esri-expand--auto":"auto"===e,"esri-expand--drawer":"drawer"===e,"esri-expand--floating":"floating"===e};return(0,d.j)("div",{class:this.classes("esri-expand esri-widget",t)},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={"esri-expand__container--expanded":e};return(0,d.j)("div",{class:this.classes("esri-expand__container",t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={"esri-expand__mask--expanded":e};return(0,d.j)("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?(0,d.j)("span",{key:"expand__icon-number",class:b},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?(0,d.j)("span",{key:"expand__expand-icon-number",class:this.classes(b,"esri-expand__icon-number--expanded")},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,o={"esri-expand__icon--expanded":i,[e]:i,[t]:!i};return e===t&&(o[e]=!0),(0,d.j)("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",o)})}renderTitle(){return(0,d.j)("span",{class:"esri-icon-font-fallback-text"},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:i}=this;return(0,d.j)("div",{bind:this,onclick:this._toggle,onkeydown:this._toggle,"aria-controls":i,"aria-expanded":e?"true":"false",title:t,role:"button",tabindex:"0",class:"esri-widget--button"},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return(0,d.j)("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t}=this,i={"esri-expand__content--expanded":e};return(0,d.j)("div",{id:t,role:"region",class:this.classes("esri-expand__content",i)},this.renderContentContainer())}renderContentContainer(){const e=this.content;return"string"==typeof e?(0,d.j)("div",{innerHTML:e}):(0,u.isWidget)(e)?e.render():e instanceof HTMLElement?(0,d.j)("div",{bind:e,afterCreate:this._attachToNode}):(0,u.hasDomNode)(e)?(0,d.j)("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle()}_attachToNode(e){e.appendChild(this)}};(0,o._)([(0,n.Cb)({readOnly:!0,dependsOn:["id"]}),(0,c.G)()],g.prototype,"contentId",null),(0,o._)([(0,n.Cb)({readOnly:!0,dependsOn:["expanded","messagesCommon","collapseTooltip","expandTooltip"]}),(0,c.G)()],g.prototype,"expandTitle",null),(0,o._)([(0,r.B)("viewModel.autoCollapse")],g.prototype,"autoCollapse",void 0),(0,o._)([(0,n.Cb)({dependsOn:["content"]}),(0,c.G)()],g.prototype,"collapseIconClass",null),(0,o._)([(0,n.Cb)(),(0,c.G)()],g.prototype,"collapseTooltip",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)()],g.prototype,"content",void 0),(0,o._)([(0,r.B)("viewModel.expanded"),(0,c.G)()],g.prototype,"expanded",void 0),(0,o._)([(0,n.Cb)({dependsOn:["content"]}),(0,c.G)()],g.prototype,"expandIconClass",null),(0,o._)([(0,n.Cb)(),(0,c.G)()],g.prototype,"expandTooltip",void 0),(0,o._)([(0,r.B)("viewModel.group")],g.prototype,"group",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)()],g.prototype,"iconNumber",void 0),(0,o._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],g.prototype,"label",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/widgets/Expand/t9n/Expand")],g.prototype,"messages",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/t9n/common")],g.prototype,"messagesCommon",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)()],g.prototype,"mode",void 0),(0,o._)([(0,r.B)("viewModel.view"),(0,c.G)()],g.prototype,"view",void 0),(0,o._)([(0,n.Cb)({type:y}),(0,c.G)("viewModel.state")],g.prototype,"viewModel",void 0),(0,o._)([(0,s.h)()],g.prototype,"_toggle",null),g=(0,o._)([(0,a.j)("esri.widgets.Expand")],g);const _=g},72320:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var o=i(56140),n=(i(95830),i(36544)),r=(i(68055),i(79881)),a=i(51894),s=i(87566),l=(i(10923),i(57002),i(86035),i(40450),i(24258)),c=i(9200),d=i(90846),u=i(19401),p=i(90806),h=i(82677);const f="esri.widgets.Fullscreen.FullscreenViewModel",m=n.Z.getLogger(f);let v=class extends h.default{constructor(e){super(e),this._vendorInfo=null,this._fullscreenStyle="width: 100%; height: 100%;",this.view=null,this._errorHandler=this._errorHandler.bind(this),this._stateHandler=this._stateHandler.bind(this)}destroy(){this._removeFullscreenListeners(),this.view=null}get element(){return this.get("view.container")}set element(e){void 0!==e?this._override("element",e):this._clearOverride("element")}get state(){return this.element?this._isSupported()?this._isActive()?"active":"ready":"feature-unsupported":"disabled"}enter(){this._enterFullscreen()}exit(){this._exitFullscreen()}toggle(){this._isActive()?this._exitFullscreen():this._enterFullscreen()}_isSupported(){this._removeFullscreenListeners();const e=this._getVendorInfo(this.element);return this._addFullscreenListeners(e),this._vendorInfo=e,!!e}_isActive(){return!!this._vendorInfo&&!!document[this._vendorInfo.propertyName]}_stateHandler(){this.notifyChange("state"),"active"===this.state?this._addStyle():this._removeStyle()}_errorHandler(e){m.error("fullscreen request failed",e)}_getVendorInfo(e){if(e)return e.requestFullscreen?{enterName:"requestFullscreen",exitName:"exitFullscreen",errorEventName:"fullscreenerror",changeEventName:"fullscreenchange",propertyName:"fullscreen"}:e.webkitRequestFullScreen?{enterName:"webkitRequestFullscreen",exitName:"webkitCancelFullScreen",errorEventName:"webkitfullscreenerror",changeEventName:"webkitfullscreenchange",propertyName:"webkitIsFullScreen"}:e.mozRequestFullScreen?{enterName:"mozRequestFullScreen",exitName:"mozCancelFullScreen",errorEventName:"mozfullscreenerror",changeEventName:"mozfullscreenchange",propertyName:"mozFullScreen"}:e.msRequestFullscreen?{enterName:"msRequestFullscreen",exitName:"msExitFullscreen",errorEventName:"MSFullscreenError",changeEventName:"MSFullscreenChange",propertyName:"msFullscreenElement"}:void 0}_enterFullscreen(){if("feature-unsupported"===this.state)return void m.warn("The fullscreen API is not supported in this browser.");const{element:e}=this;e&&(e[this._vendorInfo.enterName].call(e),this.notifyChange("state"))}_addStyle(){const{element:e}=this;e&&e.setAttribute("style",this._fullscreenStyle)}_removeStyle(){const{element:e}=this;e&&e.removeAttribute("style")}_exitFullscreen(){if("feature-unsupported"===this.state)return;const{element:e}=this;e&&(document[this._vendorInfo.exitName].call(document),this.notifyChange("state"))}_addFullscreenListeners(e){e&&(document.addEventListener(e.changeEventName,this._stateHandler),document.addEventListener(e.errorEventName,this._errorHandler))}_removeFullscreenListeners(){const{_vendorInfo:e}=this;this._vendorInfo&&(document.removeEventListener(e.changeEventName,this._stateHandler),document.removeEventListener(e.errorEventName,this._errorHandler))}};(0,o._)([(0,r.Cb)({dependsOn:["view.container"]})],v.prototype,"element",null),(0,o._)([(0,r.Cb)({dependsOn:["element"],readOnly:!0})],v.prototype,"state",null),(0,o._)([(0,r.Cb)()],v.prototype,"view",void 0),(0,o._)([(0,r.Cb)()],v.prototype,"enter",null),(0,o._)([(0,r.Cb)()],v.prototype,"exit",null),(0,o._)([(0,r.Cb)()],v.prototype,"toggle",null),v=(0,o._)([(0,s.j)(f)],v);const y=v;let b=class extends p.default{constructor(e,t){super(e,t),this.element=null,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new y}get fullscreenTitle(){var e;const t=null==(e=this.viewModel)?void 0:e.state;return"active"===t?this.messages.exit:"ready"===t?this.messages.enter:""}render(){var e;const t=null==(e=this.viewModel)?void 0:e.state,{fullscreenTitle:i}=this,o={"esri-disabled":"disabled"===t||"feature-unsupported"===t};return(0,u.j)("div",{bind:this,class:this.classes("esri-fullscreen esri-widget--button esri-widget",o),role:"button",tabIndex:0,onclick:this._toggle,onkeydown:this._toggle,"aria-label":i,title:i},this.renderIcon(),this.renderTitle())}renderIcon(){var e;const t=null==(e=this.viewModel)?void 0:e.state,i={"esri-icon-zoom-out-fixed":"ready"===t||"disabled"===t||"feature-unsupported"===t,"esri-icon-zoom-in-fixed":"active"===t};return(0,u.j)("span",{class:this.classes("esri-icon",i),"aria-hidden":"true"})}renderTitle(){return(0,u.j)("span",{class:"esri-icon-font-fallback-text"},this.fullscreenTitle)}_toggle(){this.viewModel.toggle()}};(0,o._)([(0,a.B)("viewModel.element")],b.prototype,"element",void 0),(0,o._)([(0,r.Cb)({readOnly:!0,dependsOn:["viewModel.state","messages"]}),(0,d.G)()],b.prototype,"fullscreenTitle",null),(0,o._)([(0,r.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0),(0,o._)([(0,r.Cb)(),(0,d.G)(),(0,c.H)("esri/widgets/Fullscreen/t9n/Fullscreen")],b.prototype,"messages",void 0),(0,o._)([(0,a.B)("viewModel.view")],b.prototype,"view",void 0),(0,o._)([(0,r.Cb)({type:y}),(0,d.G)("viewModel.state")],b.prototype,"viewModel",void 0),(0,o._)([(0,l.h)()],b.prototype,"_toggle",null),b=(0,o._)([(0,s.j)("esri.widgets.Fullscreen")],b);const g=b},94576:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>O});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(51894),a=i(87566),s=(i(10923),i(57002),i(86035),i(40450),i(24258)),l=i(9200),c=i(90846),d=i(52243),u=i(19401),p=i(90806),h=i(32656),f=i(39105),m=i(3766),v=i(58484),y=i(14071),b=(i(89771),i(59691)),g=i(80621),_=i(69642),w=i(49322),k=i(55934);let S=class extends k.Z{constructor(e){super(e),this._locateController=null,this._handles=new b.Z,this.locate=this.locate.bind(this)}initialize(){this._handles.add([(0,g.on)(this,"view.popup","trigger-action",(e=>(0,_.aG)({event:e,view:this.view}))),(0,m.qe)((()=>{var e;const{graphic:t,view:i}=this;(null==i||null==(e=i.graphics)?void 0:e.includes(t))&&this._updatePopupTemplate(t)}))])}destroy(){this.cancelLocate(),this._handles.destroy(),this._handles=null}get state(){return this._geolocationUsable?this.get("view.ready")?this._locateController?"locating":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),"disabled"===this.state)throw new h.Z("locate:disabled-state","Cannot locate when disabled.");if("feature-unsupported"===this.state)throw new h.Z("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=(0,f.createAbortController)();this._locateController=e;try{let t=await(0,w.nu)(this.geolocationOptions);return t=await this._setPosition(t,{signal:e.signal}),this._locateController!==e?null:(this.graphic&&(this.graphic=this.graphic.clone(),await this._updatePopupTemplate(this.graphic),this.view.graphics.push(this.graphic)),this.emit("locate",{position:t}),this._locateController=null,t)}catch(e){throw this._locateController=null,this.emit("locate-error",{error:e}),e}}cancelLocate(){this._clear(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(e){const t=await async function(){const e=await(0,y.ME)("esri/widgets/Locate/t9n/Locate");return new v.default({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[_.tP.clone()],content:[{type:"fields"}]})}(),i=e!==this.graphic;this.destroyed||i||(e.popupTemplate=t)}};(0,o._)([(0,n.Cb)()],S.prototype,"_locateController",void 0),(0,o._)([(0,n.Cb)({dependsOn:["view.ready","_locateController","_geolocationUsable"],readOnly:!0})],S.prototype,"state",null),(0,o._)([(0,n.Cb)()],S.prototype,"locate",null),(0,o._)([(0,n.Cb)()],S.prototype,"cancelLocate",null),S=(0,o._)([(0,a.j)("esri.widgets.Locate.LocateViewModel")],S);const C=S;let x=class extends p.default{constructor(e,t){super(e,t),this.geolocationOptions=null,this.goToLocationEnabled=null,this.goToOverride=null,this.graphic=null,this.iconClass="esri-icon-north-navigation",this.label=void 0,this.messages=null,this.messagesCommon=null,this.scale=null,this.useHeadingEnabled=null,this.view=null,this.viewModel=new C}cancelLocate(){}locate(){}render(){const e=this.get("viewModel.state"),t="locating"===e,i={"esri-disabled":"disabled"===e,"esri-hidden":"feature-unsupported"===e},o={"esri-icon-loading-indicator":t,"esri-rotating":t,"esri-icon-locate":!t},n="locating"===e?this.messagesCommon.cancel:this.messages.title;return(0,u.j)("div",{bind:this,class:this.classes("esri-locate esri-widget--button esri-widget",i),hidden:"feature-unsupported"===e,onclick:this._locate,onkeydown:this._locate,role:"button",tabIndex:0,"aria-label":n,title:n},(0,u.j)("span",{"aria-hidden":"true",class:this.classes("esri-icon",o)}),(0,u.j)("span",{class:"esri-icon-font-fallback-text"},this.messages.title))}_locate(){const{viewModel:e}=this;"locating"===e.state?e.cancelLocate():e.locate()}};(0,o._)([(0,r.B)("viewModel.geolocationOptions")],x.prototype,"geolocationOptions",void 0),(0,o._)([(0,r.B)("viewModel.goToLocationEnabled")],x.prototype,"goToLocationEnabled",void 0),(0,o._)([(0,r.B)("viewModel.goToOverride")],x.prototype,"goToOverride",void 0),(0,o._)([(0,r.B)("viewModel.graphic")],x.prototype,"graphic",void 0),(0,o._)([(0,n.Cb)()],x.prototype,"iconClass",void 0),(0,o._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],x.prototype,"label",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/widgets/Locate/t9n/Locate")],x.prototype,"messages",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/t9n/common")],x.prototype,"messagesCommon",void 0),(0,o._)([(0,r.B)("viewModel.scale")],x.prototype,"scale",void 0),(0,o._)([(0,r.B)("viewModel.useHeadingEnabled")],x.prototype,"useHeadingEnabled",void 0),(0,o._)([(0,r.B)("viewModel.view")],x.prototype,"view",void 0),(0,o._)([(0,n.Cb)({type:C}),(0,c.G)("viewModel.state"),(0,d.s)(["locate","locate-error"])],x.prototype,"viewModel",void 0),(0,o._)([(0,r.B)("viewModel.cancelLocate")],x.prototype,"cancelLocate",null),(0,o._)([(0,r.B)("viewModel.locate")],x.prototype,"locate",null),(0,o._)([(0,s.h)()],x.prototype,"_locate",null),x=(0,o._)([(0,a.j)("esri.widgets.Locate")],x);const O=x},67565:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>b});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(51894),a=i(87566),s=(i(10923),i(57002),i(86035),i(39105)),l=(i(40450),i(9200)),c=i(90846),d=i(19401),u=i(90806),p=i(82677),h=i(93533),f=i(65867);let m=class extends p.default{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){void 0!==e?this._override("areaUnit",e):this._clearOverride("areaUnit")}get linearUnit(){return this.defaultUnit}set linearUnit(e){void 0!==e?this._override("linearUnit",e):this._clearOverride("linearUnit")}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};(0,o._)([(0,n.Cb)({type:["area","distance","direct-line"]})],m.prototype,"activeTool",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"activeViewModel",void 0),(0,o._)([(0,n.Cb)({type:h.fN,dependsOn:["defaultUnit"]})],m.prototype,"areaUnit",null),(0,o._)([(0,n.Cb)(f.Y)],m.prototype,"defaultUnit",void 0),(0,o._)([(0,n.Cb)({type:h.oD,dependsOn:["defaultUnit"]})],m.prototype,"linearUnit",null),(0,o._)([(0,n.Cb)({dependsOn:["activeViewModel","activeViewModel.state"],readOnly:!0})],m.prototype,"state",null),(0,o._)([(0,n.Cb)()],m.prototype,"view",void 0),m=(0,o._)([(0,a.j)("esri.widgets.Measurement.MeasurementViewModel")],m);const v=m;let y=class extends u.default{constructor(e,t){super(e,t),this._widgets=new Map,this.activeTool=null,this.activeWidget=null,this.areaUnit=null,this.iconClass="esri-icon-measure",this.label=void 0,this.linearUnit=null,this.messages=null,this.view=null,this.viewModel=new v}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.own([this.watch(["view","activeTool"],(()=>{this._getActiveWidget().then((e=>{this._set("activeWidget",e)}))})),this.watch("activeWidget",((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),this.watch(["areaUnit","linearUnit"],(()=>this._updateWidgetUnits()))])}destroy(){this._destroyWidgets()}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return(0,d.j)("div",{class:"esri-measurement"},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&(0,s.ignoreAbortErrors)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:o,view:n}=this;switch(e){case"area":{const{type:e}=n;switch(e){case"2d":return new(0,(await Promise.all([i.e(8696),i.e(6563),i.e(1518),i.e(8157),i.e(7333),i.e(2551),i.e(5988),i.e(6814),i.e(5798),i.e(5666),i.e(530),i.e(6205),i.e(1731),i.e(5062),i.e(2412),i.e(7551),i.e(9647),i.e(1394)]).then(i.bind(i,95550))).default)({view:n,unit:t});case"3d":return new(0,(await Promise.all([i.e(8696),i.e(6563),i.e(1518),i.e(8157),i.e(7333),i.e(2551),i.e(5988),i.e(6814),i.e(5798),i.e(5666),i.e(530),i.e(6205),i.e(1731),i.e(5062),i.e(8291),i.e(7025),i.e(7483)]).then(i.bind(i,17483))).default)({view:n,unit:t});default:return null}}case"distance":return new(0,(await Promise.all([i.e(8696),i.e(6563),i.e(1518),i.e(8157),i.e(7333),i.e(2551),i.e(5988),i.e(6814),i.e(5798),i.e(5666),i.e(530),i.e(6205),i.e(1731),i.e(5062),i.e(2412),i.e(7551),i.e(9647),i.e(2209)]).then(i.bind(i,51067))).default)({view:n,unit:o});case"direct-line":return new(0,(await Promise.all([i.e(8696),i.e(6563),i.e(1518),i.e(8157),i.e(7333),i.e(2551),i.e(5988),i.e(6814),i.e(5798),i.e(5666),i.e(530),i.e(6205),i.e(1731),i.e(5062),i.e(2412),i.e(8291),i.e(5736),i.e(7025),i.e(2793)]).then(i.bind(i,32793))).default)({view:n,unit:o});default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_updateWidgetUnits(){this._widgets.forEach((e=>{const{areaUnit:t,linearUnit:i}=this;e.unit=function(e){return e&&("esri.widgets.AreaMeasurement2D"===e.declaredClass||"esri.widgets.AreaMeasurement3D"===e.declaredClass)}(e)?t:i}))}};(0,o._)([(0,r.B)("viewModel.activeTool")],y.prototype,"activeTool",void 0),(0,o._)([(0,n.Cb)({readOnly:!0}),(0,c.G)()],y.prototype,"activeWidget",void 0),(0,o._)([(0,r.B)("viewModel.areaUnit")],y.prototype,"areaUnit",void 0),(0,o._)([(0,n.Cb)()],y.prototype,"iconClass",void 0),(0,o._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],y.prototype,"label",void 0),(0,o._)([(0,r.B)("viewModel.linearUnit")],y.prototype,"linearUnit",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/widgets/Measurement/t9n/Measurement")],y.prototype,"messages",void 0),(0,o._)([(0,r.B)("viewModel.view"),(0,c.G)()],y.prototype,"view",void 0),(0,o._)([(0,n.Cb)({type:v}),(0,c.G)(["viewModel.state"])],y.prototype,"viewModel",void 0),y=(0,o._)([(0,a.j)("esri.widgets.Measurement")],y);const b=y},22204:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ge});var o=i(56140),n=(i(95830),i(36544)),r=(i(68055),i(79881)),a=i(51894),s=i(87566),l=i(10923),c=(i(57002),i(86035),i(10180)),d=i(83477),u=i(80621),p=i(40450),h=i(9200),f=i(90846),m=i(19401),v=i(90806),y=i(70026),b=i(55498),g=i(82677),_=i(59691);let w=class extends g.default{constructor(e){super(e),this._handles=new _.Z,this.state="pending",this.url=""}initialize(){this._handles.add([(0,u.init)(this,["extension","name"],(()=>this._setFormattedFileName()))])}destroy(){this._handles.destroy()}_setFormattedFileName(){if(!this.name||!this.extension)return;let e=this.name+"."+this.extension;this.count&&(e=this.name+"("+this.count+")."+this.extension),this.formattedName=e}};(0,o._)([(0,r.Cb)()],w.prototype,"count",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"error",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"extension",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"formattedName",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"name",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"state",void 0),(0,o._)([(0,r.Cb)()],w.prototype,"url",void 0),w=(0,o._)([(0,s.j)("esri.widgets.print.FileLink")],w);const k=w;var S=i(32656),C=i(39105),x=i(52937),O=i(21979),A=i(54721),P=(i(89771),i(809)),M=i(32797),j=i(65984),T=i(33517),E=i(12783),I=i(80705),D=i(15187);let L=class extends g.default{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.view=null}};(0,o._)([(0,r.Cb)()],L.prototype,"extent",void 0),(0,o._)([(0,r.Cb)()],L.prototype,"extraParameters",void 0),(0,o._)([(0,r.Cb)()],L.prototype,"outSpatialReference",void 0),(0,o._)([(0,r.Cb)()],L.prototype,"template",void 0),(0,o._)([(0,r.Cb)()],L.prototype,"view",void 0),L=(0,o._)([(0,s.j)("esri.tasks.support.PrintParameters")],L);const R=L;var N=i(58385);let B=class extends N.wq{constructor(e){super(e),this.description=null,this.format=null,this.label=null,this.layout=null,this.layoutOptions=null}};(0,o._)([(0,r.Cb)()],B.prototype,"description",void 0),(0,o._)([(0,r.Cb)({json:{read:T.i}})],B.prototype,"format",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"label",void 0),(0,o._)([(0,r.Cb)({json:{read:E.i}})],B.prototype,"layout",void 0),(0,o._)([(0,r.Cb)()],B.prototype,"layoutOptions",void 0),B=(0,o._)([(0,s.j)("esri.widgets.Print.CustomTemplate")],B);const F=B,V=d.Z.ofType(F);let G=class extends P.Z{constructor(e){super(e),this._handles=new _.Z,this._viewpoint=null,this.allowedFormats="all",this.allowedLayouts="all",this.defaultTemplates=new V,this.includeDefaultTemplates=!0,this.effectivePrintServiceUrl=null,this.error=null,this.portal=M.Z.getDefault(),this.printServiceUrl=null,this.scaleEnabled=!1,this.templatesInfo=null,this.updateDelay=1e3,this.view=null,this.print=this.print.bind(this)}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get printTask(){return new I.default(this.effectivePrintServiceUrl,{updateDelay:this.updateDelay})}get state(){return"loading"===this.loadStatus?"initializing":this.error||"failed"===this.loadStatus?"error":this.get("view.ready")&&"loaded"===this.loadStatus?"ready":"disabled"}async load(e){return this.addResolvingPromise(this._loadResources(e).catch((e=>this.error=e))),this}print(e){let t;if(!this.view)return(0,C.reject)(new S.Z("print:view-required","view is not set"));this.scaleEnabled?(this._viewpoint||(this._viewpoint=this.view.viewpoint.clone()),t=this._getExtent(this._viewpoint,e.outScale)):(this._viewpoint=null,t=this._getExtent(this.view.viewpoint)),function(e){if(e.layoutOptions||(e.layoutOptions={}),e.layoutOptions.customTextElements||(e.layoutOptions.customTextElements=[]),!e.layoutOptions.customTextElements.find((e=>"date"in e))){const{customTextElements:t}=e.layoutOptions;t.push({date:(0,O.p6)(Date.now(),(0,O.Ze)("short-date"))})}}(e);const i=new R({view:this.view,template:e,extent:t});return this.printTask.execute(i).catch((e=>{const t="print-task:cim-symbol-unsupported"===e.name?e.message:"An error occurred while exporting the web map.";return(0,C.reject)(new S.Z("print:export-error",t,{error:e}))}))}async _loadResources(e){let t=[];const{printServiceUrl:i}=this;if(!i){var o;if(this.destroyed)return;const{portal:i}=this;try{await i.load(e)}catch(e){throw new S.Z("print:could-not-load-portal","Cannot load print resource information from portal",{url:this.effectivePrintServiceUrl})}const r=null==(o=i.helperServices)?void 0:o.printTask;var n;r&&(this._set("effectivePrintServiceUrl",r.url),t=(null!=(n=null==r?void 0:r.templates)?n:[]).map((e=>F.fromJSON(e))))}t.length>0&&this.defaultTemplates.addMany(t),await this._loadServiceDescription(e)}async _loadServiceDescription(e){const t=await this._getPrintTemplatesFromService(e);this._set("templatesInfo",t)}_getPrintTemplatesFromService(e){if(-1===this.effectivePrintServiceUrl.toLowerCase().split("/").indexOf("gpserver"))throw new S.Z("print:invalid-print-service-url","Can't fetch print templates information from provided URL",{url:this.effectivePrintServiceUrl});return(0,A.default)(this.effectivePrintServiceUrl,{...e,query:{f:"json"},timeout:6e4}).then((e=>{const t=e&&e.data,i=t&&t.parameters;let o=null,n=null;return i.forEach((e=>{let t,i=e.choiceList&&e.choiceList.slice();i&&i.length&&e.defaultValue&&(t=i.indexOf(e.defaultValue)),t>-1&&(i.splice(t,1),i.unshift(e.defaultValue));const r=(e,t)=>{const i="all"===t?e:e.filter((e=>t.indexOf(e)>-1));return 0===i.length?e:i};if("Format"===e.name){const t=r(i.map(T.i),this.allowedFormats),n=(0,T.i)(e.defaultValue);o={defaultValue:t.includes(n)?n:t[0],choiceList:t}}else if("Layout_Template"===e.name){let t,o;i=i.filter((e=>"map_only"!==e.toLowerCase())),i.some(((e,i)=>{const o=e.toLowerCase();return o.indexOf("letter")>-1&&o.indexOf("landscape")>-1?(t=i,!0):o.indexOf("a4")>-1&&o.indexOf("landscape")>-1&&(t=i,!1)})),t&&(o=i[t],i.splice(t,1),i.unshift(o));const a=r(i.map(E.i),this.allowedLayouts),s=(0,E.i)(e.defaultValue);n={defaultValue:a.includes(s)?s:a[0],choiceList:a}}})),this.error=null,{format:o,layout:n}})).catch((e=>{throw new S.Z("print:unavailable-service-info","Can't fetch templates info from service",{error:e})}))}_getExtent(e,t){const i=t||this.view.scale,o=this.get("view.size"),n=e?e.targetGeometry:null;return(0,D.bk)(new x.Z,new j.Z({scale:i,targetGeometry:n}),o)}};(0,o._)([(0,r.Cb)()],G.prototype,"allowedFormats",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"allowedLayouts",void 0),(0,o._)([(0,r.Cb)({type:V})],G.prototype,"defaultTemplates",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"includeDefaultTemplates",void 0),(0,o._)([(0,r.Cb)({aliasOf:{source:"printServiceUrl",overridable:!0},readOnly:!0})],G.prototype,"effectivePrintServiceUrl",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"error",void 0),(0,o._)([(0,r.Cb)({type:M.Z})],G.prototype,"portal",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"printServiceUrl",void 0),(0,o._)([(0,r.Cb)({dependsOn:["effectivePrintServiceUrl"],type:I.default})],G.prototype,"printTask",null),(0,o._)([(0,r.Cb)({dependsOn:["view.ready","error","loadStatus"],readOnly:!0})],G.prototype,"state",null),(0,o._)([(0,r.Cb)()],G.prototype,"scaleEnabled",void 0),(0,o._)([(0,r.Cb)({readOnly:!0})],G.prototype,"templatesInfo",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"updateDelay",void 0),(0,o._)([(0,r.Cb)()],G.prototype,"view",void 0),G=(0,o._)([(0,s.j)("esri.widgets.Print.PrintViewModel")],G);const U=G;let $=class extends g.default{constructor(e){super(e),this.attributionEnabled=!0,this.author=null,this.copyright=null,this.dpi=96,this.fileName=null,this.forceFeatureAttributes=!1,this.format=null,this.layout=null,this.legendEnabled=!0,this.height=null,this.scale=null,this.scaleEnabled=!1,this.title=null,this.width=null}};(0,o._)([(0,r.Cb)()],$.prototype,"attributionEnabled",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"author",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"copyright",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"dpi",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"fileName",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"forceFeatureAttributes",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"format",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"layout",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"legendEnabled",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"height",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"scale",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"scaleEnabled",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"title",void 0),(0,o._)([(0,r.Cb)()],$.prototype,"width",void 0),$=(0,o._)([(0,s.j)("esri.widgets.Print.TemplateOptions")],$);const Z=$,W=d.Z.ofType(k),J="esri-print__input-text",q="esri-print__layout-tab",z="esri-print__template-list",H="esri-print__advanced-options-button",Y="esri-print__advanced-options-button-container",X="esri-print__advanced-options-button-title",K="esri-print__advanced-options-button-icon--opened",Q="esri-print__advanced-options-button-icon--closed",ee="esri-print__advanced-options-button-icon--closed-rtl",te="esri-print__form-section-container",ie="esri-print__advanced-options-section",oe="esri-print__advanced-options-container",ne="esri-print__panel-container",re="esri-widget",ae="esri-widget--panel",se="esri-widget--button",le="esri-button",ce="esri-select",de="esri-widget__heading",ue="esri-input",pe="esri-print__exported-file--error",he="esri-menu__list-item",fe="esri-icon-right-triangle-arrow",me="esri-icon-left-triangle-arrow",ve="esri-icon-down-arrow",ye=n.Z.getLogger("esri.widgets.Print");let be=class extends v.default{constructor(e,t){super(e,t),this._activeTabFocusRequested=!1,this._advancedOptionsVisibleForLayout=!1,this._advancedOptionsVisibleForMapOnly=!1,this._awaitingServerResponse=!1,this._exportedFileNameMap={},this._focusedTemplateIndex=0,this._layoutTabSelected=!0,this._pendingExportScroll=!1,this._rootNode=null,this._selectTemplateNode=null,this._templateListPopover=new b.Z({owner:this,placement:"top",offset:[0,-100],anchorElement:()=>this._selectTemplateNode,renderContentFunction:this.renderTemplateList}),this.allowedFormats=null,this.allowedLayouts=null,this.exportedLinks=new W,this.iconClass="esri-icon-printer",this.includeDefaultTemplates=null,this.label=void 0,this.portal=null,this.printServiceUrl=null,this.templateOptions=new Z,this.view=null,this.viewModel=new U,this.handleTemplateListCreation=e=>e.focus(),this.handleTemplateChildBlur=e=>{var t;(null==(t=e.relatedTarget)?void 0:t.closest(`.${z}`))||this.handleCloseTemplateSelection()},this.handleCloseTemplateSelection=()=>{this._focusedTemplateIndex=0,this._templateListPopover.open=!1,this._selectTemplateNode.focus()},this.handleSelectTemplateClick=()=>{this._focusedTemplateIndex=0,this._templateListPopover.open=!0},this.handleTemplateListClick=e=>{const t=e.target;this.applyTemplate(t["data-template"])},this.handleTemplateListKeyDown=e=>{if("Enter"===e.key||" "===e.key)return this.applyTemplate(this.viewModel.defaultTemplates.getItemAt(this._focusedTemplateIndex)),void e.preventDefault();if("ArrowDown"===e.key||"ArrowUp"===e.key){const{defaultTemplates:t}=this.viewModel,i="ArrowDown"===e.key?1:-1,o=(this._focusedTemplateIndex+i)%t.length;this._focusedTemplateIndex=o<0?t.length-1:o;const n=e.currentTarget;(0,p._q)(n.querySelectorAll(`.${he}`)[this._focusedTemplateIndex],n.parentElement),e.preventDefault()}"Escape"===e.key&&this.handleCloseTemplateSelection()},this._removeLink=e=>{const t=e.currentTarget["data-item"];t&&"error"===t.state&&this.exportedLinks.remove(t)},this._focusOnTabChange=this._focusOnTabChange.bind(this)}initialize(){this.own([(0,u.init)(this,"viewModel.templatesInfo",(e=>{const{format:t,layout:i}=this.templateOptions;if(e){const o=i===e.layout.defaultValue||i&&"MAP_ONLY"===i.toUpperCase()||e.layout.choiceList&&e.layout.choiceList.indexOf(i)>-1,n=t===e.format.defaultValue||e.format.choiceList&&e.format.choiceList.indexOf(t)>-1;o||(i&&ye.warn("User sets an invalid layout, resetting it to the default valid one..."),this.templateOptions.layout=e.layout.defaultValue),n||(t&&ye.warn("User sets an invalid format, resetting it to the default valid one..."),this.templateOptions.format=e.format.defaultValue),i&&"MAP_ONLY"===i.toUpperCase()&&(this._layoutTabSelected=!1)}})),(0,u.init)(this,"templateOptions.format",(e=>{const{viewModel:{templatesInfo:t}}=this;if(t&&e){let i=!1;t.format.choiceList&&t.format.choiceList.forEach((t=>{t.toUpperCase()===e.toUpperCase()&&(this.templateOptions.format=t,i=!0)})),i||(this.templateOptions.format=t.format.defaultValue,ye.warn("User sets an invalid format, resetting it to the default valid one...")),this.scheduleRender()}})),(0,u.init)(this,"templateOptions.layout",(e=>{const{viewModel:{templatesInfo:t}}=this;if(t&&e){this._layoutTabSelected="MAP_ONLY"!==e.toUpperCase();let i=!this._layoutTabSelected;i||t.layout.choiceList&&t.layout.choiceList.forEach((t=>{t.toUpperCase()===e.toUpperCase()&&(this.templateOptions.layout=t,i=!0)})),i||(this.templateOptions.layout=t.layout.defaultValue,ye.warn("User sets an invalid layout, resetting it to the default valid one...")),this.scheduleRender()}})),(0,u.init)(this,"templateOptions.dpi",(e=>{e<=0?this.templateOptions.dpi=1:this.scheduleRender()})),(0,u.init)(this,"viewModel.view.scale",(e=>{const{scale:t,scaleEnabled:i}=this.templateOptions;i&&t||(this.templateOptions.scale=e)}))]);const{height:e,width:t}=this.templateOptions;this.templateOptions.width=t||800,this.templateOptions.height=e||1100;const i=setTimeout((()=>{this._awaitingServerResponse=!0,this.scheduleRender()}),500);this.viewModel.load().then((()=>clearTimeout(i)))}render(){const{attributionEnabled:e,author:t,copyright:i,dpi:o,format:n,height:r,layout:a,legendEnabled:s,scaleEnabled:l,scale:c,width:d}=this.templateOptions,u="ready"!==this.get("viewModel.state"),p=this.renderTitleOrFileNameSection(),{includeDefaultTemplates:h,messages:f,viewModel:v}=this,y=this.get("viewModel.templatesInfo.format.choiceList")||[],b=y.length>0?y.map((e=>(0,m.j)("option",{key:e,selected:e===n,value:e},e.toUpperCase()))):(0,m.j)("option",{key:"format-default-option"},f.formatDefaultOption),g=(0,m.j)("div",{class:te},(0,m.j)("label",null,f.fileFormatTitle,(0,m.j)("select",{class:ce,onchange:this._updateFromOption,"data-target-property":"format",bind:this},b))),_=this.get("viewModel.templatesInfo.layout.choiceList")||[],w=_.length>0?_.map((e=>{const t=e===a,i=f[e]||e;return(0,m.j)("option",{key:e,selected:t,value:e},i)})):(0,m.j)("option",{key:"layout-default-option"},f.layoutDefaultOption),k=(0,m.j)("div",{class:te},(0,m.j)("label",null,f.layoutTitle,(0,m.j)("select",{class:ce,onchange:this._updateFromOption,"data-target-property":"layout",bind:this},w))),S=(0,m.j)("div",{class:te},(0,m.j)("label",null,f.dpi,(0,m.j)("input",{type:"number",class:this.classes(J,ue),"data-input-name":"dpi",onchange:this._handleDPIChange,value:`${o}`,min:"1",tabIndex:0,bind:this}))),C=(0,m.j)("div",{class:this.classes("esri-print__scale-info-container",te)},(0,m.j)("label",null,(0,m.j)("input",{"data-option-name":"scaleEnabled",checked:l,type:"checkbox",tabIndex:0,onchange:this._toggleInputValue,bind:this}),f.scale),(0,m.j)("div",{class:"esri-print__scale-input-container"},(0,m.j)("input",{"aria-label":f.scaleLabel,"aria-valuenow":`${c}`,role:"spinbutton",type:"number",class:this.classes(J,ue,"esri-print__scale-input"),tabIndex:0,"data-input-name":"scale",onchange:this._updateInputValue,disabled:!l,value:`${c}`,bind:this}),(0,m.j)("button",{type:"button","aria-label":f.reset,class:this.classes(se,"esri-print__refresh-button","esri-icon-refresh"),tabIndex:0,onclick:this._resetToCurrentScale,bind:this}))),x=this._advancedOptionsVisibleForLayout?(0,m.j)("div",{"aria-labelledby":`${this.id}__advancedOptionsForLayout`,class:oe},C,(0,m.j)("div",{class:this.classes("esri-print__author-info-container",te)},(0,m.j)("label",null,f.author,(0,m.j)("input",{type:"text",value:t,class:this.classes(J,ue),tabIndex:0,"data-input-name":"author",onchange:this._updateInputValue,bind:this}))),(0,m.j)("div",{class:this.classes("esri-print__copyright-info-container",te)},(0,m.j)("label",null,f.copyright,(0,m.j)("input",{type:"text",class:this.classes(J,ue),tabIndex:0,value:i,"data-input-name":"copyright",onchange:this._updateInputValue,bind:this}))),S,(0,m.j)("div",{class:this.classes("esri-print__legend-info-container",te)},(0,m.j)("label",null,(0,m.j)("input",{type:"checkbox","data-option-name":"legendEnabled",tabIndex:0,checked:s,onchange:this._toggleInputValue,bind:this}),f.legend))):null,O=this._advancedOptionsVisibleForMapOnly?(0,m.j)("div",{"aria-labelledby":`${this.id}__advancedOptionsForMapOnly`,class:oe},C,S,(0,m.j)("div",{class:te},(0,m.j)("label",null,(0,m.j)("input",{"data-option-name":"attributionEnabled",type:"checkbox",onchange:this._toggleInputValue,tabIndex:0,checked:e,bind:this}),f.attribution))):null,A=this._layoutTabSelected?(0,m.j)("section",{key:"esri-print__layoutContent",id:`${this.id}__layoutContent`,"aria-labelledby":`${this.id}__layoutTab`,class:"esri-print__layout-section",role:"tabpanel","aria-selected":this._layoutTabSelected},(0,m.j)("div",{class:ne},p,k,this._layoutTabSelected?g:null),(0,m.j)("div",{class:this.classes(ne,ie)},(0,m.j)("button",{"aria-label":f.advancedOptions,"aria-expanded":this._advancedOptionsVisibleForLayout?"true":"false",class:H,onclick:this._showAdvancedOptions,bind:this,type:"button"},(0,m.j)("div",{class:Y},(0,m.j)("span",{"aria-hidden":"true",class:this.classes(fe,Q)}),(0,m.j)("span",{"aria-hidden":"true",class:this.classes(me,ee)}),(0,m.j)("span",{"aria-hidden":"true",class:this.classes(ve,K)}),(0,m.j)("span",{class:X},f.advancedOptions))),x)):(0,m.j)("section",{key:"esri-print__mapOnlyContent",id:`${this.id}__mapOnlyContent`,"aria-selected":!this._layoutTabSelected,"aria-labelledby":`${this.id}__mapOnlyTab`,class:"esri-print__map-only-section",role:"tabpanel"},(0,m.j)("div",{class:ne},p,this._layoutTabSelected?null:g,(0,m.j)("div",{class:this.classes("esri-print__size-container",te)},(0,m.j)("div",{class:"esri-print__width-container"},(0,m.j)("label",null,f.width,(0,m.j)("input",{type:"number",class:this.classes(J,ue),"data-input-name":"width",onchange:this._updateInputValue,value:`${d}`,tabIndex:0,bind:this}))),(0,m.j)("div",{class:"esri-print__height-container"},(0,m.j)("label",null,f.height,(0,m.j)("input",{type:"number",class:this.classes(J,ue),"data-input-name":"height",onchange:this._updateInputValue,value:`${r}`,tabIndex:0,bind:this}))),(0,m.j)("button",{type:"button","aria-label":f.swap,class:this.classes(se,"esri-print__swap-button","esri-icon-swap"),onclick:this._switchInput,tabIndex:0,bind:this})),(0,m.j)("div",{class:this.classes(ne,ie)},(0,m.j)("button",{"aria-label":f.advancedOptions,"aria-expanded":this._advancedOptionsVisibleForMapOnly?"true":"false",type:"button",class:H,onclick:this._showAdvancedOptions,bind:this},(0,m.j)("div",{class:Y},(0,m.j)("span",{"aria-hidden":"true",class:this.classes(fe,Q)}),(0,m.j)("span",{"aria-hidden":"true",class:this.classes(me,ee)}),(0,m.j)("span",{"aria-hidden":"true",class:this.classes(ve,K)}),(0,m.j)("span",{class:X},f.advancedOptions))),O))),P=this.exportedLinks.toArray(),M=this._renderExportedLink(P),j={"esri-button--disabled":u||!a&&!n},T=null!=this.get("view")&&"2d"!==this.get("view.type"),E=(0,m.j)("div",{class:"esri-print__panel--error"},T?f.sceneViewError:f.serviceError),I=(0,m.j)("div",null,(0,m.j)("ul",{class:"esri-print__layout-tab-list",role:"tablist",onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,bind:this},(0,m.j)("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,id:`${this.id}__layoutTab`,"data-tab-id":"layoutTab",class:q,role:"tab",tabIndex:0,"aria-selected":`${this._layoutTabSelected}`},f.layoutTab),(0,m.j)("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,id:`${this.id}__mapOnlyTab`,"data-tab-id":"mapOnlyTab",class:q,role:"tab",tabIndex:0,"aria-selected":`${!this._layoutTabSelected}`},f.mapOnlyTab)),A,(0,m.j)("button",{"aria-label":f.exportDescription,type:"button",class:this.classes("esri-print__export-button",le,j),disabled:u,tabIndex:0,onclick:this._handlePrintMap,bind:this},f.export),h&&v.defaultTemplates.length>0?this.renderTemplateSectionTrigger():null,(0,m.j)("div",{class:"esri-print__export-panel-container",afterUpdate:this._scrollExportIntoView,bind:this},(0,m.j)("h3",{class:this.classes("esri-print__export-title",de)},f.exportText),P.length>0?null:(0,m.j)("div",null,(0,m.j)("div",null,f.exportHint)),M)),D=(0,m.j)("div",{class:"esri-print__container"},(0,m.j)("header",{class:"esri-print__header-title"},f.export),this.error||T||!this.view?E:I),L="initializing"===this.get("viewModel.state")?this._renderLoader():D;return(0,m.j)("div",{afterCreate:this._handleRootAfterCreate,bind:this,class:this.classes("esri-print",re,ae)},L)}renderTemplateSectionTrigger(){const{messages:e,_templateListPopover:t}=this,i=t.open;return(0,m.j)("button",{afterCreate:e=>this._selectTemplateNode=e,"aria-controls":i?`${this.id}__template-selection`:"","aria-label":e.selectTemplateDescription,"aria-pressed":i.toString(),class:this.classes(le,"esri-button--tertiary","esri-print__template-button"),onclick:this.handleSelectTemplateClick,title:e.selectTemplateDescription},e.selectTemplate)}renderTemplateList(){const{messages:e,messagesCommon:t,viewModel:i}=this,{defaultTemplates:o}=i,n=e.selectTemplateDescription,r=`${this.id}__template-selection`;return(0,m.j)("div",{class:this.classes(z,re,ae),id:r},(0,m.j)("h3",{class:this.classes("esri-menu__header",de)},e.selectTemplate),(0,m.j)("div",{class:"esri-print__template-list-scroller"},(0,m.j)("ul",{afterCreate:this.handleTemplateListCreation,"aria-activedescendant":`${this.id}__template-item--${this._focusedTemplateIndex}`,"aria-label":n,class:"esri-menu__list",key:"templates",onblur:this.handleTemplateChildBlur,onclick:this.handleTemplateListClick,onkeydown:this.handleTemplateListKeyDown,role:"listbox",tabIndex:0,title:n},o.toArray().map(((e,t)=>{const{description:i}=e,o=t===this._focusedTemplateIndex;return(0,m.j)("li",{"aria-label":i,class:this.classes(he,{"esri-menu__list-item--focus":o}),"data-template":e,id:`${this.id}__template-item--${t}`,key:e.label,title:i},e.label)})))),(0,m.j)("div",{class:"esri-print__template-list-footer"},(0,m.j)("button",{type:"button",class:this.classes(le,"esri-button--secondary"),onblur:this.handleTemplateChildBlur,onclick:this.handleCloseTemplateSelection},t.done)))}applyTemplate(e){var t;const{format:i,layout:o,layoutOptions:n}=e,{templateOptions:r}=this;this._templateListPopover.open=!1,this._toggleTab("map-only"===o?"mapOnlyTab":"layoutTab",!1),i&&(r.format=i),o&&(r.layout=o),this._focusedTemplateIndex=null,r.legendEnabled=null!=(t=null==n?void 0:n.legend)?t:r.legendEnabled,this.handleCloseTemplateSelection()}renderTitleOrFileNameSection(){const{templateOptions:e,messages:t}=this;let i,o,n,r;return this._layoutTabSelected?(i=t.title,o=t.titlePlaceHolder,n=e.title,r="title"):(i=t.fileName,o=t.fileNamePlaceHolder,n=e.fileName,r="fileName"),(0,m.j)("div",{class:te,key:r},(0,m.j)("label",null,i,(0,m.j)("input",{type:"text",tabIndex:0,placeholder:o,class:this.classes(J,ue),value:n,"data-input-name":r,onchange:this._updateInputValue,bind:this})))}_handleRootAfterCreate(e){this._rootNode=e,this.own((0,c.on)(e,"scroll",(()=>{this._templateListPopover.open&&this.handleCloseTemplateSelection()})))}_focusOnTabChange(e){if(!this._activeTabFocusRequested)return;const t=e.getAttribute("data-tab-id");("layoutTab"===t&&this._layoutTabSelected||"mapOnlyTab"===t&&!this._layoutTabSelected)&&(e.focus(),this._activeTabFocusRequested=!1)}_renderLoader(){const e={"esri-print__loader":this._awaitingServerResponse};return(0,m.j)("div",{class:this.classes(e),key:"loader"})}_createFileLink(e,t){const i=t||this.messages.untitled,o=e.format.toLowerCase(),n=o.indexOf("png")>-1?"png":o,r=i+n;return void 0!==this._exportedFileNameMap[r]?this._exportedFileNameMap[r]++:this._exportedFileNameMap[r]=0,new k({name:i,extension:n,count:this._exportedFileNameMap[r]})}_toPrintTemplate(e){const{attributionEnabled:t,author:i,copyright:o,dpi:n,forceFeatureAttributes:r,format:a,height:s,layout:l,legendEnabled:c,title:d,scale:u,width:p}=e,h=new y.Z({attributionVisible:t,layoutOptions:{authorText:i||"",copyrightText:o||"",titleText:d||""},forceFeatureAttributes:r,format:a,layout:l,outScale:u});return p&&(h.exportOptions.width=p),s&&(h.exportOptions.height=s),n&&(h.exportOptions.dpi=n),c||(h.layoutOptions.legendLayers=[]),h}_resetToCurrentScale(){this.templateOptions.scale=this.viewModel.view.scale}_updateInputValue(e){const t=e.target,i=t.getAttribute("data-input-name");this.templateOptions[i]=t.value}_handleDPIChange(e){this._updateInputValue(e);const t=e.currentTarget.valueAsNumber,{height:i,width:o}=function(e){return{width:Math.round(8.3333*e),height:Math.round(11.4583*e)}}(t),{templateOptions:n}=this;n.height=i,n.width=o}_handlePrintMap(){this._pendingExportScroll=!0;const{templateOptions:e}=this,t=this._toPrintTemplate(e),i=this._layoutTabSelected?t.layoutOptions.titleText:e.fileName,o=this._createFileLink(t,i);this.exportedLinks.add(o),this.emit("submit",{link:o}),this.viewModel.print(t).then((e=>{o.set({url:e&&e.url,state:"ready"})})).catch((e=>{o.set({error:e,state:"error"})})).then((()=>{this.emit("complete",{link:o}),this.scheduleRender()}))}_updateFromOption(e){const t=e.target,i=t.selectedOptions?t.selectedOptions.item(0).value:t.options[t.selectedIndex].value,o=t.getAttribute("data-target-property");this.templateOptions[o]=i}_switchInput(){[this.templateOptions.width,this.templateOptions.height]=[this.templateOptions.height,this.templateOptions.width]}_showAdvancedOptions(){this._layoutTabSelected?this._advancedOptionsVisibleForLayout=!this._advancedOptionsVisibleForLayout:this._advancedOptionsVisibleForMapOnly=!this._advancedOptionsVisibleForMapOnly}_scrollExportIntoView(){if(this._pendingExportScroll){this._pendingExportScroll=!1;const{_rootNode:e,_rootNode:{clientHeight:t,scrollHeight:i}}=this,o=i-t;o>0&&(e.scrollTop=o)}}_toggleInputValue(e){const t=e.target,i=t.getAttribute("data-option-name");this.templateOptions[i]=t.checked,"scaleEnabled"===i&&(this.viewModel.scaleEnabled=this.templateOptions.scaleEnabled,this.templateOptions[i]||this._resetToCurrentScale())}_renderExportedLink(e){const t=this.messages;return e.map((e=>{const{error:i,url:o,formattedName:n,state:r}=e,a="error"===r,s="pending"===r,c="ready"===r,d={"esri-widget__anchor--disabled":s||a};let u=o||null;u&&(u=(0,l.qg)(u));const p=(0,l.D6)(o,location.href),h={"esri-icon-loading-indicator":s,"esri-rotating":s,"esri-icon-download":p&&c,"esri-icon-launch-link-external":!p&&c,"esri-icon-error":a,[pe]:a},f={[pe]:a};let v;v=s?t.pending:c?t.ready:t.errorMessage;const y=a?i.message:"";return(0,m.j)("div",{"aria-label":v,class:"esri-print__exported-file","data-item":e,key:n,onclick:this._removeLink,title:y},(0,m.j)("a",{"aria-label":`${n}. ${t.linkReady}`,download:n,href:u,rel:"noreferrer",tabIndex:0,target:"_blank",class:this.classes("esri-widget__anchor esri-print__exported-file-link",d)},(0,m.j)("span",{class:this.classes(h)}),(0,m.j)("span",{class:this.classes("esri-print__exported-file-link-title",f)},n)))}))}_toggleLayoutPanel(e){const t=e.target;this._toggleTab(t.getAttribute("data-tab-id"))}_toggleTab(e,t=!0){if(this._layoutTabSelected="layoutTab"===e,this._layoutTabSelected){const e=this.get("viewModel.templatesInfo.layout.choiceList");this.templateOptions.layout=e&&e[0]}else this.templateOptions.layout="MAP_ONLY";t&&(this._activeTabFocusRequested=!0)}_handleLayoutPanelKeyDown(e){const t=(0,c.kK)(e),i=e.target.getAttribute("data-tab-id");if("Enter"===t||" "===t)return this._toggleTab(i),e.preventDefault(),void e.stopPropagation();"ArrowLeft"!==t&&"ArrowRight"!==t||(this._toggleTab("layoutTab"===i?"mapOnlyTab":"layoutTab"),e.preventDefault(),e.stopPropagation())}};(0,o._)([(0,a.B)("viewModel.allowedFormats")],be.prototype,"allowedFormats",void 0),(0,o._)([(0,a.B)("viewModel.allowedLayouts")],be.prototype,"allowedLayouts",void 0),(0,o._)([(0,a.B)("viewModel.error")],be.prototype,"error",void 0),(0,o._)([(0,r.Cb)({type:W}),(0,f.G)()],be.prototype,"exportedLinks",void 0),(0,o._)([(0,r.Cb)()],be.prototype,"iconClass",void 0),(0,o._)([(0,a.B)("viewModel.includeDefaultTemplates")],be.prototype,"includeDefaultTemplates",void 0),(0,o._)([(0,r.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],be.prototype,"label",void 0),(0,o._)([(0,r.Cb)(),(0,f.G)(),(0,h.H)("esri/widgets/Print/t9n/Print")],be.prototype,"messages",void 0),(0,o._)([(0,r.Cb)(),(0,f.G)(),(0,h.H)("esri/t9n/common")],be.prototype,"messagesCommon",void 0),(0,o._)([(0,a.B)("viewModel.portal")],be.prototype,"portal",void 0),(0,o._)([(0,a.B)("viewModel.printServiceUrl")],be.prototype,"printServiceUrl",void 0),(0,o._)([(0,f.G)(),(0,r.Cb)({type:Z})],be.prototype,"templateOptions",void 0),(0,o._)([(0,a.B)("viewModel.view"),(0,f.G)()],be.prototype,"view",void 0),(0,o._)([(0,r.Cb)({type:U}),(0,f.G)(["viewModel.defaultTemplates","viewModel.templatesInfo","viewModel.state"])],be.prototype,"viewModel",void 0),be=(0,o._)([(0,s.j)("esri.widgets.Print")],be);const ge=be},80683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>y});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(51894),a=i(87566),s=(i(10923),i(57002),i(86035),i(40450),i(24258)),l=i(9200),c=i(90846),d=i(52243),u=i(19401),p=i(90806),h=i(55934);let f=class extends h.Z{constructor(e){super(e),this._watchId=null,this._trackStartingTimeoutId=null,this._settingPosition=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||null!==this._trackStartingTimeoutId?"waiting":this.tracking?"tracking":"ready":"feature-unsupported"}get tracking(){return null!==this._watchId}start(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._startTracking()}stop(){"disabled"!==this.state&&"feature-unsupported"!==this.state&&this._stopTracking()}_stopWatchingPosition(){null!==this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null)}_stopTracking(){this._clearWaitingTimer(),this._stopWatchingPosition(),this._clear()}_startTracking(){this._stopTracking();const e=navigator.geolocation.watchPosition((t=>{this._watchId=e,this._settingPosition=this._setPosition(t).then((e=>{this._clearWaitingTimer();const{view:t,graphic:i}=this;if(t&&t.graphics.remove(i),i){const e=i.clone();this.graphic=e,t&&t.graphics.push(e)}this.emit("track",{position:e})})).catch((e=>{throw this._emitError(e),this._clearWaitingTimer(),e}))}),this._handleWatchPositionError.bind(this),this.geolocationOptions);this._trackStartingTimeoutId=setTimeout((()=>{this._trackStartingTimeoutId=null}),15e3)}_handleWatchPositionError(e){this._emitError(e),this._stopTracking()}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=null,this._settingPosition=null}_emitError(e){this.emit("track-error",{error:e})}};(0,o._)([(0,n.Cb)()],f.prototype,"_watchId",void 0),(0,o._)([(0,n.Cb)()],f.prototype,"_trackStartingTimeoutId",void 0),(0,o._)([(0,n.Cb)()],f.prototype,"_settingPosition",void 0),(0,o._)([(0,n.Cb)({dependsOn:["view.ready","tracking","_geolocationUsable","_trackStartingTimeoutId","_settingPosition"],readOnly:!0})],f.prototype,"state",null),(0,o._)([(0,n.Cb)({readOnly:!0,dependsOn:["_watchId"]})],f.prototype,"tracking",null),(0,o._)([(0,n.Cb)()],f.prototype,"start",null),(0,o._)([(0,n.Cb)()],f.prototype,"stop",null),f=(0,o._)([(0,a.j)("esri.widgets.Track.TrackViewModel")],f);const m=f;let v=class extends p.default{constructor(e,t){super(e,t),this.geolocationOptions=null,this.goToLocationEnabled=null,this.goToOverride=null,this.graphic=null,this.iconClass="esri-icon-tracking",this.label=void 0,this.messages=null,this.scale=null,this.tracking=null,this.useHeadingEnabled=null,this.view=null,this.viewModel=new m}start(){}stop(){}render(){const e=this.get("viewModel.state"),t={"esri-disabled":"disabled"===e,"esri-hidden":"feature-unsupported"===e},i="tracking"===e,o={"esri-icon-tracking":!i&&"waiting"!==e,"esri-icon-pause":i,"esri-rotating":"waiting"===e,"esri-icon-loading-indicator":"waiting"===e},{messages:n}=this,r=i?n.stopTracking:n.startTracking;return(0,u.j)("div",{bind:this,class:this.classes("esri-track esri-widget--button esri-widget",t),hidden:"feature-unsupported"===e,onclick:this._toggleTracking,onkeydown:this._toggleTracking,role:"button",tabIndex:0,"aria-label":r,title:r},(0,u.j)("span",{"aria-hidden":"true",class:this.classes("esri-icon",o)}),(0,u.j)("span",{class:"esri-icon-font-fallback-text"},r))}_toggleTracking(){const e=this.viewModel;e&&"feature-unsupported"!==e.state&&"disabled"!==e.state&&("tracking"!==e.state&&"waiting"!==e.state?this.viewModel.start():this.viewModel.stop())}};(0,o._)([(0,r.B)("viewModel.geolocationOptions")],v.prototype,"geolocationOptions",void 0),(0,o._)([(0,r.B)("viewModel.goToLocationEnabled")],v.prototype,"goToLocationEnabled",void 0),(0,o._)([(0,r.B)("viewModel.goToOverride")],v.prototype,"goToOverride",void 0),(0,o._)([(0,r.B)("viewModel.graphic")],v.prototype,"graphic",void 0),(0,o._)([(0,n.Cb)()],v.prototype,"iconClass",void 0),(0,o._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],v.prototype,"label",void 0),(0,o._)([(0,n.Cb)(),(0,c.G)(),(0,l.H)("esri/widgets/Track/t9n/Track")],v.prototype,"messages",void 0),(0,o._)([(0,r.B)("viewModel.scale")],v.prototype,"scale",void 0),(0,o._)([(0,r.B)("viewModel.tracking")],v.prototype,"tracking",void 0),(0,o._)([(0,r.B)("viewModel.useHeadingEnabled")],v.prototype,"useHeadingEnabled",void 0),(0,o._)([(0,r.B)("viewModel.view"),(0,c.G)()],v.prototype,"view",void 0),(0,o._)([(0,n.Cb)({type:m}),(0,c.G)("viewModel.state"),(0,d.s)(["track","track-error"])],v.prototype,"viewModel",void 0),(0,o._)([(0,r.B)("viewModel.start")],v.prototype,"start",null),(0,o._)([(0,r.B)("viewModel.stop")],v.prototype,"stop",null),(0,o._)([(0,s.h)()],v.prototype,"_toggleTracking",null),v=(0,o._)([(0,a.j)("esri.widgets.Track")],v);const y=v},55934:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var o=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),r=i(87566),a=i(32656),s=(i(10923),i(57002),i(86035),i(39105)),l=i(82677),c=i(35470),d=i(12973),u=i(50764),p=i(15988),h=i(4338),f=i(49322);let m=class extends((0,h._)(c.Z.EventedMixin(l.default))){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=(0,d.V)("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new p.default({symbol:new u.Z({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){(0,f.Zh)()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(e,t){if(!t)return e;if("2d"===t.type){const{effectiveMaxScale:i,effectiveMinScale:o}=t.constraints;return Math.min(o,Math.max(i,e))}return e}_getScale(e){const{scale:t}=this,i="number"==typeof t?t:2500;return this._getScaleWithinConstraints(i,e)}_getHeading(e,t){const i=t&&t.spatialReference,o=i&&(i.isWebMercator||i.isGeographic),n=e.coords&&e.coords.heading;if(!(!o||"number"!=typeof n||isNaN(n)||n<0||n>360))return n}_addHeading(e){const{heading:t,target:i,view:o}=e;o&&"number"==typeof t&&!isNaN(t)&&("3d"!==o.type?"2d"===o.type&&(i.rotation=360-t):i.heading=t)}_animatePoint(e,t,i,o){const{view:n}=this;if(!this.goToLocationEnabled||!n)return(0,s.resolve)(t);const r=this.useHeadingEnabled?this._getHeading(t,n):void 0,a={target:e,scale:i};return this._addHeading({heading:r,target:a,view:n}),this.callGoTo({target:a,options:o}).then((()=>t))}async _setPosition(e,t){try{const i=await(0,f.C2)({position:e,view:this.view},t),{graphic:o}=this,{timestamp:n}=e,{coords:r}=e,{accuracy:a,altitude:s,altitudeAccuracy:l,heading:c,latitude:d,longitude:u,speed:p}=r,h={timestamp:n,accuracy:a,altitude:s,altitudeAccuracy:l,heading:c,latitude:d,longitude:u,speed:p};o&&(o.geometry=i,o.attributes=h);const m=this._getScale(this.view);return this._animatePoint(i,e,m,t)}catch(e){throw new a.Z("positioning:invalid-point","Cannot position invalid point",{error:e})}}};(0,o._)([(0,n.Cb)()],m.prototype,"_geolocationUsable",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"geolocationOptions",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"goToLocationEnabled",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"graphic",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"scale",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"useHeadingEnabled",void 0),(0,o._)([(0,n.Cb)()],m.prototype,"view",void 0),m=(0,o._)([(0,r.j)("esri.widgets.support.GeolocationPositioning")],m);const v=m},65867:(e,t,i)=>{"use strict";i.d(t,{Y:()=>n});var o=i(93533);const n={dependsOn:["view.map.portalItem?.portal.units","view.map.portalItem?.portal.user.units","view.spatialReference"],readOnly:!0,get(){const e="metric",{view:t}=this;if(!t)return e;const i=t.get("map.portalItem.portal");if(i)switch(i.get("user.units")||i.units){case e:return e;case"english":return"imperial"}return(0,o.yT)(t.spatialReference)||e}}},90024:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;var n=o(i(76910));t.map=new n.default,t.map=new n.default({portalItem:{id:"aa53eb984cea4ff6b9d46089047b00b8"}})},99364:function(e,t,i){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return n(t,e),t},a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||o(t,e,i)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createTemplate=t.addressTable=t.condosTable=t.featureLayer=void 0;var l=s(i(76603)),c=s(i(58484)),d=s(i(97948)),u=s(i(9387)),p=r(i(98675)),h=s(i(22292)),f=i(29820),m=[{name:"mailing-address",title:"mailing-address",expression:"When(IsEmpty($feature.ADDR3),$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2,$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2 + TextFormatting.NewLine + $feature.ADDR3)"},{name:"property-values",title:"property-values",expression:'"Building Value"+TextFormatting.NewLine+"$"+$feature.BLDG_VAL+TextFormatting.NewLine+"Land Value"+TextFormatting.NewLine+"$"+$feature.LAND_VAL+TextFormatting.NewLine+"Total Value"+TextFormatting.NewLine+"$"+$feature.TOTAL_VALUE_ASSD'},{name:"pin",title:"PIN",expression:"var num = $feature.PIN_NUM;var ext = $feature.PIN_EXT;return When(ext == '000',num,num+' '+ext);"},{name:"build_val",title:"Building Value",expression:"var value = $feature.BLDG_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"land_val",title:"Land Value",expression:"var value = $feature.LAND_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"total_val",title:"Total Value",expression:"var value = $feature.TOTAL_VALUE_ASSD;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"sale_price",title:"Sale Price",expression:"var value = $feature.TOTSALPRICE;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"city",title:"City",expression:"var city = $feature.CITY_DECODE;When(IsEmpty(city),'Unincorporated', Proper(city));"},{name:"township",title:"Township",expression:"var ts = $feature.TOWNSHIP_DECODE;When(IsEmpty(ts),'None', Proper(ts));"},{name:"jurisdiction",title:"Jurisdiction",expression:"var juris = $feature.PLANNING_JURISDICTION;When(juris == 'RA', 'Raleigh',juris == 'CA', 'Cary',juris == 'AP', 'Apex',juris == 'AN', 'Angier',juris == 'CL', 'Clayton',juris == 'DU', 'Durham',juris == 'FV', 'Fuquay-Varina',juris == 'GA', 'Garner',juris == 'HS', 'Holly Springs',juris == 'KN', 'Knightdale',juris == 'MO', 'Morrisville',juris == 'RO', 'Rolesville',juris == 'WF', 'Wake Forest',juris == 'WE', 'Wendell',juris == 'ZB', 'Zebulon',juris == 'WC', 'Wake County', 'Wake County');"},{name:"general",title:"general",expression:'"PIN"+TextFormatting.NewLine+$feature.PIN_NUM+" "+$feature.PIN_EXT+TextFormatting.NewLine+"REID"+TextFormatting.NewLine+$feature.REID+TextFormatting.NewLine+"City"+TextFormatting.NewLine+Proper($feature.CITY_DECODE)+TextFormatting.NewLine+"Jurisdiction"+TextFormatting.NewLine+$feature.PLANNING_JURISDICTION+TextFormatting.NewLine+"Township"+TextFormatting.NewLine+Proper($feature.TOWNSHIP_DECODE)'}],v=[{group:{title:"Electoral",layers:["Precincts","Congressional Districts","NC House of Representatives Districts","NC Senate Districts","School Board Districts","Board of Commissioners Districts","Superior Court Districts","Raleigh City Council","Morrisville Town Council Districts"]}},{group:{title:"Environmental",layers:["Special Flood Hazard Areas - FloodPlain - Floodplain","Soils","Critical Watersheds","Water Supply Watersheds"]}}],y=function(e){var t=e.detail.requestedAccordionItem.getBoundingClientRect(),i=document.querySelector("#featureDiv");requestAnimationFrame((function(){null==i||i.scrollTo({top:t.top+i.scrollTop-155,behavior:"smooth"})}))},b=function(e){var t;return e.graphic.layer.queryRelatedFeatures({relationshipId:null===(t=e.graphic.layer.relationships.find((function(e){return"CONDO_BOOKS"===e.name})))||void 0===t?void 0:t.id,objectIds:[e.graphic.getObjectId()],outFields:["BOM_DOC_NUM","DEED_DOC_NUM"]}).then((function(t){var i=t[e.graphic.getObjectId()].features[0].getAttribute("DEED_DOC_NUM"),o=t[e.graphic.getObjectId()].features[0].getAttribute("BOM_DOC_NUM"),n=document.createElement("div");if(n.setAttribute("style","display: flex;flex-direction: row;"),i){var r=document.createElement("calcite-button");r.setAttribute("scale","s"),r.setAttribute("target","_blank"),r.setAttribute("round",""),r.setAttribute("icon-start","file-text"),r.setAttribute("href","http://services.wakegov.com/booksweb/pdfview.aspx?docid="+i+"&RecordDate="),r.textContent="Deed",n.append(r)}if(o){var a=document.createElement("calcite-button");a.setAttribute("scale","s"),a.setAttribute("target","_blank"),a.setAttribute("round",""),a.setAttribute("icon-start","map"),a.setAttribute("href","http://services.wakegov.com/booksweb/pdfview.aspx?docid="+o+"&RecordDate="),a.textContent="Book of Maps",n.append(a)}return n}))},g=function(e){return f.view.map.allLayers.find((function(e){return e.title.includes("Wells")})).queryFeatures({where:"PIN_NUM = '".concat(e.graphic.attributes.PIN_NUM,"'"),returnGeometry:!1}).then((function(t){var i=document.createElement("div");if(t.features.length){var o=t.features[0].getAttribute("PIN_NUM"),n=document.createElement("calcite-button");n.setAttribute("scale","s"),n.setAttribute("target","_blank"),n.setAttribute("round",""),n.setAttribute("icon-start","link"),n.setAttribute("href","https://maps.wakegov.com/water-analysis/index.html#/?pin="+o),n.textContent="Wells",i.append(n)}return f.view.map.allLayers.find((function(e){return e.title.includes("Septic")})).queryFeatures({where:"PIN_NUM = '".concat(e.graphic.attributes.PIN_NUM,"'"),returnGeometry:!1}).then((function(e){if(e.features.length){var t=e.features[0].getAttribute("PIN_NUM"),o=document.createElement("calcite-button");o.setAttribute("scale","s"),o.setAttribute("target","_blank"),o.setAttribute("round",""),o.setAttribute("href","https://maps.wakegov.com/septic/index.html#/?pin="+t),o.setAttribute("icon-start","link"),o.textContent="Septic",i.append(o)}})),i}))};t.featureLayer=new l.default({portalItem:{id:"08050bf067bb4b20adea4b0b4f0a39e3"},spatialReference:{wkid:102100}}),t.condosTable=new l.default({portalItem:{id:"08050bf067bb4b20adea4b0b4f0a39e3"},layerId:1,spatialReference:{wkid:102100}}),t.condosTable.load(),t.addressTable=new l.default({portalItem:{id:"08050bf067bb4b20adea4b0b4f0a39e3"},layerId:4,spatialReference:{wkid:102100}}),t.addressTable.load();t.createTemplate=function(e){var i=new c.default({expressionInfos:m,content:[{type:"text",text:"<h1>{SITE_ADDRESS}</h1>"},new d.default({outFields:["*"],creator:function(e){return new u.default({url:"https://maps.raleighnc.gov/arcgis/rest/services/Locators/Locator/GeocodeServer",outSpatialReference:{wkid:4326}}).addressToLocations({address:{singleLine:e.graphic.getAttribute("SITE_ADDRESS")},outFields:["*"]}).then((function(t){var i;if(t.length){var o=t[0];if(o){var n=p.geodesicDistance(o.location,{x:e.graphic.geometry.centroid.longitude,y:e.graphic.geometry.centroid.latitude,spatialReference:{wkid:4326}}),r=e.graphic.geometry.centroid.latitude+","+e.graphic.geometry.centroid.longitude,a=document.createElement("div");a.setAttribute("style","display: flex;flex-direction: row;");var s=document.createElement("calcite-button");s.setAttribute("scale","s"),s.setAttribute("target","_blank"),s.setAttribute("round",""),s.setAttribute("icon-start","person"),s.setAttribute("href","https://maps.google.com?layer=c&cbll="+r+"&cbp=0,"+(null===(i=n.azimuth)||void 0===i?void 0:i.toString())+",0,0,0"),s.textContent="Street View",a.append(s);var l=document.createElement("calcite-button");return l.setAttribute("scale","s"),l.setAttribute("target","_blank"),l.setAttribute("href","http://services.wakegov.com/realestate/Account.asp?id="+e.graphic.getAttribute("REID")),l.setAttribute("round",""),l.setAttribute("icon-start","locator"),l.textContent="Tax Page",a.append(l),a}}}))}}),new d.default({outFields:["PIN_NUM"],creator:g}),{type:"text",text:"<h2>General</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/pin",label:"PIN"},{fieldName:"REID",label:"REID"},{fieldName:"expression/city",label:"City"},{fieldName:"expression/jurisdiction",label:"Jurisdiction"},{fieldName:"expression/township",label:"Township"}]},{type:"text",text:"<h2>Owner</h1>"},{type:"text",text:"{OWNER}<br/>{expression/mailing-address}"},{type:"text",text:"<h2>Valuation</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/build_val"},{fieldName:"expression/land_val"},{fieldName:"expression/total_val"},{fieldName:"BILLING_CLASS_DECODE",label:"Billing Class"}]},{type:"text",text:"<h2>Last Sale</h1>"},{type:"fields",fieldInfos:[{fieldName:"SALE_DATE",format:{dateFormat:"short-date"},label:"Date Sold"},{fieldName:"expression/sale_price"}]},{type:"text",text:"<h2>Deeds</h1>"},{type:"fields",fieldInfos:[{fieldName:"DEED_BOOK",label:"Book"},{fieldName:"DEED_PAGE",label:"Page"},{fieldName:"DEED_DATE",format:{dateFormat:"short-date"},label:"Deed Date"},{fieldName:"DEED_ACRES",format:{places:2},label:"Deed Acres"},{fieldName:"PROPDESC",label:"Legal Description"}]},new d.default({outFields:["OBJECTID","REID"],creator:b}),{type:"text",text:"<h2>Building</h1>"},{type:"fields",fieldInfos:[{fieldName:"HEATEDAREA",format:{digitSeparator:!0},label:"Heated Area"},{fieldName:"YEAR_BUILT",format:{digitSeparator:!1},label:"Year Built"},{fieldName:"DESIGN_STYLE_DECODE",label:"Design/Style"},{fieldName:"TOTSTRUCTS",label:"Total Structures"},{fieldName:"TOTUNITS",label:"Total Units"}]},{type:"media",mediaInfos:[]},{type:"text",text:"<h2>Services</h1>"},new d.default({outFields:["*"],creator:function(t){var i=document.createElement("calcite-accordion");i.setAttribute("selection-mode","single"),v.forEach((function(e){var t=document.createElement("calcite-accordion-item");t.setAttribute("item-title",e.group.title),i.append(t)}));var o=t.graphic;return i.addEventListener("calciteAccordionChange",(function(t){!function(e,t,i){if(!i.detail.requestedAccordionItem.hasAttribute("active")&&0===i.detail.requestedAccordionItem.childElementCount){var o=document.createElement("calcite-loader");o.setAttribute("inline","");var n=i.detail.requestedAccordionItem.shadowRoot.querySelector(".accordion-item-header");n.insertBefore(o,n.childNodes[1]);var r=v.find((function(e){return e.group.title===i.detail.requestedAccordionItem.getAttribute("item-title")})),a=[];return r&&t.map.allLayers.filter((function(e){return r.group.layers.includes(e.title)})).forEach((function(t){a.push(t.queryFeatures({geometry:e.geometry,outFields:["*"],returnGeometry:!0}))})),a.length?Promise.all(a).then((function(e){e.forEach((function(e){e.features.length&&e.features.forEach((function(e){var t=document.createElement("div");i.detail.requestedAccordionItem.append(t),new h.default({container:t,graphic:e})}))})),y(i),n.removeChild(o)})):(n.removeChild(o),"No services found.")}y(i)}(o,e,t)}),{passive:!0}),i}})]});t.condosTable.popupTemplate=i},a(i(90024),t)},29820:function(e,t,i){"use strict";var o,n,r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.view=void 0;var a=i(90024),s=r(i(32684)),l=i(32380),c=r(i(76910)),d=document.createElement("link");d.href="./assets/esri/themes/light/main.css",d.setAttribute("rel","preload"),d.setAttribute("type","text/css"),d.setAttribute("as","style"),null===(o=document.querySelector("head"))||void 0===o||o.append(d);var u=document.createElement("link");u.href="./assets/esri/themes/light/main.css",u.setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),null===(n=document.querySelector("head"))||void 0===n||n.append(u),l.loadLayout().then((function(){t.view=new s.default({container:"viewDiv",map:a.map}),t.view.when(l.initWidgets),null===t.view||void 0===t.view||t.view.when((function(){!function(e){if(window.localStorage.getItem("imaps")){var t=c.default.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((function(){e.map.allLayers.forEach((function(e){var i=t.allLayers.find((function(t){return e.id===t.id}));e.visible=null==i?void 0:i.visible,e.opacity=null==i?void 0:i.opacity})),e.map.basemap=t.basemap,e.extent=t.initialViewProperties.viewpoint.targetGeometry.extent}))}}(t.view),t.view.on("hold",(function(e){l.propertySearch.geometry=e.mapPoint}));var e=a.map.allLayers.find((function(e){return"Property"===e.title&&"feature"===e.type}));t.view.whenLayerView(e).then((function(){var t;null===(t=document.querySelector("#mapLoader"))||void 0===t||t.toggleAttribute("active"),l.propertySearch.propertyLayer=e,l.select.viewModel.watch("geometry",(function(e){l.propertySearch.geometry=e}))})).catch((function(e){console.log(e)}))}))})),window.addEventListener("pagehide",(function(){t.view.map.removeMany(t.view.map.allLayers.filter((function(e){return"group"===e.type&&!e.layers.length})).toArray());var e=t.view.map.toJSON();e.initialState.viewpoint.targetGeometry=t.view.extent,window.localStorage.setItem("imaps",JSON.stringify(e))}))},89994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;t.Action=function e(t,i,o,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=t,this.icon=o,this.widget=i,this.container=n,this.tool=r,this.tips=a}},4355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tip=void 0;t.Tip=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=t,this.description=i}},32380:function(e,t,i){"use strict";function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var r=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadLayout=t.initWidgets=t.menu=t.bookmarks=t.printWidget=t.drawWidget=t.measurement=t.select=t.propertySearch=t.toolbar=t.actionBar=void 0;var c=l(i(16018)),d=l(i(10275)),u=l(i(46659)),p=i(99364),h=l(i(59443)),f=l(i(52646)),m=l(i(97900)),v=l(i(1660)),y=l(i(99218)),b=l(i(59750)),g=l(i(71538)),_=l(i(37629)),w=l(i(89288)),k=l(i(72320)),S=l(i(88355)),C=l(i(80683)),x=l(i(94576)),O=l(i(22204)),A=l(i(62664)),P=i(89994),M=s(i(39105)),j=l(i(91397)),T=l(i(61059)),E=i(4355),I=l(i(22010));t.initWidgets=function(e){p.createTemplate(e),function(e){var t=new _.default({view:e}),i=new w.default({content:t,mode:"floating",expandIconClass:"esri-icon-pan2"});e.ui.add(i,"bottom-left"),e.ui.add(new S.default({view:e}),"top-left");var o=new x.default({view:e});o.on("locate-error",(function(e){console.log(e)})),e.ui.add(o,"top-left");var n=new C.default({view:e});n.on("track-error",(function(e){console.log(e)})),e.ui.add(n,"top-left"),e.ui.add(new k.default({view:e}),"top-left"),e.ui.add(new T.default({view:e}),"top-left");var r=new j.default({view:e}),a=new w.default({content:r,mode:"floating",expandIconClass:"esri-icon-overview-arrow-top-left"});a.watch("expanded",(function(t){t&&r.viewModel.overviewMapView.goTo({center:e.center,scale:2*e.scale*Math.max(e.width/r.viewModel.overviewMapView.width,e.height/r.viewModel.overviewMapView.height)})})),e.ui.add(a,"bottom-right")}(e);var i=new c.default({view:e}),o=new f.default({view:e}),n=new m.default({view:e});t.propertySearch=new u.default({view:e,condosTable:p.condosTable,addressTable:p.addressTable,propertyLayer:p.featureLayer}),t.select=new v.default({view:e,layer:p.featureLayer}),t.measurement=new y.default({view:e}),t.measurement.postInitialize=function(){t.drawWidget&&(t.drawWidget.measurement=t.measurement.viewModel.measurement),t.select&&(t.select.measurement=t.measurement.viewModel.measurement)},t.drawWidget=new b.default({view:e}),t.measurement&&(t.drawWidget.measurement=t.measurement.viewModel.measurement),t.printWidget=new O.default({view:e,printServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}),t.bookmarks=new A.default({view:e,editingEnabled:!0});var r=new h.default({view:e});return t.toolbar.view=e,t.actionBar.view=e,t.toolbar.actions.concat(t.actionBar.actions).forEach((function(e){"Select"===e.title&&(e.widget=t.select),"Measure"===e.title&&(e.widget=t.measurement),"Draw"===e.title&&(e.widget=t.drawWidget),"Bookmarks"===e.title&&(e.widget=t.bookmarks),"Print"===e.title&&(e.widget=t.printWidget),"Property Search"===e.title&&(e.widget=t.propertySearch),"Location Search"===e.title&&(e.widget=r),"Layers"===e.title&&(e.widget=o),"Basemaps"===e.title&&(e.widget=n),"Legend"===e.title&&(e.widget=i)})),e},t.loadLayout=function(){return M.create((function(e){var i=new I.default({container:"tipManager",tips:[],title:""});t.menu=new g.default({container:"menu"}),t.toolbar=new d.default({container:"leftbar",side:"left",tipManager:i}),t.actionBar=new d.default({container:"rightbar",side:"right",tipManager:i}),t.toolbar.actions=[new P.Action("Select",null,"selection","selectDiv",!0,[]),new P.Action("Measure",null,"measure","measureDiv",!0,[]),new P.Action("Draw",null,"pencil-mark","drawDiv",!0,[]),new P.Action("Bookmarks",null,"bookmark","bookmarkDiv",!0,[]),new P.Action("Print",null,"print","printDiv",!0,[])],t.actionBar.actions=[new P.Action("Property Search",null,"search","propertySearchDiv",!1,[new E.Tip("Wildcard Search","To search by a portion of an owner name or address, hit enter without selecting form the list of suggestions."),new E.Tip("Wildcard Search","To search by a portion of an owner name or address, hit enter without selecting form the list of suggestions.")]),new P.Action("Location Search",null,"pin","locationSearchDiv",!1,[new E.Tip("Location Search","To search by a portion of an owner name or address, hit enter without selecting form the list of suggestions.")]),new P.Action("Layers",null,"layers","layerDiv",!1,[]),new P.Action("Basemaps",null,"basemap","basemapDiv",!1,[]),new P.Action("Legend",null,"legend","legendDiv",!1,[])];var n=o(t.toolbar.actions);t.actionBar.actions=[].concat(o(t.actionBar.actions),o(n)),e()}))}},10275:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(55848));i(95990);var m="esri-widget actionbar-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).side="",t.actions=[],t.title="",t.tipManager=null,t.viewModel=new f.default,t.panelCreated=function(){var e=new MutationObserver((function(t){t.forEach((function(e){var t;null===(t=e.addedNodes[0].querySelector(".content-container"))||void 0===t||t.setAttribute("part","container")})),e.disconnect()}));document.querySelectorAll("calcite-panel").forEach((function(t){var i;e.observe(null==t?void 0:t.shadowRoot,{childList:!0}),console.log(null===(i=null==t?void 0:t.shadowRoot)||void 0===i?void 0:i.innerHTML)})),document.querySelectorAll("calcite-panel .heading").forEach((function(e){e.setAttribute("style","margin: 0")}))},t.maximizeCreated=function(e){e.addEventListener("click",(function(){var i,o,n,r,a=document.querySelector("#".concat(t.side,"bar"));(null==a?void 0:a.classList.contains("maximized"))?(null===(i=e.querySelector("calcite-icon"))||void 0===i||i.setAttribute("icon","right-edge"),null==a||a.classList.remove("maximized")):(null===(o=e.querySelector("calcite-icon"))||void 0===o||o.setAttribute("icon","left-edge"),null==a||a.classList.add("maximized")),null===(n=document.querySelector("calcite-tab:not([active])"))||void 0===n||n.classList.add("esri-hidden"),null===(r=document.querySelector("calcite-tab-title:not([active])"))||void 0===r||r.dispatchEvent(new MouseEvent("click")),requestAnimationFrame((function(){var e,t;null===(e=document.querySelector("calcite-tab-title:not([active])"))||void 0===e||e.dispatchEvent(new MouseEvent("click")),null===(t=document.querySelector("calcite-tab.esri-hidden"))||void 0===t||t.classList.remove("esri-hidden")}))}),{passive:!0})},t}return t=l,(i=[{key:"render",value:function(){var e,t,i=this;return window.onresize=function(){window.innerWidth>=1e3?document.querySelectorAll("#rightPanel .tool-container").forEach((function(e){var t,i;null===(t=document.querySelector("#leftPanel"))||void 0===t||t.append(e),null===(i=document.querySelector("#rightPanel"))||void 0===i||i.setAttribute("dismissed","")})):document.querySelectorAll("#leftPanel .tool-container").forEach((function(e){var t;null===(t=document.querySelector("#leftPanel"))||void 0===t||t.append(e)}))},p.tsx("div",{class:m+" "+this.side},p.tsx("calcite-panel",{class:"panel",id:this.side+"Panel",dir:"ltr","height-scale":"m","intl-close":"Close",theme:"light",dismissible:!0,dismissed:"left"===this.side,afterCreate:this.panelCreated},p.tsx("h3",{class:"heading",slot:"header-content",id:this.side+"PanelHeading"}),p.tsx("calcite-action",{class:"maximize",text:"Action",label:"Action",slot:"header-actions-end",icon:"left-edge",afterCreate:this.maximizeCreated}),p.tsx("calcite-action",{id:"".concat(this.side,"Tip"),class:"tip-button",text:"Action",label:"Action",slot:"header-actions-end",icon:"lightbulb",afterCreate:this.viewModel.tipButtonCreated}),null===(e=this.actions)||void 0===e?void 0:e.map((function(e){if("right"===i.side&&!e.tool||"left"===i.side&&e.tool)return p.tsx("div",{id:e.container,key:e.container,class:e.tool?"panel-container tool-container":"panel-container"})}))),p.tsx("calcite-action-bar",{expand:"",dir:"ltr","intl-expand":"Expand","intl-collapse":"Collapse",position:"start",theme:"light","calcite-hydrated":"",afterCreate:this.viewModel.actionBarCreated,id:"".concat(this.side,"ActionBar")},p.tsx("calcite-action-group",{"calcite-hydrated":""},null===(t=this.actions)||void 0===t?void 0:t.map((function(e){return p.tsx("calcite-action",{key:null==e?void 0:e.title,text:null==e?void 0:e.title,label:"Add Item",icon:null==e?void 0:e.icon,appearance:"solid",scale:"m","calcite-hydrated":"",name:null==e?void 0:e.title,afterCreate:i.viewModel.actionsLoaded,class:e.tool?"tool":"action"})})))))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],v.prototype,"view",void 0),c([u.aliasOf("viewModel.side")],v.prototype,"side",void 0),c([u.aliasOf("viewModel.actions")],v.prototype,"actions",void 0),c([u.aliasOf("viewModel.title")],v.prototype,"title",void 0),c([u.aliasOf("viewModel.tipManager")],v.prototype,"tipManager",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.Template")],v),t.default=v},55848:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=i(80621),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).side="",t.actions=[],t.changePanel=function(e){var i,o,n,r,a,s,l,c;(null===(i=document.querySelector("calcite-tip-manager"))||void 0===i?void 0:i.getAttribute("closed"))||null===(o=document.querySelector("calcite-tip-manager"))||void 0===o||o.setAttribute("closed","");var d=t.actions.find((function(t){return t.title===e}));if(null==d?void 0:d.widget){null===(n=document.getElementById(t.side+"Panel"))||void 0===n||n.removeAttribute("dismissed"),t.actions.forEach((function(e){var t;null===(t=document.getElementById(null==e?void 0:e.container))||void 0===t||t.classList.add("esri-hidden")})),d.widget.container=null==d?void 0:d.container,null===(r=document.getElementById(null==d?void 0:d.container))||void 0===r||r.classList.remove("esri-hidden"),document.getElementById(t.side+"PanelHeading").innerText=null==d?void 0:d.title,"Property Search"===d.title&&"right"===t.side?null===(a=document.querySelector("#rightPanel.maximize"))||void 0===a||a.classList.remove("esri-hidden"):null===(s=document.querySelector("#rightPanel.maximize"))||void 0===s||s.classList.add("esri-hidden");var u=document.querySelector("calcite-tip-manager");u.innerHTML="",d.tips.forEach((function(e){var t=document.createElement("calcite-tip");t.setAttribute("heading",e.title),t.innerHTML=e.description,null==u||u.appendChild(t)})),(null==d?void 0:d.tips.length)>0?null===(l=document.querySelector("#".concat(t.side,"Tip")))||void 0===l||l.classList.remove("esri-hidden"):null===(c=document.querySelector("#".concat(t.side,"Tip")))||void 0===c||c.classList.add("esri-hidden")}},t.tipButtonCreated=function(e){null==e||e.addEventListener("click",(function(){var e;null===(e=document.querySelector("calcite-tip-manager"))||void 0===e||e.removeAttribute("closed")}),{passive:!0})},t.actionBarCreated=function(){f.watch(s(t),"actions",t.initActions.bind(s(t)))},t.actionsLoaded=function(e){e.addEventListener("click",(function(e){var i=e.target.getAttribute("name");t.changePanel(i),window.innerWidth>=1e3?document.querySelectorAll("#rightPanel .tool-container").forEach((function(e){var t;null===(t=document.querySelector("#leftPanel"))||void 0===t||t.append(e)})):document.querySelectorAll("#leftPanel .tool-container").forEach((function(e){var t;null===(t=document.querySelector("#rightPanel"))||void 0===t||t.append(e)}))}),{passive:!0})},f.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"initActions",value:function(){var e=this;requestAnimationFrame((function(){e.changePanel("Property Search")}))}},{key:"init",value:function(e){console.log(e.scale)}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],m.prototype,"view",void 0),d([h.property()],m.prototype,"side",void 0),d([h.property()],m.prototype,"actions",void 0),m=d([h.subclass("app.widgets.ActionBar.ActionBarViewModel")],m),t.default=m},61059:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(37310));i(11847);var m="esri-widget--button esri-widget",v="esri-icon esri-icon-trash",y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new f.default,t.clearTitle="Clear",t.renderIcon=function(){return p.tsx("span",{"aria-hidden":"true",class:t.classes(v)})},t._clear=function(){t.view.map.allLayers.filter((function(e){return"graphics"===e.type})).forEach((function(e){e.removeAll()}))},t}return t=l,(i=[{key:"render",value:function(){return p.tsx("div",{bind:this,class:this.classes(m),role:"button",onclick:this._clear,onkeydown:this._clear,"aria-label":this.clearTitle,title:this.clearTitle},this.renderIcon())}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],y.prototype,"view",void 0),c([u.property({type:f.default}),p.renderable()],y.prototype,"viewModel",void 0),y=c([u.subclass("app.widgets.Clear")],y),t.default=y},37310:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=i(80621),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),f.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"init",value:function(e){console.log(e.scale)}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],m.prototype,"view",void 0),m=d([h.subclass("app.widgets.Clear.ClearViewModel")],m),t.default=m},59750:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(78745)),m=d(i(58432));i(21910);var v="esri-widget draw-base",y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new m.default,t._drawUpdated=function(){t.viewModel.sketch||t.viewModel.initDraw()},t}return t=l,(i=[{key:"render",value:function(){var e=this,t=document.querySelector("#fill");null==t||t.setAttribute("value","#ff0000"),null==t||t.addEventListener("calciteColorChange",(function(t){var i=t.target.value;e.viewModel.sketch.viewModel.pointSymbol.color=f.default.fromHex(i),e.viewModel.sketch.viewModel.polygonSymbol.color=f.default.fromHex(i)}),{passive:!0});var i=document.querySelector("#line");null==i||i.setAttribute("value","#ff0000"),null==i||i.addEventListener("calciteColorChange",(function(t){var i=t.target.value;e.viewModel.sketch.viewModel.polylineSymbol.color=f.default.fromHex(i),e.viewModel.sketch.viewModel.pointSymbol.outline.color=f.default.fromHex(i),e.viewModel.sketch.viewModel.polygonSymbol.outline.color=f.default.fromHex(i)}),{passive:!0});var o=document.querySelector("#opacity");null==o||o.addEventListener("calciteSliderUpdate",(function(t){e.viewModel.sketch.viewModel.polygonSymbol.color.a=t.target.value}),{passive:!0});var n=document.querySelector("#width");null==n||n.addEventListener("calciteSliderUpdate",(function(t){e.viewModel.sketch.viewModel.polylineSymbol.width=parseFloat(t.target.value),e.viewModel.sketch.viewModel.pointSymbol.outline.width=parseFloat(t.target.value),e.viewModel.sketch.viewModel.polygonSymbol.outline.width=parseFloat(t.target.value)}),{passive:!0});var r=document.querySelector("#label");null==r||r.addEventListener("calciteInputBlur",(function(t){e.set("label",t.target.value)}),{passive:!0});var a=document.querySelector("#textColor");return null==a||a.setAttribute("value","#ff0000"),null==a||a.addEventListener("calciteColorChange",(function(t){e.set("textColor",f.default.fromHex(t.target.value))}),{passive:!0}),p.tsx("div",{class:v},p.tsx("div",{afterUpdate:this._drawUpdated,id:"sketchDiv"}),p.tsx("calcite-block",{heading:"Settings",open:!0,collapsible:!0},p.tsx("calcite-block-section",{text:"Color"},p.tsx("calcite-label",{scale:"s"},"Fill Color"," ",p.tsx("calcite-color",{id:"fill",hideChannels:!0,hideSaved:!0,appearance:"minimal",scale:"s"})),p.tsx("calcite-label",{scale:"s"},"Line Color"," ",p.tsx("calcite-color",{id:"line",hideChannels:!0,hideSaved:!0,appearance:"minimal",scale:"s"}))),p.tsx("calcite-block-section",{text:"Fill Opacity"},p.tsx("calcite-label",{scale:"s"},"Opacity",p.tsx("calcite-slider",{scale:"s",id:"opacity",max:"1",min:"0",value:"0.5",step:"0.1"}))),p.tsx("calcite-block-section",{text:"Outline"},p.tsx("calcite-label",{scale:"s"},"Width ",p.tsx("calcite-slider",{id:"width",max:"10",min:"0",value:"1",step:"0.5"}))),p.tsx("calcite-block-section",{text:"Labeling"},p.tsx("calcite-label",{scale:"s"},"Label ",p.tsx("calcite-input",{scale:"s",id:"label",type:"textarea"})),p.tsx("calcite-label",{scale:"s"},"Text Color",p.tsx("calcite-color",{id:"textColor",hideChannels:!0,hideSaved:!0,appearance:"minimal",scale:"s"})))))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],y.prototype,"view",void 0),c([u.aliasOf("viewModel.label")],y.prototype,"label",void 0),c([u.aliasOf("viewModel.textColor")],y.prototype,"textColor",void 0),c([u.aliasOf("viewModel.measurement")],y.prototype,"measurement",void 0),c([u.property({type:m.default}),p.renderable()],y.prototype,"viewModel",void 0),y=c([u.subclass("app.widgets.Draw")],y),t.default=y},58432:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=u(i(15843)),m=u(i(94394)),v=i(80621),y=u(i(15988)),b=u(i(44190)),g=u(i(78745)),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),v.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"initDraw",value:function(){var e=this;this.graphics=new m.default({listMode:"hide"}),this.view.map.add(this.graphics),this.sketch=new f.default({view:this.view,container:"sketchDiv",layer:this.graphics,creationMode:"single",defaultCreateOptions:{mode:"hybrid"}}),this.sketch.viewModel.pointSymbol.color=g.default.fromHex("#FF0000"),this.sketch.viewModel.pointSymbol.outline.color=g.default.fromHex("#FF0000"),this.sketch.viewModel.polygonSymbol.color=new g.default([[255,0,0,.5]]),this.sketch.viewModel.polygonSymbol.outline.color=g.default.fromHex("#FF0000"),this.sketch.viewModel.polylineSymbol.color=g.default.fromHex("#FF0000"),this.sketch.watch("activeTool",(function(t){var i;null!=t&&(null===(i=e.measurement)||void 0===i||i.clear())})),this.sketch.on("create",(function(t){var i,o;if("start"===t.state&&(null===(i=e.measurement)||void 0===i||i.clear()),"complete"===t.state&&(null===(o=e.label)||void 0===o?void 0:o.length)){var n=t.graphic.geometry;"polygon"===t.graphic.geometry.type&&(n=t.graphic.geometry.centroid);var r=new y.default({geometry:n,symbol:new b.default({text:e.label,color:e.textColor,haloColor:"white",haloSize:1,xoffset:"5px",yoffset:"5px",verticalAlignment:"bottom",horizontalAlignment:"right"})});e.graphics.add(r)}}))}},{key:"init",value:function(e){console.log(e.scale)}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],_.prototype,"view",void 0),d([h.property()],_.prototype,"container",void 0),_=d([h.subclass("app.widgets.Draw.DrawViewModel")],_),t.default=_},59443:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(66941));i(44207);var m="esri-widget locationsearch-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new f.default,t._searchCreate=function(){t.search&&(t.search.container="locationSearch")},t}return t=l,(i=[{key:"render",value:function(){return p.tsx("div",{class:m},p.tsx("div",{afterCreate:this._searchCreate,id:"locationSearch"}))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],v.prototype,"view",void 0),c([u.aliasOf("viewModel.search")],v.prototype,"search",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.LocationSearch")],v),t.default=v},66941:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=i(80621),m=u(i(79734)),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),f.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"init",value:function(e){var t=this;this.search=new m.default({view:e,maxSuggestions:30,searchAllEnabled:!0}),console.log(this.search.allSources),this.search.allSources.on("after-add",(function(e){e.item.layer&&(e.item.name=e.item.layer.title,e.item.placeholder=e.item.layer.title),e.item.locator&&t.search.allSources.remove(e.item)}))}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],v.prototype,"view",void 0),v=d([h.subclass("app.widgets.LocationSearch.LocationSearchViewModel")],v),t.default=v},99218:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(92896));i(20332);var m="esri-widget measure-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new f.default,t._measureCreated=function(){t.measurement&&(t.measurement.container="measureWidget")},t}return t=l,(i=[{key:"render",value:function(){var e=this;return document.querySelectorAll("#measureDiv calcite-radio-group-item").forEach((function(t){null==t||t.addEventListener("calciteRadioGroupItemChange",(function(t){var i,o;t.target.hasAttribute("checked")||("clear"===(null===(i=t.target)||void 0===i?void 0:i.title)?e.measurement.clear():e.measurement.activeTool=null===(o=t.target)||void 0===o?void 0:o.title)}),{passive:!0})})),p.tsx("div",{class:m},p.tsx("calcite-radio-group",{width:"full"},p.tsx("calcite-radio-group-item",{title:"distance",value:"distance",id:"distanceItem",icon:"measure"},"Distance"),p.tsx("calcite-radio-group-item",{title:"area",value:"area",id:"areaItem",icon:"measure-area"},"Area"),p.tsx("calcite-radio-group-item",{title:"clear",value:"clear",id:"clearItem",icon:"trash"},"Clear")),p.tsx("div",{afterCreate:this._measureCreated,id:"measureWidget"}))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],v.prototype,"view",void 0),c([u.aliasOf("viewModel.measurement")],v.prototype,"measurement",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.Measure")],v),t.default=v},92896:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=i(80621),m=u(i(67565)),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),f.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"init",value:function(e){this.measurement=new m.default({view:e,areaUnit:"square-feet",linearUnit:"feet"}),this.measurement.watch("activeTool",(function(e){e||document.querySelectorAll(".measure-base calcite-radio-group-item").forEach((function(e){"clear"===e.value?e.setAttribute("checked",""):e.removeAttribute("checked")}))}))}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],v.prototype,"view",void 0),v=d([h.subclass("app.widgets.Measure.MeasureViewModel")],v),t.default=v},71538:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(61236));i(73097);var m="esri-widget menu-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).theme="light",t.viewModel=new f.default,t.setTheme=function(e){var i,o;t.theme=e,window.localStorage.setItem("theme",e),document.body.classList.remove("light"==e?"dark":"light"),document.body.classList.add(e);var n=Array.prototype.slice.call(document.querySelectorAll("link")).filter((function(e){return e.href.includes("light")||e.href.includes("dark")}));if(n){n.forEach((function(e){e.remove()}));var r=document.createElement("link");r.href="./assets/esri/themes/".concat(t.theme,"/main.css"),r.setAttribute("rel","preload"),r.setAttribute("type","text/css"),r.setAttribute("as","style"),null===(i=document.querySelector("head"))||void 0===i||i.append(r);var a=document.createElement("link");a.href="./assets/esri/themes/".concat(t.theme,"/main.css"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),null===(o=document.querySelector("head"))||void 0===o||o.append(a),document.querySelectorAll("calcite-panel").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-color").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-tip-manager").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-dropdown").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-alert").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-modal").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-block").forEach((function(e){e.setAttribute("theme",t.theme)})),document.querySelectorAll("calcite-pick-list").forEach((function(e){e.setAttribute("theme",t.theme)})),setTimeout((function(){document.querySelectorAll("calcite-action-bar").forEach((function(e){e.setAttribute("theme",t.theme)}))}))}},t.menuCreated=function(){var e;if(window.localStorage.getItem("theme")){var i=window.localStorage.getItem("theme");requestAnimationFrame((function(){t.setTheme(i)}))}null===(e=document.querySelector("calcite-dropdown"))||void 0===e||e.addEventListener("calciteDropdownSelect",(function(e){var i,o=null===(i=e.currentTarget.selectedItems[0])||void 0===i?void 0:i.innerHTML.toLowerCase();t.setTheme(o)}),{passive:!0})},t}return t=l,(i=[{key:"render",value:function(){return p.tsx("div",{class:m},p.tsx("header",{class:"header"},p.tsx("h2",{class:"heading"},"iMAPS"),p.tsx("div",{id:"menu"}),p.tsx("calcite-dropdown",{alignment:"end",afterCreate:this.menuCreated},p.tsx("calcite-button",{slot:"dropdown-trigger"},p.tsx("calcite-icon",{icon:"hamburger"})),p.tsx("calcite-dropdown-group",{"group-title":"Help","selection-mode":"none"},p.tsx("calcite-dropdown-item",null,"Help Document"),p.tsx("calcite-dropdown-item",{rel:"noreferrer",href:"https://arcg.is/1GurDS",target:"_blank"},"Feedback")),p.tsx("calcite-dropdown-group",{"group-title":"Data Download","selection-mode":"none"},p.tsx("calcite-dropdown-item",{rel:"noreferrer",href:"https://data-wake.opendata.arcgis.com/",target:"_blank"},"Wake County Open Data"),p.tsx("calcite-dropdown-item",{rel:"noreferrer",href:"https://data.raleighnc.gov/",target:"_blank"},"Raleigh Open Data")),p.tsx("calcite-dropdown-group",{"group-title":"Links","selection-mode":"none"},p.tsx("calcite-dropdown-item",{rel:"noreferrer",href:"https://data.raleighnc.gov/",target:"_blank"},"RaleighNC.gov"),p.tsx("calcite-dropdown-item",{rel:"noreferrer",href:"https://wakegov.com/",target:"_blank"},"WakeGOV.com")),p.tsx("calcite-dropdown-group",{"group-title":"Theme","selection-mode":"single"},p.tsx("calcite-dropdown-item",{active:"dark"===this.theme,value:"dark"},"Dark"),p.tsx("calcite-dropdown-item",{active:"light"===this.theme,value:"light"},"Light")))))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],v.prototype,"view",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.Menu")],v),t.default=v},61236:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=u(i(82677)),h=i(83781),f=i(80621),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),f.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),t}return t=c,(i=[{key:"init",value:function(e){console.log(e.scale)}}])&&o(t.prototype,i),a&&o(t,a),c}(p.default);d([h.property()],m.prototype,"view",void 0),m=d([h.subclass("app.widgets.Menu.MenuViewModel")],m),t.default=m},1660:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(47694));i(17593);var m="esri-widget select-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new f.default,t._sketchCreated=function(){t.viewModel.sketch||setTimeout((function(){t.viewModel.initSketch()}),1e3)},t}return t=l,(i=[{key:"handleChange",value:function(e){this.set("bufferDistance",parseInt(e.target.value))}},{key:"render",value:function(){var e,t=this;return null===(e=document.querySelector("#selectDiv calcite-input"))||void 0===e||e.addEventListener("calciteInputBlur",(function(e){t.handleChange(e)}),{passive:!0}),p.tsx("div",{class:m},p.tsx("div",{afterCreate:this._sketchCreated,id:"selectWidget"}),p.tsx("calcite-label",{scale:"s"},"Buffer Distance (feet)",p.tsx("calcite-input",{scale:"s",type:"number",min:"0",max:"2000",step:"50",value:this.viewModel.bufferDistance})))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.view")],v.prototype,"view",void 0),c([u.aliasOf("viewModel.layer")],v.prototype,"layer",void 0),c([u.aliasOf("viewModel.sketch")],v.prototype,"sketch",void 0),c([u.aliasOf("viewModel.bufferDistance")],v.prototype,"bufferDistance",void 0),c([u.aliasOf("viewModel.measurement")],v.prototype,"measurement",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.Select")],v),t.default=v},47694:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&d(t,e,i);return u(t,e),t},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var m=f(i(82677)),v=f(i(15843)),y=f(i(94394)),b=i(83781),g=i(80621),_=h(i(70642)),w=f(i(78745)),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(c,e);var t,i,a,l=r(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=l.call(this,e),g.whenDefinedOnce(s(t),"view",t.init.bind(s(t))),g.whenDefinedOnce(s(t),"sketch",t.initSketch.bind(s(t))),t}return t=c,(i=[{key:"initSketch",value:function(){var e=this;this.graphics=new y.default({listMode:"hide"}),this.view.map.add(this.graphics),this.sketch=new v.default({view:this.view,container:"selectWidget",layer:this.graphics,creationMode:"single",defaultCreateOptions:{mode:"hybrid"}}),this.sketch.viewModel.updateOnGraphicClick=!1,this.sketch.on("create",(function(t){var i;if("complete"===t.state)if(e.graphics.removeAll(),e.bufferDistance>0){var o=_.geodesicBuffer(t.graphic.geometry,e.bufferDistance,"feet");t.graphic.geometry=o,e.graphics.add(t.graphic),t.graphic.symbol={type:"simple-fill",style:"none",outline:{style:"short-dash",width:2.5,color:[221,221,221,1]},color:new w.default([255,243,13,.25])},e.geometry=t.graphic.geometry,e.view.goTo(t.graphic)}else e.geometry=t.graphic.geometry;"start"===t.state&&(null===(i=e.measurement)||void 0===i||i.clear())})),this.sketch.watch("activeTool",(function(t){var i;null!=t&&(null===(i=e.measurement)||void 0===i||i.clear())}))}},{key:"init",value:function(){this.set("bufferDistance",0)}}])&&o(t.prototype,i),a&&o(t,a),c}(m.default);p([b.property()],k.prototype,"view",void 0),p([b.property()],k.prototype,"layer",void 0),p([b.property()],k.prototype,"geometry",void 0),k=p([b.subclass("app.widgets.Select.SelectViewModel")],k),t.default=k},22010:function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=s(e);if(t){var n=s(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return a(this,i)}}function a(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),p=i(73502),h=d(i(90806)),f=d(i(98963));i(35801);var m="esri-widget tipmanager-base",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,a,s=r(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).viewModel=new f.default,t}return t=l,(i=[{key:"render",value:function(){return p.tsx("div",{class:m},p.tsx("calcite-tip-manager",{dir:"ltr","intl-close":"Close","intl-default-title":this.title,"intl-pagination-label":"Tip","intl-next":"Next","intl-previous":"Previous",theme:"light",closed:!0}))}}])&&o(t.prototype,i),a&&o(t,a),l}(h.default);c([u.aliasOf("viewModel.title"),p.renderable()],v.prototype,"title",void 0),c([u.aliasOf("viewModel.tips")],v.prototype,"tips",void 0),c([u.property({type:f.default}),p.renderable()],v.prototype,"viewModel",void 0),v=c([u.subclass("app.widgets.TipManager")],v),t.default=v},98963:function(e,t,i){"use strict";function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=a(e);if(t){var n=a(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=c(i(82677)),u=i(83781),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,e);var t=n(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t.call(this,e)}return i}(d.default);l([u.property()],p.prototype,"title",void 0),l([u.property()],p.prototype,"tips",void 0),p=l([u.subclass("app.widgets.TipManager.TipManagerViewModel")],p),t.default=p},74795:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".actionbar-base{display:flex}.left{flex-direction:row-reverse}.right{flex-direction:row}calcite-action-bar{min-width:48px}calcite-panel[dismissed]{width:0}calcite-panel:focus{outline:none}calcite-panel{min-width:0px;max-width:calc(100% - 48px);height:100%;width:350px;max-height:100%}#leftbar .maximize{display:none}#rightbar.maximized{right:48px;min-width:calc(100% - 96px);position:absolute;bottom:0;top:52.84px}#rightbar.maximized calcite-panel{min-width:100%}#rightActionBar .tool{display:none}calcite-tip-manager{max-width:100%;width:500px;height:300px;position:absolute;z-index:1000;top:25%;left:25%}@media only screen and (max-width: 1000px){#leftActionBar{display:none}#leftPanel{display:none}#rightActionBar .tool{display:block}}","",{version:3,sources:["webpack://./src/widgets/ActionBar/styles/ActionBar.scss"],names:[],mappings:"AAAA,gBACE,YAAA,CAGF,MACE,0BAAA,CAGF,OACE,kBAAA,CAIF,mBACE,cAAA,CAGF,yBACE,OAAA,CAGF,oBACE,YAAA,CAGF,cACE,aAAA,CACA,2BAAA,CACA,WAAA,CACA,WAAA,CACA,eAAA,CAGF,mBACE,YAAA,CAIF,oBACE,UAAA,CACA,2BAAA,CACA,iBAAA,CACA,QAAA,CACA,WAAA,CAEF,kCACE,cAAA,CAIF,sBACE,YAAA,CAGF,oBACE,cAAA,CACA,WAAA,CACA,YAAA,CACA,iBAAA,CACA,YAAA,CACA,OAAA,CACA,QAAA,CAGF,2CACE,eACE,YAAA,CAEF,WACE,YAAA,CAEF,sBACE,aAAA,CAAA",sourcesContent:[".actionbar-base {\n  display: flex;\n}\n\n.left {\n  flex-direction: row-reverse;\n}\n\n.right {\n  flex-direction: row;\n\n}\n\ncalcite-action-bar {\n  min-width: 48px;\n}\n\ncalcite-panel[dismissed] {\n  width: 0;\n}\n\ncalcite-panel:focus {\n  outline: none;\n}\n\ncalcite-panel {\n  min-width: 0px;\n  max-width: calc(100% - 48px);\n  height: 100%;\n  width: 350px;\n  max-height: 100%;\n}\n\n#leftbar .maximize {\n  display: none;\n}\n\n\n#rightbar.maximized {\n  right: 48px;\n  min-width: calc(100% - 96px);\n  position: absolute;\n  bottom: 0;\n  top: 52.84px;\n}\n#rightbar.maximized calcite-panel{\n  min-width: 100%;\n}\n\n\n#rightActionBar .tool {\n  display: none;\n}\n\ncalcite-tip-manager {\n  max-width: 100%;\n  width: 500px;\n  height: 300px;\n  position: absolute;\n  z-index: 1000;\n  top: 25%;\n  left: 25%;\n}\n\n@media only screen and (max-width: 1000px) {\n  #leftActionBar {\n    display: none;\n  }\n  #leftPanel {\n    display: none;\n  }\n  #rightActionBar .tool {\n    display: block;\n  }  \n}"],sourceRoot:""}]);const s=a},89743:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".clear-base{padding:0}","",{version:3,sources:["webpack://./src/widgets/Clear/styles/Clear.scss"],names:[],mappings:"AAAA,YACE,SAAA",sourcesContent:[".clear-base {\n  padding: 0;\n}"],sourceRoot:""}]);const s=a},1820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".draw-base{padding:0}#drawDiv{overflow-y:auto;overflow-x:hidden}","",{version:3,sources:["webpack://./src/widgets/Draw/styles/Draw.scss"],names:[],mappings:"AAAA,WACE,SAAA,CAGF,SACE,eAAA,CACA,iBAAA",sourcesContent:[".draw-base {\n  padding: 0;\n}\n\n#drawDiv {\n  overflow-y: auto;\n  overflow-x: hidden;\n}"],sourceRoot:""}]);const s=a},75575:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".locationsearch-base{padding:0}.esri-search{width:100% !important;border-bottom-color:#eaeaea !important;border-bottom-style:solid !important;border-bottom-width:1px !important}","",{version:3,sources:["webpack://./src/widgets/LocationSearch/styles/LocationSearch.scss"],names:[],mappings:"AAAA,qBACE,SAAA,CAGF,aACE,qBAAA,CACA,sCAAA,CACA,oCAAA,CACA,kCAAA",sourcesContent:[".locationsearch-base {\n  padding: 0;\n}\n\n.esri-search {\n  width: 100% !important;\n  border-bottom-color: rgb(234, 234, 234) !important;;\n  border-bottom-style: solid !important;;\n  border-bottom-width: 1px !important;;  \n} "],sourceRoot:""}]);const s=a},98090:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".measure-base{padding:0}","",{version:3,sources:["webpack://./src/widgets/Measure/styles/Measure.scss"],names:[],mappings:"AAAA,cACE,SAAA",sourcesContent:[".measure-base {\n  padding: 0;\n}"],sourceRoot:""}]);const s=a},99765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".menu-base{padding:0}header{display:flex}header h2{width:100%}","",{version:3,sources:["webpack://./src/widgets/Menu/styles/Menu.scss"],names:[],mappings:"AAAA,WACE,SAAA,CAEF,OACE,YAAA,CAEF,UACE,UAAA",sourcesContent:[".menu-base {\n  padding: 0;\n}\nheader  {\n  display: flex;\n}\nheader h2 {\n  width: 100%;\n}\n\n"],sourceRoot:""}]);const s=a},55325:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".select-base{padding:0}.select-base .esri-sketch__section.esri-sketch__tool-section:nth-child(1){display:none !important}.select-base .esri-sketch__section.esri-sketch__tool-section:nth-child(3){display:none !important}#selectWidget{min-height:44px}","",{version:3,sources:["webpack://./src/widgets/Select/styles/Select.scss"],names:[],mappings:"AAAA,aACE,SAAA,CAGF,0EACE,uBAAA,CAEF,0EACE,uBAAA,CAGF,cACE,eAAA",sourcesContent:[".select-base {\n  padding: 0;\n}\n\n.select-base .esri-sketch__section.esri-sketch__tool-section:nth-child(1) {\n  display: none !important;\n}\n.select-base .esri-sketch__section.esri-sketch__tool-section:nth-child(3) {\n  display: none !important;\n}\n\n#selectWidget {\n  min-height: 44px;\n}"],sourceRoot:""}]);const s=a},32820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(94015),n=i.n(o),r=i(23645),a=i.n(r)()(n());a.push([e.id,".tipmanager-base{padding:0}calcite-tip-manager{border:solid 1px}","",{version:3,sources:["webpack://./src/widgets/TipManager/styles/TipManager.scss"],names:[],mappings:"AAAA,iBACE,SAAA,CAGF,oBACE,gBAAA",sourcesContent:[".tipmanager-base {\n  padding: 0;\n}\n\ncalcite-tip-manager {\n  border: solid 1px;\n}"],sourceRoot:""}]);const s=a},95990:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(74795),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},11847:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(89743),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},21910:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(1820),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},44207:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(75575),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},20332:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(98090),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},73097:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(99765),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},17593:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(55325),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}},35801:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(93379),n=i.n(o),r=i(32820),a={insert:"head",singleton:!1};n()(r.Z,a);const s=r.Z.locals||{}}}]);
//# sourceMappingURL=779.js.map