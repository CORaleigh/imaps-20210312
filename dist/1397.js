(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[1397],{87561:(e,t,i)=>{"use strict";function s(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function n(e,t,i,s){const n=t[s],o=t[s+1];e[s]=i[0]*n+i[2]*o+i[4],e[s+1]=i[1]*n+i[3]*o+i[5]}function o(e,t,i,s=0,o=0,r=2){const a=o||t.length/r;for(let o=s;o<a;o++)n(e,t,i,o*r)}i.d(t,{c:()=>s,t:()=>o});Object.freeze({__proto__:null,create:s,clone:function(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,i,s,n,o){const r=new Float32Array(6);return r[0]=e,r[1]=t,r[2]=i,r[3]=s,r[4]=n,r[5]=o,r},createView:function(e,t){return new Float32Array(e,t,6)},transform:n,transformMany:o})},55955:(e,t,i)=>{"use strict";function s(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function n(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}i.d(t,{a:()=>n,c:()=>s});Object.freeze({__proto__:null,create:s,clone:n,fromValues:function(e,t,i,s,n,o,r,a,l){const h=new Float32Array(9);return h[0]=e,h[1]=t,h[2]=i,h[3]=s,h[4]=n,h[5]=o,h[6]=r,h[7]=a,h[8]=l,h},createView:function(e,t){return new Float32Array(e,t,9)}})},27851:(e,t,i)=>{"use strict";function s(){return new Float32Array(2)}function n(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function o(){return s()}function r(){return n(1,1)}function a(){return n(1,0)}function l(){return n(0,1)}i.d(t,{c:()=>s,f:()=>n});const h=o(),c=r(),u=a(),d=l();Object.freeze({__proto__:null,create:s,clone:function(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:n,createView:function(e,t){return new Float32Array(e,t,2)},zeros:o,ones:r,unitX:a,unitY:l,ZEROS:h,ONES:c,UNIT_X:u,UNIT_Y:d})},18897:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var s,n=i(56140),o=(i(95830),i(36544),i(68055)),r=i(79881),a=i(87566),l=(i(10923),i(57002),i(86035),i(58385));let h=s=class extends l.wq{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new s({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};(0,n._)([(0,r.Cb)({type:o.z8,json:{write:!0}})],h.prototype,"level",void 0),(0,n._)([(0,r.Cb)({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0),(0,n._)([(0,r.Cb)({type:Number,json:{write:!0}})],h.prototype,"resolution",void 0),(0,n._)([(0,r.Cb)({type:Number,json:{write:!0}})],h.prototype,"scale",void 0),h=s=(0,n._)([(0,a.j)("esri.layers.support.LOD")],h);const c=h},40920:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var s,n=i(56140),o=(i(95830),i(36544),i(68055)),r=i(79881),a=i(56274),l=i(30590),h=i(87566),c=i(60538),u=(i(10923),i(57002),i(86035),i(58385)),d=i(27780),p=i(73032),m=i(41241),g=i(61106),f=(i(36348),i(93533)),v=i(50897),_=i(18897);const w=new a.Xn({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let y=s=class extends u.wq{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:p.Z.WebMercator}){const t=e.resolutionFactor||1,i=e.scales,n=e.size||256,o=e.spatialReference||p.Z.WebMercator;if(!(0,d.JY)(o)){const e=[];if(i)for(let t=0;t<i.length;t++){const s=i[t];e.push({level:t,scale:s,resolution:s})}else{let t=5e-4;for(let i=23;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new s({dpi:96,lods:e,origin:new g.Z(0,0,o),size:[n,n],spatialReference:o})}const r=(0,d.C5)(o),a=e.origin?new g.Z({x:e.origin.x,y:e.origin.y,spatialReference:o}):new g.Z(r?{x:r.origin[0],y:r.origin[1],spatialReference:o}:{x:0,y:0,spatialReference:o}),l=1/(39.37*(0,f.c9)(o)*96),h=[];if(i)for(let e=0;e<i.length;e++){const t=i[e],s=t*l;h.push({level:e,scale:t,resolution:s})}else{let e=(0,d.sT)(o)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(24/t);h.push({level:0,scale:e,resolution:e*l});for(let s=1;s<i;s++){const i=e/Math.pow(2,t),n=i*l;h.push({level:s,scale:i,resolution:n}),e=i}}return new s({dpi:96,lods:h,origin:a,size:[n,n],spatialReference:o})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=(0,d.C5)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return g.Z.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const s=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{s.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",s),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const i=t[s],n=t[s+1];if(i<=e)return s;if(n===e)return s+1;if(i>e&&n<e)return s+1-(e-n)/(i-n)}return s}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,s){const n=this.lodAt(e);if(!n)return null;let o,r;if("number"==typeof t)o=t,r=i;else if((0,d.fS)(t.spatialReference,this.spatialReference))o=t.x,r=t.y,s=i;else{const e=(0,m.iV)(t,this.spatialReference);if(!e)return null;o=e.x,r=e.y,s=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:(0,v.Ue)()}),s.level=e,s.row=Math.floor((this.origin.y-r)/l+.001),s.col=Math.floor((o-this.origin.x)/a+.001),this.updateTileInfo(s),s}updateTileInfo(e){const t=this.lodAt(e.level);if(!t)return;const i=t.resolution*this.size[0],s=t.resolution*this.size[1];e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,v.Ue)()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),s=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return s.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};(0,n._)([(0,r.Cb)({type:Number,json:{write:!0}})],y.prototype,"compressionQuality",void 0),(0,n._)([(0,r.Cb)({type:Number,json:{write:!0}})],y.prototype,"dpi",void 0),(0,n._)([(0,r.Cb)({type:String,json:{read:w.read,write:w.write,origins:{"web-scene":{read:!1,write:!1}}}})],y.prototype,"format",void 0),(0,n._)([(0,r.Cb)({readOnly:!0,dependsOn:["spatialReference","origin"]})],y.prototype,"isWrappable",null),(0,n._)([(0,r.Cb)({type:g.Z,json:{write:!0}})],y.prototype,"origin",void 0),(0,n._)([(0,l.r)("origin")],y.prototype,"readOrigin",null),(0,n._)([(0,r.Cb)({type:[_.Z],value:null,json:{write:!0}})],y.prototype,"lods",null),(0,n._)([(0,r.Cb)({readOnly:!0})],y.prototype,"minScale",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],y.prototype,"maxScale",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],y.prototype,"scales",void 0),(0,n._)([(0,r.Cb)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],y.prototype,"size",void 0),(0,n._)([(0,l.r)("size",["rows","cols"])],y.prototype,"readSize",null),(0,n._)([(0,c.c)("size",{cols:{type:o.z8},rows:{type:o.z8}})],y.prototype,"writeSize",null),(0,n._)([(0,r.Cb)({type:p.Z,json:{write:!0}})],y.prototype,"spatialReference",void 0),y=s=(0,n._)([(0,h.j)("esri.layers.support.TileInfo")],y);const b=y},92765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>T});var s,n=i(56140),o=(i(95830),i(36544),i(68055),i(79881)),r=i(87566),a=(i(10923),i(57002),i(86035),i(58385)),l=i(61106),h=i(52937),c=(i(36348),i(60418)),u=i(65984),d=i(55735),p=i(98501),m=i(14286),g=i(42738),f=i(75384),v=i(15187),_=i(87561),w=i(55955),y=i(27851);function b(e){return function(e){return e instanceof Float32Array&&e.length>=2}(e)||function(e){return Array.isArray(e)&&e.length>=2}(e)}const C=[0,0];let x=s=class extends a.wq{constructor(...e){super(...e),this._viewpoint2D={center:(0,d.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new h.Z,this.id=0,this.inverseTransform=(0,f.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,f.c)(),this.transformNoRotation=(0,f.c)(),this.displayMat3=(0,w.c)(),this.displayViewMat3=(0,w.c)(),this.viewMat3=(0,w.c)(),this.viewMat2d=(0,_.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=(0,v.JG)(i,e.viewpoint),this._set("size",(0,m.c)(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new s({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return b(t)?(0,m.t)(e,t,this.inverseTransform):(C[0]=t,C[1]=i,(0,m.t)(e,C,this.inverseTransform))}toScreen(e,t,i){return b(t)?(0,m.t)(e,t,this.transform):(C[0]=t,C[1]=i,(0,m.t)(e,C,this.transform))}toScreenNoRotation(e,t,i){return b(t)?(0,m.t)(e,t,this.transformNoRotation):(C[0]=t,C[1]=i,(0,m.t)(e,C,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return(0,v.Rb)(e,i,n,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),r=new u.Z({targetGeometry:new l.Z(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",r),!o||!t||!i)return;this.resolution=(0,v.uG)(r),this.rotation=s,this.scale=i,this.spatialReference=t,(0,m.c)(this.center,e);const a=0!==o[0]?2/o[0]:0,h=0!==o[1]?-2/o[1]:0;(0,p.s)(this.displayMat3,a,0,0,0,h,0,-1,1,1);const d=(0,p.i)(this.viewMat3),f=(0,y.f)(o[0]/2,o[1]/2),_=(0,y.f)(-o[0]/2,-o[1]/2),w=(0,c.t)(s);(0,p.a)(d,d,f),(0,p.r)(d,d,w),(0,p.a)(d,d,_),(0,p.m)(this.displayViewMat3,this.displayMat3,d);const b=(0,g.i)(this.viewMat2d);return(0,g.t)(b,b,f),(0,g.r)(b,b,w),(0,g.t)(b,b,_),(0,v.bk)(this.extent,r,o),(0,v.Ck)(this.transform,r,o,n),(0,g.a)(this.inverseTransform,this.transform),(0,v.Jp)(this.transformNoRotation,r,o,n),this.worldScreenWidth=(0,v.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,n._)([(0,o.Cb)({readOnly:!0})],x.prototype,"id",void 0),(0,n._)([(0,o.Cb)({value:1,json:{write:!0}})],x.prototype,"pixelRatio",null),(0,n._)([(0,o.Cb)({json:{write:!0}})],x.prototype,"size",null),(0,n._)([(0,o.Cb)({type:u.Z,json:{write:!0}})],x.prototype,"viewpoint",null),x=s=(0,n._)([(0,r.j)("esri.views.2d.ViewState")],x);const T=x},90461:(e,t,i)=>{"use strict";i.d(t,{T:()=>s});class s{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),(e=>-1!==e.indexOf("Brush"))(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}}},68414:(e,t,i)=>{"use strict";var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(87566),r=(i(10923),i(57002),i(86035),i(82677)),a=i(14286),l=i(9512);const h=new Set,c=[],u=new Map,d=[0,0];let p=class extends r.default{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._peekByScaleFirst,this._peekByCenterFirst,this._queue=new l.e({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:e=>e.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const s=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(n,n),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);u.has(n)||(u.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),u.get(n).push(t.key),h.add(n)}));let n=this.state.scale;var o,r;u.has(n)||(r=h,(o=c).length=0,r.forEach((e=>o.push(e))),c.sort(),n=c.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),c[0])),n=Math.min(n,i),n=Math.max(n,s);const a=u.get(n),l=t.getClosestInfoForScale(n),d=l.getColumnForX(this.state.center[0]),p=l.getRowForY(this.state.center[1]);return a.sort(((e,t)=>{const i=l.denormalizeCol(e.col,e.world),s=l.denormalizeCol(t.col,t.world);return Math.sqrt((d-i)*(d-i)+(p-e.row)*(p-e.row))-Math.sqrt((d-s)*(d-s)+(p-t.row)*(p-t.row))})),h.clear(),u.clear(),a[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(d,o.key);const r=(0,a.i)(d,i);r<s&&(s=r,n=o.key)})),n.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],p.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,s._)([(0,o.j)("esri.views.2d.tiling.PagedTileQueue")],p)},73978:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(38035);class n{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,t){const{spans:i,lodInfo:s}=this,{level:n}=s;if(0!==i.length)for(const{row:o,colFrom:r,colTo:a}of i)for(let i=r;i<=a;i++)e.call(t,n,o,s.normalizeCol(i),s.getWorldForColumn(i))}}n.pool=new s.Z(n);const o=n},46666:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var s=i(27780),n=i(5201);function o(e,t){return[e,t]}function r(e,t,i){return e[0]=t,e[1]=i,e}const a=new n.Z("0/0/0/0");class l{constructor(e,t,i,s,n,o,r,a,l,h,c,u){this.level=e,this.resolution=t,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=r,this.norm=a,this.worldStart=l,this.worldEnd=h,this.worldSize=c,this.wrap=u}static create(e,t,i){const n=(0,s.C5)(e.spatialReference),a=o(e.origin.x,e.origin.y),h=o(e.size[0]*t.resolution,e.size[1]*t.resolution),c=o(-1/0,-1/0),u=o(1/0,1/0),d=o(1/0,1/0);let p,m,g,f;return i&&(r(c,Math.max(0,Math.floor((i.xmin-a[0])/h[0])),Math.max(0,Math.floor((a[1]-i.ymax)/h[1]))),r(u,Math.max(0,Math.floor((i.xmax-a[0])/h[0])),Math.max(0,Math.floor((a[1]-i.ymin)/h[1]))),r(d,u[0]-c[0]+1,u[1]-c[1]+1)),e.isWrappable?(p=o(Math.ceil(Math.round((n.valid[1]-n.valid[0])/t.resolution)/e.size[0]),d[1]),m=o(Math.floor((n.origin[0]-a[0])/h[0]),c[1]),g=o(p[0]+m[0]-1,u[1]),f=!0):(m=c,g=u,p=d,f=!1),new l(t.level,t.resolution,t.scale,a,c,u,d,h,m,g,p,f)}normalizeCol(e){if(!this.wrap)return e;const t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,i=!1){a.set(t);const s=i?a.col:this.denormalizeCol(a.col,a.world),n=a.row;return function(e,t,i,s,n){e[0]=t,e[1]=i,e[2]=s,e[3]=n}(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,t,i=!1){a.set(t);const s=i?a.col:this.denormalizeCol(a.col,a.world);return Array.isArray(e)?r(e,this.getXForColumn(s),this.getYForRow(a.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(a.row)),e}}const h=l;var c=i(73978);const u=class{constructor(e,t,i){this.row=e,this.colFrom=t,this.colTo=i}},d=new n.Z("0/0/0/0");class p{constructor(e,t,i,s,n,o,r,a){this.x=e,this.ymin=t,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=r,this.rightBound=a}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[i,s]=e,[n,o]=t,r=n-i,a=o-s,l=0!==a?r/a:0,h=(Math.ceil(s)-s)*l,c=(Math.floor(s)-s)*l;return new p(i,Math.floor(s),Math.ceil(o),l,r<0?h:c,r<0?c:h,r<0?n:i,r<0?i:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const m=[[0,0],[0,0],[0,0],[0,0]],g=class{constructor(e,t){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=e.lods.slice();i.sort((function(e,t){return t.scale-e.scale}));const s=this._lodInfos=i.map((i=>h.create(e,i,t)));i.forEach(((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale}),this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,i=!1){d.set(t);const s=this._infoByLevel[d.level];return s?s.getTileBounds(e,d,i):e}getTileCoords(e,t,i=!1){d.set(t);const s=this._infoByLevel[d.level];return s?s.getTileCoords(e,d,i):e}getTileCoverage(e,t=192,i="closest"){const s="closest"===i?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),n=c.Z.pool.acquire(s),o=this._wrap;let r,a,l,h=1/0,d=-1/0;const g=n.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-t,m[1][0]=m[2][0]=e.size[0]+t,m[2][1]=m[3][1]=e.size[1]+t;for(const t of m)e.toMap(t,t),t[0]=s.getColumnForX(t[0]),t[1]=s.getRowForY(t[1]);const f=[];let v=3;for(let e=0;e<4;e++){if(m[e][1]===m[v][1]){v=e;continue}const t=p.create(m[e],m[v]);h=Math.min(t.ymin,h),d=Math.max(t.ymax,d),void 0===f[t.ymin]&&(f[t.ymin]=[]),f[t.ymin].push(t),v=e}if(null==h||null==d||d-h>100)return null;let _=[];for(r=h;r<d;){null!=f[r]&&(_=_.concat(f[r])),a=1/0,l=-1/0;for(let e=_.length-1;e>=0;e--){const t=_[e];a=Math.min(a,t.getLeftCol()),l=Math.max(l,t.getRightCol())}if(a=Math.floor(a),l=Math.floor(l),r>=s.first[1]&&r<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const e=Math.floor(l/s.worldSize[0]);for(let t=Math.floor(a/s.worldSize[0]);t<=e;t++)g.push(new u(r,Math.max(s.getFirstColumnForWorld(t),a),Math.min(s.getLastColumnForWorld(t),l)))}else g.push(new u(r,a,l));else a>s.last[0]||l<s.first[0]||(a=Math.max(a,s.first[0]),l=Math.min(l,s.last[0]),g.push(new u(r,a,l)));r+=1;for(let e=_.length-1;e>=0;e--){const t=_[e];t.ymax>=r?t.incrRow():_.splice(e,1)}}return n}getTileParentId(e){d.set(e);const t=this._infoByLevel[d.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(d,this._lodInfos[i],d),d.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){d.set(t);const i=this._infoByLevel[d.level],s=e.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(d,s,d);const t=s.denormalizeCol(d.col,d.world);for(const i of e.spans)if(i.row===d.row&&i.colFrom<=t&&i.colTo>=t)return!0}if(s.resolution<i.resolution){const[t,n,o,r]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=i.denormalizeCol(d.col,d.world),l=s.getColumnForX(i.getXForColumn(a)),h=s.getRowForY(i.getYForRow(d.row)),c=s.getColumnForX(i.getXForColumn(a+1))-1,u=s.getRowForY(i.getYForRow(d.row+1))-1;return!(l>r||c<o||h>n||u<t)}const n=s.denormalizeCol(d.col,d.world);return e.spans.some((e=>e.row===d.row&&e.colFrom<=n&&e.colTo>=n))}normalizeBounds(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const t=(0,s.C5)(this.tileInfo.spatialReference),n=-i*(t.valid[1]-t.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,i){const s=this._infoByLevel[i.level];return e.set(i),t.resolution<s.resolution?null:(t.resolution===s.resolution||(e.level=t.level,e.col=Math.floor(i.col*s.resolution/t.resolution+.01),e.row=Math.floor(i.row*s.resolution/t.resolution+.01)),e)}}},5201:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(38035);class n{constructor(e,t,i,s){this.set(e,t,i,s)}static getId(e,t,i,s){return"object"==typeof e?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${i}/${s}`}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}acquire(e,t,i,s){this.set(e,t,i,s)}contains(e){const t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,i,s){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){const[t,i,s,n]=e.split("/");this.level=parseFloat(t),this.row=parseFloat(i),this.col=parseFloat(s),this.world=parseFloat(n)}else this.level=+e,this.row=+t,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,t=this.row<<1,i=this.col<<1,s=this.world;return[new n(e,t,i,s),new n(e,t,i+1,s),new n(e,t+1,i,s),new n(e,t+1,i+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}n.pool=new s.Z(n,null,null,25,50);const o=n},13596:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(87566),r=(i(10923),i(57002),i(86035),i(82677)),a=i(14286),l=i(9512);const h=new Set,c=[],u=new Map,d=[0,0];let p=class extends r.default{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new l.e({concurrency:e,process:(e,i)=>{const s=this._keyToItem.get(e);return t(s,{signal:i})},peeker:"scale-first"===i?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this.has(t))return this.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),n=this.tileInfoView.getTileScale(t.key);u.has(n)||(u.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),u.get(n).push(t.key),h.add(n)}));let n=this.state.scale;var o,r;u.has(n)||(r=h,(o=c).length=0,r.forEach((e=>o.push(e))),c.sort(),n=c.reduce(((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e),c[0])),n=Math.min(n,i),n=Math.max(n,s);const a=u.get(n),l=t.getClosestInfoForScale(n),d=l.getColumnForX(this.state.center[0]),p=l.getRowForY(this.state.center[1]);return a.sort(((e,t)=>{const i=l.denormalizeCol(e.col,e.world),s=l.denormalizeCol(t.col,t.world);return Math.sqrt((d-i)*(d-i)+(p-e.row)*(p-e.row))-Math.sqrt((d-s)*(d-s)+(p-t.row)*(p-t.row))})),h.clear(),u.clear(),a[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return e.forEach((e=>{const o=this._keyToItem.get(e);t.getTileCoords(d,o.key);const r=(0,a.i)(d,i);r<s&&(s=r,n=o.key)})),n.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],p.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,s._)([(0,o.j)("esri.views.2d.tiling.TileQueue")],p);const m=p},1768:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var s=i(5201),n=i(73978),o=i(14286);function r(e,t){e.delete(t)}const a=new s.Z(0,0,0,0),l=new Map,h=[],c=[],u=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new class{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const i=t.key.level,s=this._tileKeysPerLevel[i];r(this._tilePerId,e);for(let t=0;t<s.length;t++)if(s[t].id===e){s.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t)}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,t,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e))}_pruneAroundCenterTile(e,t,i,s){const n=this._tileKeysPerLevel[s];if(!n||0===n.length)return e;const{size:r,origin:a}=this.tileInfoView.tileInfo,l=i*r[0],h=i*r[1],c=[0,0],u=[0,0];for(n.sort(((e,i)=>(c[0]=a.x+l*(e.col+.5),c[1]=a.y-h*(e.row+.5),u[0]=a.x+l*(i.col+.5),u[1]=a.y-h*(i.row+.5),(0,o.j)(c,t)-(0,o.j)(u,t))));n.length>0;){const t=n.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),r(this._tilePerId,e)}}(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:i}=this,s=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(c.length=0,h.length=0,l.clear(),!s)return;const{minScale:o,maxScale:r}=this.tileInfoView.tileInfo,{spans:u,lodInfo:d}=s,{level:p}=d,{scale:m,center:g,resolution:f}=e.state,v=!e.stationary&&m>this._previousScale;if(this._previousScale=m,this.tiles.length=0,!t&&(m>o||m<r))return this.tiles.length=0,l.clear(),i.forEach((e=>{this.releaseTile(e)})),i.clear(),c.length=0,h.length=0,l.clear(),n.Z.pool.release(s),!0;i.forEach((e=>e.visible=!0));let _=0,w=0;if(u.length>0)for(const{row:e,colFrom:t,colTo:s}of u)for(let n=t;n<=s;n++){_++;const t=a.set(p,e,d.normalizeCol(n),d.getWorldForColumn(n)).id;if(i.has(t)){const e=i.get(t);e.isReady?(l.set(t,e),w++):v||this._addParentTile(t,l)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){l.set(t,e),w++;continue}}else e=this.acquireTile(a),this.tileIndex.set(t,e);v||this._addParentTile(t,l)}}const y=w===_;i.forEach(((e,t)=>{if(a.set(t),l.has(t))return;const i=this.tileInfoView.intersects(s,a);!i||!v&&y?"purge"===this.cachePolicy?a.level===p&&i||h.push(t):(a.level>p||!i)&&h.push(t):e.isReady?c.push(t):a.level>p&&h.push(t)}));for(const e of c){const t=i.get(e);t&&t.isReady&&l.set(e,t)}for(const e of h){const t=i.get(e);this._tileCache?this._tileCache.add(t):this.releaseTile(t),i.delete(e)}return l.forEach((e=>this.tiles.push(e))),i.forEach((e=>{l.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(p,g,f),n.Z.pool.release(s),l.clear(),y}clear(e=!0){const{tileIndex:t}=this;e&&t.forEach((e=>{this.releaseTile(e)})),t.clear()}_addParentTile(e,t){let i=e,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s&&s.isReady){t.has(s.key.id)||t.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s&&s.isReady)){t.has(s.key.id)||t.set(s.key.id,s);break}}}},59054:(e,t,i)=>{"use strict";function s(e,t,i,s){const n=3*e,o=3*(i-e)-n,r=1-n-o,a=3*t,l=3*(s-t)-a,h=1-a-l;function c(e){return((r*e+o)*e+n)*e}return function(e,t=1e-6){return i=function(e,t){let i,s,a,l,h,u;for(a=e,u=0;u<8;u++){if(l=c(a)-e,Math.abs(l)<t)return a;if(h=(3*r*(d=a)+2*o)*d+n,Math.abs(h)<1e-6)break;a-=l/h}var d;if(i=0,s=1,a=e,a<i)return i;if(a>s)return s;for(;i<s;){if(l=c(a),Math.abs(l-e)<t)return a;e>l?i=a:s=a,a=.5*(s-i)+i}return a}(e,t),((h*i+l)*i+a)*i;var i}}i.d(t,{LI:()=>o,Qc:()=>r,n_:()=>s});const n=/^cubic-bezier\((.*)\)/,o={};function r(e){let t=o[e]||null;if(!t){const i=n.exec(e);if(i){const e=i[1].split(",").map((e=>parseFloat(e.trim())));4!==e.length||e.some((e=>isNaN(e)))||(t=s.apply(s,e))}}return t}o.ease=s(.25,.1,.25,1),o.linear=s(0,0,1,1),o.easeIn=o["ease-in"]=s(.42,0,1,1),o.easeOut=o["ease-out"]=s(0,0,.58,1),o.easeInOut=o["ease-in-out"]=s(.42,0,.58,1)},15187:(e,t,i)=>{"use strict";i.d(t,{H4:()=>F,dI:()=>G,o2:()=>j,JG:()=>S,km:()=>N,EK:()=>M,ni:()=>P,bk:()=>I,Rb:()=>R,Dq:()=>z,uG:()=>D,Ck:()=>A,Jp:()=>Z,L2:()=>L,gG:()=>$,SI:()=>q,$H:()=>B,YQ:()=>U,UZ:()=>K,Hy:()=>H,qf:()=>O,Rx:()=>J});var s=i(59472),n=i(39105),o=i(27780),r=i(73032),a=i(39718),l=i(49840),h=i(41241),c=i(61106),u=i(52937),d=i(83477),p=i(60418),m=i(65984),g=i(93533),f=i(55735),v=i(14286),_=i(42738),w=i(75384);const y=180/Math.PI;function b(e,t,i,s){return s&&i&&!s.equals(i)&&(0,h.Q8)(s,i)&&s.isWebMercator?s.isWebMercator?function(e,t){let i=t[1];return i>89.99999?i=89.99999:i<-89.99999&&(i=-89.99999),i=Math.sin((0,p.t)(i)),(0,v.s)(e,(0,p.t)(t[0])*l.sv.radius,.5*l.sv.radius*Math.log((1+i)/(1-i)))}(e,t):function(e,t,i){const s=(0,p.a)(t[0]/l.sv.radius);return(0,v.s)(e,s-360*Math.floor((s+180)/360),(0,p.a)(.5*Math.PI-2*Math.atan(Math.exp(-1*t[1]/l.sv.radius))))}(e,t):(0,v.c)(e,t)}function C(e){return e.wkid?e:e.spatialReference||r.Z.WGS84}function x(e,t){return t.type?(0,v.s)(e,t.x,t.y):(0,v.c)(e,t)}function T(e){return(0,g.c9)(e)}function M(e,t){return Math.max(e.width/t[0],e.height/t[1])*function(e){return(0,o.JY)(e)?39.37*T(e)*96:1}(e.spatialReference)}async function k(e,t,i,o){let r,l;if(!e)return null;if(Array.isArray(e)&&!e.length)return null;if(d.Z.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&"object"==typeof e[0]){const r=e.every((e=>"attributes"in e)),a=e.some((e=>!e.geometry));let l=e;if(r&&a&&t&&t.allLayerViews){const i=new Map;for(const t of e){const e=t.layer,s=i.get(e)||[],n=t.attributes[e.objectIdField];null!=n&&s.push(n),i.set(e,s)}const o=[];i.forEach(((e,i)=>{const s=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in s){const t=i.createQuery();t.objectIds=e,t.returnGeometry=!0,o.push(s.queryFeatures(t))}}));const r=await(0,n.all)(o),a=[];for(const e of r)if(e&&e.features&&e.features.length)for(const t of e.features)(0,s.pC)(t.geometry)&&a.push(t.geometry);l=a}for(const e of l)o=await k(e,t,i,o);return o}if(Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])r=new c.Z(e);else if(e instanceof a.Z)r=e;else if("geometry"in e)if(e.geometry)r=e.geometry;else if(e.layer){const i=e.layer,n=t.allLayerViews.find((e=>e.layer.id===i.id));if("queryFeatures"in n){const t=i.createQuery();t.objectIds=[e.attributes[i.objectIdField]],t.returnGeometry=!0;const o=await n.queryFeatures(t);r=(0,s.U2)(o,"features",0,"geometry")}}if((0,s.Wi)(r))return null;if(l="point"===r.type?new u.Z({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference}):r.extent,!l)return null;const p=(0,h.Q8)(l,i);if(!l.spatialReference.equals(i)&&p)l=(0,h.iV)(l,i);else if(!p)return null;return o?o.union(l):l.clone()}function S(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function P(e,t,i){return i?(0,v.s)(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):(0,v.a)(e,t,.5)}const I=function(){const e=(0,f.a)();return function(t,i,s){const n=i.targetGeometry;x(e,n);const o=.5*D(i);return t.xmin=e[0]-o*s[0],t.ymin=e[1]-o*s[1],t.xmax=e[0]+o*s[0],t.ymax=e[1]+o*s[1],t.spatialReference=n.spatialReference,t}}();function O(e,t,i,s,n){return j(e,t,i.center),e.scale=M(i,s),n&&n.constraints&&n.constraints.constrain(e),e}const z=function(){const e=(0,f.a)();return function(t,i,s){return(0,v.b)(t,function(e,t){return(0,v.a)(e,t,.5)}(t,i),P(e,i,s))}}(),E=function(){const e=(0,w.c)(),t=(0,f.a)();return function(i,s,n,o){const r=D(s),a=V(s);return(0,v.s)(t,r,r),(0,_.f)(e,t),(0,_.r)(e,e,a),(0,_.t)(e,e,z(t,n,o)),(0,_.t)(e,e,[0,o.top-o.bottom]),(0,v.s)(i,e[4],e[5])}}();function D(e){return e.scale*(t=e.targetGeometry,(0,s.pC)(t)&&(0,o.JY)(t.spatialReference)?1/(39.37*T(t.spatialReference)*96):1);var t}function V(e){return(0,p.t)(e.rotation)||0}const R=function(){const e=(0,f.a)(),t=(0,f.a)(),i=(0,f.a)();return function(s,n,o,r,a,l){return(0,v.n)(e,n),(0,v.a)(t,o,.5*l),(0,v.s)(i,1/r*l,-1/r*l),(0,_.i)(s),(0,_.t)(s,s,t),a&&(0,_.r)(s,s,a),(0,_.s)(s,s,i),(0,_.t)(s,s,e),s}}(),A=function(){const e=(0,f.a)();return function(t,i,s,n){const o=D(i),r=V(i);return x(e,i.targetGeometry),R(t,e,s,o,r,n)}}(),Z=function(){const e=(0,f.a)();return function(t,i,s,n){const o=D(i);return x(e,i.targetGeometry),R(t,e,s,o,0,n)}}();function L(e,t){return Math.round(function(e){if(e.isWrappable){const t=(0,o.C5)(e);return t.valid[1]-t.valid[0]}return 0}(e)/t)}function N(e,t){return async function(e,t){if(!e||!t)return new m.Z({targetGeometry:new c.Z,scale:0,rotation:0});let i=t.spatialReference;const{constraints:n,padding:o,viewpoint:r,size:a}=t,l=[o?a[0]-o.left-o.right:a[0],o?a[1]-o.top-o.bottom:a[1]];let d=null;e instanceof m.Z?d=e:e.viewpoint?d=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(d=e.target);let p=null;d&&d.targetGeometry?p=d.targetGeometry:e instanceof u.Z?p=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(p=await k(e.center,t,i)||await k(e.extent,t,i)||await k(e.target,t,i)||await k(e,t,i)),!p&&r&&r.targetGeometry?p=r.targetGeometry:!p&&t.extent&&(p=t.extent);const g=C(p);if(i||(i=C(t.spatialReference||t.extent||p)),!(0,h.Q8)(p,i)&&g&&!g.equals(i))return null;const v=x((0,f.a)(),p.center?p.center:p),_=new c.Z(b(v,v,g,i),i);let w=null;w=d&&(0,s.pC)(d.targetGeometry)&&"point"===d.targetGeometry.type?d.scale:e.hasOwnProperty("scale")&&e.scale?e.scale:e.hasOwnProperty("zoom")&&-1!==e.zoom&&n&&n.effectiveLODs?n.zoomToScale(e.zoom):Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height?t.extent&&(0,h.Q8)(t.extent,i)?M((0,h.iV)(t.extent,i),l):t.extent?M(t.extent,l):r.scale:(0,h.Q8)(p.extent,i)?M((0,h.iV)(p.extent,i),l):M(p.extent,l);const y=function(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((e=>"layer"in e))){let t=0,i=0;for(const s of e){const e=s.layer;e&&e.minScale&&e.maxScale&&(t=e.minScale<t?e.minScale:t,i=e.maxScale>i?e.maxScale:i)}return t&&i?{min:t,max:i}:null}}}(e);y&&(y.min&&y.min>w?w=y.min:y.max&&y.max<w&&(w=y.max));let T=0;d?T=d.rotation:e.hasOwnProperty("rotation")?T=e.rotation:r&&(T=r.rotation);let S=new m.Z({targetGeometry:_,scale:w,rotation:T});return n&&(S=n.fit(S),n.constrainByGeometry(S),n.rotationEnabled||(S.rotation=T)),S}(e,t)}const G=function(){const e=(0,f.a)(),t=(0,f.a)(),i=[0,0,0];return function(s,n,o){(0,v.d)(e,s,n),(0,v.e)(e,e),(0,v.d)(t,s,o),(0,v.e)(t,t),(0,v.f)(i,e,t);let r=Math.acos((0,v.g)(e,t)/((0,v.l)(e)*(0,v.l)(t)))*y;return i[2]<0&&(r=-r),isNaN(r)&&(r=0),r}}(),F=function(){const e=(0,f.a)();return function(t,i,s,n){const o=t.targetGeometry;return S(t,i),E(e,i,s,n),o.x+=e[0],o.y+=e[1],t}}(),j=(function(){const e=(0,f.a)()}(),function(){const e=(0,f.a)();return function(t,i,s){S(t,i);const n=t.targetGeometry,o=C(s),r=C(n);return x(e,s),b(e,e,o,r),n.x=e[0],n.y=e[1],t}}());const q=function(){const e=(0,f.a)();return function(t,i,s,n,o){o||(o="center"),(0,v.b)(e,s,n),(0,v.a)(e,e,.5);const r=e[0],a=e[1];switch(o){case"center":(0,v.s)(e,0,0);break;case"left":(0,v.s)(e,-r,0);break;case"top":(0,v.s)(e,0,a);break;case"right":(0,v.s)(e,r,0);break;case"bottom":(0,v.s)(e,0,-a);break;case"top-left":(0,v.s)(e,-r,a);break;case"bottom-left":(0,v.s)(e,-r,-a);break;case"top-right":(0,v.s)(e,r,a);break;case"bottom-right":(0,v.s)(e,r,-a)}return J(t,i,e),t}}();function B(e,t,i){return S(e,t),e.rotation+=i,e}function U(e,t,i){return S(e,t),e.rotation=i,e}const W=function(){const e=(0,f.a)();return function(t,i,s,n,o){return S(t,i),isNaN(s)||0===s||(Y(e,n,i,o),t.scale=i.scale*s,X(e,e,t,o),J(t,t,(0,v.s)(e,e[0]-n[0],n[1]-e[1]))),t}}();function H(e,t,i){return S(e,t),e.scale=i,e}const K=function(){const e=(0,f.a)();return function(t,i,s,n,o,r){return S(t,i),isNaN(s)||0===s||(Y(e,o,i,r),t.scale=i.scale*s,t.rotation+=n,X(e,e,t,r),J(t,t,(0,v.s)(e,e[0]-o[0],o[1]-e[1]))),t}}(),$=function(){const e=(0,f.a)(),t=(0,f.a)();return function(i,s,n,o,r,a,l){return z(t,a,l),(0,v.h)(e,r,t),o?K(i,s,n,o,e,a):W(i,s,n,e,a)}}(),Y=function(){const e=(0,w.c)();return function(t,i,s,n){return(0,v.t)(t,i,function(e,t,i,s){return A(e,t,i,1),(0,_.a)(e,e)}(e,s,n))}}(),X=function(){const e=(0,w.c)();return function(t,i,s,n){return(0,v.t)(t,i,A(e,s,n,1))}}(),J=function(){const e=(0,f.a)(),t=(0,w.c)();return function(i,s,n){S(i,s);const o=D(s),r=i.targetGeometry;return(0,_.b)(t,V(s)),(0,_.s)(t,t,(0,f.f)(o,o)),(0,v.t)(e,n,t),r.x+=e[0],r.y+=e[1],i}}()},32684:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Gi});var s=i(56140),n=i(95830),o=i(59472),r=i(36544),a=(i(68055),i(79881)),l=i(87566),h=i(32656),c=(i(10923),i(57002),i(86035),i(39105)),u=i(83477),d=i(15988),p=i(78452),m=i(80621),g=i(29155),f=i(92673),v=i(17288),_=i(83500),w=i(2887),y=i(42148),b=i(59691);const C={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],n=this.values;return s>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},x={xsmall:544,small:768,medium:992,large:1200};function T(e,t){return t?C[e].valueToClassName[t].split(" "):[]}const M=e=>{let t=class extends e{constructor(...e){super(...e),this._breakpointsHandles=new b.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=x}initialize(){this._breakpointsHandles.add((0,m.init)(this,["breakpoints","size"],this._updateClassNames))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}set breakpoints(e){if(e===this._get("breakpoints"))return;const t=function(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e);if(!t){const e=JSON.stringify(x,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e)}e=t?e:x,this._set("breakpoints",{...e})}_updateClassNames(){if(!this.container)return;const e=y.Z.acquire(),t=y.Z.acquire();let i,s=!1;for(i in C){const n=this[i],o=C[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});n!==o&&(s=!0,this[i]=o,T(i,n).forEach((e=>t.push(e))),T(i,o).forEach((t=>e.push(t))))}s&&(this._applyClassNameChanges(e,t),y.Z.release(e),y.Z.release(t))}_applyClassNameChanges(e,t){const i=this.container;i&&(t.forEach((e=>i.classList.remove(e))),e.forEach((e=>i.classList.add(e))))}_removeActiveClassNames(){const e=this.container;if(!e)return;let t;for(t in C)T(t,this[t]).forEach((t=>e.classList.remove(t)))}};return(0,s._)([(0,a.Cb)()],t.prototype,"breakpoints",null),(0,s._)([(0,a.Cb)()],t.prototype,"orientation",void 0),(0,s._)([(0,a.Cb)()],t.prototype,"widthBreakpoint",void 0),(0,s._)([(0,a.Cb)()],t.prototype,"heightBreakpoint",void 0),t=(0,s._)([(0,l.j)("esri.views.BreakpointsOwner")],t),t};var k=i(73032),S=i(41241),P=i(61106),I=i(52937),O=(i(36348),i(96071)),z=i(65984),E=i(40920),D=i(65287),V=(i(5201),i(19677));const R=e=>{let t=class extends e{async fetchPopupFeatures(e,t){await this.when();const{location:i,queryArea:s,layerViewsAndGraphics:n,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(e,t),r=(0,c.resolve)(o),a=this._queryLayerPopupFeatures({queryArea:s,layerViewsAndGraphics:n,options:t}),l=a.map((e=>e.promise));return{location:i,clientOnlyGraphics:o,allGraphicsPromise:(0,c.eachAlwaysValues)([r,...l]).then(V.xH),promisesPerLayerView:a}}_queryLayerPopupFeatures({queryArea:e,layerViewsAndGraphics:t,options:i}){return t.map((({layerView:t,graphics:s})=>{const n={clientGraphics:s,event:(0,o.pC)(i)?i.event:null,signal:(0,o.pC)(i)?i.signal:null,defaultPopupTemplateEnabled:!!(0,o.pC)(i)&&!!i.defaultPopupTemplateEnabled},r=t.fetchPopupFeatures(e,n);return{layerView:t,promise:r}}))}_isValidPopupGraphic(e,t){return e&&!!e.getEffectivePopupTemplate((0,o.pC)(t)&&t.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,t){const{clientGraphics:i,queryArea:s,location:n}=await this._popupHitTestGraphics(e,t),o=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:r,clientOnlyGraphics:a}=this._graphicsPerFetchPopupLayerView(i,o);return{clientOnlyGraphics:a,layerViewsAndGraphics:r,queryArea:s,location:n}}async _popupHitTestGraphics(e,t){const{results:i,mapPoint:s}=await this.popupHitTest(e),n=i.filter((e=>this._isValidPopupGraphic(e.graphic,t))),o=n.length?n[0].mapPoint:null;return{clientGraphics:n.map((e=>e.graphic)),queryArea:s,location:s||o}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((t=>{this._isValidPopupLayerView(t)&&e.push(t)})),(0,o.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return(0,o.pC)(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,t){const i=[],s=new Map,n=t.map((e=>{const t=[];return"layer"in e?s.set(e.layer,t):s.set(e.graphics,t),{layerView:e,graphics:t}}));for(const t of e){const e=s.get(t.layer)||null;e?e.push(t):i.push(t)}return{layerViewsAndGraphics:n,clientOnlyGraphics:i}}};return t=(0,s._)([(0,l.j)("esri.views.PopupView")],t),t};var A=i(75044);let Z=class extends A.D{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise((0,c.create)(((e,t)=>this._dfd={resolve:e,reject:t})))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new h.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=(0,c.isPromiseLike)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["state"]})],Z.prototype,"done",null),(0,s._)([(0,a.Cb)({readOnly:!0,type:String})],Z.prototype,"state",void 0),(0,s._)([(0,a.Cb)()],Z.prototype,"target",void 0),Z=(0,s._)([(0,l.j)("esri.views.ViewAnimation")],Z),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Z||(Z={}));const L=Z;var N=i(15187),G=i(74386),F=i(82677),j=i(59054);class q{constructor(e,t,i,s){const n=e.targetGeometry,o=t.targetGeometry;s?"string"==typeof s&&(s=(0,j.Qc)(s)||j.LI.ease):s=j.LI.ease,this.easing=s,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const i=this.easing(t);let s,n,o,r;t>=1?(s=this.tCenterX,n=this.tCenterY,o=this.tRotation,r=this.tScale):(s=this.sCenterX+i*this.dCenterX,n=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,r=this.sScale+i*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=n,e.scale=r,e.rotation=o}}let B=class extends F.default{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=j.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new z.Z({targetGeometry:new P.Z,scale:0,rotation:0}),this._updateTask=(0,G.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const s=this.viewpoint;(0,N.JG)(s,t),this.transition=new q(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&("finished"===e.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new L({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==L.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const e=(performance.now()-this._startTime)/this.transition.duration,t=e>=1;this.transition.applyRatio(this.viewpoint,e),t&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,s._)([(0,a.Cb)()],B.prototype,"animation",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"duration",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"transition",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"easing",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"view",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"viewpoint",void 0),B=(0,s._)([(0,l.j)("esri.views.2d.AnimationManager")],B);const U=B;function W(){return Promise.all([Promise.all([i.e(8696),i.e(6563),i.e(7061)]).then(i.bind(i,67061)),Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(4278)]).then(i.bind(i,49894))])}const H=()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(2465),i.e(2725)]).then(i.bind(i,22725)))),K=()=>W().then((()=>Promise.all([i.e(8696),i.e(2012),i.e(6889),i.e(3622),i.e(6759)]).then(i.bind(i,78541)))),$={"base-dynamic":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(3296),i.e(5373)]).then(i.bind(i,35373)))),"base-tile":H,"bing-maps":H,csv:K,"geo-rss":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(8834),i.e(6779),i.e(142),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(7868)]).then(i.bind(i,77868)))),feature:K,geojson:K,graphics:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(1382)]).then(i.bind(i,8280)))),group:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6791)]).then(i.bind(i,26791)))),imagery:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(4464),i.e(3296),i.e(5490)]).then(i.bind(i,76685)))),"imagery-tile":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(4464),i.e(2130)]).then(i.bind(i,62130)))),kml:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(8834),i.e(6779),i.e(142),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(9362)]).then(i.bind(i,79362)))),"map-image":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(3296),i.e(4005)]).then(i.bind(i,94005)))),"map-notes":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(693)]).then(i.bind(i,45565)))),"ogc-feature":K,"open-street-map":H,route:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(4105)]).then(i.bind(i,66853)))),stream:()=>W().then((()=>Promise.all([i.e(8696),i.e(2012),i.e(6889),i.e(3622),i.e(6759),i.e(9198)]).then(i.bind(i,49198)))),tile:H,"vector-tile":()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(9651),i.e(1308)]).then(i.bind(i,51308)))),wcs:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(4464),i.e(2130)]).then(i.bind(i,62130)))),"web-tile":H,wms:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(3296),i.e(8650)]).then(i.bind(i,18650)))),wmts:()=>W().then((()=>Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(2465),i.e(8282)]).then(i.bind(i,68282)))),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null},Y=e=>(0,o.pC)($[e.type]),X=e=>{const t=$[e.type];if(!(0,o.pC)(t))throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new h.Z(`${i}:view-not-supported`,`${t} is not supported in 2D`)}(e);return t(e)};var J,Q=i(53817),ee=i(35470),te=i(18897),ie=i(47005),se=i(17333),ne=i(92232),oe=i(14286);const re=r.Z.getLogger("esri.views.MapView");let ae=J=class extends F.default{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:(0,S.Q8)(this.geometry,this.spatialReference)?(0,S.iV)(this.geometry,this.spatialReference):(0,se.kR)()?(0,se.iV)(this.geometry,this.spatialReference):(re.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}constrain(e,t){if(!this.normalizedGeometry)return e;const i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,ie.aV)(this.normalizedGeometry,i):(0,ie.CI)(this.normalizedGeometry,i))return e;const{coordinate:s}=function(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let n=Number.POSITIVE_INFINITY,o=0,r=0;const a=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const e of l)for(let t=0;t<e.length-1;t++){(0,ne.Tx)(a,s,e,t);const i=(0,oe.i)(s,a);i<n&&(n=i,o=a[0],r=a[1])}return{coordinate:new P.Z({x:o,y:r,spatialReference:i}),distance:n}}(this.normalizedGeometry,i);return s?(e.targetGeometry=s,e):e}clone(){var e,t;return new J({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}};var le;(0,s._)([(0,a.Cb)({constructOnly:!0})],ae.prototype,"geometry",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["geometry","spatialReference"]})],ae.prototype,"normalizedGeometry",null),(0,s._)([(0,a.Cb)({constructOnly:!0})],ae.prototype,"spatialReference",void 0),ae=J=(0,s._)([(0,l.j)("esri.views.2d.constraints.GeometryConstraint")],ae);let he=le=class extends F.default{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}clone(){return new le({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,s._)([(0,a.Cb)()],he.prototype,"enabled",void 0),(0,s._)([(0,a.Cb)()],he.prototype,"rotationEnabled",void 0),he=le=(0,s._)([(0,l.j)("esri.views.2d.constraints.RotationConstraint")],he);const ce=he;var ue;let de=ue=class extends F.default{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:n,maxZoom:o}=this,r=-1,a=-1,l=!1,h=!1;if(0!==i&&0!==s&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const n of t)!l&&i>0&&i>=n.scale&&(r=n.level,l=!0),!h&&s>0&&s>=n.scale&&(a=e?e.level:-1,h=!0),e=n;-1===n&&(n=0===i?0:r),-1===o&&(o=0===s?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),n>o&&([n,o]=[o,n]),i=t[n].scale,s=t[o].scale,t.splice(0,n),t.splice(o-n+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,n=e.targetGeometry,o=t&&t.targetGeometry,r=0!==s&&e.scale<s,a=0!==i&&e.scale>i;if(r||a){const r=a?i:s;if(o){const i=(r-t.scale)/(e.scale-t.scale);n.x=o.x+(n.x-o.x)*i,n.y=o.y+(n.y-o.y)*i}e.scale=r}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],s=t[n+1],s===e)return n+this.effectiveMinZoom+1;if(i>e&&s<e)return n+this.effectiveMinZoom+1-(e-s)/(i-s)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new ue({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t),this._scales[0])),this._lodByScale[e].scale}};(0,s._)([(0,a.Cb)({readOnly:!0})],de.prototype,"effectiveLODs",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],de.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],de.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],de.prototype,"effectiveMinScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],de.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,a.Cb)({type:[te.Z]})],de.prototype,"lods",void 0),(0,s._)([(0,a.Cb)()],de.prototype,"minZoom",void 0),(0,s._)([(0,a.Cb)()],de.prototype,"maxZoom",void 0),(0,s._)([(0,a.Cb)()],de.prototype,"minScale",void 0),(0,s._)([(0,a.Cb)()],de.prototype,"maxScale",void 0),(0,s._)([(0,a.Cb)()],de.prototype,"snapToZoom",void 0),de=ue=(0,s._)([(0,l.j)("esri.views.2d.constraints.ZoomConstraint")],de);const pe=de,me={base:null,key:"type",typeMap:{extent:I.Z,polygon:Q.Z}};let ge=class extends ee.Z.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get _defaultLODs(){const e=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){return new ae({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new ce({rotationEnabled:this.rotationEnabled})}get _zoom(){return new pe({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(e){const t=this.effectiveMaxScale;return 0===t||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return 0===t||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],ge.prototype,"effectiveLODs",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],ge.prototype,"effectiveMinScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],ge.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],ge.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],ge.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,a.Cb)({types:me,value:null})],ge.prototype,"geometry",null),(0,s._)([(0,a.Cb)({type:[te.Z]})],ge.prototype,"lods",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"minScale",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"maxScale",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"minZoom",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"maxZoom",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"rotationEnabled",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"snapToZoom",void 0),(0,s._)([(0,a.Cb)()],ge.prototype,"view",void 0),(0,s._)([(0,a.Cb)({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],ge.prototype,"_defaultLODs",null),(0,s._)([(0,a.Cb)({type:ae,dependsOn:["geometry","view.spatialReference"]})],ge.prototype,"_geometry",null),(0,s._)([(0,a.Cb)({type:ce,dependsOn:["rotationEnabled"]})],ge.prototype,"_rotation",null),(0,s._)([(0,a.Cb)({readOnly:!0,type:pe,dependsOn:["lods","minZoom","maxZoom","minScale","maxScale","snapToZoom","_defaultLODs"]})],ge.prototype,"_zoom",null),ge=(0,s._)([(0,l.j)("esri.views.2d.MapViewConstraints")],ge);const fe=ge;var ve=i(55735),_e=i(92765);let we=class extends F.default{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};(0,s._)([(0,a.Cb)()],we.prototype,"left",void 0),(0,s._)([(0,a.Cb)()],we.prototype,"top",void 0),(0,s._)([(0,a.Cb)()],we.prototype,"right",void 0),(0,s._)([(0,a.Cb)()],we.prototype,"bottom",void 0),we=(0,s._)([(0,l.j)("esri.views.2d.PaddedViewState.Padding")],we);let ye=class extends _e.Z{constructor(...e){super(...e),this.paddedViewState=new _e.Z,this._updateContent=(()=>{const e=(0,ve.a)();return()=>{const t=this._get("size"),i=this._get("padding");if(!t||!i)return;const s=this.paddedViewState;(0,oe.s)(e,i.left+i.right,i.top+i.bottom),(0,oe.d)(e,t,e),(0,oe.c)(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new we,this.size=[0,0]}set padding(e){this._set("padding",e||new we)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,(0,N.H4)(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}};(0,s._)([(0,a.Cb)()],ye.prototype,"paddedViewState",void 0),(0,s._)([(0,a.Cb)({type:we})],ye.prototype,"padding",null),(0,s._)([(0,a.Cb)()],ye.prototype,"viewpoint",null),ye=(0,s._)([(0,l.j)("esri.views.2d.PaddedViewState")],ye);const be=ye;i(68414);var Ce=i(46666),xe=(i(13596),i(1768),i(90461));const Te=r.Z.getLogger("esri.views.MapView");let Me=class extends(R(D.Z)){constructor(e){super(e),this._stationaryTimer=null,this.frameTask=new class{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:e,graphicsView:t,labelManager:i,layerViews:s,state:{id:n}}=this.view;e.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),e.referenceLayerViews.forEach(this._updateLayerView,this),(0,o.pC)(i)&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),(0,o.pC)(t)&&(t.lastUpdateId!==n&&(t.viewChange(),t.lastUpdateId=n),t.updateRequested&&t.processUpdate(this._updateParameters)),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=(0,G.A)(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new xe.T,this.type="2d",this.constraints=new fe,this.padding={top:0,right:0,bottom:0,left:0};const t=this.handles,i=()=>this.notifyChange("updating");t.add([this.watch("viewpoint",(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)}),!0),this.on("resize",(e=>this._resizeHandler(e))),this.watch("animationManager.animation",(e=>{this.animation=e})),this.allLayerViews.on("change",(()=>{i(),t.remove("map-view-base-layerViewsUpdating"),t.add(this.allLayerViews.map((e=>e.watch("updating",i))),"map-view-base-layerViewsUpdating")}))],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new P.Z({x:e[0],y:e[1],spatialReference:t})}set center(e){if(null==e)return;if(!this._normalizeInput(e))return void Te.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");const t=this.viewpoint;(0,N.o2)(t,t,e),this.viewpoint=t}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-base-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",(()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))})),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void Te.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!t.width||!t.height)return void Te.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;(0,N.qf)(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get initialExtentRequired(){const{extent:e,center:t,scale:i,viewpoint:s,zoom:n}=this;return!(this.get("map.initialViewProperties.viewpoint")||e||t&&(0!==i||-1!==n)||s)}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;(0,N.YQ)(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;(0,N.Hy)(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(null==e)return;const t=this._normalizeInput(e);if(!t)return void(!e.scale||isNaN(e.scale)?Te.error("#viewpoint",`invalid scale value of ${e.scale}`):(0,o.Wi)(e.targetGeometry)?Te.error("#viewpoint","geometry not defined"):Te.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(e.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const i=new z.Z({targetGeometry:new P.Z,scale:0,rotation:0});(0,N.JG)(i,t),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(null==e)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);const t=this._get("extent");t&&(this._set("extent",null),this._set("center",t.center))}if(!this.constraints.effectiveLODs)return;const t=this.viewpoint;(0,N.Hy)(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),(0,m.whenTrueOnce)(this,"ready",t&&t.signal).then((()=>{const i={animate:!0,...t},s=(0,N.km)(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)}));Te.error("#goTo()","target cannot be null or undefined")}hitTest(e){return(0,c.reject)("Should be implemented by subclasses")}popupHitTest(e){return this.hitTest(e).then((t=>({...t,mapPoint:this.toMap(e)})))}toMap(e){if(!this.ready)return null;const[t,i]=this.state.toMap([0,0],[e.x,e.y]),s=this.spatialReference;return new P.Z({x:t,y:i,spatialReference:s})}isTileInfoRequired(){return!0}toScreen(e){if(!this.ready)return null;const t=this._normalizeInput(e),i=[t.x,t.y];return this.state.toScreen(i,i),(0,O.vW)(i[0],i[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Te.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(e,t){return!(!t&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(e){return X(e)}hasLayerViewModule(e){return Y(e)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new L),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,n=i.then((()=>{s()&&(this.animation=null)})).catch((e=>{throw s()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),e})),o=(0,c.create)((e=>e(n)));return t.when().catch((()=>{s()&&o.cancel&&o.cancel()})),o}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,n=e.then((e=>{if((0,c.throwIfAborted)(t),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=e,s.finish()}));return this._cancellableGoTo(i,s,n)}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation,n=e.then((e=>{if((0,c.throwIfAborted)(t),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");return s.update(e),this.animationManager.animate(s,this.viewpoint,t),s.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,s,n)}_resizeHandler(e){const t=this.state;if(!t)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],(0,N.SI)(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){const e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new U({view:this})),this._set("state",new be({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new Ce.Z(E.Z.create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[e,t],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new P.Z({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(e){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<160&&(this._stationaryTimer=this._flipStationary(e))}),e)),this._stationaryTimer}_normalizeInput(e,t=this.spatialReference){const i=e&&e.targetGeometry||e;return t?i?t.equals(i.spatialReference)?e:(0,S.Q8)(i,t)?function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=(0,S.iV)(i,t),e):(0,S.iV)(i,t):null:null:e}_getDefaultViewpoint(){const e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==t.zoom&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;let i=null,s=null,n=0;const r=t.viewpoint&&t.viewpoint.rotation,a=t.viewpoint&&t.viewpoint.targetGeometry;(0,o.pC)(a)&&("extent"===a.type?i=a:"point"===a.type&&(s=a,n=t.viewpoint.scale));const l=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),h=this._normalizeInput(this.initialExtent),c=t.extent||i||l||h,u=t.center||s||c&&c.center,d=this.get("map.initialViewProperties.viewpoint.scale"),p=t.scale||n||d||c&&(0,N.EK)(c,this.size),m=this.get("map.initialViewProperties.viewpoint.rotation"),g=t.rotation||r||m||0;return u&&p?new z.Z({targetGeometry:u,scale:p,rotation:g}):null}};(0,s._)([(0,a.Cb)()],Me.prototype,"_stationaryTimer",void 0),(0,s._)([(0,a.Cb)()],Me.prototype,"animation",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Me.prototype,"animationManager",void 0),(0,s._)([(0,a.Cb)({value:null,type:P.Z,dependsOn:["state.id","ready"],autoTracked:!1})],Me.prototype,"center",null),(0,s._)([(0,a.Cb)({type:fe})],Me.prototype,"constraints",null),(0,s._)([(0,a.Cb)({value:null,type:I.Z,dependsOn:["state.id","ready"],autoTracked:!1})],Me.prototype,"extent",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Me.prototype,"featuresTilingScheme",void 0),(0,s._)([(0,a.Cb)()],Me.prototype,"fullOpacity",void 0),(0,s._)([(0,a.Cb)()],Me.prototype,"graphicsView",void 0),(0,s._)([(0,a.Cb)({type:I.Z})],Me.prototype,"initialExtent",void 0),(0,s._)([(0,a.Cb)({dependsOn:["map.initialViewProperties?.viewpoint"],autoTracked:!1})],Me.prototype,"initialExtentRequired",null),(0,s._)([(0,a.Cb)()],Me.prototype,"labelManager",void 0),(0,s._)([(0,a.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Me.prototype,"padding",null),(0,s._)([(0,a.Cb)({type:Object})],Me.prototype,"renderingOptions",void 0),(0,s._)([(0,a.Cb)()],Me.prototype,"resizeAlign",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["state.id"],autoTracked:!1})],Me.prototype,"resolution",null),(0,s._)([(0,a.Cb)({value:0,type:Number,dependsOn:["state.id","ready"],autoTracked:!1})],Me.prototype,"rotation",null),(0,s._)([(0,a.Cb)({value:0,type:Number,dependsOn:["state.id","ready"],autoTracked:!1})],Me.prototype,"scale",null),(0,s._)([(0,a.Cb)({type:k.Z,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"],autoTracked:!1})],Me.prototype,"spatialReference",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Me.prototype,"state",void 0),(0,s._)([(0,a.Cb)({dependsOn:["animation","navigating","resizing","_stationaryTimer"],autoTracked:!1})],Me.prototype,"stationary",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Me.prototype,"supportsGround",void 0),(0,s._)([(0,a.Cb)({type:xe.T,readOnly:!0})],Me.prototype,"timeline",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Me.prototype,"type",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"],autoTracked:!1})],Me.prototype,"updating",null),(0,s._)([(0,a.Cb)({value:null,type:z.Z,dependsOn:["state.id","ready"],autoTracked:!1})],Me.prototype,"viewpoint",null),(0,s._)([(0,a.Cb)({value:-1,dependsOn:["state.id"],autoTracked:!1})],Me.prototype,"zoom",null),Me=(0,s._)([(0,l.j)("esri.views.MapViewBase")],Me);const ke=Me;var Se=i(69948),Pe=i(46539);function Ie(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}class Oe extends Pe.a{constructor(e,t){super(!0),this.view=e,this.registerIncoming("double-click",t,(e=>this._handleDoubleClick(e,t)))}_handleDoubleClick(e,t){Ie(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}class ze extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",i,(e=>this._handleDoubleTapDrag(e)))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:i}=t;if(i!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=t,{view:o}=this,{mapViewNavigation:r}=o;switch(s){case"begin":{const{scale:e}=o;this._startScale=e,this._currentScale=e,this._previousDelta=n,r.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const e=Math.pow(1.015,n.y),t=this._startScale*e,i=t/this._currentScale;r.setViewpointImmediate(i),this._currentScale=t;break}case"end":{const{constraints:e}=o,{effectiveLODs:t,snapToZoom:i}=e;if(!i||!t)return void r.end();const s=e.snapScale(this._currentScale),a=(n.y>0?Math.max(s,e.snapToPreviousScale(this._startScale)):Math.min(s,e.snapToNextScale(this._startScale)))/this._currentScale;r.zoom(a);break}}}}class Ee{constructor(e){this.callbacks=e,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(e){const t=e.data,i=t.pointers.size;switch(t.action){case"start":this.currentCount=i,this.emitStart(e);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(e);break;case"update":this.emitUpdate(e);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(e);break;case"end":this.emitEnd(e),this.currentCount=0}this.previousEvent=e}emitStart(e){this.startEvent=e,this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)}emitUpdate(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)}emitEnd(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent),this.startEvent=null}}class De extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",i,(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ee({start:(e,t)=>{s.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{s.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{s.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>1===e&&Ie(t.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Ve extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.pointerAction=t;const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ee({start:(e,t)=>{s.rotate.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{s.rotate.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{s.rotate.end(),t.stopPropagation()},condition:(e,t)=>1===e&&Ie(t.data,this.pointerAction)}),this.registerIncoming("drag",i,(e=>this.dragEventSeparator.handle(e)))}}var Re=i(17387);function Ae(e){let t=e*e;return e<0&&(t*=-1),t}class Ze extends Pe.a{constructor(e){super(!0),this.view=e,this.frameTask=null,this.watchHandles=new b.Z,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(e=>this.handleEvent(e))),this.handle.pause()}onInstall(e){super.onInstall(e),this.watchHandles.add([(0,m.init)(this.view.navigation.gamepad,"enabled",(e=>{e?(this.handle.resume(),this.frameTask||(this.frameTask=(0,G.A)({update:e=>this.frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}))])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(e){const t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this.transformation)):(this.currentDevice=e.data.device,function(e,t,i){const s=i,n=e.state,o=e.device,r="forward-down"===t.tiltDirection?1:-1;"standard"===o.deviceType?(s.translation[0]=Ae(n.axes[0]),s.translation[1]=Ae(n.axes[1]),s.translation[2]=Ae(n.buttons[7])-Ae(n.buttons[6]),s.heading=Ae(n.axes[2]),s.tilt=Ae(n.axes[3])):"spacemouse"===o.deviceType&&(s.translation[0]=1.2*Ae(n.axes[0]),s.translation[1]=1.2*Ae(n.axes[1]),s.translation[2]=2*-Ae(n.axes[2]),s.heading=1.2*Ae(n.axes[5]),s.tilt=1.2*Ae(n.axes[3])),s.tilt*=r,(0,Re.a)(s.translation,s.translation,1)}(e.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(e){const t=this.transformation;if(function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t))return;const i=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,n=Ne*s*e;(0,N.Rx)(i,i,[t.translation[0]*n,-t.translation[1]*n]);const o=1+t.translation[2]*Ge*e,r=this.view.constraints.rotationEnabled?-t.heading*Le*e:0,a=this.view.size,l=[a[0]/2,a[1]];(0,N.UZ)(i,i,o,r,l,a);const h=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=h}}const Le=.06,Ne=.7,Ge=6e-4;class Fe extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=this._keyMap[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class je extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",i,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}class qe extends Pe.a{constructor(e,t,i){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",i,(e=>this._handleKeyDown(e))),t.zoomIn.forEach((e=>this._keysToZoomAction[e]=0)),t.zoomOut.forEach((e=>this._keysToZoomAction[e]=1))}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:i}=e.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then((()=>n.end())),e.stopPropagation()}}class Be extends Pe.a{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:i,y:s,deltaY:n}=e.data,o=1/Math.pow(.6,1/60*n),r=t.zoom(o,[i,s]);r&&(this._canZoom=!1,r.catch((()=>{})).then((()=>{this._canZoom=!0,t.end()})))}}class Ue extends Pe.a{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",(e=>this._handleDrag(e))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const t=this.view.mapViewNavigation;this.dragEventSeparator=new Ee({start:(e,i)=>{t.pinch.begin(this.view,i.data),i.stopPropagation()},update:(e,i)=>{t.pinch.update(this.view,i.data),i.stopPropagation()},end:(e,i)=>{t.pinch.end(this.view),i.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this.dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var We=i(63345),He=i(37699),Ke=i(33655);function $e(e){const t=e.native;return t?{buttons:t.buttons.map((e=>e.pressed?e.value?e.value:1:0)),axes:t.axes.map((t=>function(e,t){const i=Math.abs(e);return i<t?0:(0,Ke.Xx)(e)*(i-t)/(1-t)}(t,e.axisThreshold)))}:{buttons:[],axes:[]}}class Ye{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this.onConnectGamepad=e=>{this.connectGamepad(e.gamepad)},this.onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,s=this.inputDevices[i];s&&(this.emitGamepadEvent(t,$e(s),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(s),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null,this.supported="getGamepads"in window.navigator,this.supported&&(this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e}connectGamepad(e){const t=new He.Z(e);"unknown"!==t.deviceType&&(this.inputDevices[e.index]=t,this.input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling()}startPolling(){null==this.frameTask&&(this.frameTask=(0,G.A)({update:()=>this.readGamepadState()}))}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),i="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this.forEachGamepad((e=>{const t=this.inputDevices[e.index];if(!t)return;const s=this.latestUpdate[e.index],n=$e(t),o=i||function(e){for(let t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(let t=0;t<e.buttons.length;t++)if(0!==e.buttons[t])return!1;return!0}(n);if(s){if(s.timestamp===e.timestamp)return;if(!s.active&&o)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}(s.state,n))return}this.emitGamepadEvent(e,n,!o)}))}forEachGamepad(e){const t=window.navigator.getGamepads();for(let i=0;i<t.length;i++){const s=t[i];this.validate(s)&&e(s)}}emitGamepadEvent(e,t,i){const s=this.latestUpdate[e.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:i},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:o})}validate(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}const Xe=(0,n.Z)("trident"),Je=(0,n.Z)("edge"),Qe=(0,n.Z)("chrome"),et=(0,n.Z)("ff"),tt=(0,n.Z)("safari"),it="esri-view-surface--touch-none",st="esri-view-surface--touch-pan";class nt{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Ye(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(ot[t],e),delete this._active[t]}e&&e.forEach((e=>{if(!this._active[e]&&ot[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(ot[e],t),this._active[e]=t}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?it:st),this._element.classList.add(this._browserTouchPanningEnabled?st:it)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(it),this._element.classList.remove(st),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(e){}}_updateNormalizedPointerLikeEvent(e,t){const i=(0,w.Eu)(this._element,e);return nt.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),t.x=i.x,t.y=i.y,t}_handleKey(e,t){const i=(0,We.kK)(t);i&&"key-up"===e&&this._keyDownState.delete(i);const s={native:t,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,i)}_handlePointerPreventDefault(e,t){const i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,i)}_handleMouseWheel(e,t){let i=t.deltaY;switch(t.deltaMode){case 0:(Xe||Je)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Xe||Je?i*=.7:Qe||tt?i*=.6:et&&(i*=1.375);const s=Math.abs(i);if(s>100){const e=.02;i=i/s*200/(1+Math.exp(-e*(s-100)))}const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:i});this._callback(e,n)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const i={native:t};t.preventDefault(),this._callback(e,i)}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}nt.test={disableSubpixelCoordinates:!1};const ot={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class rt extends Pe.a{constructor(){super(!0),this.registerIncoming("context-menu",(e=>{e.data.native.preventDefault()}))}}var at=i(2992),lt=i(77293),ht=i(16853);const ct=250,ut=10,dt=350,pt=35;class mt extends Pe.a{constructor(e=ct,t=ut,i=dt,s=pt,n=at.Z){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null)}))}get hasPendingInputs(){return(0,lt.o)(this._pointerState,(e=>null!=e.doubleClickTimeout))}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),s=this._pointerState.get(i);if(s){const n="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;(0,ht.nk)(s.event.data,t)>n?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(e)}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(t)),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0)}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0)}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}}class gt extends Pe.a{constructor(e=ct,t=ut,i=dt,s=pt,n=at.Z){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,O.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Ee({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming("drag",(e=>this._dragEventSeparator.handle(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}get hasPendingInputs(){return(0,lt.o)(this._pointerState,(e=>null!=e.doubleTapTimeout))}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,i){const{button:s,buttons:n,pointer:o,pointers:r,pointerType:a,timestamp:l}=i;return{action:e,delta:t,button:s,buttons:n,pointer:o,pointers:r,pointerType:a,timestamp:l}}_dragStart(e,t){if(!this._doubleTapDragReady||1!==e)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=t,{center:n}=i;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",(0,O.vW)(0,0),i);this._doubleTapDrag.emit(o,void 0,s),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,n=(0,O.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,t);this._doubleTapDrag.emit(o,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:i}=e,{center:s}=t,n=(0,O.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,t);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,i=this._pointerId(t),s=this._pointerState.get(i),{pointerType:n}=t.native;if(s){const o="touch"===n?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),(0,ht.nk)(s.event.data,t)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(e){const{native:t}=e,{pointerId:i,button:s,pointerType:n}=t;return"mouse"===n?`${i}:${s}`:`${n}`}_storePointerDown(e){const{data:t}=e,{pointerType:i}=t.native,s=this._pointerId(t),n="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(s)),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}var ft,vt=i(98034);class _t extends Pe.a{constructor(e){super(!1),this.navigationTouch=e,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this))}createPayload(e,t,i,s){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:t.buttons,timestamp:s,pointers:bt(this.activePointerMap),pointer:t,angle:i.angle,radius:i.radius,center:i.center}}addPointer(e){const t=e.native.pointerId,i=yt(this.activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(t,s);const n=Ct(s,wt(this.activePointerMap));s.initialAngle=n,s.lastAngle=n,this.updatePointerAngles(i)}updatePointer(e){if(e&&null==e.x&&null==e.y)return;const t=e.native.pointerId,i=this.activePointerMap.get(t);i?i.event=e:this.addPointer(e)}removePointer(e){const t=yt(this.activePointerMap).angle;this.activePointerMap.delete(e),this.updatePointerAngles(t)}updatePointerAngles(e){const t=yt(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=Ct(i,t)-e,i.lastAngle=Ct(i,t)-e}))}emitEvent(e,t,i){const s=yt(this.activePointerMap);this.drag.emit(this.createPayload(e,t,s,i),void 0,this.startStateModifiers)}handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,i=(0,vt.HA)(e.timestamp);this.activePointerMap.get(t)&&(1===this.activePointerMap.size?(this.updatePointer(e.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",e.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(t)):(this.removePointer(t),this.emitEvent("removed",e.data,(0,vt.HA)(e.timestamp))))}handlePointerDrag(e){const t=e.data,i=t.currentEvent,s=(0,vt.HA)(e.timestamp);switch(t.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this.updatePointer(i),!this.isCurrentDragSuppressed&&this.emitEvent("update",i,s)):(this.addPointer(i),this.emitEvent("added",i,s),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(i),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",i,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function wt(e){const t=[];return e.forEach((e=>{t.push((0,O.vW)(e.event.x,e.event.y))})),(0,ht.y_)(t)}function yt(e){const t=wt(e);let i=0;return e.forEach((e=>{let s=Ct(e,t),n=s-e.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=e.lastAngle+n,e.lastAngle=s;const o=s-e.initialAngle;i+=o})),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function bt(e){const t=new Map;return e.forEach(((e,i)=>t.set(i,e.event))),t}function Ct(e,t){const i=e.event,s=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,s)}!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"}(ft||(ft={}));class xt extends Pe.a{constructor(e=ct,t=ut,i=dt,s=pt,n=at.Z){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=t,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")}))}onUninstall(){this._pointerState.forEach((e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(e){const t=e.data,i=this._pointerId(t);if(!this._pointerState.has(i)){const e={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(i,e),this.startCapturingPointer(t.native)}}_handlePointerLoss(e,t){const i=e.data,s=this._pointerId(i),n=this._pointerState.get(s);if(n&&"pointer-up"===t&&n.downButton===i.native.button){const t=n.immediateDoubleClick;if(t){t.timeoutHandle.remove();const s="touch"===e.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;(0,ht.nk)(t,e.data)>s?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,t.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(e.data)),i)}}_pointerId(e){const t=e.native;return"mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_removeState(e){const t=this._pointerId(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}var Tt=i(94535);const Mt={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},kt={zoomIn:["=","+"],zoomOut:["-","_"]},St={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Pt=class extends F.default{constructor(){super(...arguments),this._handles=new b.Z}initialize(){this._handles.add([(0,m.whenNot)(this.view,"ready",(()=>this._disconnect())),(0,m.when)(this.view,"ready",(()=>this._connect()))])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new nt(e,this.view.input),i=[new xt,new Tt.e,new mt,new _t(this.view.navigation),new gt],s=new Se.$({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new rt],Se.f.INTERNAL),s.installHandlers("navigation",[new Ue(this.view),new Ze(this.view),new Be(this.view),new Oe(this.view),new Oe(this.view,["Ctrl"]),new De(this.view,"primary"),new Fe(this.view,Mt),new qe(this.view,kt),new je(this.view,St),new Ve(this.view,"secondary"),new ze(this.view,"touch")],Se.f.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,(0,m.init)(this.view.navigation,"browserTouchPanEnabled",(e=>{this._source.browserTouchPanningEnabled=!e}))}get test(){return{inputManager:this._inputManager}}};(0,s._)([(0,a.Cb)()],Pt.prototype,"view",void 0),Pt=(0,s._)([(0,l.j)("esri.views.2d.input.MapViewInputManager")],Pt);const It=Pt;var Ot=i(78745);let zt=0,Et=class extends F.default{constructor(){super(...arguments),this.color=new Ot.default([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return zt++}};(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],Et.prototype,"version",null),(0,s._)([(0,a.Cb)({type:Ot.default})],Et.prototype,"color",void 0),(0,s._)([(0,a.Cb)({type:Ot.default})],Et.prototype,"haloColor",void 0),(0,s._)([(0,a.Cb)()],Et.prototype,"haloOpacity",void 0),(0,s._)([(0,a.Cb)()],Et.prototype,"fillOpacity",void 0),Et=(0,s._)([(0,l.j)("esri.views.2d.support.HighlightOptions")],Et);const Dt=Et;var Vt=i(43129);const Rt={checkMajorWebPerformanceCaveat:!0};var At=i(60263),Zt=i(77827);const Lt="esri-component";let Nt=class extends F.default{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Lt),t&&t.classList.remove(Lt),this._set("node",e))}castNode(e){return e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),(0,Zt.L7)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};(0,s._)([(0,a.Cb)({dependsOn:[],autoTracked:!1})],Nt.prototype,"id",null),(0,s._)([(0,a.Cb)()],Nt.prototype,"node",null),(0,s._)([(0,At.p)("node")],Nt.prototype,"castNode",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Nt.prototype,"widget",void 0),Nt=(0,s._)([(0,l.j)("esri.views.ui.Component")],Nt);const Gt=Nt;var Ft=i(40450);const jt={left:0,top:0,bottom:0,right:0},qt={bottom:30,top:15,right:15,left:15},Bt="esri-ui",Ut="esri-ui-corner",Wt="esri-ui-inner-container";function Ht(e){return"object"!=typeof e||e instanceof Gt||"declaredClass"in e||!("component"in e||"index"in e||"position"in e)?null:e}function Kt(e,{top:t,bottom:i,left:s,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=s,e.style.right=n}let $t=class extends ee.Z.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new b.Z,this.view=null,this._initContainers()}initialize(){this._handles.add([(0,m.init)(this,"view.padding, container",this._applyViewPadding.bind(this)),(0,m.init)(this,"padding",this._applyUIPadding.bind(this))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Bt),this._attachContainers(e)),t&&(t.classList.remove(Bt),Kt(t,{top:"",bottom:"",left:"",right:""}),(0,Zt.cS)(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:{...qt,...e}}get width(){const e=this.get("view.width")||0;if(0===e)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,s;if(Array.isArray(e))return void e.forEach((e=>this.add(e,t)));const n=Ht(e);n&&({index:i,position:t,component:e,key:s}=n),t&&"object"==typeof t&&({index:i,key:s,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map((e=>this.remove(e,t)));const i=this._find(e);if(i){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==t)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map((e=>this.empty(e))).reduce(((e,t)=>e.concat(t))):"manual"===(e=e||"manual")?Array.prototype.slice.call(this._manualContainer.children).filter((e=>!e.classList.contains(Ut))).map((e=>this.remove(e))):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach((e=>this.move(e,t))),!e)return;let i;const s=Ht(e)||Ht(t);if(s&&(i=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}_add(e,t,i,s){e instanceof Gt||(e=new Gt({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof Gt?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||jt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Wt),e.classList.add("esri-ui-corner-container");const t=document.createElement("div");t.classList.add(Wt),t.classList.add("esri-ui-manual-container");const i=document.createElement("div");i.classList.add("esri-ui-top-left"),i.classList.add(Ut),e.appendChild(i);const s=document.createElement("div");s.classList.add("esri-ui-top-right"),s.classList.add(Ut),e.appendChild(s);const n=document.createElement("div");n.classList.add("esri-ui-bottom-left"),n.classList.add(Ut),e.appendChild(n);const o=document.createElement("div");o.classList.add("esri-ui-bottom-right"),o.classList.add(Ut),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const r=(0,Ft.dZ)();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":r?s:i,"top-trailing":r?i:s,"bottom-leading":r?o:n,"bottom-trailing":r?n:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||"manual",s=e.index,n=this._positionNameToContainerLookup[i],o=s>-1;let r,a,l;var h;(h=t.widget)&&!h._started&&"function"==typeof h.postMixInProperties&&"function"==typeof h.buildRendering&&"function"==typeof h.postCreate&&"function"==typeof h.startup&&t.widget.startup(),o?(r=Array.prototype.slice.call(n.children),a=0===s,a?n.firstChild?(0,Zt.Vt)(t.node,n.firstChild):n.appendChild(t.node):(l=s>=r.length,l?n.appendChild(t.node):(0,Zt.Vt)(t.node,r[s]))):n.appendChild(t.node)}_applyViewPadding(){const e=this.container;e&&Kt(e,this._toPxPosition(this._getViewPadding()))}_applyUIPadding(){const e=this._innerContainer;e&&Kt(e,this._toPxPosition(this.padding))}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return 0===e?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some((s=>(t=s===e,t&&(i=s),t))),i}_findById(e){let t,i=null;return this._components.some((s=>(t=s.id===e,t&&(i=s),t))),i}_findByNode(e){let t,i=null;return this._components.some((s=>(t=s.node===e,t&&(i=s),t))),i}};(0,s._)([(0,a.Cb)()],$t.prototype,"container",null),(0,s._)([(0,a.Cb)({dependsOn:["view.height"]})],$t.prototype,"height",null),(0,s._)([(0,a.Cb)({value:qt})],$t.prototype,"padding",null),(0,s._)([(0,At.p)("padding")],$t.prototype,"castPadding",null),(0,s._)([(0,a.Cb)()],$t.prototype,"view",void 0),(0,s._)([(0,a.Cb)({dependsOn:["view.width"]})],$t.prototype,"width",null),$t=(0,s._)([(0,l.j)("esri.views.ui.UI")],$t);const Yt=$t;var Xt=i(51894),Jt=i(24258),Qt=i(9200),ei=i(90846),ti=i(19401),ii=i(90806),si=i(59351),ni=i(77204);function oi(e,t,i){i&&t&&(e.find((e=>e.layerView===t&&e.text===i))||e.push({text:i,layerView:t}))}const ri=[];let ai=class extends ni.r{constructor(e){super(e),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new u.Z,this.view=null,this._allLayerViewsChange=e=>{this.handles.remove("suspension");const t=this.get("view.allLayerViews");t&&this.handles.add(t.map((e=>e.watch(["suspended","attributionVisible"],this._updateAttributionItems))),"suspension"),e&&e.removed&&e.removed.forEach((e=>{this._pendingAttributions.delete(e),this._fetchedAttributionData.delete(e)})),this._updateAttributionItems()},this._updateAttributionItems=()=>{const e=this.get("view.allLayerViews");var t,i;ri.length=0,e?(e.forEach((e=>{if(e.suspended||!e.get("layer.attributionVisible"))return;const t=e.layer;if(function(e){return e&&"copyright"in e&&"function"==typeof e.originOf&&"user"===e.originOf("copyright")}(t))return void oi(ri,e,t.copyright);if(t.hasAttributionData){if(this._fetchedAttributionData.has(e)){const i=this._fetchedAttributionData.get(e);return void(i&&oi(ri,e,this._getDynamicAttribution(i,this.view,t)))}return void this._fetchAttributionData(e)}const i=t.get("portalItem.accessInformation");oi(ri,e,i||t.copyright)})),t=this.items,i=ri,(t.length!==i.length||t.some(((e,t)=>e.text!==i[t].text)))&&(this.items.removeAll(),this.items.addMany(ri)),ri.length=0,this.notifyChange("state")):this.clear()},this.handles.add([(0,m.on)(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),(0,m.whenTrue)(this,"view.stationary",(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await(0,si.q6)(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,"bing-maps"===e.layer.type):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,s={};if(!i)return s;for(let e=0;e<i.length;e++){const n=i[e],o=n.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,r=i.zoomMin-(t&&i.zoomMin?1:0),a=i.zoomMax-(t&&i.zoomMax?1:0),l={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:k.Z.WGS84},h={extent:(0,S.$)(l),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:e};for(let e=r;e<=a;e++)s[e]=s[e]||[],s[e].push(h)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,i){const{extent:s,scale:n}=t;let o=i.tileInfo.scaleToZoom(n);if(o=Math.min(e.maxKey,Math.round(o)),!s||null==o||o<=-1)return"";const r=e[o],a=(0,S.iV)(s.center.clone().normalize(),t.spatialReference),l={};return r?r.filter((e=>{const t=!l[e.id]&&a&&(0,ie.aV)(e.extent,a);return t&&(l[e.id]=!0),t})).sort(((e,t)=>t.score-e.score||e.objectId-t.objectId)).map((e=>e.attribution)).join(", "):""}};(0,s._)([(0,a.Cb)({readOnly:!0,type:u.Z})],ai.prototype,"items",void 0),(0,s._)([(0,a.Cb)({dependsOn:["view.ready"],readOnly:!0})],ai.prototype,"state",null),(0,s._)([(0,a.Cb)()],ai.prototype,"view",void 0),ai=(0,s._)([(0,l.j)("esri.widgets.Attribution.AttributionViewModel")],ai);const li=ai;let hi=class extends ii.default{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass="esri-icon-description",this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new li}initialize(){this.own((0,m.on)(this,"viewModel.items","change",(()=>this.scheduleRender())))}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={"esri-attribution--open":this._isOpen};return(0,ti.j)("div",{bind:this,class:this.classes("esri-attribution esri-widget",e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,ti.j)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",(0,ti.j)("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive(),i=t?0:-1,{attributionText:s}=this,n=t?"button":void 0,o={"esri-attribution__sources--open":e,"esri-interactive":t};return(0,ti.j)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",o),innerHTML:s,role:n,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=e,o=n>=s,r=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,r&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive()&&(this._isOpen=!this._isOpen)}_isInteractive(){return this._isOpen||this._attributionTextOverflowed}};(0,s._)([(0,a.Cb)({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0,autoTracked:!1}),(0,ei.G)()],hi.prototype,"attributionText",null),(0,s._)([(0,a.Cb)()],hi.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)(),(0,ei.G)()],hi.prototype,"itemDelimiter",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],hi.prototype,"label",void 0),(0,s._)([(0,a.Cb)(),(0,ei.G)(),(0,Qt.H)("esri/widgets/Attribution/t9n/Attribution")],hi.prototype,"messages",void 0),(0,s._)([(0,Xt.B)("viewModel.view")],hi.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:li}),(0,ei.G)(["state","view.size"])],hi.prototype,"viewModel",void 0),(0,s._)([(0,Jt.h)()],hi.prototype,"_toggleState",null),hi=(0,s._)([(0,l.j)("esri.widgets.Attribution")],hi);const ci=hi;var ui=i(88355);let di=class extends F.default{constructor(e){super(e),this._handles=new b.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,m.when)(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,s._)([(0,a.Cb)({dependsOn:["view.ready"],readOnly:!0})],di.prototype,"state",null),(0,s._)([(0,a.Cb)()],di.prototype,"navigationMode",void 0),(0,s._)([(0,a.Cb)()],di.prototype,"view",void 0),di=(0,s._)([(0,l.j)("esri.widgets.NavigationToggleViewModel")],di);const pi=di,mi="esri-navigation-toggle__button esri-widget--button",gi="esri-navigation-toggle__button--active";let fi=class extends ii.default{constructor(e,t){super(e,t),this.iconClass="esri-icon-pan2",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new pi}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e="disabled"===this.get("viewModel.state"),t="pan"===this.get("viewModel.navigationMode"),i={"esri-disabled":e,"esri-navigation-toggle--horizontal":"horizontal"===this.layout},s={[gi]:t},n={[gi]:!t},o=e?-1:0,r=this.messages.toggle;return(0,ti.j)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":r,title:r},(0,ti.j)("div",{class:this.classes(mi,"esri-navigation-toggle__button--pan",s)},(0,ti.j)("span",{class:"esri-icon-pan"})),(0,ti.j)("div",{class:this.classes(mi,"esri-navigation-toggle__button--rotate",n)},(0,ti.j)("span",{class:"esri-icon-rotate"})))}_toggle(){this.toggle()}};(0,s._)([(0,a.Cb)()],fi.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],fi.prototype,"label",void 0),(0,s._)([(0,a.Cb)({value:"vertical"}),(0,ei.G)()],fi.prototype,"layout",null),(0,s._)([(0,a.Cb)(),(0,ei.G)(),(0,Qt.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],fi.prototype,"messages",void 0),(0,s._)([(0,Xt.B)("viewModel.view"),(0,ei.G)()],fi.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:pi}),(0,ei.G)(["viewModel.state","viewModel.navigationMode"])],fi.prototype,"viewModel",void 0),(0,s._)([(0,Jt.h)()],fi.prototype,"_toggle",null),fi=(0,s._)([(0,l.j)("esri.widgets.NavigationToggle")],fi);const vi=fi;let _i=class extends ii.default{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={"esri-disabled":!this.enabled,"esri-interactive":this.enabled},i={[this.iconClass]:!!this.iconClass};return(0,ti.j)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},(0,ti.j)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",i)}),(0,ti.j)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,s._)([(0,a.Cb)()],_i.prototype,"action",void 0),(0,s._)([(0,a.Cb)(),(0,ei.G)()],_i.prototype,"enabled",void 0),(0,s._)([(0,a.Cb)(),(0,ei.G)()],_i.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)(),(0,ei.G)()],_i.prototype,"title",void 0),(0,s._)([(0,Jt.h)()],_i.prototype,"_triggerAction",null),_i=(0,s._)([(0,l.j)("esri.widgets.IconButton")],_i);const wi=_i;let yi=class extends F.default{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};(0,s._)([(0,a.Cb)({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],yi.prototype,"canZoomIn",null),(0,s._)([(0,a.Cb)({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],yi.prototype,"canZoomOut",null),(0,s._)([(0,a.Cb)()],yi.prototype,"view",void 0),yi=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomConditions2D")],yi);const bi=yi;let Ci=class extends F.default{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,s._)([(0,a.Cb)({dependsOn:["view.ready"],readOnly:!0})],Ci.prototype,"canZoomIn",null),(0,s._)([(0,a.Cb)({dependsOn:["view.ready"],readOnly:!0})],Ci.prototype,"canZoomOut",null),(0,s._)([(0,a.Cb)()],Ci.prototype,"view",void 0),Ci=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomConditions3D")],Ci);const xi=Ci;let Ti=class extends F.default{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new bi({view:e}):"3d"===e.type&&(this._zoomConditions=new xi({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():(0,c.ignoreAbortErrors)(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():(0,c.ignoreAbortErrors)(e.goTo({zoomFactor:.5}))}};(0,s._)([(0,a.Cb)()],Ti.prototype,"_zoomConditions",void 0),(0,s._)([(0,a.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Ti.prototype,"canZoomIn",void 0),(0,s._)([(0,a.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Ti.prototype,"canZoomOut",void 0),(0,s._)([(0,a.Cb)({dependsOn:["view.ready"],readOnly:!0})],Ti.prototype,"state",null),(0,s._)([(0,a.Cb)()],Ti.prototype,"view",null),Ti=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomViewModel")],Ti);const Mi=Ti;let ki=class extends ii.default{constructor(e,t){super(e,t),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Mi}initialize(){this._zoomInButton=new wi({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new wi({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={"esri-zoom--horizontal":"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===e.state&&e.canZoomIn,this._zoomOutButton.enabled="ready"===e.state&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,ti.j)("div",{class:this.classes("esri-zoom esri-widget",t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,s._)([(0,a.Cb)()],ki.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ki.prototype,"label",void 0),(0,s._)([(0,a.Cb)({value:"vertical"}),(0,ei.G)()],ki.prototype,"layout",null),(0,s._)([(0,a.Cb)(),(0,ei.G)(),(0,Qt.H)("esri/widgets/Zoom/t9n/Zoom")],ki.prototype,"messages",void 0),(0,s._)([(0,Xt.B)("viewModel.view"),(0,ei.G)()],ki.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:Mi}),(0,ei.G)(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],ki.prototype,"viewModel",void 0),ki=(0,s._)([(0,l.j)("esri.widgets.Zoom")],ki);const Si=ki;r.Z.getLogger("esri.views.ui.DefaultUI");let Pi=class extends Yt{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([(0,m.init)(this,"components",this._componentsWatcher.bind(this)),(0,m.init)(this,"view",this._updateViewAwareWidgets.bind(this))])}_add(e,t,i,s){if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,s)}_removeComponents(e){e.forEach((e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())}))}_updateViewAwareWidgets(e){this.components.forEach((t=>{const i=this._find(t),s=i&&i.widget;(function(e){return e&&void 0!==e.view})(s)&&(s.view=e)}))}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(-1===e.indexOf("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(e){this.initialized&&e.forEach((e=>this.add(this._createComponent(e),this._defaultPositionLookup[e])))}_createComponent(e){const t=this._createWidget(e);if(t)return new Gt({id:e,node:t})}_createWidget(e){return"attribution"===e?this._createAttribution():"compass"===e?this._createCompass():"navigation-toggle"===e?this._createNavigationToggle():"zoom"===e?this._createZoom():void 0}_createAttribution(){return new ci({view:this.view})}_createCompass(){return new ui.default({view:this.view})}_createNavigationToggle(){return new vi({view:this.view})}_createZoom(){return new Si({view:this.view})}};(0,s._)([(0,a.Cb)()],Pi.prototype,"components",void 0),Pi=(0,s._)([(0,l.j)("esri.views.ui.DefaultUI")],Pi);const Ii=Pi;let Oi=class extends Ii{constructor(e){super(e),this.components=["attribution","zoom"]}};(0,s._)([(0,a.Cb)()],Oi.prototype,"components",void 0),Oi=(0,s._)([(0,l.j)("esri.views.ui.2d.DefaultUI2D")],Oi);const zi=Oi,Ei=r.Z.getLogger("esri.views.MapView");let Di,Vi,Ri,Ai,Zi;function Li(e,t,i){if(e)if(Array.isArray(e)||u.Z.isCollection(e)){if(0===e.length)return;e.forEach((e=>Li(e,t,i)))}else!function(e){return e instanceof d.default}(e)?i.add(e):t.add(e)}let Ni=class extends(M((0,_.f)(ke))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new p.Z({root:this,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:e=>null}),this.graphicsView=null,this.highlightOptions=new Dt,this.inputManager=new It({view:this}),this.mapViewNavigation=null,this.supersampleScreenhotsEnabled=!0,this.ui=new zi,this.rendering=!1,(0,f.j2)()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e)}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if((0,w.Rw)(e)){const t=(0,w.s6)(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const i=(0,w.Rw)(e)?(0,w.s6)(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return(0,c.resolve)({screenPoint:i,results:[]});const s=this.toMap(i),n=[this.graphicsView];n.push.apply(n,this.allLayerViews.toArray().reverse());const o=new Set,r=new Set,a=new Set,l=new Set;return t&&(Li(t&&t.include,o,a),Li(t&&t.exclude,r,l)),(0,c.all)(n.map((e=>!e||!e.hitTest||a.size>0&&!e.layer||a.size>0&&e.layer&&!a.has(e.layer)||l.size>0&&e.layer&&l.has(e.layer)?null:e.hitTest(i.x,i.y)))).then((e=>({screenPoint:i,results:e.filter((e=>null!=e&&(!(o.size>0)||o.has(e))&&(!(r.size>0)||!r.has(e)))).map((e=>({mapPoint:s,graphic:e})))})))}takeScreenshot(e){return this.ready?this._stage.takeScreenshot((0,v.uz)(e,this),this.allLayerViews):(0,c.reject)("Map view cannot be used before it is ready")}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return(0,c.create)((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let e=function(e){e={...Rt,...e};const t=(0,Vt.Z)();return t.available?e.checkMajorWebPerformanceCaveat&&t.majorPerformanceCaveat?new h.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?t.supportsElementIndexUint?t.supportsStandardDerivatives?t.supportsInstancedArrays?null:new h.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new h.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new h.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new h.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new h.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new h.Z("webgl:required","WebGL is required but not supported.")}({checkMajorWebPerformanceCaveat:!1});return(0,n.Z)("safari")&&(0,n.Z)("safari")<9&&(e=new h.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,n.Z)("safari")})),(0,o.pC)(e)?(Ei.warn("#validate()",e.message),(0,c.reject)(e)):async function(){const[,{GraphicsView2D:e,LabelManager:t,MapViewNavigation:s,MagnifierView2D:n,Stage:o}]=await Promise.all([Promise.all([i.e(8696),i.e(6563),i.e(7061)]).then(i.bind(i,67061)),Promise.all([i.e(8696),i.e(6563),i.e(3956),i.e(2012),i.e(6889),i.e(7406),i.e(3622),i.e(6785),i.e(8525),i.e(1878),i.e(3628),i.e(9334),i.e(4278)]).then(i.bind(i,49894))]);Vi=e,Ri=t,Ai=s,Zi=n,Di=o}()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new Di(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new Vi({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate()}),s=new Ai({view:this,animationManager:this.animationManager}),n=new Ri({view:this});this._magnifierView=new Zi,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",s),this._set("labelManager",n),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("post-render",(()=>this._set("rendering",t.renderRequested))),t.on("will-render",(()=>this._set("rendering",t.renderRequested))),t.on("webgl-error",(e=>this.fatalError=e.error)),(0,m.init)(this,"stationary",(e=>t.stationary=e),!0),(0,m.init)(this,"state.id",(()=>t.state=this.state),!0),(0,m.init)(this,"background",(e=>{t.background=e,this._magnifierView.background=e}),!0),(0,m.init)(this,"magnifier",(e=>this._magnifierView.magnifier=e),!0),(0,m.init)(this,"renderingOptions",(e=>t.renderingOptions=e),!0),(0,m.init)(this,"highlightOptions",(()=>t.highlightOptions=this.highlightOptions),!0)],"map-view"),t.state=this.state,this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach((e=>e(this))),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container)}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}};(0,s._)([(0,a.Cb)({type:g.Z,dependsOn:["map.initialViewProperties?.background"]})],Ni.prototype,"background",null),(0,s._)([(0,a.Cb)()],Ni.prototype,"graphicsView",void 0),(0,s._)([(0,a.Cb)({type:Dt})],Ni.prototype,"highlightOptions",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Ni.prototype,"inputManager",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Ni.prototype,"textureManager",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Ni.prototype,"mapViewNavigation",void 0),(0,s._)([(0,a.Cb)({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],Ni.prototype,"navigating",null),(0,s._)([(0,a.Cb)({type:Boolean,constructOnly:!0})],Ni.prototype,"supersampleScreenhotsEnabled",void 0),(0,s._)([(0,a.Cb)({type:zi})],Ni.prototype,"ui",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Ni.prototype,"rendering",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Ni.prototype,"renderCanvas",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Ni.prototype,"deactivatedWebGLExtensions",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Ni.prototype,"debugWebGLExtensions",void 0),Ni=(0,s._)([(0,l.j)("esri.views.MapView")],Ni);const Gi=Ni},9512:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});var s=i(59472),n=i(39105),o=i(74386),r=i(64345);class a{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class l{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new r.Z(e.peeker),this.process=e.process;const t=e.scheduler;e.task&&(0,s.pC)(t)&&(this._task=t.registerTask(e.task,(e=>this.update(e)),(()=>this.needsUpdate())))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((t=>e.push(t))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((t,i)=>e(i)))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,t){const i=this.get(e);if(i)return i;let o;const r=(0,n.createAbortController)();let a=null;t&&(a=(0,n.onAbort)(t,(()=>r.abort())));const l=()=>{h.remove(),(0,s.pC)(a)&&a.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},h=(0,n.onAbortOrThrow)(r.signal,(()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),l(),o.reject((0,n.createAbortError)())}));return o=(0,n.createDeferred)(),this._deferreds.set(e,o),this._controllers.set(e,r),o.promise.then(l,l),this._queue.push(e),this._scheduleNext(),o.promise}reset(){const e=[];this._processingItems.forEach((t=>e.push(t))),this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}needsUpdate(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}update(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,o.Os)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if((0,s.Wi)(e))return;let t;const i=(0,n.createAbortController)(),o=new a(e,i);this._processingItems.set(e,o);try{t=this.process(e,i.signal)}catch(e){this._processError(o,e)}var r;(r=t)&&"function"==typeof r.then?(o.promise=t,t.then((e=>this._processResult(o,e)),(e=>this._processError(o,e)))):this._processResult(o,t)}get test(){return{update:e=>this.update(e)}}}},17288:(e,t,i)=>{"use strict";i.d(t,{r7:()=>a,gH:()=>r,TT:()=>l,$3:()=>h,uz:()=>o});i(95830);var s=i(33655);function n(e,t){const{format:i,quality:n,rotation:o,disableDecorations:r}=e||{},a=p(e,t.padding),l=function(e,t){const i={x:0,y:0,width:t.width,height:t.height};if(e&&e.area){null!=e.area.x&&(i.x=Math.floor(e.area.x)),null!=e.area.y&&(i.y=Math.floor(e.area.y));const s=null!=e.area.width?Math.floor(e.area.width):null,n=null!=e.area.height?Math.floor(e.area.height):null;if(i.width=t.width-i.x,i.height=t.height-i.y,null!=s&&null!=n)i.width=Math.min(i.width,s),i.height=Math.min(i.height,n);else if(null==s&&null!=n){const e=Math.min(i.width,s);i.height=e/i.width*i.height,i.width=e}else if(null!=s&&null==n){const e=Math.min(i.height,n);i.width=e/i.height*i.width,i.height=e}}return function(e,t){const i=Math.floor(Math.max(e.x,0)),s=Math.floor(Math.max(e.y,0)),n={x:i,y:s,width:Math.floor(Math.min(e.width,t.width-i)),height:Math.floor(Math.min(e.height,t.height-s))},o=n.width/n.height,r=e.width/e.height;if(r===o)return n;if(r>o){const e=Math.floor(n.width/r),t=n.height-e;return{x:n.x,y:Math.floor(n.y+t/2),width:n.width,height:e}}const a=Math.floor(n.height*r),l=n.width-a;return{x:Math.floor(n.x+l/2),y:n.y,width:a,height:n.height}}(function(e,t){if(!t||null==t.width||null==t.height)return e;const i=t.width/t.height,s=e.width/e.height;if(s===i)return e;if(s<i){const t=Math.floor(e.height*i);return e.x-=(t-e.width)/2,e.width=t,e}const n=Math.floor(e.width/i);return e.y-=(n-e.height)/2,e.height=n,e}(i,e),t)}(e,{width:t.width-a.left-a.right,height:t.height-a.top-a.bottom}),{width:h,height:c}=function(e,t){if(!e)return t;const i=e.width,s=e.height;if(null!=i&&null!=s)return{width:Math.floor(i),height:Math.floor(s)};if(null==i&&null==s)return t;const n=t.width/t.height;return null==s?{width:Math.floor(i),height:Math.floor(i/n)}:{width:Math.floor(s*n),height:Math.floor(s)}}(e,l),u=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;case null:case void 0:default:return g}}(i),d=f[u];return{format:u,quality:(0,s.uZ)(null!=n?n:d,0,100),area:l,width:h,height:c,rotation:o,disableDecorations:!!r,ignoreBackground:!(!e||!e.ignoreBackground),ignorePadding:!(!e||!e.ignorePadding)}}function o(e,t){const i=n(e,t),s=i.area,o=i.width/s.width,r=p(i,t.padding),a=r.left+r.right,l=r.top+r.bottom,h=t.width-a,c=t.height-l,u=Math.floor(h*o+a),d=Math.floor(c*o+l),m=e&&e.layers?e.layers:[],g=i.ignoreBackground,f=i.ignorePadding;return{framebufferWidth:u,framebufferHeight:d,region:{x:Math.floor(s.x*o)+r.left,y:Math.floor(s.y*o)+r.top,width:i.width,height:i.height},format:i.format,quality:i.quality,rotation:i.rotation,pixelRatio:o,layers:m,disableDecorations:i.disableDecorations,ignoreBackground:g,ignorePadding:f}}function r(e,t,i,s){s.premultipliedAlpha&&function(e){const t=e.data,i=t.length;for(let e=0;e<i;e+=4){const i=t[e+3];if(i>0){const s=i/255;t[e+0]=t[e+0]/s,t[e+1]=t[e+1]/s,t[e+2]=t[e+2]/s}}}(e),i.width=e.width,i.height=e.height;const n=i.getContext("2d");n.putImageData(e,0,0),s.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(n);const o=n.getImageData(0,0,e.width,e.height),r=function(e,t){const i=m[t.format],s=t.quality/100;return e.toDataURL(i,s)}(i,t);return i.width=0,i.height=0,{dataUrl:r,data:o}}function a(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(e,t)}catch(e){d=!1}return c(e,t,i)}function l(e,t,i,s=0,n=0,o=e.width-s,r=e.height-n,a=!1){const{data:l}=e,{width:h,height:c,data:u}=t,d=o/h,p=r/c,m=Math.ceil(d/2),g=Math.ceil(p/2),f=e.width;for(let e=0;e<c;e++)for(let t=0;t<h;t++){const o=4*(t+(a?c-e-1:e)*h);let r=0,v=0,_=0,w=0,y=0,b=0;const C=(e+.5)*p;for(let o=Math.floor(e*p);o<(e+1)*p;o++){const e=Math.abs(C-(o+.5))/g,a=(t+.5)*d,h=e*e;for(let e=Math.floor(t*d);e<(t+1)*d;e++){const t=Math.abs(a-(e+.5))/m,c=Math.sqrt(h+t*t);if(c>=1)continue;let u=2*c*c*c-3*c*c+1;const d=4*(s+e+(n+o)*f);b+=u*l[d+3],v+=u,!i&&l[d+3]<255&&(u=u*l[d+3]/255),_+=u*l[d],w+=u*l[d+1],y+=u*l[d+2],r+=u}}u[o]=_/r,u[o+1]=w/r,u[o+2]=y/r,u[o+3]=b/v}return t}function h(e,t,i){if(!t)return e;const{framebufferWidth:s,framebufferHeight:n,pixelRatio:o,region:r}=e,a=p(e,i),l=a.left+a.right,h=a.top+a.bottom,c=s-l,u=n-h,d=Math.min(8,Math.min((2048-l)/c,(2048-h)/u));return d<1.5?e:{...e,framebufferWidth:Math.round(c*d)+l,framebufferHeight:Math.round(u*d)+h,pixelRatio:o*d,resample:{region:{x:Math.round((r.x-a.left)*d)+a.left,y:Math.round((r.y-a.top)*d)+a.top,width:Math.round(r.width*d),height:Math.round(r.height*d)},width:s,height:n}}}function c(e,t,i){return i||(u||(u=document.createElement("canvas"),u.width=1,u.height=1),i=u),i.getContext("2d").createImageData(e,t)}let u=null,d=!0;function p(e,t){return!t||e&&e.ignorePadding?v:t}const m={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},g="png",f={png:100,jpg:98,jpeg:98},v={top:0,right:0,bottom:0,left:0}},43129:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(27938);let n;const o=function(){return n||(n=function(){const e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;const t=document.createElement("canvas");if(!t)return e;let i=(0,s.k)(t,{failIfMajorPerformanceCaveat:!0},"webgl");if(i||(i=(0,s.k)(t,{},"webgl"),i&&(e.majorPerformanceCaveat=!0)),!i)return e;const n=i.getParameter(i.VERSION);if(!n)return e;const o=n.match(/^WebGL\s+([\d.]*)/);if(o){const t=parseFloat(o[1]);e.available=t>=.94;const s=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);s&&(e.supportsHighPrecisionFragment=s.precision>0),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==i.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==i.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==i.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==i.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==i.getExtension("WEBGL_color_buffer_float")}return e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;const e=document.createElement("canvas");return!!e&&!!(0,s.k)(e,{},"webgl2")}()?2:1,e}()),n}},27938:(e,t,i)=>{"use strict";function s(e,t={},i){if(!window.WebGLRenderingContext)return o(e,r),null;return n(e,t,i)||(o(e,a),null)}function n(e,t={},i){let s;switch(i){case"webgl":s=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":s=["webgl2"];break;default:s=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}let n=null;for(const i of s){try{n=e.getContext(i,t)}catch(e){}if(n)break}return n}function o(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}i.d(t,{k:()=>n,s:()=>s});const r='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',a='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},88355:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>w});var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(51894),r=i(87566),a=(i(10923),i(57002),i(86035),i(40450),i(24258)),l=i(9200),h=i(90846),c=i(19401),u=i(90806),d=i(82677),p=i(59691),m=i(80621),g=i(4338);let f=class extends((0,g._)(d.default)){constructor(e){super(e),this._handles=new p.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this),this.view}initialize(){this._handles.add((0,m.init)(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};"2d"===this.view.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){null!=e&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&("2d"===e.type?this._handles.add((0,m.init)(this,"view.rotation",this._updateForRotation)):this._handles.add((0,m.init)(this,"view.camera",this._updateForCamera)))}};(0,s._)([(0,n.Cb)({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],f.prototype,"canShowNorth",null),(0,s._)([(0,n.Cb)()],f.prototype,"orientation",void 0),(0,s._)([(0,n.Cb)({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],f.prototype,"state",null),(0,s._)([(0,n.Cb)()],f.prototype,"view",void 0),f=(0,s._)([(0,r.j)("esri.widgets.CompassViewModel")],f);const v=f;let _=class extends u.default{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass="esri-icon-locate-circled",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new v}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i="disabled"===t,s="compass"==("rotation"===t?"rotation":"compass"),n=i?-1:0,o={"esri-disabled":i,"esri-interactive":!i},r={"esri-icon-compass":s,"esri-icon-dial":!s},{messages:a}=this;return(0,c.j)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},(0,c.j)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",r),styles:this._toRotationTransform(e)}),(0,c.j)("span",{class:"esri-icon-font-fallback-text"},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};(0,s._)([(0,o.B)("viewModel.goToOverride")],_.prototype,"goToOverride",void 0),(0,s._)([(0,n.Cb)()],_.prototype,"iconClass",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,h.G)(),(0,l.H)("esri/widgets/Compass/t9n/Compass")],_.prototype,"messages",void 0),(0,s._)([(0,o.B)("viewModel.view")],_.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:v}),(0,h.G)(["viewModel.orientation","viewModel.state"])],_.prototype,"viewModel",void 0),(0,s._)([(0,a.h)()],_.prototype,"_reset",null),_=(0,s._)([(0,r.j)("esri.widgets.Compass")],_);const w=_},91397:function(e,t,i){"use strict";function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=a(e);if(t){var n=a(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=this&&this.__decorate||function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(83781),d=i(73502),p=c(i(90806)),m=c(i(81610));i(84893);var g="esri-widget overviewmap-base",f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,e);var t,i,r,a=o(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).name="",t.viewModel=new m.default,t.overviewCreated=function(e){t.overviewMapView&&(t.overviewMapView.container=e)},t}return t=l,(i=[{key:"render",value:function(){return d.tsx("div",{class:g},d.tsx("div",{afterCreate:this.overviewCreated,id:"overviewDiv"}))}}])&&s(t.prototype,i),r&&s(t,r),l}(p.default);h([u.aliasOf("viewModel.view")],f.prototype,"view",void 0),h([u.aliasOf("viewModel.overviewMapView")],f.prototype,"overviewMapView",void 0),h([u.aliasOf("viewModel.name"),d.renderable()],f.prototype,"name",void 0),h([u.property({type:m.default}),d.renderable()],f.prototype,"viewModel",void 0),f=h([u.subclass("app.widgets.OverviewMap")],f),t.default=f},81610:function(e,t,i){"use strict";function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=l(e);if(t){var n=l(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__decorate||function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&c(t,e,i);return u(t,e),t},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var g=m(i(32684)),f=m(i(94850)),v=m(i(15988)),_=m(i(82677)),w=i(83781),y=i(80621),b=p(i(80621)),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(h,e);var t,i,r,l=o(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=l.call(this,e)).stopEvtPropagation=function(e){e.stopPropagation()},t.disableZooming=function(e){return e.popup.dockEnabled=!0,e.popup.actions=[],e.ui.components=["attribution"],e.on("mouse-wheel",t.stopEvtPropagation),e.on("double-click",t.stopEvtPropagation),e.on("double-click",["Control"],t.stopEvtPropagation),e.on("drag",t.stopEvtPropagation),e.on("drag",["Shift"],t.stopEvtPropagation),e.on("drag",["Shift","Control"],t.stopEvtPropagation),e.on("key-down",(function(e){var t=e.key;-1!==["+","-","Shift","_","="].indexOf(t)&&e.stopPropagation()})),e},y.whenDefinedOnce(a(t),"view",t.init.bind(a(t))),t}return t=h,(i=[{key:"init",value:function(e){var t=this,i=new f.default({basemap:"streets-navigation-vector"});this.overviewMapView=new g.default({map:i,extent:e.extent}),this.disableZooming(this.overviewMapView),this.overviewMapView.ui.remove("zoom");var s=new v.default({geometry:null,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:null}});this.overviewMapView.graphics.add(s),b.init(e,"extent",(function(){s.geometry=e.extent})),b.init(e,"stationary",(function(){e.stationary&&t.overviewMapView.goTo({center:e.center,scale:2*e.scale*Math.max(e.width/t.overviewMapView.width,e.height/t.overviewMapView.height)}).catch((function(e){"view:goto-interrupted"!=e.name&&console.error(e)}))}))}}])&&s(t.prototype,i),r&&s(t,r),h}(_.default);d([w.property()],C.prototype,"view",void 0),C=d([w.subclass("app.widgets.OverviewMap.OverviewMapViewModel")],C),t.default=C},97767:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(94015),n=i.n(s),o=i(23645),r=i.n(o)()(n());r.push([e.id,".overviewmap-base{padding:0}#overviewDiv{width:300px;height:200px}","",{version:3,sources:["webpack://./src/widgets/OverviewMap/styles/OverviewMap.scss"],names:[],mappings:"AAAA,kBACE,SAAA,CAGF,aACE,WAAA,CACA,YAAA",sourcesContent:[".overviewmap-base {\n  padding: 0;\n}\n\n#overviewDiv {\n  width: 300px;\n  height: 200px;\n}\n"],sourceRoot:""}]);const a=r},84893:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var s=i(93379),n=i.n(s),o=i(97767),r={insert:"head",singleton:!1};n()(o.Z,r);const a=o.Z.locals||{}}}]);
//# sourceMappingURL=1397.js.map