(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[1397],{87561:(t,e,i)=>{"use strict";function s(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function n(t,e,i,s){const n=e[s],o=e[s+1];t[s]=i[0]*n+i[2]*o+i[4],t[s+1]=i[1]*n+i[3]*o+i[5]}function o(t,e,i,s=0,o=0,r=2){const a=o||e.length/r;for(let o=s;o<a;o++)n(t,e,i,o*r)}i.d(e,{c:()=>s,t:()=>o});Object.freeze({__proto__:null,create:s,clone:function(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},fromValues:function(t,e,i,s,n,o){const r=new Float32Array(6);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r[4]=n,r[5]=o,r},createView:function(t,e){return new Float32Array(t,e,6)},transform:n,transformMany:o})},98501:(t,e,i)=>{"use strict";i.d(e,{a:()=>p,b:()=>l,c:()=>c,f:()=>n,i:()=>r,j:()=>u,m:()=>a,n:()=>d,r:()=>h,s:()=>o});var s=i(60418);function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function o(t,e,i,s,n,o,r,a,l,h){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=o,t[5]=r,t[6]=a,t[7]=l,t[8]=h,t}function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function a(t,e,i){const s=e[0],n=e[1],o=e[2],r=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=i[0],p=i[1],m=i[2],g=i[3],f=i[4],_=i[5],v=i[6],w=i[7],y=i[8];return t[0]=d*s+p*r+m*h,t[1]=d*n+p*a+m*c,t[2]=d*o+p*l+m*u,t[3]=g*s+f*r+_*h,t[4]=g*n+f*a+_*c,t[5]=g*o+f*l+_*u,t[6]=v*s+w*r+y*h,t[7]=v*n+w*a+y*c,t[8]=v*o+w*l+y*u,t}function l(t,e,i){const s=e[0],n=e[1],o=e[2],r=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=i[0],p=i[1];return t[0]=s,t[1]=n,t[2]=o,t[3]=r,t[4]=a,t[5]=l,t[6]=d*s+p*r+h,t[7]=d*n+p*a+c,t[8]=d*o+p*l+u,t}function h(t,e,i){const s=e[0],n=e[1],o=e[2],r=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=Math.sin(i),p=Math.cos(i);return t[0]=p*s+d*r,t[1]=p*n+d*a,t[2]=p*o+d*l,t[3]=p*r-d*s,t[4]=p*a-d*n,t[5]=p*l-d*o,t[6]=h,t[7]=c,t[8]=u,t}function c(t,e,i){const s=i[0],n=i[1],o=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=o*e[6],t[7]=o*e[7],t[8]=o*e[8],t}function u(t,e,i){const s=i[0],n=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function d(t,e){const i=e[0],s=e[1],n=e[2],o=e[4],r=e[5],a=e[6],l=e[8],h=e[9],c=e[10],u=c*r-a*h,d=-c*o+a*l,p=h*o-r*l,m=i*u+s*d+n*p;if(!m)return null;const g=1/m;return t[0]=u*g,t[1]=(-c*s+n*h)*g,t[2]=(a*s-n*r)*g,t[3]=d*g,t[4]=(c*i-n*l)*g,t[5]=(-a*i+n*o)*g,t[6]=p*g,t[7]=(-h*i+s*l)*g,t[8]=(r*i-s*o)*g,t}function p(t,e){const i=e[0],s=e[1],n=e[2],o=e[3],r=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=e[9],d=e[10],p=e[11],m=e[12],g=e[13],f=e[14],_=e[15],v=i*a-s*r,w=i*l-n*r,y=i*h-o*r,b=s*l-n*a,C=s*h-o*a,x=n*h-o*l,M=c*g-u*m,T=c*f-d*m,k=c*_-p*m,P=u*f-d*g,S=u*_-p*g,I=d*_-p*f;let O=v*I-w*S+y*P+b*k-C*T+x*M;return O?(O=1/O,t[0]=(a*I-l*S+h*P)*O,t[1]=(l*k-r*I-h*T)*O,t[2]=(r*S-a*k+h*M)*O,t[3]=(n*S-s*I-o*P)*O,t[4]=(i*I-n*k+o*T)*O,t[5]=(s*k-i*S-o*M)*O,t[6]=(g*x-f*C+_*b)*O,t[7]=(f*y-m*x-_*w)*O,t[8]=(m*C-g*y+_*v)*O,t):null}function m(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}const g=a,f=m;Object.freeze({__proto__:null,fromMat4:n,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},set:o,identity:r,transpose:function(t,e){if(t===e){const i=e[1],s=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){const i=e[0],s=e[1],n=e[2],o=e[3],r=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=c*r-a*h,d=-c*o+a*l,p=h*o-r*l;let m=i*u+s*d+n*p;return m?(m=1/m,t[0]=u*m,t[1]=(-c*s+n*h)*m,t[2]=(a*s-n*r)*m,t[3]=d*m,t[4]=(c*i-n*l)*m,t[5]=(-a*i+n*o)*m,t[6]=p*m,t[7]=(-h*i+s*l)*m,t[8]=(r*i-s*o)*m,t):null},adjoint:function(t,e){const i=e[0],s=e[1],n=e[2],o=e[3],r=e[4],a=e[5],l=e[6],h=e[7],c=e[8];return t[0]=r*c-a*h,t[1]=n*h-s*c,t[2]=s*a-n*r,t[3]=a*l-o*c,t[4]=i*c-n*l,t[5]=n*o-i*a,t[6]=o*h-r*l,t[7]=s*l-i*h,t[8]=i*r-s*o,t},determinant:function(t){const e=t[0],i=t[1],s=t[2],n=t[3],o=t[4],r=t[5],a=t[6],l=t[7],h=t[8];return e*(h*o-r*l)+i*(-h*n+r*a)+s*(l*n-o*a)},multiply:a,translate:l,rotate:h,scale:c,scaleByVec2:u,fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){const i=e[0],s=e[1],n=e[2],o=e[3],r=i+i,a=s+s,l=n+n,h=i*r,c=s*r,u=s*a,d=n*r,p=n*a,m=n*l,g=o*r,f=o*a,_=o*l;return t[0]=1-u-m,t[3]=c-_,t[6]=d+f,t[1]=c+_,t[4]=1-h-m,t[7]=p-g,t[2]=d-f,t[5]=p+g,t[8]=1-h-u,t},normalFromMat4Legacy:d,normalFromMat4:p,projection:function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},add:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract:m,multiplyScalar:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd:function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){const i=t[0],n=t[1],o=t[2],r=t[3],a=t[4],l=t[5],h=t[6],c=t[7],u=t[8],d=e[0],p=e[1],m=e[2],g=e[3],f=e[4],_=e[5],v=e[6],w=e[7],y=e[8];return Math.abs(i-d)<=s.E*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(n-p)<=s.E*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=s.E*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(r-g)<=s.E*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-f)<=s.E*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(l-_)<=s.E*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(h-v)<=s.E*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(c-w)<=s.E*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(u-y)<=s.E*Math.max(1,Math.abs(u),Math.abs(y))},mul:g,sub:f})},55955:(t,e,i)=>{"use strict";function s(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function n(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}i.d(e,{a:()=>n,c:()=>s});Object.freeze({__proto__:null,create:s,clone:n,fromValues:function(t,e,i,s,n,o,r,a,l){const h=new Float32Array(9);return h[0]=t,h[1]=e,h[2]=i,h[3]=s,h[4]=n,h[5]=o,h[6]=r,h[7]=a,h[8]=l,h},createView:function(t,e){return new Float32Array(t,e,9)}})},27851:(t,e,i)=>{"use strict";function s(){return new Float32Array(2)}function n(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function o(){return s()}function r(){return n(1,1)}function a(){return n(1,0)}function l(){return n(0,1)}i.d(e,{c:()=>s,f:()=>n});const h=o(),c=r(),u=a(),d=l();Object.freeze({__proto__:null,create:s,clone:function(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e},fromValues:n,createView:function(t,e){return new Float32Array(t,e,2)},zeros:o,ones:r,unitX:a,unitY:l,ZEROS:h,ONES:c,UNIT_X:u,UNIT_Y:d})},90461:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});class s{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),(t=>-1!==t.indexOf("Brush"))(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}},68414:(t,e,i)=>{"use strict";var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(87566),r=(i(10923),i(57002),i(86035),i(82677)),a=i(14286),l=i(9512);const h=new Set,c=[],u=new Map,d=[0,0];let p=class extends r.default{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:e}=this;this._queue=new l.e({concurrency:t,process:(t,i)=>{const s=this._keyToItem.get(t);return e(s,{signal:i})},peeker:t=>t.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const e="string"==typeof t?t:t.id;this._queue.abort(e)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return"string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const e="string"==typeof t?t:t.id;return this.has(e)&&this._queue.isOngoing(e)}pause(){this._queue.pause()}push(t,e){const i=t.key.id+"-"+e;if(this.has(i))return this.get(i);const s=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,t),s.then(n,n),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const e=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.forEach((t=>{const e=this._keyToItem.get(t),n=this.tileInfoView.getTileScale(e.key);u.has(n)||(u.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),u.get(n).push(e.key),h.add(n)}));let n=this.state.scale;u.has(n)||(function(t,e){t.length=0,e.forEach((e=>t.push(e)))}(c,h),c.sort(),n=c.reduce(((t,e)=>Math.abs(e-n)<Math.abs(t-n)?e:t),c[0])),n=Math.min(n,i),n=Math.max(n,s);const o=u.get(n),r=e.getClosestInfoForScale(n),a=r.getColumnForX(this.state.center[0]),l=r.getRowForY(this.state.center[1]);return o.sort(((t,e)=>{const i=r.denormalizeCol(t.col,t.world),s=r.denormalizeCol(e.col,e.world);return Math.sqrt((a-i)*(a-i)+(l-t.row)*(l-t.row))-Math.sqrt((a-s)*(a-s)+(l-e.row)*(l-e.row))})),h.clear(),u.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const e=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return t.forEach((t=>{const o=this._keyToItem.get(t);e.getTileCoords(d,o.key);const r=(0,a.d)(d,i);r<s&&(s=r,n=o.key)})),n.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],p.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,s._)([(0,o.j)("esri.views.2d.tiling.PagedTileQueue")],p)},73978:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(38035);class n{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,e){const{spans:i,lodInfo:s}=this,{level:n}=s;if(0!==i.length)for(const{row:o,colFrom:r,colTo:a}of i)for(let i=r;i<=a;i++)t.call(e,n,o,s.normalizeCol(i),s.getWorldForColumn(i))}}n.pool=new s.Z(n);const o=n},46666:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var s=i(27780),n=i(5201);function o(t,e){return[t,e]}function r(t,e,i){return t[0]=e,t[1]=i,t}const a=new n.Z("0/0/0/0");class l{constructor(t,e,i,s,n,o,r,a,l,h,c,u){this.level=t,this.resolution=e,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=r,this.norm=a,this.worldStart=l,this.worldEnd=h,this.worldSize=c,this.wrap=u}static create(t,e,i){const n=(0,s.C5)(t.spatialReference),a=o(t.origin.x,t.origin.y),h=o(t.size[0]*e.resolution,t.size[1]*e.resolution),c=o(-1/0,-1/0),u=o(1/0,1/0),d=o(1/0,1/0);let p,m,g,f;return i&&(r(c,Math.max(0,Math.floor((i.xmin-a[0])/h[0])),Math.max(0,Math.floor((a[1]-i.ymax)/h[1]))),r(u,Math.max(0,Math.floor((i.xmax-a[0])/h[0])),Math.max(0,Math.floor((a[1]-i.ymin)/h[1]))),r(d,u[0]-c[0]+1,u[1]-c[1]+1)),t.isWrappable?(p=o(Math.ceil(Math.round((n.valid[1]-n.valid[0])/e.resolution)/t.size[0]),d[1]),m=o(Math.floor((n.origin[0]-a[0])/h[0]),c[1]),g=o(p[0]+m[0]-1,u[1]),f=!0):(m=c,g=u,p=d,f=!1),new l(e.level,e.resolution,e.scale,a,c,u,d,h,m,g,p,f)}normalizeCol(t){if(!this.wrap)return t;const e=this.worldSize[0];return t<0?e-1-Math.abs((t+1)%e):t%e}denormalizeCol(t,e){return this.wrap?this.worldSize[0]*e+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,e,i=!1){a.set(e);const s=i?a.col:this.denormalizeCol(a.col,a.world),n=a.row;return function(t,e,i,s,n){t[0]=e,t[1]=i,t[2]=s,t[3]=n}(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,e,i=!1){a.set(e);const s=i?a.col:this.denormalizeCol(a.col,a.world);return Array.isArray(t)?r(t,this.getXForColumn(s),this.getYForRow(a.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(a.row)),t}}const h=l;var c=i(73978);const u=class{constructor(t,e,i){this.row=t,this.colFrom=e,this.colTo=i}},d=new n.Z("0/0/0/0");class p{constructor(t,e,i,s,n,o,r,a){this.x=t,this.ymin=e,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=r,this.rightBound=a}static create(t,e){t[1]>e[1]&&([t,e]=[e,t]);const[i,s]=t,[n,o]=e,r=n-i,a=o-s,l=0!==a?r/a:0,h=(Math.ceil(s)-s)*l,c=(Math.floor(s)-s)*l;return new p(i,Math.floor(s),Math.ceil(o),l,r<0?h:c,r<0?c:h,r<0?n:i,r<0?i:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const m=[[0,0],[0,0],[0,0],[0,0]];const g=class{constructor(t,e){this.tileInfo=t,this.fullExtent=e,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=t.lods.slice();i.sort((function(t,e){return e.scale-t.scale}));const s=this._lodInfos=i.map((i=>h.create(t,i,e)));i.forEach(((t,e)=>{this._infoByLevel[t.level]=s[e],this._infoByScale[t.scale]=s[e],this.scales[e]=t.scale}),this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel["number"==typeof t?t:t.level]}getTileBounds(t,e,i=!1){d.set(e);const s=this._infoByLevel[d.level];return s?s.getTileBounds(t,d,i):t}getTileCoords(t,e,i=!1){d.set(e);const s=this._infoByLevel[d.level];return s?s.getTileCoords(t,d,i):t}getTileCoverage(t,e=192,i="closest"){const s="closest"===i?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),n=c.Z.pool.acquire(s),o=this._wrap;let r,a,l,h=1/0,d=-1/0;const g=n.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-e,m[1][0]=m[2][0]=t.size[0]+e,m[2][1]=m[3][1]=t.size[1]+e;for(const e of m)t.toMap(e,e),e[0]=s.getColumnForX(e[0]),e[1]=s.getRowForY(e[1]);const f=[];let _=3;for(let t=0;t<4;t++){if(m[t][1]===m[_][1]){_=t;continue}const e=p.create(m[t],m[_]);h=Math.min(e.ymin,h),d=Math.max(e.ymax,d),void 0===f[e.ymin]&&(f[e.ymin]=[]),f[e.ymin].push(e),_=t}if(null==h||null==d||d-h>100)return null;let v=[];for(r=h;r<d;){null!=f[r]&&(v=v.concat(f[r])),a=1/0,l=-1/0;for(let t=v.length-1;t>=0;t--){const e=v[t];a=Math.min(a,e.getLeftCol()),l=Math.max(l,e.getRightCol())}if(a=Math.floor(a),l=Math.floor(l),r>=s.first[1]&&r<=s.last[1])if(o)if(s.size[0]<s.worldSize[0]){const t=Math.floor(l/s.worldSize[0]);for(let e=Math.floor(a/s.worldSize[0]);e<=t;e++)g.push(new u(r,Math.max(s.getFirstColumnForWorld(e),a),Math.min(s.getLastColumnForWorld(e),l)))}else g.push(new u(r,a,l));else a>s.last[0]||l<s.first[0]||(a=Math.max(a,s.first[0]),l=Math.min(l,s.last[0]),g.push(new u(r,a,l)));r+=1;for(let t=v.length-1;t>=0;t--){const e=v[t];e.ymax>=r?e.incrRow():v.splice(t,1)}}return n}getTileParentId(t){d.set(t);const e=this._infoByLevel[d.level],i=this._lodInfos.indexOf(e)-1;return i<0?null:(this._getTileIdAtLOD(d,this._lodInfos[i],d),d.id)}getTileResolution(t){const e=this._infoByLevel["object"==typeof t?t.level:t];return e?e.resolution:-1}getTileScale(t){const e=this._infoByLevel[t.level];return e?e.scale:-1}intersects(t,e){d.set(e);const i=this._infoByLevel[d.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(d,s,d);const e=s.denormalizeCol(d.col,d.world);for(const i of t.spans)if(i.row===d.row&&i.colFrom<=e&&i.colTo>=e)return!0}if(s.resolution<i.resolution){const[e,n,o,r]=t.spans.reduce(((t,e)=>(t[0]=Math.min(t[0],e.row),t[1]=Math.max(t[1],e.row),t[2]=Math.min(t[2],e.colFrom),t[3]=Math.max(t[3],e.colTo),t)),[1/0,-1/0,1/0,-1/0]),a=i.denormalizeCol(d.col,d.world),l=s.getColumnForX(i.getXForColumn(a)),h=s.getRowForY(i.getYForRow(d.row)),c=s.getColumnForX(i.getXForColumn(a+1))-1,u=s.getRowForY(i.getYForRow(d.row+1))-1;return!(l>r||c<o||h>n||u<e)}const n=s.denormalizeCol(d.col,d.world);return t.spans.some((t=>t.row===d.row&&t.colFrom<=n&&t.colTo>=n))}normalizeBounds(t,e,i){if(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this._wrap){const e=(0,s.C5)(this.tileInfo.spatialReference),n=-i*(e.valid[1]-e.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const e=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>e[0])return this._infoByScale[e[0]];for(let i=1;i<e.length-1;i++)if(t>e[i]+1e-6)return this._infoByScale[e[i-1]];return this._infoByScale[e[e.length-1]]}getClosestInfoForScale(t){const e=this.scales;return this._infoByScale[t]||(t=e.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e),e[0])),this._infoByScale[t]}scaleToLevel(t){const e=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=e.length-1;i>=0;i--)if(t<e[i])return i===e.length-1?this._infoByScale[e[e.length-1]].level:this._infoByScale[e[i]].level+(e[i]-t)/(e[i]-e[i+1]);return this._infoByScale[e[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,e,i){const s=this._infoByLevel[i.level];return t.set(i),e.resolution<s.resolution?null:(e.resolution===s.resolution||(t.level=e.level,t.col=Math.floor(i.col*s.resolution/e.resolution+.01),t.row=Math.floor(i.row*s.resolution/e.resolution+.01)),t)}}},13596:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(87566),r=(i(10923),i(57002),i(86035),i(82677)),a=i(14286),l=i(9512);const h=new Set,c=[],u=new Map,d=[0,0];let p=class extends r.default{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:e,strategy:i}=this;this._queue=new l.e({concurrency:t,process:(t,i)=>{const s=this._keyToItem.get(t);return e(s,{signal:i})},peeker:"scale-first"===i?t=>this._peekByScaleFirst(t):t=>this._peekByCenterFirst(t)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const e="string"==typeof t?t:t.id;this._queue.abort(e)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return"string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const e="string"==typeof t?t:t.id;return this.has(e)&&this._queue.isOngoing(e)}pause(){this._queue.pause()}push(t){const e=t.key.id;if(this.has(e))return this.get(e);const i=this._queue.push(e),s=()=>{this._keyToItem.delete(e),this.notifyChange("updating")};return this._keyToItem.set(e,t),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const e=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.forEach((t=>{const e=this._keyToItem.get(t),n=this.tileInfoView.getTileScale(e.key);u.has(n)||(u.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),u.get(n).push(e.key),h.add(n)}));let n=this.state.scale;u.has(n)||(function(t,e){t.length=0,e.forEach((e=>t.push(e)))}(c,h),c.sort(),n=c.reduce(((t,e)=>Math.abs(e-n)<Math.abs(t-n)?e:t),c[0])),n=Math.min(n,i),n=Math.max(n,s);const o=u.get(n),r=e.getClosestInfoForScale(n),a=r.getColumnForX(this.state.center[0]),l=r.getRowForY(this.state.center[1]);return o.sort(((t,e)=>{const i=r.denormalizeCol(t.col,t.world),s=r.denormalizeCol(e.col,e.world);return Math.sqrt((a-i)*(a-i)+(l-t.row)*(l-t.row))-Math.sqrt((a-s)*(a-s)+(l-e.row)*(l-e.row))})),h.clear(),u.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const e=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,n=null;return t.forEach((t=>{const o=this._keyToItem.get(t);e.getTileCoords(d,o.key);const r=(0,a.d)(d,i);r<s&&(s=r,n=o.key)})),n.id}};(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"concurrency",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"process",void 0),(0,s._)([(0,n.Cb)()],p.prototype,"state",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"strategy",void 0),(0,s._)([(0,n.Cb)({constructOnly:!0})],p.prototype,"tileInfoView",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],p.prototype,"updating",null),p=(0,s._)([(0,o.j)("esri.views.2d.tiling.TileQueue")],p);const m=p},1768:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var s=i(5201),n=i(73978),o=i(14286);function r(t,e){t.delete(e)}const a=class{constructor(t,e,i){this.maxSize=t,this.tileInfoView=e,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const e=this._tilePerId.get(t);if(!e)return null;const i=e.key.level,s=this._tileKeysPerLevel[i];r(this._tilePerId,t);for(let e=0;e<s.length;e++)if(s[e].id===t){s.splice(e,1);break}return e.visible=!0,e}add(t){t.visible=!1;const e=t.key,i=e.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=e.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(e)}prune(t,e,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,e,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,e,i,t))}_pruneAroundCenterTile(t,e,i,s){const n=this._tileKeysPerLevel[s];if(!n||0===n.length)return t;const{size:r,origin:a}=this.tileInfoView.tileInfo,l=i*r[0],h=i*r[1],c=[0,0],u=[0,0];for(n.sort(((t,i)=>(c[0]=a.x+l*(t.col+.5),c[1]=a.y-h*(t.row+.5),u[0]=a.x+l*(i.col+.5),u[1]=a.y-h*(i.row+.5),(0,o.j)(c,e)-(0,o.j)(u,e))));n.length>0;){const e=n.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(t){const e=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(e),r(this._tilePerId,t)}},l=new s.Z(0,0,0,0),h=new Map,c=[],u=[];const d=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=null==t.resampling||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new a(t.cacheSize,this.tileInfoView,(t=>{this.releaseTile(t)})))}destroy(){this.tileIndex.clear()}update(t){const{resampling:e,tileIndex:i}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(u.length=0,c.length=0,h.clear(),!s)return;const{minScale:o,maxScale:r}=this.tileInfoView.tileInfo,{spans:a,lodInfo:d}=s,{level:p}=d,{scale:m,center:g,resolution:f}=t.state,_=!t.stationary&&m>this._previousScale;if(this._previousScale=m,this.tiles.length=0,!e&&(m>o||m<r))return this.tiles.length=0,h.clear(),i.forEach((t=>{this.releaseTile(t)})),i.clear(),u.length=0,c.length=0,h.clear(),n.Z.pool.release(s),!0;i.forEach((t=>t.visible=!0));let v=0,w=0;if(a.length>0)for(const{row:t,colFrom:e,colTo:s}of a)for(let n=e;n<=s;n++){v++;const e=l.set(p,t,d.normalizeCol(n),d.getWorldForColumn(n)).id;if(i.has(e)){const t=i.get(e);t.isReady?(h.set(e,t),w++):_||this._addParentTile(e,h)}else{let t;if(this._tileCache&&this._tileCache.has(e)){if(t=this._tileCache.pop(e),this.tileIndex.set(e,t),t.isReady){h.set(e,t),w++;continue}}else t=this.acquireTile(l),this.tileIndex.set(e,t);_||this._addParentTile(e,h)}}const y=w===v;i.forEach(((t,e)=>{if(l.set(e),h.has(e))return;const i=this.tileInfoView.intersects(s,l);!i||!_&&y?"purge"===this.cachePolicy?l.level===p&&i||c.push(e):(l.level>p||!i)&&c.push(e):t.isReady?u.push(e):l.level>p&&c.push(e)}));for(const t of u){const e=i.get(t);e&&e.isReady&&h.set(t,e)}for(const t of c){const e=i.get(t);this._tileCache?this._tileCache.add(e):this.releaseTile(e),i.delete(t)}return h.forEach((t=>this.tiles.push(t))),i.forEach((t=>{h.has(t.key.id)||(t.visible=!1)})),this._tileCache&&this._tileCache.prune(p,g,f),n.Z.pool.release(s),h.clear(),y}clear(t=!0){const{tileIndex:e}=this;t&&e.forEach((t=>{this.releaseTile(t)})),e.clear()}_addParentTile(t,e){let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s&&s.isReady){e.has(s.key.id)||e.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s&&s.isReady)){e.has(s.key.id)||e.set(s.key.id,s);break}}}},15187:(t,e,i)=>{"use strict";i.d(e,{H4:()=>G,dI:()=>j,o2:()=>q,JG:()=>S,km:()=>F,EK:()=>T,ni:()=>I,bk:()=>O,Rb:()=>R,Dq:()=>E,uG:()=>z,Ck:()=>Z,Jp:()=>L,L2:()=>N,gG:()=>$,SI:()=>B,$H:()=>U,YQ:()=>H,UZ:()=>Y,Hy:()=>K,qf:()=>D,Rx:()=>Q});var s=i(59472),n=i(27780),o=i(73032),r=i(39718),a=i(49840),l=i(41241),h=i(61106),c=i(52937),u=i(28293),d=i(60418),p=i(93533),m=i(65984),g=i(55735),f=i(14286),_=i(42738),v=i(75384);const w=39.37,y=180/Math.PI;function b(t,e,i,s){return s&&i&&!s.equals(i)&&(0,l.Q8)(s,i)&&s.isWebMercator?s.isWebMercator?function(t,e){let i=e[1];return i>89.99999?i=89.99999:i<-89.99999&&(i=-89.99999),i=Math.sin((0,d.t)(i)),(0,f.s)(t,(0,d.t)(e[0])*a.sv.radius,.5*a.sv.radius*Math.log((1+i)/(1-i)))}(t,e):function(t,e,i){const s=(0,d.a)(e[0]/a.sv.radius);return(0,f.s)(t,i?s:s-360*Math.floor((s+180)/360),(0,d.a)(.5*Math.PI-2*Math.atan(Math.exp(-1*e[1]/a.sv.radius))))}(t,e):(0,f.c)(t,e)}function C(t){return t.wkid?t:t.spatialReference||o.Z.WGS84}function x(t,e){return e.type?(0,f.s)(t,e.x,e.y):(0,f.c)(t,e)}function M(t){return(0,p.c9)(t)}function T(t,e){return Math.max(t.width/e[0],t.height/e[1])*function(t){return(0,n.JY)(t)?M(t)*w*96:1}(t.spatialReference)}async function k(t,e,i,n){let o,a;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(u.Z.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){const o=t.every((t=>"attributes"in t)),r=t.some((t=>!t.geometry));let a=t;if(o&&r&&e&&e.allLayerViews){const i=new Map;for(const e of t){const t=e.layer,s=i.get(t)||[],n=e.attributes[t.objectIdField];null!=n&&s.push(n),i.set(t,s)}const n=[];i.forEach(((t,i)=>{const s=e.allLayerViews.find((t=>t.layer.id===i.id));if("queryFeatures"in s){const e=i.createQuery();e.objectIds=t,e.returnGeometry=!0,n.push(s.queryFeatures(e))}}));const o=await Promise.all(n),r=[];for(const t of o)if(t&&t.features&&t.features.length)for(const e of t.features)(0,s.pC)(e.geometry)&&r.push(e.geometry);a=r}for(const t of a)n=await k(t,e,i,n);return n}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])o=new h.Z(t);else if(t instanceof r.Z)o=t;else if("geometry"in t)if(t.geometry)o=t.geometry;else if(t.layer){const i=t.layer,n=e.allLayerViews.find((t=>t.layer.id===i.id));if("queryFeatures"in n){const e=i.createQuery();e.objectIds=[t.attributes[i.objectIdField]],e.returnGeometry=!0;const r=await n.queryFeatures(e);o=(0,s.U2)(r,"features",0,"geometry")}}if((0,s.Wi)(o))return null;if(a="point"===o.type?new c.Z({xmin:o.x,ymin:o.y,xmax:o.x,ymax:o.y,spatialReference:o.spatialReference}):o.extent,!a)return null;const d=(0,l.Q8)(a,i);if(!a.spatialReference.equals(i)&&d)a=(0,l.iV)(a,i);else if(!d)return null;return n?n.union(a):a.clone()}async function P(t,e){if(!t||!e)return new m.Z({targetGeometry:new h.Z,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:o,viewpoint:r,size:a}=e,u=[o?a[0]-o.left-o.right:a[0],o?a[1]-o.top-o.bottom:a[1]];let d=null;t instanceof m.Z?d=t:t.viewpoint?d=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(d=t.target);let p=null;d&&d.targetGeometry?p=d.targetGeometry:t instanceof c.Z?p=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(p=await k(t.center,e,i)||await k(t.extent,e,i)||await k(t.target,e,i)||await k(t,e,i)),!p&&r&&r.targetGeometry?p=r.targetGeometry:!p&&e.extent&&(p=e.extent);const f=C(p);if(i||(i=C(e.spatialReference||e.extent||p)),!(0,l.Q8)(p,i)&&f&&!f.equals(i))return null;const _=x((0,g.c)(),p.center?p.center:p),v=new h.Z(b(_,_,f,i),i);let w=null;w=d&&(0,s.pC)(d.targetGeometry)&&"point"===d.targetGeometry.type?d.scale:t.hasOwnProperty("scale")&&t.scale?t.scale:t.hasOwnProperty("zoom")&&-1!==t.zoom&&n&&n.effectiveLODs?n.zoomToScale(t.zoom):Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height?e.extent&&(0,l.Q8)(e.extent,i)?T((0,l.iV)(e.extent,i),u):e.extent?T(e.extent,u):r.scale:(0,l.Q8)(p.extent,i)?T((0,l.iV)(p.extent,i),u):T(p.extent,u);const y=function(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>"layer"in t))){let e=0,i=0;for(const s of t){const t=s.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,i=t.maxScale>i?t.maxScale:i)}return e&&i?{min:e,max:i}:null}}}(t);y&&(y.min&&y.min>w?w=y.min:y.max&&y.max<w&&(w=y.max));let M=0;d?M=d.rotation:t.hasOwnProperty("rotation")?M=t.rotation:r&&(M=r.rotation);let P=new m.Z({targetGeometry:v,scale:w,rotation:M});return n&&(P=n.fit(P),n.constrainByGeometry(P),n.rotationEnabled||(P.rotation=M)),P}function S(t,e){const i=t.targetGeometry,s=e.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function I(t,e,i){return i?(0,f.s)(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):(0,f.a)(t,e,.5)}const O=function(){const t=(0,g.c)();return function(e,i,s){const n=i.targetGeometry;x(t,n);const o=.5*z(i);return e.xmin=t[0]-o*s[0],e.ymin=t[1]-o*s[1],e.xmax=t[0]+o*s[0],e.ymax=t[1]+o*s[1],e.spatialReference=n.spatialReference,e}}();function D(t,e,i,s,n){return q(t,e,i.center),t.scale=T(i,s),n&&n.constraints&&n.constraints.constrain(t),t}const E=function(){const t=(0,g.c)();return function(e,i,s){return(0,f.b)(e,function(t,e){return(0,f.a)(t,e,.5)}(e,i),I(t,i,s))}}(),V=function(){const t=(0,v.c)(),e=(0,g.c)();return function(i,s,n,o){const r=z(s),a=A(s);return(0,f.s)(e,r,r),(0,_.f)(t,e),(0,_.r)(t,t,a),(0,_.t)(t,t,E(e,n,o)),(0,_.t)(t,t,[0,o.top-o.bottom]),(0,f.s)(i,t[4],t[5])}}();function z(t){return t.scale*(e=t.targetGeometry,(0,s.pC)(e)&&(0,n.JY)(e.spatialReference)?1/(M(e.spatialReference)*w*96):1);var e}function A(t){return(0,d.t)(t.rotation)||0}const R=function(){const t=(0,g.c)(),e=(0,g.c)(),i=(0,g.c)();return function(s,n,o,r,a,l){return(0,f.n)(t,n),(0,f.a)(e,o,.5*l),(0,f.s)(i,1/r*l,-1/r*l),(0,_.i)(s),(0,_.t)(s,s,e),a&&(0,_.r)(s,s,a),(0,_.s)(s,s,i),(0,_.t)(s,s,t),s}}(),Z=function(){const t=(0,g.c)();return function(e,i,s,n){const o=z(i),r=A(i);return x(t,i.targetGeometry),R(e,t,s,o,r,n)}}(),L=function(){const t=(0,g.c)();return function(e,i,s,n){const o=z(i);return x(t,i.targetGeometry),R(e,t,s,o,0,n)}}();function N(t,e){return Math.round(function(t){if(t.isWrappable){const e=(0,n.C5)(t);return e.valid[1]-e.valid[0]}return 0}(t)/e)}function F(t,e){return P(t,e)}const j=function(){const t=(0,g.c)(),e=(0,g.c)(),i=[0,0,0];return function(s,n,o){(0,f.e)(t,s,n),(0,f.f)(t,t),(0,f.e)(e,s,o),(0,f.f)(e,e),(0,f.g)(i,t,e);let r=Math.acos((0,f.h)(t,e)/((0,f.l)(t)*(0,f.l)(e)))*y;return i[2]<0&&(r=-r),isNaN(r)&&(r=0),r}}(),G=function(){const t=(0,g.c)();return function(e,i,s,n){const o=e.targetGeometry;return S(e,i),V(t,i,s,n),o.x+=t[0],o.y+=t[1],e}}(),q=(function(){const t=(0,g.c)()}(),function(){const t=(0,g.c)();return function(e,i,s){S(e,i);const n=e.targetGeometry,o=C(s),r=C(n);return x(t,s),b(t,t,o,r),n.x=t[0],n.y=t[1],e}}());const B=function(){const t=(0,g.c)();return function(e,i,s,n,o){o||(o="center"),(0,f.b)(t,s,n),(0,f.a)(t,t,.5);const r=t[0],a=t[1];switch(o){case"center":(0,f.s)(t,0,0);break;case"left":(0,f.s)(t,-r,0);break;case"top":(0,f.s)(t,0,a);break;case"right":(0,f.s)(t,r,0);break;case"bottom":(0,f.s)(t,0,-a);break;case"top-left":(0,f.s)(t,-r,a);break;case"bottom-left":(0,f.s)(t,-r,-a);break;case"top-right":(0,f.s)(t,r,a);break;case"bottom-right":(0,f.s)(t,r,-a)}return Q(e,i,t),e}}();function U(t,e,i){return S(t,e),t.rotation+=i,t}function H(t,e,i){return S(t,e),t.rotation=i,t}const W=function(){const t=(0,g.c)();return function(e,i,s,n,o){return S(e,i),isNaN(s)||0===s||(X(t,n,i,o),e.scale=i.scale*s,J(t,t,e,o),Q(e,e,(0,f.s)(t,t[0]-n[0],n[1]-t[1]))),e}}();function K(t,e,i){return S(t,e),t.scale=i,t}const Y=function(){const t=(0,g.c)();return function(e,i,s,n,o,r){return S(e,i),isNaN(s)||0===s||(X(t,o,i,r),e.scale=i.scale*s,e.rotation+=n,J(t,t,e,r),Q(e,e,(0,f.s)(t,t[0]-o[0],o[1]-t[1]))),e}}(),$=function(){const t=(0,g.c)(),e=(0,g.c)();return function(i,s,n,o,r,a,l){return E(e,a,l),(0,f.i)(t,r,e),o?Y(i,s,n,o,t,a):W(i,s,n,t,a)}}(),X=function(){const t=(0,v.c)();return function(e,i,s,n){return(0,f.t)(e,i,function(t,e,i,s){return Z(t,e,i,s),(0,_.a)(t,t)}(t,s,n,1))}}(),J=function(){const t=(0,v.c)();return function(e,i,s,n){return(0,f.t)(e,i,Z(t,s,n,1))}}(),Q=function(){const t=(0,g.c)(),e=(0,v.c)();return function(i,s,n){S(i,s);const o=z(s),r=i.targetGeometry;return(0,_.b)(e,A(s)),(0,_.s)(e,e,(0,g.f)(o,o)),(0,f.t)(t,n,e),r.x+=t[0],r.y+=t[1],i}}()},72849:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>zs});var s=i(56140),n=i(95830),o=i(59472),r=i(36544),a=(i(68055),i(79881)),l=i(87566),h=i(32656),c=(i(10923),i(57002),i(86035),i(28293)),u=i(15988),d=i(78452),p=i(80621),m=i(29155),g=i(92673),f=i(17288),_=i(83500),v=i(2887),w=i(42148),y=i(59691);const b={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],s=e[1],n=this.values;return s>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},C={xsmall:544,small:768,medium:992,large:1200};function x(t,e){return e?b[t].valueToClassName[e].split(" "):[]}const M=t=>{let e=class extends t{constructor(...t){super(...t),this._breakpointsHandles=new y.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=C}initialize(){this._breakpointsHandles.add((0,p.init)(this,["breakpoints","size"],this._updateClassNames))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}set breakpoints(t){if(t===this._get("breakpoints"))return;const e=function(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}(t);if(!e){const t=JSON.stringify(C,null,2);console.warn("provided breakpoints are not valid, using defaults:"+t)}t=e?t:C,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=w.Z.acquire(),e=w.Z.acquire();let i,s=!1;for(i in b){const n=this[i],o=b[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});n!==o&&(s=!0,this[i]=o,x(i,n).forEach((t=>e.push(t))),x(i,o).forEach((e=>t.push(e))))}s&&(this._applyClassNameChanges(t,e),w.Z.release(t),w.Z.release(e))}_applyClassNameChanges(t,e){const i=this.container;i&&(e.forEach((t=>i.classList.remove(t))),t.forEach((t=>i.classList.add(t))))}_removeActiveClassNames(){const t=this.container;if(!t)return;let e;for(e in b)x(e,this[e]).forEach((e=>t.classList.remove(e)))}};return(0,s._)([(0,a.Cb)()],e.prototype,"breakpoints",null),(0,s._)([(0,a.Cb)()],e.prototype,"orientation",void 0),(0,s._)([(0,a.Cb)()],e.prototype,"widthBreakpoint",void 0),(0,s._)([(0,a.Cb)()],e.prototype,"heightBreakpoint",void 0),e=(0,s._)([(0,l.j)("esri.views.BreakpointsOwner")],e),e};var T=i(39105),k=i(73032),P=i(41241),S=i(61106),I=i(52937),O=(i(36348),i(96071)),D=i(65984),E=i(40920),V=i(54288),z=(i(5201),i(19677));const A=t=>{let e=class extends t{async fetchPopupFeatures(t,e){await this.when();const{location:i,queryArea:s,layerViewsAndGraphics:n,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(t,e),r=Promise.resolve(o),a=this._queryLayerPopupFeatures({queryArea:s,layerViewsAndGraphics:n,options:e}),l=a.map((t=>t.promise));return{location:i,clientOnlyGraphics:o,allGraphicsPromise:(0,T.eachAlwaysValues)([r,...l]).then(z.xH),promisesPerLayerView:a}}_queryLayerPopupFeatures({queryArea:t,layerViewsAndGraphics:e,options:i}){return e.map((({layerView:e,graphics:s})=>{const n={clientGraphics:s,event:(0,o.pC)(i)?i.event:null,signal:(0,o.pC)(i)?i.signal:null,defaultPopupTemplateEnabled:!!(0,o.pC)(i)&&!!i.defaultPopupTemplateEnabled},r=e.fetchPopupFeatures(t,n);return{layerView:e,promise:r}}))}_isValidPopupGraphic(t,e){return t&&!!t.getEffectivePopupTemplate((0,o.pC)(e)&&e.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,e){const{clientGraphics:i,queryArea:s,location:n}=await this._popupHitTestGraphics(t,e),o=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:r,clientOnlyGraphics:a}=this._graphicsPerFetchPopupLayerView(i,o);return{clientOnlyGraphics:a,layerViewsAndGraphics:r,queryArea:s,location:n}}async _popupHitTestGraphics(t,e){const{results:i,mapPoint:s}=await this.popupHitTest(t),n=i.filter((t=>this._isValidPopupGraphic(t.graphic,e))),o=n.length?n[0].mapPoint:null;return{clientGraphics:n.map((t=>t.graphic)),queryArea:s,location:s||o}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach((e=>{this._isValidPopupLayerView(e)&&t.push(e)})),(0,o.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return(0,o.pC)(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,e){const i=[],s=new Map,n=e.map((t=>{const e=[];return"layer"in t?s.set(t.layer,e):s.set(t.graphics,e),{layerView:t,graphics:e}}));for(const e of t){const t=s.get(e.layer)||null;t?t.push(e):i.push(e)}return{layerViewsAndGraphics:n,clientOnlyGraphics:i}}};return e=(0,s._)([(0,l.j)("esri.views.PopupView")],e),e};var R=i(75044);let Z=class extends R.D{constructor(t){super(t),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise(((t,e)=>this._dfd={resolve:t,reject:e})))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new h.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(t,e){e||(e=(0,T.isPromiseLike)(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",e)}};(0,s._)([(0,a.Cb)({readOnly:!0})],Z.prototype,"done",null),(0,s._)([(0,a.Cb)({readOnly:!0,type:String})],Z.prototype,"state",void 0),(0,s._)([(0,a.Cb)()],Z.prototype,"target",void 0),Z=(0,s._)([(0,l.j)("esri.views.ViewAnimation")],Z),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Z||(Z={}));const L=Z;var N=i(15187),F=i(74386),j=i(82677),G=i(59054);class q{constructor(t,e,i,s){const n=t.targetGeometry,o=e.targetGeometry;s?"string"==typeof s&&(s=(0,G.Qc)(s)||G.LI.ease):s=G.LI.ease,this.easing=s,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=e.scale,this.tRotation=e.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,e){const i=this.easing(e);let s,n,o,r;e>=1?(s=this.tCenterX,n=this.tCenterY,o=this.tRotation,r=this.tScale):(s=this.sCenterX+i*this.dCenterX,n=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,r=this.sScale+i*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=n,t.scale=r,t.rotation=o}}let B=class extends j.default{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=G.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new D.Z({targetGeometry:new S.Z,scale:0,rotation:0}),this._updateTask=(0,F.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(t,e,i){this.stop();const s=this.viewpoint;(0,N.JG)(s,e),this.transition=new q(this.viewpoint,t.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const n=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,e){this.stop(),this.updateFunction=e,this.viewpoint=t;const i=new L({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const e=this.animation;if(e&&e.state!==L.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const t=(performance.now()-this._startTime)/this.transition.duration,e=t>=1;this.transition.applyRatio(this.viewpoint,t),e&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,s._)([(0,a.Cb)()],B.prototype,"animation",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"duration",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"transition",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"easing",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"view",void 0),(0,s._)([(0,a.Cb)()],B.prototype,"viewpoint",void 0),B=(0,s._)([(0,l.j)("esri.views.2d.AnimationManager")],B);const U=B;const H=class{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:t,graphicsView:e,labelManager:i,layerViews:s,state:{id:n}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),(0,o.pC)(i)&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),(0,o.pC)(e)&&(e.lastUpdateId!==n&&(e.viewChange(),e.lastUpdateId=n),e.updateRequested&&e.processUpdate(this._updateParameters)),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(t=>{this.stationary=t,this.requestFrame()})),this._frameTaskHandle=(0,F.A)(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const e=this.view.state,i=t.lastUpdateId;null!=i&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==e.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=e.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}};function W(){return Promise.all([Promise.all([i.e(356),i.e(6563),i.e(9942),i.e(22)]).then(i.bind(i,67061)),Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(9942),i.e(9686)]).then(i.bind(i,39686))])}const K=()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(2725)]).then(i.bind(i,22725)))),Y=()=>W().then((()=>Promise.all([i.e(356),i.e(2012),i.e(6889),i.e(6933),i.e(8517)]).then(i.bind(i,76244)))),$={"base-dynamic":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(5373)]).then(i.bind(i,35373)))),"base-tile":K,"bing-maps":K,csv:Y,"geo-rss":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(7868)]).then(i.bind(i,77868)))),feature:Y,geojson:Y,graphics:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(8280)]).then(i.bind(i,8280)))),group:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(6791)]).then(i.bind(i,26791)))),imagery:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(4464),i.e(6685)]).then(i.bind(i,76685)))),"imagery-tile":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(4464),i.e(2130)]).then(i.bind(i,62130)))),kml:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(9362)]).then(i.bind(i,79362)))),"map-image":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(4005)]).then(i.bind(i,94005)))),"map-notes":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(5565)]).then(i.bind(i,45565)))),"ogc-feature":()=>W().then((()=>Promise.all([i.e(356),i.e(2012),i.e(6889),i.e(6933),i.e(8517),i.e(6629)]).then(i.bind(i,16629)))),"open-street-map":K,route:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(6853)]).then(i.bind(i,66853)))),stream:()=>W().then((()=>Promise.all([i.e(356),i.e(2012),i.e(6889),i.e(6933),i.e(8517),i.e(9198)]).then(i.bind(i,49198)))),tile:K,"vector-tile":()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(6017),i.e(1308)]).then(i.bind(i,51308)))),wcs:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(4464),i.e(2130)]).then(i.bind(i,62130)))),"web-tile":K,wms:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(8650)]).then(i.bind(i,18650)))),wmts:()=>W().then((()=>Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(8282)]).then(i.bind(i,68282)))),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};const X=t=>(0,o.pC)($[t.type]),J=t=>{const e=$[t.type];if(!(0,o.pC)(e))throw function(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new h.Z(`${i}:view-not-supported`,`${e} is not supported in 2D`)}(t);return e(t)};var Q,tt=i(53817),et=i(35470),it=i(18897),st=i(47005),nt=i(17333),ot=i(92232),rt=i(14286);const at=r.Z.getLogger("esri.views.MapView");let lt=Q=class extends j.default{constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:(0,P.Q8)(this.geometry,this.spatialReference)?(0,P.iV)(this.geometry,this.spatialReference):(0,nt.kR)()?(0,nt.iV)(this.geometry,this.spatialReference):(at.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}constrain(t,e){if(!this.normalizedGeometry)return t;const i=t.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,st.aV)(this.normalizedGeometry,i):(0,st.CI)(this.normalizedGeometry,i))return t;const{coordinate:s}=function(t,e){const{spatialReference:i}=e,s=[e.x,e.y];let n=Number.POSITIVE_INFINITY,o=0,r=0;const a=[0,0],l="extent"===t.type?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const t of l)for(let e=0;e<t.length-1;e++){(0,ot.Tx)(a,s,t,e);const i=(0,rt.d)(s,a);i<n&&(n=i,o=a[0],r=a[1])}return{coordinate:new S.Z({x:o,y:r,spatialReference:i}),distance:n}}(this.normalizedGeometry,i);return s?(t.targetGeometry=s,t):t}clone(){var t,e;return new Q({geometry:null==(t=this.geometry)?void 0:t.clone(),spatialReference:null==(e=this.spatialReference)?void 0:e.clone()})}};var ht;(0,s._)([(0,a.Cb)({constructOnly:!0})],lt.prototype,"geometry",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],lt.prototype,"normalizedGeometry",null),(0,s._)([(0,a.Cb)({constructOnly:!0})],lt.prototype,"spatialReference",void 0),lt=Q=(0,s._)([(0,l.j)("esri.views.2d.constraints.GeometryConstraint")],lt);let ct=ht=class extends j.default{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e?(this.rotationEnabled||(t.rotation=e.rotation),t):t}clone(){return new ht({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,s._)([(0,a.Cb)()],ct.prototype,"enabled",void 0),(0,s._)([(0,a.Cb)()],ct.prototype,"rotationEnabled",void 0),ct=ht=(0,s._)([(0,l.j)("esri.views.2d.constraints.RotationConstraint")],ct);const ut=ct;var dt;let pt=dt=class extends j.default{constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:s,minZoom:n,maxZoom:o}=this,r=-1,a=-1,l=!1,h=!1;if(0!==i&&0!==s&&i<s&&([i,s]=[s,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);e=e.map((t=>t.clone())),e.sort(((t,e)=>e.scale-t.scale)),e.forEach(((t,e)=>t.level=e));for(const n of e)!l&&i>0&&i>=n.scale&&(r=n.level,l=!0),!h&&s>0&&s>=n.scale&&(a=t?t.level:-1,h=!0),t=n;-1===n&&(n=0===i?0:r),-1===o&&(o=0===s?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),o=Math.max(o,0),o=Math.min(o,e.length-1),n>o&&([n,o]=[o,n]),i=e[n].scale,s=e[o].scale,e.splice(0,n),e.splice(o-n+1,e.length),e.forEach(((t,e)=>{this._lodByScale[t.scale]=t,this._scales[e]=t.scale})),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,s=this.effectiveMaxScale,n=t.targetGeometry,o=e&&e.targetGeometry,r=0!==s&&t.scale<s,a=0!==i&&t.scale>i;if(r||a){const r=a?i:s;if(o){const i=(r-e.scale)/(t.scale-e.scale);n.x=o.x+(n.x-o.x)*i,n.y=o.y+(n.y-o.y)*i}t.scale=r}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),s=Math.round(t);return e[s]+(s-t)*(e[i]-e[s])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,s;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],s=e[n+1],s===t)return n+this.effectiveMinZoom+1;if(i>t&&s<t)return n+this.effectiveMinZoom+1-(t-s)/(i-s)}}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new dt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e),this._scales[0])),this._lodByScale[t].scale}};(0,s._)([(0,a.Cb)({readOnly:!0})],pt.prototype,"effectiveLODs",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],pt.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],pt.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],pt.prototype,"effectiveMinScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],pt.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,a.Cb)({type:[it.Z]})],pt.prototype,"lods",void 0),(0,s._)([(0,a.Cb)()],pt.prototype,"minZoom",void 0),(0,s._)([(0,a.Cb)()],pt.prototype,"maxZoom",void 0),(0,s._)([(0,a.Cb)()],pt.prototype,"minScale",void 0),(0,s._)([(0,a.Cb)()],pt.prototype,"maxScale",void 0),(0,s._)([(0,a.Cb)()],pt.prototype,"snapToZoom",void 0),pt=dt=(0,s._)([(0,l.j)("esri.views.2d.constraints.ZoomConstraint")],pt);const mt=pt,gt={base:null,key:"type",typeMap:{extent:I.Z,polygon:tt.Z}};let ft=class extends et.Z.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get _defaultLODs(){const t=this.get("view.defaultsFromMap.tileInfo"),e=this.get("view.spatialReference");return t&&e&&t.spatialReference.equals(e)?t.lods:null}get _geometry(){return new lt({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new ut({rotationEnabled:this.rotationEnabled})}get _zoom(){return new mt({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(t){const e=this.effectiveMaxScale;return 0===e||t>=e}canZoomOutTo(t){const e=this.effectiveMinScale;return 0===e||t<=e}constrain(t,e){return this._zoom.constrain(t,e),this._rotation.constrain(t,e),this._geometry.constrain(t,e),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],ft.prototype,"effectiveLODs",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],ft.prototype,"effectiveMinScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],ft.prototype,"effectiveMaxScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],ft.prototype,"effectiveMinZoom",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],ft.prototype,"effectiveMaxZoom",void 0),(0,s._)([(0,a.Cb)({types:gt,value:null})],ft.prototype,"geometry",null),(0,s._)([(0,a.Cb)({type:[it.Z]})],ft.prototype,"lods",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"minScale",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"maxScale",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"minZoom",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"maxZoom",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"rotationEnabled",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"snapToZoom",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"view",void 0),(0,s._)([(0,a.Cb)()],ft.prototype,"_defaultLODs",null),(0,s._)([(0,a.Cb)({type:lt})],ft.prototype,"_geometry",null),(0,s._)([(0,a.Cb)({type:ut})],ft.prototype,"_rotation",null),(0,s._)([(0,a.Cb)({readOnly:!0,type:mt})],ft.prototype,"_zoom",null),ft=(0,s._)([(0,l.j)("esri.views.2d.MapViewConstraints")],ft);const _t=ft;var vt,wt=i(55735),yt=i(58385),bt=i(60418),Ct=i(98501),xt=i(42738),Mt=i(75384),Tt=i(87561),kt=i(55955),Pt=i(27851);function St(t){return function(t){return t instanceof Float32Array&&t.length>=2}(t)||function(t){return Array.isArray(t)&&t.length>=2}(t)}const It=[0,0];let Ot=vt=class extends yt.wq{constructor(...t){super(...t),this._viewpoint2D={center:(0,wt.c)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new I.Z,this.id=0,this.inverseTransform=(0,Mt.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,Mt.c)(),this.transformNoRotation=(0,Mt.c)(),this.displayMat3=(0,kt.c)(),this.displayViewMat3=(0,kt.c)(),this.viewMat3=(0,kt.c)(),this.viewMat2d=(0,Tt.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=(0,N.JG)(i,t.viewpoint),this._set("size",(0,rt.c)(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new vt({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return St(e)?(0,rt.t)(t,e,this.inverseTransform):(It[0]=e,It[1]=i,(0,rt.t)(t,It,this.inverseTransform))}toScreen(t,e,i){return St(e)?(0,rt.t)(t,e,this.transform):(It[0]=e,It[1]=i,(0,rt.t)(t,It,this.transform))}toScreenNoRotation(t,e,i){return St(e)?(0,rt.t)(t,e,this.transformNoRotation):(It[0]=e,It[1]=i,(0,rt.t)(t,It,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return(0,N.Rb)(t,i,n,e,0,s),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),r=new D.Z({targetGeometry:new S.Z(t[0],t[1],e),scale:i,rotation:s});if(this._set("viewpoint",r),!o||!e||!i)return;this.resolution=(0,N.uG)(r),this.rotation=s,this.scale=i,this.spatialReference=e,(0,rt.c)(this.center,t);const a=0!==o[0]?2/o[0]:0,l=0!==o[1]?-2/o[1]:0;(0,Ct.s)(this.displayMat3,a,0,0,0,l,0,-1,1,1);const h=(0,Ct.i)(this.viewMat3),c=(0,Pt.f)(o[0]/2,o[1]/2),u=(0,Pt.f)(-o[0]/2,-o[1]/2),d=(0,bt.t)(s);(0,Ct.b)(h,h,c),(0,Ct.r)(h,h,d),(0,Ct.b)(h,h,u),(0,Ct.m)(this.displayViewMat3,this.displayMat3,h);const p=(0,xt.i)(this.viewMat2d);return(0,xt.t)(p,p,c),(0,xt.r)(p,p,d),(0,xt.t)(p,p,u),(0,N.bk)(this.extent,r,o),(0,N.Ck)(this.transform,r,o,n),(0,xt.a)(this.inverseTransform,this.transform),(0,N.Jp)(this.transformNoRotation,r,o,n),this.worldScreenWidth=(0,N.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,s._)([(0,a.Cb)({readOnly:!0})],Ot.prototype,"id",void 0),(0,s._)([(0,a.Cb)({value:1,json:{write:!0}})],Ot.prototype,"pixelRatio",null),(0,s._)([(0,a.Cb)({json:{write:!0}})],Ot.prototype,"size",null),(0,s._)([(0,a.Cb)({type:D.Z,json:{write:!0}})],Ot.prototype,"viewpoint",null),Ot=vt=(0,s._)([(0,l.j)("esri.views.2d.ViewState")],Ot);const Dt=Ot;let Et=class extends j.default{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};(0,s._)([(0,a.Cb)()],Et.prototype,"left",void 0),(0,s._)([(0,a.Cb)()],Et.prototype,"top",void 0),(0,s._)([(0,a.Cb)()],Et.prototype,"right",void 0),(0,s._)([(0,a.Cb)()],Et.prototype,"bottom",void 0),Et=(0,s._)([(0,l.j)("esri.views.2d.PaddedViewState.Padding")],Et);let Vt=class extends Dt{constructor(...t){super(...t),this.paddedViewState=new Dt,this._updateContent=(()=>{const t=(0,wt.c)();return()=>{const e=this._get("size"),i=this._get("padding");if(!e||!i)return;const s=this.paddedViewState;(0,rt.s)(t,i.left+i.right,i.top+i.bottom),(0,rt.e)(t,e,t),(0,rt.c)(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Et,this.size=[0,0]}set padding(t){this._set("padding",t||new Et)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,(0,N.H4)(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=e.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=s.spatialReference,this._update()}}};(0,s._)([(0,a.Cb)()],Vt.prototype,"paddedViewState",void 0),(0,s._)([(0,a.Cb)({type:Et})],Vt.prototype,"padding",null),(0,s._)([(0,a.Cb)()],Vt.prototype,"viewpoint",null),Vt=(0,s._)([(0,l.j)("esri.views.2d.PaddedViewState")],Vt);const zt=Vt;i(68414);var At=i(46666),Rt=(i(13596),i(1768),i(90461));const Zt=r.Z.getLogger("esri.views.MapView");let Lt=class extends(A(V.Z)){constructor(t){super(t),this._stationaryTimer=null,this.frameTask=new H(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new Rt.T,this.type="2d",this.constraints=new _t,this.padding={top:0,right:0,bottom:0,left:0};const e=this.handles,i=()=>this.notifyChange("updating");e.add([this.watch("viewpoint",(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)}),!0),this.on("resize",(t=>this._resizeHandler(t))),this.watch("animationManager.animation",(t=>{this.animation=t})),this.allLayerViews.on("change",(()=>{i(),e.remove("map-view-base-layerViewsUpdating"),e.add(this.allLayerViews.map((t=>t.watch("updating",i))),"map-view-base-layerViewsUpdating")}))],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};t.when(i,i)}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new S.Z({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this._normalizeInput(t))return void Zt.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");const e=this.viewpoint;(0,N.o2)(e,e,t),this.viewpoint=e}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(t.on("update",(()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint))})),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void Zt.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!e.width||!e.height)return void Zt.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;(0,N.qf)(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i}get initialExtentRequired(){const{extent:t,center:e,scale:i,viewpoint:s,zoom:n}=this;return!(this.get("map.initialViewProperties.viewpoint")||t||e&&(0!==i||-1!==n)||s)}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;(0,N.YQ)(e,e,t),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const e=this._get("extent");return e&&(this._set("extent",null),this._set("center",e.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;(0,N.Hy)(e,e,t),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void(!t.scale||isNaN(t.scale)?Zt.error("#viewpoint",`invalid scale value of ${t.scale}`):(0,o.Wi)(t.targetGeometry)?Zt.error("#viewpoint","geometry not defined"):Zt.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(t.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const i=new D.Z({targetGeometry:new S.Z,scale:0,rotation:0});(0,N.JG)(i,e),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(null==t)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",t),this._set("scale",0);const e=this._get("extent");e&&(this._set("extent",null),this._set("center",e.center))}if(!this.constraints.effectiveLODs)return;const e=this.viewpoint;(0,N.Hy)(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),(0,p.whenTrueOnce)(this,"ready",e&&e.signal).then((()=>{const i={animate:!0,...e},s=(0,N.km)(t,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)}));Zt.error("#goTo()","target cannot be null or undefined")}hitTest(t){return Promise.reject("Should be implemented by subclasses")}popupHitTest(t){return this.hitTest(t).then((e=>({...e,mapPoint:this.toMap(t)})))}toMap(t){if(!this.ready)return null;const[e,i]=this.state.toMap([0,0],[t.x,t.y]),s=this.spatialReference;return new S.Z({x:e,y:i,spatialReference:s})}isTileInfoRequired(){return!0}toScreen(t){if(!this.ready)return null;const e=this._normalizeInput(t),i=[e.x,e.y];return this.state.toScreen(i,i),(0,O.vW)(i[0],i[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Zt.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(t,e){return!(!e&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(t){return J(t)}hasLayerViewModule(t){return X(t)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new L),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,n=i.then((()=>{s()&&(this.animation=null)})).catch((t=>{throw s()&&(this.animation=null,e.done||(e.stop(),this.frameTask.animationInProgress=!1)),t})),o=new Promise((t=>t(n)));return e.when().catch((()=>{s()&&o.cancel&&o.cancel()})),o}_gotoImmediate(t,e){const i=this._gotoTask,s=this.animation,n=t.then((t=>{if((0,T.throwIfAborted)(e),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=t,s.finish()}));return this._cancellableGoTo(i,s,n)}_gotoAnimated(t,e){const i=this._gotoTask,s=this.animation,n=t.then((t=>{if((0,T.throwIfAborted)(e),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");return s.update(t),this.animationManager.animate(s,this.viewpoint,e),s.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(i,s,n)}_resizeHandler(t){const e=this.state;if(!e)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],(0,N.SI)(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){const t=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(t),this._set("animationManager",new U({view:this})),this._set("state",new zt({padding:this._get("padding"),size:this.size,viewpoint:t})),this._set("featuresTilingScheme",new At.Z(E.Z.create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[t,e],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new S.Z({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<160&&(this._stationaryTimer=this._flipStationary(t))}),t)),this._stationaryTimer}_normalizeInput(t,e=this.spatialReference){const i=t&&t.targetGeometry||t;return e?i?e.equals(i.spatialReference)?t:(0,P.Q8)(i,e)?function(t){return t&&"esri.Viewpoint"===t.declaredClass}(t)?(t.targetGeometry=(0,P.iV)(i,e),t):(0,P.iV)(i,e):null:null:t}_getDefaultViewpoint(){const t=this.constraints,e={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};t.effectiveLODs?-1!==e.zoom&&(e.scale=t.zoomToScale(e.zoom)):e.zoom=-1;let i=null,s=null,n=0;const r=e.viewpoint&&e.viewpoint.rotation,a=e.viewpoint&&e.viewpoint.targetGeometry;(0,o.pC)(a)&&("extent"===a.type?i=a:"point"===a.type&&(s=a,n=e.viewpoint.scale));const l=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),h=this._normalizeInput(this.initialExtent),c=e.extent||i||l||h,u=e.center||s||c&&c.center,d=this.get("map.initialViewProperties.viewpoint.scale"),p=e.scale||n||d||c&&(0,N.EK)(c,this.size),m=this.get("map.initialViewProperties.viewpoint.rotation"),g=e.rotation||r||m||0;return u&&p?new D.Z({targetGeometry:u,scale:p,rotation:g}):null}};(0,s._)([(0,a.Cb)()],Lt.prototype,"_stationaryTimer",void 0),(0,s._)([(0,a.Cb)()],Lt.prototype,"animation",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Lt.prototype,"animationManager",void 0),(0,s._)([(0,a.Cb)({value:null,type:S.Z,dependsOn:["state.id","ready"]})],Lt.prototype,"center",null),(0,s._)([(0,a.Cb)({type:_t})],Lt.prototype,"constraints",null),(0,s._)([(0,a.Cb)({value:null,type:I.Z,dependsOn:["state.id","ready"]})],Lt.prototype,"extent",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Lt.prototype,"featuresTilingScheme",void 0),(0,s._)([(0,a.Cb)()],Lt.prototype,"fullOpacity",void 0),(0,s._)([(0,a.Cb)()],Lt.prototype,"graphicsView",void 0),(0,s._)([(0,a.Cb)({type:I.Z})],Lt.prototype,"initialExtent",void 0),(0,s._)([(0,a.Cb)({dependsOn:["map.initialViewProperties?.viewpoint"]})],Lt.prototype,"initialExtentRequired",null),(0,s._)([(0,a.Cb)()],Lt.prototype,"labelManager",void 0),(0,s._)([(0,a.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Lt.prototype,"padding",null),(0,s._)([(0,a.Cb)({type:Object})],Lt.prototype,"renderingOptions",void 0),(0,s._)([(0,a.Cb)()],Lt.prototype,"resizeAlign",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["state.id"]})],Lt.prototype,"resolution",null),(0,s._)([(0,a.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Lt.prototype,"rotation",null),(0,s._)([(0,a.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Lt.prototype,"scale",null),(0,s._)([(0,a.Cb)({type:k.Z,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],Lt.prototype,"spatialReference",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Lt.prototype,"state",void 0),(0,s._)([(0,a.Cb)({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],Lt.prototype,"stationary",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Lt.prototype,"supportsGround",void 0),(0,s._)([(0,a.Cb)({type:Rt.T,readOnly:!0})],Lt.prototype,"timeline",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Lt.prototype,"type",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],Lt.prototype,"updating",null),(0,s._)([(0,a.Cb)({value:null,type:D.Z,dependsOn:["state.id","ready"]})],Lt.prototype,"viewpoint",null),(0,s._)([(0,a.Cb)({value:-1,dependsOn:["state.id"]})],Lt.prototype,"zoom",null),Lt=(0,s._)([(0,l.j)("esri.views.MapViewBase")],Lt);const Nt=Lt;var Ft=i(69948),jt=i(46539);function Gt(t,e){switch(e){case"primary":return"touch"===t.pointerType||0===t.button;case"secondary":return"touch"!==t.pointerType&&2===t.button;case"tertiary":return"touch"!==t.pointerType&&1===t.button}}class qt extends jt.a{constructor(t,e){super(!0),this.view=t,this.registerIncoming("double-click",e,(t=>this._handleDoubleClick(t,e)))}_handleDoubleClick(t,e){Gt(t.data,"primary")&&(t.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class Bt extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",i,(t=>this._handleDoubleTapDrag(t)))}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:i}=e;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=e,{view:o}=this,{mapViewNavigation:r}=o;switch(s){case"begin":{const{scale:t}=o;this._startScale=t,this._currentScale=t,this._previousDelta=n,r.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const t=1.015**n.y,e=this._startScale*t,i=e/this._currentScale;r.setViewpointImmediate(i),this._currentScale=e;break}case"end":{const{constraints:t}=o,{effectiveLODs:e,snapToZoom:i}=t;if(!i||!e)return void r.end();const s=t.snapScale(this._currentScale),a=(n.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;r.zoom(a);break}}}}class Ut{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const e=t.data,i=e.pointers.size;switch(e.action){case"start":this.currentCount=i,this.emitStart(t);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"update":this.emitUpdate(t);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"end":this.emitEnd(t),this.currentCount=0}this.previousEvent=t}emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class Ht extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.pointerAction=e,this.registerIncoming("drag",i,(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ut({start:(t,e)=>{s.pan.begin(this.view,e.data),e.stopPropagation()},update:(t,e)=>{s.pan.update(this.view,e.data),e.stopPropagation()},end:(t,e)=>{s.pan.end(this.view,e.data),e.stopPropagation()},condition:(t,e)=>1===t&&Gt(e.data,this.pointerAction)})}_handleDrag(t){const e=this.view.mapViewNavigation;e.pinch.zoomMomentum||e.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Wt extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.pointerAction=e;const s=this.view.mapViewNavigation;this.dragEventSeparator=new Ut({start:(t,e)=>{s.rotate.begin(this.view,e.data),e.stopPropagation()},update:(t,e)=>{s.rotate.update(this.view,e.data),e.stopPropagation()},end:(t,e)=>{s.rotate.end(),e.stopPropagation()},condition:(t,e)=>1===t&&Gt(e.data,this.pointerAction)}),this.registerIncoming("drag",i,(t=>this.dragEventSeparator.handle(t)))}}var Kt=i(17387);function Yt(t){let e=t*t;return t<0&&(e*=-1),e}class $t extends jt.a{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new y.Z,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(t=>this.handleEvent(t))),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([(0,p.init)(this.view.navigation.gamepad,"enabled",(t=>{t?(this.handle.resume(),this.frameTask||(this.frameTask=(0,F.A)({update:t=>this.frameUpdate(t.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}))])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(t){const e=this.view.navigation.gamepad.device;e&&t.data.device!==e||this.currentDevice&&this.currentDevice!==t.data.device||("end"===t.data.action?(this.currentDevice=null,function(t){t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0}(this.transformation)):(this.currentDevice=t.data.device,function(t,e,i){const s=i,n=t.state,o=t.device,r="forward-down"===e.tiltDirection?1:-1;"standard"===o.deviceType?(s.translation[0]=Yt(n.axes[0]),s.translation[1]=Yt(n.axes[1]),s.translation[2]=Yt(n.buttons[7])-Yt(n.buttons[6]),s.heading=Yt(n.axes[2]),s.tilt=Yt(n.axes[3])):"spacemouse"===o.deviceType&&(s.translation[0]=1.2*Yt(n.axes[0]),s.translation[1]=1.2*Yt(n.axes[1]),s.translation[2]=2*-Yt(n.axes[2]),s.heading=1.2*Yt(n.axes[5]),s.tilt=1.2*Yt(n.axes[3])),s.tilt*=r,(0,Kt.a)(s.translation,s.translation,1)}(t.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(t){const e=this.transformation;if(function(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}(e))return;const i=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,n=Jt*s*t;(0,N.Rx)(i,i,[e.translation[0]*n,-e.translation[1]*n]);const o=1+e.translation[2]*Qt*t,r=this.view.constraints.rotationEnabled?-e.heading*Xt*t:0,a=this.view.size,l=[a[0]/2,a[1]];(0,N.UZ)(i,i,o,r,l,a);const h=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=h}}const Xt=.06,Jt=.7,Qt=6e-4;class te extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._pressed=!1,this._keyMap={[e.left]:"left",[e.right]:"right",[e.up]:"up",[e.down]:"down"},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),this.registerIncoming("key-up",i,(t=>this._handleKeyUp(t))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const i=this._keyMap[t.data.key];if(this._pressed=null!=i,this._pressed){if(e)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class ee extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._pressed=!1,this._keyToDirection={[e.clockwiseOption1]:"clockwise",[e.clockwiseOption2]:"clockwise",[e.counterClockwiseOption1]:"counterClockwise",[e.counterClockwiseOption2]:"counterClockwise",[e.resetOption1]:"reset",[e.resetOption2]:"reset"},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),this.registerIncoming("key-up",i,(t=>this._handleKeyUp(t))),this.registerIncoming("blur",i,(()=>this._handleBlur()))}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,e){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=null!=s,this._pressed){if(e)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class ie extends jt.a{constructor(t,e,i){super(!0),this.view=t,this.keys=e,this._keysToZoomAction={},this.registerIncoming("key-down",i,(t=>this._handleKeyDown(t))),e.zoomIn.forEach((t=>this._keysToZoomAction[t]=0)),e.zoomOut.forEach((t=>this._keysToZoomAction[t]=1))}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const e=t.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then((()=>n.end())),t.stopPropagation()}}class se extends jt.a{constructor(t,e){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",e,(t=>this._handleMouseWheel(t)))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(t.preventDefault(),t.stopPropagation(),!this._canZoom)return;const e=this.view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/.6**(1/60*n),r=e.zoom(o,[i,s]);r&&(this._canZoom=!1,r.catch((()=>{})).then((()=>{this._canZoom=!0,e.end()})))}}class ne extends jt.a{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const e=this.view.mapViewNavigation;this.dragEventSeparator=new Ut({start:(t,i)=>{e.pinch.begin(this.view,i.data),i.stopPropagation()},update:(t,i)=>{e.pinch.update(this.view,i.data),i.stopPropagation()},end:(t,i)=>{e.pinch.end(this.view),i.stopPropagation()},condition:t=>t>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var oe=i(63345),re=i(37699),ae=i(33655);function le(t){const e=t.native;return e?{buttons:e.buttons.map((t=>t.pressed?t.value?t.value:1:0)),axes:e.axes.map((e=>function(t,e){const i=Math.abs(t);return i<e?0:(0,ae.Xx)(t)*(i-e)/(1-e)}(e,t.axisThreshold)))}:{buttons:[],axes:[]}}class he{constructor(t,e){this.element=t,this.input=e,this._hasEventListeners=!1,this.onConnectGamepad=t=>{this.connectGamepad(t.gamepad)},this.onDisconnectGamepad=t=>{const e=t.gamepad,i=e.index,s=this.inputDevices[i];s&&(this.emitGamepadEvent(e,le(s),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(s),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}connectGamepad(t){const e=new re.Z(t);"unknown"!==e.deviceType&&(this.inputDevices[t.index]=e,this.input.gamepad.devices.add(e)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling()}startPolling(){null==this.frameTask&&(this.frameTask=(0,F.A)({update:()=>this.readGamepadState()}))}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}readGamepadState(){const t=document.hasFocus(),e=this.element.contains(document.activeElement),i="document"===this.input.gamepad.enabledFocusMode&&!t||"view"===this.input.gamepad.enabledFocusMode&&!e;this.forEachGamepad((t=>{const e=this.inputDevices[t.index];if(!e)return;const s=this.latestUpdate[t.index],n=le(e),o=i||function(t){for(let e=0;e<t.axes.length;e++)if(0!==t.axes[e])return!1;for(let e=0;e<t.buttons.length;e++)if(0!==t.buttons[e])return!1;return!0}(n);if(s){if(s.timestamp===t.timestamp)return;if(!s.active&&o)return;if(function(t,e){if(t.axes.length!==e.axes.length)return!1;if(t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}(s.state,n))return}this.emitGamepadEvent(t,n,!o)}))}forEachGamepad(t){const e=window.navigator.getGamepads();for(let i=0;i<e.length;i++){const s=e[i];this.validate(s)&&t(s)}}emitGamepadEvent(t,e,i){const s=this.latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:e,active:i},this.callback&&this.callback({device:this.inputDevices[t.index],state:e,action:o})}validate(t){if(!t)return!1;if(!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}}const ce=(0,n.Z)("trident"),ue=(0,n.Z)("edge"),de=(0,n.Z)("chrome"),pe=(0,n.Z)("ff"),me=(0,n.Z)("safari"),ge="esri-view-surface--touch-none",fe="esri-view-surface--touch-pan";class _e{constructor(t,e){this.input=e,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new he(t,this.input),this._gamepadSource.onEvent=t=>this._callback("gamepad",t)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((t=>{this._releasePointerCaptureSafe(t)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const e in this._active)if(!t||!t.has(e)){const t=this._active[e];this._element.removeEventListener(ve[e],t),delete this._active[e]}t&&t.forEach((t=>{if(!this._active[t]&&ve[t]){const e=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(ve[t],e),this._active[t]=e}})),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,e){e?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ge:fe),this._element.classList.add(this._browserTouchPanningEnabled?fe:ge)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ge),this._element.classList.remove(fe),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch(t){}}_updateNormalizedPointerLikeEvent(t,e){const i=(0,v.Eu)(this._element,t);return _e.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),e.x=i.x,e.y=i.y,e}_handleKey(t,e){const i=(0,oe.kK)(e);i&&"key-up"===t&&this._keyDownState.delete(i);const s={native:e,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===t&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,e){const i=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,e){const i=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});e.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,e){let i=e.deltaY;switch(e.deltaMode){case 0:(ce||ue)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}ce||ue?i*=.7:de||me?i*=.6:pe&&(i*=1.375);const s=Math.abs(i);if(s>100){const t=.02;i=i/s*200/(1+Math.exp(-t*(s-100)))}const n=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:i});this._callback(t,n)}_handlePointerCaptureLost(t,e){this._activePointerCaptures.delete(e.pointerId),this._handleDefault(t,e)}_handleDefault(t,e){const i={native:e};e.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){"Alt"===t.key&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}_e.test={disableSubpixelCoordinates:!1};const ve={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class we extends jt.a{constructor(){super(!0),this.registerIncoming("context-menu",(t=>{t.data.native.preventDefault()}))}}var ye=i(2992),be=i(77293),Ce=i(16853);const xe=250,Me=10,Te=350,ke=35;class Pe extends jt.a{constructor(t=xe,e=Me,i=Te,s=ke,n=ye.Z){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=e,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach((t=>{null!=t.doubleClickTimeout&&(t.doubleClickTimeout.remove(),t.doubleClickTimeout=null)}))}get hasPendingInputs(){return(0,be.o)(this._pointerState,(t=>null!=t.doubleClickTimeout))}_pointerId(t){const e=t.native;return"mouse"===e.pointerType?`${e.pointerId}:${e.button}`:`${e.pointerType}`}_handleImmediateClick(t){const e=t.data,i=this._pointerId(e),s=this._pointerState.get(i);if(s){const n="touch"===e.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;(0,Ce.nk)(s.event.data,e)>n?(this._clearDoubleClickTimeout(i,!0),this._startClick(t)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(t)}_startClick(t){const e=this._pointerId(t.data),i="touch"===t.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(e,{event:t,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(e)),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const e=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(e,!0)}_handleDrag(t){const e=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(e,!0)}_clearDoubleClickTimeout(t,e){const i=this._pointerState.get(t);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,e&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const e=this._pointerState.get(t);this._click.emit(e.event.data,void 0,e.event.modifiers),e.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class Se extends jt.a{constructor(t=xe,e=Me,i=Te,s=ke,n=ye.Z){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=e,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,O.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Ut({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",(t=>this._dragEventSeparator.handle(t))),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((t=>{null!=t.doubleTapTimeout&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)}))}get hasPendingInputs(){return(0,be.o)(this._pointerState,(t=>null!=t.doubleTapTimeout))}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,e,i){const{button:s,buttons:n,pointer:o,pointers:r,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:s,buttons:n,pointer:o,pointers:r,pointerType:a,timestamp:l}}_dragStart(t,e){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=e,{center:n}=i;this._dragStartCenter=n;const o=this._createDoubleTapDragData("begin",(0,O.vW)(0,0),i);this._doubleTapDrag.emit(o,void 0,s),e.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:s}=e,n=(0,O.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,e);this._doubleTapDrag.emit(o,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:i}=t,{center:s}=e,n=(0,O.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,e);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:e}=t,i=this._pointerId(e),s=this._pointerState.get(i),{pointerType:n}=e.native;if(s){const o="touch"===n?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),(0,Ce.nk)(s.event.data,e)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:e}=t,{pointerId:i,button:s,pointerType:n}=e;return"mouse"===n?`${i}:${s}`:`${n}`}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,s=this._pointerId(e),n="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout((()=>this._clearPointerDown(s)),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}var Ie,Oe=i(98034);class De extends jt.a{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this))}createPayload(t,e,i,s){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:e.buttons,timestamp:s,pointers:ze(this.activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}addPointer(t){const e=t.native.pointerId,i=Ve(this.activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(e,s);const n=Ae(s,Ee(this.activePointerMap));s.initialAngle=n,s.lastAngle=n,this.updatePointerAngles(i)}updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this.activePointerMap.get(e);i?i.event=t:this.addPointer(t)}removePointer(t){const e=Ve(this.activePointerMap).angle;this.activePointerMap.delete(t),this.updatePointerAngles(e)}updatePointerAngles(t){const e=Ve(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=Ae(i,e)-t,i.lastAngle=Ae(i,e)-t}))}emitEvent(t,e,i){const s=Ve(this.activePointerMap);this.drag.emit(this.createPayload(t,e,s,i),void 0,this.startStateModifiers)}handlePointerUpAndPointerLost(t){const e=t.data.native.pointerId,i=(0,Oe.HA)(t.timestamp);this.activePointerMap.get(e)&&(1===this.activePointerMap.size?(this.updatePointer(t.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",t.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(e)):(this.removePointer(e),this.emitEvent("removed",t.data,(0,Oe.HA)(t.timestamp))))}handlePointerDrag(t){const e=t.data,i=e.currentEvent,s=(0,Oe.HA)(t.timestamp);switch(e.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this.updatePointer(i),!this.isCurrentDragSuppressed&&this.emitEvent("update",i,s)):(this.addPointer(i),this.emitEvent("added",i,s),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(i),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",i,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function Ee(t){const e=[];return t.forEach((t=>{e.push((0,O.vW)(t.event.x,t.event.y))})),(0,Ce.y_)(e)}function Ve(t){const e=Ee(t);let i=0;return t.forEach((t=>{let s=Ae(t,e),n=s-t.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=t.lastAngle+n,t.lastAngle=s;const o=s-t.initialAngle;i+=o})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function ze(t){const e=new Map;return t.forEach(((t,i)=>e.set(i,t.event))),e}function Ae(t,e){const i=t.event,s=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,s)}!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"}(Ie||(Ie={}));class Re extends jt.a{constructor(t=xe,e=Me,i=Te,s=ke,n=ye.Z){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=e,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel")}))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=this._pointerId(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native)}}_handlePointerLoss(t,e){const i=t.data,s=this._pointerId(i),n=this._pointerState.get(s);if(n&&"pointer-up"===e&&n.downButton===i.native.button){const e=n.immediateDoubleClick;if(e){e.timeoutHandle.remove();const s="touch"===t.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;(0,Ce.nk)(e,t.data)>s?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,e.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_pointerId(t){const e=t.native;return"mouse"===e.pointerType?`${e.pointerId}:${e.button}`:`${e.pointerType}`}_removeState(t){const e=this._pointerId(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}var Ze=i(94535);const Le="Ctrl",Ne={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},Fe={zoomIn:["=","+"],zoomOut:["-","_"]},je={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Ge=class extends j.default{constructor(){super(...arguments),this._handles=new y.Z}initialize(){this._handles.add([(0,p.whenNot)(this.view,"ready",(()=>this._disconnect())),(0,p.when)(this.view,"ready",(()=>this._connect()))])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const t=this.view.surface,e=new _e(t,this.view.input),i=[new Re,new Ze.e,new Pe,new De(this.view.navigation),new Se],s=new Ft.$({eventSource:e,recognizers:i});s.installHandlers("prevent-context-menu",[new we],Ft.f.INTERNAL),s.installHandlers("navigation",[new ne(this.view),new $t(this.view),new se(this.view),new qt(this.view),new qt(this.view,[Le]),new Ht(this.view,"primary"),new te(this.view,Ne),new ie(this.view,Fe),new ee(this.view,je),new Wt(this.view,"secondary"),new Bt(this.view,"touch")],Ft.f.INTERNAL),this.view.viewEvents.connect(s),this._source=e,this._inputManager=s,(0,p.init)(this.view.navigation,"browserTouchPanEnabled",(t=>{this._source.browserTouchPanningEnabled=!t}))}get test(){return{inputManager:this._inputManager}}};(0,s._)([(0,a.Cb)()],Ge.prototype,"view",void 0),Ge=(0,s._)([(0,l.j)("esri.views.2d.input.MapViewInputManager")],Ge);const qe=Ge;var Be=i(78745);let Ue=0,He=class extends j.default{constructor(){super(...arguments),this.color=new Be.default([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return Ue++}};(0,s._)([(0,a.Cb)({readOnly:!0})],He.prototype,"version",null),(0,s._)([(0,a.Cb)({type:Be.default})],He.prototype,"color",void 0),(0,s._)([(0,a.Cb)({type:Be.default})],He.prototype,"haloColor",void 0),(0,s._)([(0,a.Cb)()],He.prototype,"haloOpacity",void 0),(0,s._)([(0,a.Cb)()],He.prototype,"fillOpacity",void 0),He=(0,s._)([(0,l.j)("esri.views.2d.support.HighlightOptions")],He);const We=He;var Ke=i(43129);const Ye={checkMajorWebPerformanceCaveat:!0};var $e=i(60263),Xe=i(77827);const Je="esri-component";let Qe=class extends j.default{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const e=this._get("node");t!==e&&(t&&t.classList.add(Je),e&&e.classList.remove(Je),this._set("node",t))}castNode(t){return t?"string"==typeof t||function(t){return t&&"nodeType"in t}(t)?(this._set("widget",null),(0,Xe.L7)(t)):(function(t){return t&&"function"==typeof t.render}(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};(0,s._)([(0,a.Cb)({dependsOn:[]})],Qe.prototype,"id",null),(0,s._)([(0,a.Cb)()],Qe.prototype,"node",null),(0,s._)([(0,$e.p)("node")],Qe.prototype,"castNode",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Qe.prototype,"widget",void 0),Qe=(0,s._)([(0,l.j)("esri.views.ui.Component")],Qe);const ti=Qe;var ei=i(40450);const ii={left:0,top:0,bottom:0,right:0},si={bottom:30,top:15,right:15,left:15},ni="manual",oi="esri-ui",ri="esri-ui-corner",ai="esri-ui-inner-container",li="esri-ui-manual-container",hi="esri-ui-corner-container",ci="esri-ui-top-left",ui="esri-ui-top-right",di="esri-ui-bottom-left",pi="esri-ui-bottom-right";function mi(t){return"object"!=typeof t||t instanceof ti||"declaredClass"in t||!("component"in t||"index"in t||"position"in t)?null:t}function gi(t,{top:e,bottom:i,left:s,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=s,t.style.right=n}let fi=class extends et.Z.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new y.Z,this.view=null,this._initContainers()}initialize(){this._handles.add([(0,p.init)(this,"view.padding, container",this._applyViewPadding.bind(this)),(0,p.init)(this,"padding",this._applyUIPadding.bind(this))])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(t){const e=this._get("container");t!==e&&(t&&(t.classList.add(oi),this._attachContainers(t)),e&&(e.classList.remove(oi),gi(e,{top:"",bottom:"",left:"",right:""}),(0,Xe.cS)(e)),this._set("container",t))}get height(){const t=this.get("view.height")||0;if(0===t)return t;const e=this._getViewPadding(),i=e.top+e.bottom;return Math.max(t-i,0)}get padding(){return this._get("padding")}set padding(t){t?this._override("padding",t):this._clearOverride("padding")}castPadding(t){return"number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...si,...t}}get width(){const t=this.get("view.width")||0;if(0===t)return t;const e=this._getViewPadding(),i=e.left+e.right;return Math.max(t-i,0)}add(t,e){let i,s;if(Array.isArray(t))return void t.forEach((t=>this.add(t,e)));const n=mi(t);n&&({index:i,position:e,component:t,key:s}=n),e&&"object"==typeof e&&({index:i,key:s,position:e}=e),!t||e&&!this._isValidPosition(e)||this._add(t,e,i,s)}remove(t,e){if(!t)return;if(Array.isArray(t))return t.map((t=>this.remove(t,e)));const i=this._find(t);if(i){const s=this._componentToKey;if(s.has(t)&&s.get(t)!==e)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(t),this._components.splice(n,1)[0]}}empty(t){return Array.isArray(t)?t.map((t=>this.empty(t))).reduce(((t,e)=>t.concat(e))):(t=t||ni)===ni?Array.prototype.slice.call(this._manualContainer.children).filter((t=>!t.classList.contains(ri))).map((t=>this.remove(t))):this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,e){if(Array.isArray(t)&&t.forEach((t=>this.move(t,e))),!t)return;let i;const s=mi(t)||mi(e);if(s&&(i=s.index,e=s.position,t=s.component||t),e&&!this._isValidPosition(e))return;const n=this.remove(t);n&&this.add(n,{position:e,index:i})}find(t){if(!t)return null;const e=this._findById(t);return e&&(e.widget||e.node)}_add(t,e,i,s){t instanceof ti||(t=new ti({node:t})),this._place({component:t,position:e,index:i}),this._components.push(t),s&&this._componentToKey.set(t,s)}_find(t){return t?t instanceof ti?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||ii}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(ai),t.classList.add(hi);const e=document.createElement("div");e.classList.add(ai),e.classList.add(li);const i=document.createElement("div");i.classList.add(ci),i.classList.add(ri),t.appendChild(i);const s=document.createElement("div");s.classList.add(ui),s.classList.add(ri),t.appendChild(s);const n=document.createElement("div");n.classList.add(di),n.classList.add(ri),t.appendChild(n);const o=document.createElement("div");o.classList.add(pi),o.classList.add(ri),t.appendChild(o),this._innerContainer=t,this._manualContainer=e;const r=(0,ei.dZ)();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":r?s:i,"top-trailing":r?i:s,"bottom-leading":r?o:n,"bottom-trailing":r?n:o},this._positionNameToContainerLookup={manual:e,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const e=t.component,i=t.position||ni,s=t.index,n=this._positionNameToContainerLookup[i],o=s>-1;if(function(t){return t&&!t._started&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}(e.widget)&&e.widget.startup(),!o)return void n.appendChild(e.node);const r=Array.prototype.slice.call(n.children);0!==s?s>=r.length?n.appendChild(e.node):(0,Xe.Vt)(e.node,r[s]):n.firstChild?(0,Xe.Vt)(e.node,n.firstChild):n.appendChild(e.node)}_applyViewPadding(){const t=this.container;t&&gi(t,this._toPxPosition(this._getViewPadding()))}_applyUIPadding(){const t=this._innerContainer;t&&gi(t,this._toPxPosition(this.padding))}_toPxPosition(t){return{top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return 0===t?"0":t+"px"}_findByComponent(t){let e,i=null;return this._components.some((s=>(e=s===t,e&&(i=s),e))),i}_findById(t){let e,i=null;return this._components.some((s=>(e=s.id===t,e&&(i=s),e))),i}_findByNode(t){let e,i=null;return this._components.some((s=>(e=s.node===t,e&&(i=s),e))),i}};(0,s._)([(0,a.Cb)()],fi.prototype,"container",null),(0,s._)([(0,a.Cb)()],fi.prototype,"height",null),(0,s._)([(0,a.Cb)({value:si})],fi.prototype,"padding",null),(0,s._)([(0,$e.p)("padding")],fi.prototype,"castPadding",null),(0,s._)([(0,a.Cb)()],fi.prototype,"view",void 0),(0,s._)([(0,a.Cb)()],fi.prototype,"width",null),fi=(0,s._)([(0,l.j)("esri.views.ui.UI")],fi);const _i=fi;var vi=i(51894),wi=i(24258),yi=i(9200),bi=i(19401),Ci=i(90806),xi=i(59351),Mi=i(77204);function Ti(t,e,i){i&&e&&(t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e}))}const ki=[];let Pi=class extends Mi.r{constructor(t){super(t),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new c.Z,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const e=this.get("view.allLayerViews");e&&this.handles.add(e.map((t=>t.watch(["suspended","attributionVisible"],this._updateAttributionItems))),"suspension"),t&&t.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t)})),this._updateAttributionItems()},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");ki.length=0,t?(t.forEach((t=>{if(t.suspended||!t.get("layer.attributionVisible"))return;const e=t.layer;if(function(t){return t&&"copyright"in t&&"function"==typeof t.originOf&&"user"===t.originOf("copyright")}(e))return void Ti(ki,t,e.copyright);if(e.hasAttributionData){if(this._fetchedAttributionData.has(t)){const i=this._fetchedAttributionData.get(t);return void(i&&Ti(ki,t,this._getDynamicAttribution(i,this.view,e)))}return void this._fetchAttributionData(t)}const i=e.get("portalItem.accessInformation");Ti(ki,t,i||e.copyright)})),function(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))}(this.items,ki)&&(this.items.removeAll(),this.items.addMany(ki)),ki.length=0,this.notifyChange("state")):this.clear()},this.handles.add([(0,p.on)(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),(0,p.whenTrue)(this,"view.stationary",(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await(0,xi.q6)(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,function(t){return"bing-maps"===t.type}(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,s={};if(!i)return s;for(let t=0;t<i.length;t++){const n=i[t],o=n.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,r=i.zoomMin-(e&&i.zoomMin?1:0),a=i.zoomMax-(e&&i.zoomMax?1:0),l={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:k.Z.WGS84},h={extent:(0,P.$)(l),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:t};for(let t=r;t<=a;t++)s[t]=s[t]||[],s[t].push(h)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(t,e,i){const{extent:s,scale:n}=e;let o=i.tileInfo.scaleToZoom(n);if(o=Math.min(t.maxKey,Math.round(o)),!s||null==o||o<=-1)return"";const r=t[o],a=(0,P.iV)(s.center.clone().normalize(),e.spatialReference),l={};return r?r.filter((t=>{const e=!l[t.id]&&a&&(0,st.aV)(t.extent,a);return e&&(l[t.id]=!0),e})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(", "):""}};(0,s._)([(0,a.Cb)({readOnly:!0,type:c.Z})],Pi.prototype,"items",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Pi.prototype,"state",null),(0,s._)([(0,a.Cb)()],Pi.prototype,"view",void 0),Pi=(0,s._)([(0,l.j)("esri.widgets.Attribution.AttributionViewModel")],Pi);const Si=Pi,Ii="esri-attribution esri-widget",Oi="esri-widget__anchor",Di="esri-attribution__powered-by",Ei="esri-attribution__sources",Vi="esri-attribution--open",zi="esri-attribution__sources--open",Ai="esri-attribution__link",Ri="esri-icon-description",Zi="esri-interactive";let Li=class extends Ci.default{constructor(t,e){super(t,e),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=Ri,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Si}initialize(){this.own((0,p.on)(this,"viewModel.items","change",(()=>this.scheduleRender())))}get attributionText(){return this.viewModel.items.reduce(((t,e)=>(-1===t.indexOf(e.text)&&t.push(e.text),t)),[]).join(this.itemDelimiter)}render(){const t={[Vi]:this._isOpen};return(0,bi.j)("div",{bind:this,class:this.classes(Ii,t),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,bi.j)("div",{class:Di},"Powered by"," ",(0,bi.j)("a",{class:this.classes(Ai,Oi),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const t=this._isOpen,e=this._isInteractive(),i=e?0:-1,{attributionText:s}=this,n=e?"button":void 0,o={[zi]:t,[Zi]:e};return(0,bi.j)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(Ei,o),innerHTML:s,role:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth}_afterSourcesNodeUpdate(t){let e=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>=s,r=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,r&&(e=!0),this._isOpen){const t=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,t&&(this._isOpen=!1,e=!0)}e&&this.scheduleRender()}_toggleState(){this._isInteractive()&&(this._isOpen=!this._isOpen)}_isInteractive(){return this._isOpen||this._attributionTextOverflowed}};(0,s._)([(0,a.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Li.prototype,"attributionText",null),(0,s._)([(0,a.Cb)()],Li.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)()],Li.prototype,"itemDelimiter",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Li.prototype,"label",void 0),(0,s._)([(0,a.Cb)(),(0,yi.H)("esri/widgets/Attribution/t9n/Attribution")],Li.prototype,"messages",void 0),(0,s._)([(0,vi.B)("viewModel.view")],Li.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:Si})],Li.prototype,"viewModel",void 0),(0,s._)([(0,wi.h)()],Li.prototype,"_toggleState",null),Li=(0,s._)([(0,l.j)("esri.widgets.Attribution")],Li);const Ni=Li;var Fi=i(88355);let ji=class extends j.default{constructor(t){super(t),this._handles=new y.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,p.when)(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,s._)([(0,a.Cb)({readOnly:!0})],ji.prototype,"state",null),(0,s._)([(0,a.Cb)()],ji.prototype,"navigationMode",void 0),(0,s._)([(0,a.Cb)()],ji.prototype,"view",void 0),ji=(0,s._)([(0,l.j)("esri.widgets.NavigationToggleViewModel")],ji);const Gi=ji,qi="esri-navigation-toggle esri-widget",Bi="esri-navigation-toggle__button esri-widget--button",Ui="esri-navigation-toggle__button--active",Hi="esri-navigation-toggle__button--pan",Wi="esri-navigation-toggle__button--rotate",Ki="esri-navigation-toggle--horizontal",Yi="esri-icon-rotate",$i="esri-icon-pan",Xi="esri-icon-pan2",Ji="esri-disabled";let Qi=class extends Ci.default{constructor(t,e){super(t,e),this.iconClass=Xi,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Gi}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}toggle(){return this.viewModel.toggle()}render(){const t="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),i={[Ji]:t,[Ki]:"horizontal"===this.layout},s={[Ui]:e},n={[Ui]:!e},o=t?-1:0,r=this.messages.toggle;return(0,bi.j)("div",{bind:this,class:this.classes(qi,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":r,title:r},(0,bi.j)("div",{class:this.classes(Bi,Hi,s)},(0,bi.j)("span",{class:$i})),(0,bi.j)("div",{class:this.classes(Bi,Wi,n)},(0,bi.j)("span",{class:Yi})))}_toggle(){this.toggle()}};(0,s._)([(0,a.Cb)()],Qi.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Qi.prototype,"label",void 0),(0,s._)([(0,a.Cb)({value:"vertical"})],Qi.prototype,"layout",null),(0,s._)([(0,a.Cb)(),(0,yi.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Qi.prototype,"messages",void 0),(0,s._)([(0,vi.B)("viewModel.view")],Qi.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:Gi})],Qi.prototype,"viewModel",void 0),(0,s._)([(0,wi.h)()],Qi.prototype,"_toggle",null),Qi=(0,s._)([(0,l.j)("esri.widgets.NavigationToggle")],Qi);const ts=Qi,es="esri-widget--button esri-widget",is="esri-disabled",ss="esri-interactive",ns="esri-icon-font-fallback-text",os="esri-icon";let rs=class extends Ci.default{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const t=this.enabled?0:-1,e={[is]:!this.enabled,[ss]:this.enabled},i={[this.iconClass]:!!this.iconClass};return(0,bi.j)("div",{bind:this,class:this.classes(es,e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},(0,bi.j)("span",{"aria-hidden":"true",role:"presentation",class:this.classes(os,i)}),(0,bi.j)("span",{class:ns},this.title))}_triggerAction(){this.action.call(this)}};(0,s._)([(0,a.Cb)()],rs.prototype,"action",void 0),(0,s._)([(0,a.Cb)()],rs.prototype,"enabled",void 0),(0,s._)([(0,a.Cb)()],rs.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)()],rs.prototype,"title",void 0),(0,s._)([(0,wi.h)()],rs.prototype,"_triggerAction",null),rs=(0,s._)([(0,l.j)("esri.widgets.IconButton")],rs);const as=rs;let ls=class extends j.default{get canZoomIn(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return 0===e||t>e}get canZoomOut(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return 0===e||t<e}};(0,s._)([(0,a.Cb)({readOnly:!0})],ls.prototype,"canZoomIn",null),(0,s._)([(0,a.Cb)({readOnly:!0})],ls.prototype,"canZoomOut",null),(0,s._)([(0,a.Cb)()],ls.prototype,"view",void 0),ls=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomConditions2D")],ls);const hs=ls;let cs=class extends j.default{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,s._)([(0,a.Cb)({readOnly:!0})],cs.prototype,"canZoomIn",null),(0,s._)([(0,a.Cb)({readOnly:!0})],cs.prototype,"canZoomOut",null),(0,s._)([(0,a.Cb)()],cs.prototype,"view",void 0),cs=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomConditions3D")],cs);const us=cs;let ds=class extends j.default{constructor(t){super(t),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(t){t?"2d"===t.type?this._zoomConditions=new hs({view:t}):"3d"===t.type&&(this._zoomConditions=new us({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;"2d"===t.type?t.mapViewNavigation.zoomIn():(0,T.ignoreAbortErrors)(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;"2d"===t.type?t.mapViewNavigation.zoomOut():(0,T.ignoreAbortErrors)(t.goTo({zoomFactor:.5}))}};(0,s._)([(0,a.Cb)()],ds.prototype,"_zoomConditions",void 0),(0,s._)([(0,a.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],ds.prototype,"canZoomIn",void 0),(0,s._)([(0,a.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],ds.prototype,"canZoomOut",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],ds.prototype,"state",null),(0,s._)([(0,a.Cb)()],ds.prototype,"view",null),ds=(0,s._)([(0,l.j)("esri.widgets.Zoom.ZoomViewModel")],ds);const ps=ds,ms="esri-zoom esri-widget",gs="esri-zoom--horizontal",fs="esri-icon-plus",_s="esri-icon-minus",vs="esri-icon-zoom-in-magnifying-glass";let ws=class extends Ci.default{constructor(t,e){super(t,e),this.iconClass=vs,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new ps}initialize(){this._zoomInButton=new as({action:this.zoomIn.bind(this),iconClass:fs}),this._zoomOutButton=new as({action:this.zoomOut.bind(this),iconClass:_s})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}render(){const t=this.viewModel,e={[gs]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===t.state&&t.canZoomIn,this._zoomOutButton.enabled="ready"===t.state&&t.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,bi.j)("div",{class:this.classes(ms,e)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,s._)([(0,a.Cb)()],ws.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ws.prototype,"label",void 0),(0,s._)([(0,a.Cb)({value:"vertical"})],ws.prototype,"layout",null),(0,s._)([(0,a.Cb)(),(0,yi.H)("esri/widgets/Zoom/t9n/Zoom")],ws.prototype,"messages",void 0),(0,s._)([(0,vi.B)("viewModel.view")],ws.prototype,"view",void 0),(0,s._)([(0,a.Cb)({type:ps})],ws.prototype,"viewModel",void 0),ws=(0,s._)([(0,l.j)("esri.widgets.Zoom")],ws);const ys=ws,bs="esri.views.ui.DefaultUI";r.Z.getLogger(bs);let Cs=class extends _i{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([(0,p.init)(this,"components",this._componentsWatcher.bind(this)),(0,p.init)(this,"view",this._updateViewAwareWidgets.bind(this))])}_add(t,e,i,s){if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t)}super._add(t,e,i,s)}_removeComponents(t){t.forEach((t=>{const e=this._find(t);e&&(this.remove(e),e.destroy())}))}_updateViewAwareWidgets(t){this.components.forEach((e=>{const i=this._find(e),s=i&&i.widget;(function(t){return t&&void 0!==t.view})(s)&&(s.view=t)}))}_componentsWatcher(t,e){this._removeComponents(e),this._addComponents(t),this._adjustPadding(t)}_adjustPadding(t){if(-1===t.indexOf("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(t){this.initialized&&t.forEach((t=>this.add(this._createComponent(t),this._defaultPositionLookup[t])))}_createComponent(t){const e=this._createWidget(t);if(e)return new ti({id:t,node:e})}_createWidget(t){return"attribution"===t?this._createAttribution():"compass"===t?this._createCompass():"navigation-toggle"===t?this._createNavigationToggle():"zoom"===t?this._createZoom():void 0}_createAttribution(){return new Ni({view:this.view})}_createCompass(){return new Fi.default({view:this.view})}_createNavigationToggle(){return new ts({view:this.view})}_createZoom(){return new ys({view:this.view})}};(0,s._)([(0,a.Cb)()],Cs.prototype,"components",void 0),Cs=(0,s._)([(0,l.j)(bs)],Cs);const xs=Cs;let Ms=class extends xs{constructor(t){super(t),this.components=["attribution","zoom"]}};(0,s._)([(0,a.Cb)()],Ms.prototype,"components",void 0),Ms=(0,s._)([(0,l.j)("esri.views.ui.2d.DefaultUI2D")],Ms);const Ts=Ms,ks=r.Z.getLogger("esri.views.MapView");let Ps,Ss,Is,Os,Ds;function Es(t,e,i){if(t)if(Array.isArray(t)||c.Z.isCollection(t)){if(0===t.length)return;t.forEach((t=>Es(t,e,i)))}else!function(t){return t instanceof u.default}(t)?i.add(t):e.add(t)}let Vs=class extends(M((0,_.f)(Nt))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new d.Z({root:this,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:t=>null}),this.graphicsView=null,this.highlightOptions=new We,this.inputManager=new qe({view:this}),this.mapViewNavigation=null,this.supersampleScreenhotsEnabled=!0,this.ui=new Ts,this.rendering=!1,(0,g.j2)()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(t){void 0===t?this._clearOverride("background"):this._override("background",t)}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(t){if((0,v.Rw)(t)){const e=(0,v.s6)(this,t);return super.toMap(e)}return super.toMap(t)}hitTest(t,e){const i=(0,v.Rw)(t)?(0,v.s6)(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return Promise.resolve({screenPoint:i,results:[]});const s=this.toMap(i),n=[this.graphicsView];n.push.apply(n,this.allLayerViews.toArray().reverse());const o=new Set,r=new Set,a=new Set,l=new Set;return e&&(Es(e&&e.include,o,a),Es(e&&e.exclude,r,l)),Promise.all(n.map((t=>!t||!t.hitTest||a.size>0&&!t.layer||a.size>0&&t.layer&&!a.has(t.layer)||l.size>0&&t.layer&&l.has(t.layer)?null:t.hitTest(i.x,i.y)))).then((t=>({screenPoint:i,results:t.filter((t=>null!=t&&(!(o.size>0)||o.has(t))&&(!(r.size>0)||!r.has(t)))).map((t=>({mapPoint:s,graphic:t})))})))}takeScreenshot(t){return this.ready?this._stage.takeScreenshot((0,f.uz)(t,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")}on(t,e,i,s){return this.inputManager&&this.viewEvents.on(t,e,i,s)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise((t=>{this.ready?t(this):this._resolveWhenReady.push(t)}))}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let t=function(t){t={...Ye,...t};const e=(0,Ke.Z)();return e.available?t.checkMajorWebPerformanceCaveat&&e.majorPerformanceCaveat?new h.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?e.supportsElementIndexUint?e.supportsStandardDerivatives?e.supportsInstancedArrays?null:new h.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new h.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new h.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new h.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new h.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new h.Z("webgl:required","WebGL is required but not supported.")}({checkMajorWebPerformanceCaveat:!1});return(0,n.Z)("safari")&&(0,n.Z)("safari")<9&&(t=new h.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,n.Z)("safari")})),(0,o.pC)(t)?(ks.warn("#validate()",t.message),Promise.reject(t)):async function(){const[,{GraphicsView2D:t,LabelManager:e,MapViewNavigation:s,MagnifierView2D:n,Stage:o}]=await Promise.all([Promise.all([i.e(356),i.e(6563),i.e(9942),i.e(22)]).then(i.bind(i,67061)),Promise.all([i.e(356),i.e(6563),i.e(2012),i.e(3956),i.e(3284),i.e(6889),i.e(6933),i.e(6785),i.e(166),i.e(7946),i.e(7241),i.e(9942),i.e(9686)]).then(i.bind(i,39686))]);Ss=t,Is=e,Os=s,Ds=n,Ps=o}()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const t={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},e=new Ps(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:t,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new Ss({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate()}),s=new Os({view:this,animationManager:this.animationManager}),n=new Is({view:this});this._magnifierView=new Ds,this._magnifierView.magnifier=this.magnifier,this._stage=e,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",s),this._set("labelManager",n),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),e.on("post-render",(()=>this._set("rendering",e.renderRequested))),e.on("will-render",(()=>this._set("rendering",e.renderRequested))),e.on("webgl-error",(t=>this.fatalError=t.error)),(0,p.init)(this,"stationary",(t=>e.stationary=t),!0),(0,p.init)(this,"state.id",(()=>e.state=this.state),!0),(0,p.init)(this,"background",(t=>{e.background=t,this._magnifierView.background=t}),!0),(0,p.init)(this,"magnifier",(t=>this._magnifierView.magnifier=t),!0),(0,p.init)(this,"renderingOptions",(t=>e.renderingOptions=t),!0),(0,p.init)(this,"highlightOptions",(()=>e.highlightOptions=this.highlightOptions),!0)],"map-view"),e.state=this.state,this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach((t=>t(this))),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((t=>{this._stage.addChild(t.container)}));const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}};(0,s._)([(0,a.Cb)({type:m.Z})],Vs.prototype,"background",null),(0,s._)([(0,a.Cb)()],Vs.prototype,"graphicsView",void 0),(0,s._)([(0,a.Cb)({type:We})],Vs.prototype,"highlightOptions",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Vs.prototype,"inputManager",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Vs.prototype,"textureManager",null),(0,s._)([(0,a.Cb)({readOnly:!0})],Vs.prototype,"mapViewNavigation",void 0),(0,s._)([(0,a.Cb)({type:Boolean})],Vs.prototype,"navigating",null),(0,s._)([(0,a.Cb)({type:Boolean,constructOnly:!0})],Vs.prototype,"supersampleScreenhotsEnabled",void 0),(0,s._)([(0,a.Cb)({type:Ts})],Vs.prototype,"ui",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],Vs.prototype,"rendering",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Vs.prototype,"renderCanvas",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Vs.prototype,"deactivatedWebGLExtensions",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],Vs.prototype,"debugWebGLExtensions",void 0),Vs=(0,s._)([(0,l.j)("esri.views.MapView")],Vs);const zs=Vs},9512:(t,e,i)=>{"use strict";i.d(e,{e:()=>l});var s=i(59472),n=i(39105),o=i(74386),r=i(64345);class a{constructor(t,e){this.item=t,this.controller=e,this.promise=null}}class l{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new r.Z(t.peeker),this.process=t.process;const e=t.scheduler;t.task&&(0,s.pC)(e)&&(this._task=e.registerTask(t.task,(t=>this.update(t)),(()=>this.needsUpdate())))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const e=this._controllers.get(t);e&&e.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach((e=>t.push(e))),this._controllers.clear(),t.forEach((t=>t.abort())),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach(((e,i)=>t(i)))}get(t){const e=this._deferreds.get(t);return e?e.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,e){const i=this.get(t);if(i)return i;const o=(0,n.createAbortController)();let r=null;e&&(r=(0,n.onAbort)(e,(()=>o.abort())));const a=()=>{l.remove(),(0,s.pC)(r)&&r.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=(0,n.onAbortOrThrow)(o.signal,(()=>{const e=this._processingItems.get(t);e&&e.controller.abort(),a(),h.reject((0,n.createAbortError)())})),h=(0,n.createDeferred)();return this._deferreds.set(t,h),this._controllers.set(t,o),h.promise.then(a,a),this._queue.push(t),this._scheduleNext(),h.promise}reset(){const t=[];this._processingItems.forEach((e=>t.push(e))),this._processingItems.clear();for(const e of t)this._queue.push(e.item),e.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}needsUpdate(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}update(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,o.Os)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,e){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(e))}_processError(t,e){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(e))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if((0,s.Wi)(t))return;let e;const i=(0,n.createAbortController)(),o=new a(t,i);this._processingItems.set(t,o);try{e=this.process(t,i.signal)}catch(t){this._processError(o,t)}(0,n.isPromiseLike)(e)?(o.promise=e,e.then((t=>this._processResult(o,t)),(t=>this._processError(o,t)))):this._processResult(o,e)}get test(){return{update:t=>this.update(t)}}}},17288:(t,e,i)=>{"use strict";i.d(e,{r7:()=>a,gH:()=>r,TT:()=>l,$3:()=>h,uz:()=>o});i(95830);var s=i(33655);function n(t,e){const{format:i,quality:n,rotation:o,disableDecorations:r}=t||{},a=p(t,e.padding),l=function(t,e){const i={x:0,y:0,width:e.width,height:e.height};if(t&&t.area){null!=t.area.x&&(i.x=Math.floor(t.area.x)),null!=t.area.y&&(i.y=Math.floor(t.area.y));const s=null!=t.area.width?Math.floor(t.area.width):null,n=null!=t.area.height?Math.floor(t.area.height):null;if(i.width=e.width-i.x,i.height=e.height-i.y,null!=s&&null!=n)i.width=Math.min(i.width,s),i.height=Math.min(i.height,n);else if(null==s&&null!=n){const t=Math.min(i.width,s);i.height=t/i.width*i.height,i.width=t}else if(null!=s&&null==n){const t=Math.min(i.height,n);i.width=t/i.height*i.width,i.height=t}}return function(t,e){const i=Math.floor(Math.max(t.x,0)),s=Math.floor(Math.max(t.y,0)),n={x:i,y:s,width:Math.floor(Math.min(t.width,e.width-i)),height:Math.floor(Math.min(t.height,e.height-s))},o=n.width/n.height,r=t.width/t.height;if(r===o)return n;if(r>o){const t=Math.floor(n.width/r),e=n.height-t;return{x:n.x,y:Math.floor(n.y+e/2),width:n.width,height:t}}const a=Math.floor(n.height*r),l=n.width-a;return{x:Math.floor(n.x+l/2),y:n.y,width:a,height:n.height}}(function(t,e){if(!e||null==e.width||null==e.height)return t;const i=e.width/e.height,s=t.width/t.height;if(s===i)return t;if(s<i){const e=Math.floor(t.height*i);return t.x-=(e-t.width)/2,t.width=e,t}const n=Math.floor(t.width/i);return t.y-=(n-t.height)/2,t.height=n,t}(i,t),e)}(t,{width:e.width-a.left-a.right,height:e.height-a.top-a.bottom}),{width:h,height:c}=function(t,e){if(!t)return e;const i=t.width,s=t.height;if(null!=i&&null!=s)return{width:Math.floor(i),height:Math.floor(s)};if(null==i&&null==s)return e;const n=e.width/e.height;return null==s?{width:Math.floor(i),height:Math.floor(i/n)}:{width:Math.floor(s*n),height:Math.floor(s)}}(t,l),u=function(t){switch(t){case"png":case"jpg":case"jpeg":return t;case null:case void 0:default:return g}}(i),d=f[u];return{format:u,quality:(0,s.uZ)(null!=n?n:d,0,100),area:l,width:h,height:c,rotation:o,disableDecorations:!!r,ignoreBackground:!(!t||!t.ignoreBackground),ignorePadding:!(!t||!t.ignorePadding)}}function o(t,e){const i=n(t,e),s=i.area,o=i.width/s.width,r=p(i,e.padding),a=r.left+r.right,l=r.top+r.bottom,h=e.width-a,c=e.height-l,u=Math.floor(h*o+a),d=Math.floor(c*o+l),m=t&&t.layers?t.layers:[],g=i.ignoreBackground,f=i.ignorePadding;return{framebufferWidth:u,framebufferHeight:d,region:{x:Math.floor(s.x*o)+r.left,y:Math.floor(s.y*o)+r.top,width:i.width,height:i.height},format:i.format,quality:i.quality,rotation:i.rotation,pixelRatio:o,layers:m,disableDecorations:i.disableDecorations,ignoreBackground:g,ignorePadding:f}}function r(t,e,i,s){s.premultipliedAlpha&&function(t){const e=t.data,i=e.length;for(let t=0;t<i;t+=4){const i=e[t+3];if(i>0){const s=i/255;e[t+0]=e[t+0]/s,e[t+1]=e[t+1]/s,e[t+2]=e[t+2]/s}}}(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d");n.putImageData(t,0,0),s.flipY&&function(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}(n);const o=n.getImageData(0,0,t.width,t.height),r=function(t,e){const i=m[e.format],s=e.quality/100;return t.toDataURL(i,s)}(i,e);return i.width=0,i.height=0,{dataUrl:r,data:o}}function a(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(t,e)}catch(t){d=!1}return c(t,e,i)}function l(t,e,i,s=0,n=0,o=t.width-s,r=t.height-n,a=!1){const{data:l}=t,{width:h,height:c,data:u}=e,d=o/h,p=r/c,m=Math.ceil(d/2),g=Math.ceil(p/2),f=t.width;for(let t=0;t<c;t++)for(let e=0;e<h;e++){const o=4*(e+(a?c-t-1:t)*h);let r=0,_=0,v=0,w=0,y=0,b=0;const C=(t+.5)*p;for(let o=Math.floor(t*p);o<(t+1)*p;o++){const t=Math.abs(C-(o+.5))/g,a=(e+.5)*d,h=t*t;for(let t=Math.floor(e*d);t<(e+1)*d;t++){const e=Math.abs(a-(t+.5))/m,c=Math.sqrt(h+e*e);if(c>=1)continue;let u=2*c*c*c-3*c*c+1;const d=4*(s+t+(n+o)*f);b+=u*l[d+3],_+=u,!i&&l[d+3]<255&&(u=u*l[d+3]/255),v+=u*l[d],w+=u*l[d+1],y+=u*l[d+2],r+=u}}u[o]=v/r,u[o+1]=w/r,u[o+2]=y/r,u[o+3]=b/_}return e}function h(t,e,i){if(!e)return t;const{framebufferWidth:s,framebufferHeight:n,pixelRatio:o,region:r}=t,a=p(t,i),l=a.left+a.right,h=a.top+a.bottom,c=s-l,u=n-h,d=Math.min(8,Math.min((2048-l)/c,(2048-h)/u));return d<1.5?t:{...t,framebufferWidth:Math.round(c*d)+l,framebufferHeight:Math.round(u*d)+h,pixelRatio:o*d,resample:{region:{x:Math.round((r.x-a.left)*d)+a.left,y:Math.round((r.y-a.top)*d)+a.top,width:Math.round(r.width*d),height:Math.round(r.height*d)},width:s,height:n}}}function c(t,e,i){return i||(u||(u=document.createElement("canvas"),u.width=1,u.height=1),i=u),i.getContext("2d").createImageData(t,e)}let u=null,d=!0;function p(t,e){return!e||t&&t.ignorePadding?_:e}const m={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},g="png",f={png:100,jpg:98,jpeg:98},_={top:0,right:0,bottom:0,left:0}},88355:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>k});var s=i(56140),n=(i(95830),i(36544),i(68055),i(79881)),o=i(51894),r=i(87566),a=(i(10923),i(57002),i(86035),i(40450),i(24258)),l=i(9200),h=i(19401),c=i(90806),u=i(82677),d=i(59691),p=i(80621),m=i(4338);let g=class extends((0,m._)(u.default)){constructor(t){super(t),this._handles=new d.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,p.init)(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};"2d"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){null!=t&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e}}_updateRotationWatcher(t){this._handles.removeAll(),t&&("2d"===t.type?this._handles.add((0,p.init)(this,"view.rotation",this._updateForRotation)):this._handles.add((0,p.init)(this,"view.camera",this._updateForCamera)))}};(0,s._)([(0,n.Cb)({readOnly:!0})],g.prototype,"canShowNorth",null),(0,s._)([(0,n.Cb)()],g.prototype,"orientation",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],g.prototype,"state",null),(0,s._)([(0,n.Cb)()],g.prototype,"view",void 0),g=(0,s._)([(0,r.j)("esri.widgets.CompassViewModel")],g);const f=g,_="esri-compass esri-widget--button esri-widget",v="esri-icon-font-fallback-text",w="esri-compass__icon",y="esri-icon-dial",b="esri-icon-compass",C="esri-icon-locate-circled",x="esri-interactive",M="esri-disabled";let T=class extends c.default{constructor(t,e){super(t,e),this.goToOverride=null,this.iconClass=C,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new f}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:e}=this.viewModel,i="disabled"===e,s="compass"==("rotation"===e?"rotation":"compass"),n=i?-1:0,o={[M]:i,[x]:!i},r={[b]:s,[y]:!s},{messages:a}=this;return(0,h.j)("div",{bind:this,class:this.classes(_,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},(0,h.j)("span",{"aria-hidden":"true",class:this.classes(w,r),styles:this._toRotationTransform(t)}),(0,h.j)("span",{class:v},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};(0,s._)([(0,o.B)("viewModel.goToOverride")],T.prototype,"goToOverride",void 0),(0,s._)([(0,n.Cb)()],T.prototype,"iconClass",void 0),(0,s._)([(0,n.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],T.prototype,"label",void 0),(0,s._)([(0,n.Cb)(),(0,l.H)("esri/widgets/Compass/t9n/Compass")],T.prototype,"messages",void 0),(0,s._)([(0,o.B)("viewModel.view")],T.prototype,"view",void 0),(0,s._)([(0,n.Cb)({type:f})],T.prototype,"viewModel",void 0),(0,s._)([(0,a.h)()],T.prototype,"_reset",null),T=(0,s._)([(0,r.j)("esri.widgets.Compass")],T);const k=T},91397:function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=a(t);if(e){var n=a(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return r(this,i)}}function r(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=this&&this.__decorate||function(t,e,i,s){var n,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,i,r):n(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=i(83781),d=i(88266),p=c(i(90806)),m=c(i(81610));i(84893);var g="esri-widget overviewmap-base",f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(l,t);var e,i,r,a=o(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this,t)).name="",e.viewModel=new m.default,e.overviewCreated=function(t){e.overviewMapView&&(e.overviewMapView.container=t)},e}return e=l,(i=[{key:"render",value:function(){return d.tsx("div",{class:g},d.tsx("div",{afterCreate:this.overviewCreated,id:"overviewDiv"}))}}])&&s(e.prototype,i),r&&s(e,r),l}(p.default);h([u.aliasOf("viewModel.view")],f.prototype,"view",void 0),h([u.aliasOf("viewModel.overviewMapView")],f.prototype,"overviewMapView",void 0),h([u.aliasOf("viewModel.name"),d.renderable()],f.prototype,"name",void 0),h([u.property({type:m.default}),d.renderable()],f.prototype,"viewModel",void 0),f=h([u.subclass("app.widgets.OverviewMap")],f),e.default=f},81610:function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=l(t);if(e){var n=l(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return r(this,i)}}function r(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d=this&&this.__decorate||function(t,e,i,s){var n,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,i,r):n(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},p=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&c(e,t,i);return u(e,t),e},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var g=m(i(72849)),f=m(i(94850)),_=m(i(15988)),v=m(i(82677)),w=i(83781),y=i(80621),b=p(i(80621)),C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(h,t);var e,i,r,l=o(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=l.call(this,t)).stopEvtPropagation=function(t){t.stopPropagation()},e.disableZooming=function(t){return t.popup.dockEnabled=!0,t.popup.actions=[],t.ui.components=["attribution"],t.on("mouse-wheel",e.stopEvtPropagation),t.on("double-click",e.stopEvtPropagation),t.on("double-click",["Control"],e.stopEvtPropagation),t.on("drag",e.stopEvtPropagation),t.on("drag",["Shift"],e.stopEvtPropagation),t.on("drag",["Shift","Control"],e.stopEvtPropagation),t.on("key-down",(function(t){var e=t.key;-1!==["+","-","Shift","_","="].indexOf(e)&&t.stopPropagation()})),t},y.whenDefinedOnce(a(e),"view",e.init.bind(a(e))),e}return e=h,(i=[{key:"init",value:function(t){var e=this,i=new f.default({basemap:"streets-navigation-vector"});this.overviewMapView=new g.default({map:i,extent:t.extent}),this.disableZooming(this.overviewMapView),this.overviewMapView.ui.remove("zoom");var s=new _.default({geometry:null,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:null}});this.overviewMapView.graphics.add(s),b.init(t,"extent",(function(){s.geometry=t.extent})),b.init(t,"stationary",(function(){t.stationary&&e.overviewMapView.goTo({center:t.center,scale:2*t.scale*Math.max(t.width/e.overviewMapView.width,t.height/e.overviewMapView.height)}).catch((function(t){"view:goto-interrupted"!=t.name&&console.error(t)}))}))}}])&&s(e.prototype,i),r&&s(e,r),h}(v.default);d([w.property()],C.prototype,"view",void 0),C=d([w.subclass("app.widgets.OverviewMap.OverviewMapViewModel")],C),e.default=C},97767:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(94015),n=i.n(s),o=i(23645),r=i.n(o)()(n());r.push([t.id,".overviewmap-base{padding:0}#overviewDiv{width:300px;height:200px}","",{version:3,sources:["webpack://./src/widgets/OverviewMap/styles/OverviewMap.scss"],names:[],mappings:"AAAA,kBACE,SAAA,CAGF,aACE,WAAA,CACA,YAAA",sourcesContent:[".overviewmap-base {\n  padding: 0;\n}\n\n#overviewDiv {\n  width: 300px;\n  height: 200px;\n}\n"],sourceRoot:""}]);const a=r},84893:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var s=i(93379),n=i.n(s),o=i(97767),r={insert:"head",singleton:!1};n()(o.Z,r);const a=o.Z.locals||{}}}]);
//# sourceMappingURL=1397.js.map