(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[7900],{29522:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>B});var s=i(56140),r=(i(95830),i(59472)),a=i(36544),n=(i(68055),i(79881)),o=i(30590),l=i(87566),c=i(32656),u=i(10923),h=(i(57002),i(86035),i(39105)),d=i(36654),p=i(56700),f=i(43072),m=i(19048),y=i(18152),b=i(78910),g=i(48899),v=i(33716),_=i(54856),x=i(77195);class w extends x.q{constructor(e){super("LercWorker","_decode",e,{strategy:"dedicated"}),this.scheduler=e}decode(e,t,i){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},i):Promise.resolve(null)}getTransferList(e){return[e.buffer]}}const A=new Map;const C=a.Z.getLogger("esri.layers.ElevationLayer");let S=class extends((0,_.Z)((0,g.Y)((0,b.q)((0,v.I)((0,f.R)(p.Z)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=function(e){let t=A.get(e);return t||(t={instance:new w(e),ref:0},A.set(e,t)),++t.ref,t.instance}()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){(function(e){if(null==e)return;const t=e.scheduler,i=A.get(t);i&&--i.ref<=0&&(i.instance.destroy(),A.delete(t))})(this._lercDecoder),this._lercDecoder=null}set minScale(e){this.constructed&&C.warn(`${this.declaredClass}.minScale support has been removed (since 4.5)`)}get minScale(){}set maxScale(e){this.constructed&&C.warn(`${this.declaredClass}.maxScale support has been removed (since 4.5)`)}get maxScale(){}readVersion(e,t){let i=t.currentVersion;return i||(i=9.3),i}load(e){const t=(0,r.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{for(let t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new c.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).then((()=>this._fetchImageService(t)),(()=>this._fetchImageService(t)))),Promise.resolve(this)}fetchTile(e,t,i,s){const a=(0,r.pC)((s=s||{signal:null}).signal)?s.signal:s.signal=(0,h.createAbortController)().signal,n={responseType:"array-buffer",signal:a},o={noDataValue:s.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,i,s))).then((()=>(0,d.default)(this.getTileUrl(e,t,i),n))).then((e=>this._lercDecoder.decode(e.data,o,a))).then((e=>({values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue})))}getTileUrl(e,t,i){const s=!this.tilemapCache&&this.supportsBlankTile,r=(0,u.B7)({...this.parsedUrl.query,blankTile:!s&&null});return`${this.parsedUrl.path}/tile/${e}/${t}/${i}${r?"?"+r:""}`}async queryElevation(e,t){const{ElevationQuery:s}=await Promise.all([i.e(8157),i.e(7333),i.e(5836)]).then(i.bind(i,93549));return(0,h.throwIfAborted)(t),(new s).query(this,e,t)}async createElevationSampler(e,t){const{ElevationQuery:s}=await Promise.all([i.e(8157),i.e(7333),i.e(5836)]).then(i.bind(i,93549));return(0,h.throwIfAborted)(t),(new s).createSampler(this,e,t)}_fetchTileAvailability(e,t,i,s){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,i,s):Promise.resolve("unknown")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const t={query:{f:"json",...this.parsedUrl.query},responseType:"json",signal:e},i=await(0,d.default)(this.parsedUrl.path,t);i.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i.data,this.read(i.data,{origin:"service",url:this.parsedUrl})}};(0,s._)([(0,n.Cb)({json:{read:{source:"copyrightText"}}})],S.prototype,"copyright",void 0),(0,s._)([(0,n.Cb)({readOnly:!0,type:m.Z})],S.prototype,"heightModelInfo",void 0),(0,s._)([(0,n.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],S.prototype,"path",void 0),(0,s._)([(0,n.Cb)({type:["show","hide"]})],S.prototype,"listMode",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],S.prototype,"minScale",null),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],S.prototype,"maxScale",null),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],S.prototype,"opacity",void 0),(0,s._)([(0,n.Cb)({type:["ArcGISTiledElevationServiceLayer"]})],S.prototype,"operationalLayerType",void 0),(0,s._)([(0,n.Cb)()],S.prototype,"sourceJSON",void 0),(0,s._)([(0,n.Cb)({json:{read:!1},value:"elevation",readOnly:!0})],S.prototype,"type",void 0),(0,s._)([(0,n.Cb)(y.HQ)],S.prototype,"url",void 0),(0,s._)([(0,n.Cb)()],S.prototype,"version",void 0),(0,s._)([(0,o.r)("version",["currentVersion"])],S.prototype,"readVersion",null),S=(0,s._)([(0,l.j)("esri.layers.ElevationLayer")],S);const B=S},66416:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>T});var s=i(56140),r=(i(95830),i(59472)),a=(i(36544),i(79881)),n=i(60263),o=i(30590),l=i(87566),c=i(60538),u=i(32656),h=i(10923),d=(i(57002),i(86035),i(73032)),p=(i(36348),i(36654)),f=i(56700),m=i(43072),y=i(97849),b=i(18152),g=i(78910),v=i(48899),_=i(57407),x=i(63795),w=i(33716),A=i(2194),C=i(10113),S=i(77204),B=i(54856),O=i(5698),I=i(41452),k=i(49708);const M=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let R=class extends((0,_.h)((0,k.x)((0,C.M)((0,A.Q)((0,g.q)((0,w.I)((0,B.Z)((0,O.O)((0,v.Y)((0,m.R)((0,S.p)((0,x.N)(f.Z))))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=(0,r.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((()=>this._fetchService(t)),(()=>this._fetchService(t)))),Promise.resolve(this)}get attributionDataUrl(){var e;const t=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}readSpatialReference(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&d.Z.fromJSON(e)}writeSublayers(e,t,i,s){if(!this.loaded||!e)return;const r=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),a=[],n={writeSublayerStructure:!1,...s};r.forEach((e=>{const t=e.write({},n);a.push(t)})),a.some((e=>Object.keys(e).length>1))&&(t.layers=a)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>(0,h.mN)(e).path)):null}fetchTile(e,t,i,s={}){const{signal:r,timestamp:a}=s,n=this.getTileUrl(e,t,i),o={responseType:"image",signal:r};return null!=a&&(o.query={_ts:s.timestamp}),(0,p.default)(n,o).then((e=>e.data))}getTileUrl(e,t,i){const s=!this.tilemapCache&&this.supportsBlankTile,r=(0,h.B7)({...this.parsedUrl.query,blankTile:!s&&null,...this.customParameters}),a=this.tileServers;return`${a&&a.length?a[t%a.length]:this.parsedUrl.path}/tile/${e}/${t}/${i}${r?"?"+r:""}`}_fetchService(e){return new Promise(((t,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new u.Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new u.Z("tile-layer:undefined-url","layer's url is not defined");const s=(0,y.Qc)(this.parsedUrl.path);if((0,r.pC)(s)&&"ImageServer"===s.serverType)throw new u.Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");(0,p.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},responseType:"json",signal:e}).then(t,i)})).then((t=>{if(t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),10.1===this.version&&!(0,y.M8)(this.url))return this._fetchServerVersion(this.url,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,t){if(!(0,y.B5)(e))return Promise.reject();const i=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return(0,p.default)(i,{query:{f:"json",...this.customParameters},responseType:"json",signal:t}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new u.Z("tile-layer:version-not-available")}))}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}_getDefaultAttribution(e){if(!e)return;let t;e=e.toLowerCase();for(let i=0,s=M.length;i<s;i++)if(t=M[i],t.toLowerCase().indexOf(e)>-1)return(0,h.hF)("//static.arcgis.com/attribution/"+t)}_getDefaultTileServers(e){const t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),i=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||i?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}};(0,s._)([(0,a.Cb)({readOnly:!0})],R.prototype,"attributionDataUrl",null),(0,s._)([(0,a.Cb)({type:["show","hide","hide-children"]})],R.prototype,"listMode",void 0),(0,s._)([(0,a.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],R.prototype,"isReference",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],R.prototype,"operationalLayerType",void 0),(0,s._)([(0,a.Cb)({type:Boolean})],R.prototype,"resampling",void 0),(0,s._)([(0,a.Cb)()],R.prototype,"sourceJSON",void 0),(0,s._)([(0,a.Cb)({type:d.Z})],R.prototype,"spatialReference",void 0),(0,s._)([(0,o.r)("spatialReference",["spatialReference","tileInfo"])],R.prototype,"readSpatialReference",null),(0,s._)([(0,a.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],R.prototype,"path",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],R.prototype,"sublayers",void 0),(0,s._)([(0,c.c)("sublayers",{layers:{type:[I.Z]}})],R.prototype,"writeSublayers",null),(0,s._)([(0,a.Cb)({json:{read:!1,write:!1}})],R.prototype,"popupEnabled",void 0),(0,s._)([(0,a.Cb)()],R.prototype,"tileServers",null),(0,s._)([(0,n.p)("tileServers")],R.prototype,"castTileServers",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],R.prototype,"type",void 0),(0,s._)([(0,a.Cb)(b.HQ)],R.prototype,"url",void 0),R=(0,s._)([(0,l.j)("esri.layers.TileLayer")],R);const T=R},56291:(e,t,i)=>{"use strict";i.d(t,{s:()=>o});var s=i(95830),r=i(39105),a=i(35470);const n=1/(0,s.Z)("mapview-transitions-duration");class o extends a.Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,r.createResolver)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,r.createResolver)(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const s=e*n;this.computedOpacity=i>t?Math.max(t,i-s):Math.min(t,i+s),this.computedVisible=this.computedOpacity>0;const r=t===this.computedOpacity;this.inFadeTransition=!r,r||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},57498:(e,t,i)=>{"use strict";i.d(t,{i:()=>y});var s=i(59472),r=i(98501),a=i(55955),n=i(41658),o=(i(95830),i(33655),i(5627),i(69595)),l=i(74038),c=(i(84570),i(17441));class u{constructor(e){this.layerUIDs=[],this.isDestroyed=!1,this.data=e,this.memoryUsed=e.byteLength;let t=1;const i=new Uint32Array(e);this.layerUIDs=[];const s=i[t++];for(let e=0;e<s;e++)this.layerUIDs[e]=i[t++];this.bufferDataOffset=t}get isPreparedForRendering(){return(0,s.Wi)(this.data)}get offset(){return this.bufferDataOffset}destroy(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)}prepareForRendering(e,t){(0,s.Wi)(this.data)||(this.doPrepareForRendering(e,t,this.data,this.bufferDataOffset),this.data=null)}}class h extends u{constructor(e){super(e),this.type=2,this.lineIndexStart=0,this.lineIndexCount=0;let t=this.bufferDataOffset;const i=new Uint32Array(e);this.lineIndexStart=i[t++],this.lineIndexCount=i[t++],this.isLineDataDriven=!!i[t++],this.bufferDataOffset=t}hasData(){return this.lineIndexCount>0}triangleCount(){return this.lineIndexCount/3}doDestroy(){(0,s.pC)(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose(),(0,s.pC)(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose(),(0,s.pC)(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose(),this.lineVertexArrayObject=null,this.lineVertexBuffer=null,this.lineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,i,s){const r=new Uint32Array(i),a=new Int32Array(r.buffer),n=r[s++];this.lineVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(a.buffer,4*s,n)),s+=n;const c=r[s++];this.lineIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(r.buffer,4*s,c)),s+=c,this.lineVertexArrayObject=new l.Z(e,t.getProgramAttributes(3),this.isLineDataDriven?h.lineVertexAttributesDD:h.lineVertexAttributes,{geometry:this.lineVertexBuffer},this.lineIndexBuffer)}}h.lineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}]},h.lineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};class d extends u{constructor(e){super(e),this.type=1,this.fillIndexStart=0,this.fillIndexCount=0,this.outlineIndexStart=0,this.outlineIndexCount=0;let t=this.bufferDataOffset;const i=new Uint32Array(e);this.fillIndexStart=i[t++],this.fillIndexCount=i[t++],this.outlineIndexStart=i[t++],this.outlineIndexCount=i[t++],this.isFillDataDriven=!!i[t++],this.isOutlineDataDriven=!!i[t++],this.bufferDataOffset=t}hasData(){return this.fillIndexCount>0||this.outlineIndexCount>0}triangleCount(){return(this.fillIndexCount+this.outlineIndexCount)/3}doDestroy(){(0,s.pC)(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose(),(0,s.pC)(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose(),(0,s.pC)(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose(),this.fillVertexArrayObject=null,this.fillVertexBuffer=null,this.fillIndexBuffer=null,(0,s.pC)(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose(),(0,s.pC)(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose(),(0,s.pC)(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose(),this.outlineVertexArrayObject=null,this.outlineVertexBuffer=null,this.outlineIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,i,s){const r=new Uint32Array(i),a=new Int32Array(r.buffer),n=r[s++];this.fillVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(a.buffer,4*s,n)),s+=n;const c=r[s++];this.fillIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(r.buffer,4*s,c)),s+=c;const u=r[s++];this.outlineVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(a.buffer,4*s,u)),s+=u;const h=r[s++];this.outlineIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(r.buffer,4*s,h)),s+=h,this.fillVertexArrayObject=new l.Z(e,t.getProgramAttributes(1),this.isFillDataDriven?d.fillVertexAttributesDD:d.fillVertexAttributes,{geometry:this.fillVertexBuffer},this.fillIndexBuffer),this.outlineVertexArrayObject=new l.Z(e,t.getProgramAttributes(2),this.isOutlineDataDriven?d.outlineVertexAttributesDD:d.outlineVertexAttributes,{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)}}d.fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},d.fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]},d.outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]},d.outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};class p extends u{constructor(e,t){super(e),this.type=3,this.iconPerPageElementsMap=new Map,this.glyphPerPageElementsMap=new Map,this.symbolInstances=[],this.isIconSDF=!1,this.opacityChanged=!1,this.lastOpacityUpdate=0,this.symbols=[];let i=this.bufferDataOffset;const s=new Uint32Array(e),r=new Int32Array(e),a=new Float32Array(e);this.isIconSDF=!!s[i++],this.isIconDataDriven=!!s[i++],this.isTextDataDriven=!!s[i++];const n=s[i++];for(let e=0;e<n;e++){const e=s[i++],t=s[i++],r=s[i++];this.iconPerPageElementsMap.set(e,[t,r])}const o=s[i++];for(let e=0;e<o;e++){const e=s[i++],t=s[i++],r=s[i++];this.glyphPerPageElementsMap.set(e,[t,r])}const l=s[i++],u=s[i++];this.iconOpacity=new Int32Array(l),this.textOpacity=new Int32Array(u),i=(0,c.wB)(s,r,a,i,this.symbols,t),this.bufferDataOffset=i}hasData(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}triangleCount(){let e=0;return this.iconPerPageElementsMap.forEach((t=>{e+=t[1]})),this.glyphPerPageElementsMap.forEach((t=>{e+=t[1]})),e/3}doDestroy(){(0,s.pC)(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose(),(0,s.pC)(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose(),(0,s.pC)(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose(),(0,s.pC)(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose(),this.iconVertexArrayObject=null,this.iconVertexBuffer=null,this.iconOpacityBuffer=null,this.iconIndexBuffer=null,(0,s.pC)(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose(),(0,s.pC)(this.textVertexBuffer)&&this.textVertexBuffer.dispose(),(0,s.pC)(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose(),(0,s.pC)(this.textIndexBuffer)&&this.textIndexBuffer.dispose(),this.textVertexArrayObject=null,this.textVertexBuffer=null,this.textOpacityBuffer=null,this.textIndexBuffer=null,this.memoryUsed=0}updateOpacityInfo(){if(!this.opacityChanged)return;this.opacityChanged=!1;const e=(0,s.Wg)(this.iconOpacity),t=(0,s.Wg)(this.iconOpacityBuffer);e.length>0&&e.byteLength===t.size&&t.setSubData(e);const i=(0,s.Wg)(this.textOpacity),r=(0,s.Wg)(this.textOpacityBuffer);i.length>0&&i.byteLength===r.size&&r.setSubData(i)}doPrepareForRendering(e,t,i,r){const a=new Uint32Array(i),n=new Int32Array(a.buffer),c=a[r++];this.iconVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(n.buffer,4*r,c)),r+=c;const u=a[r++];this.iconIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(a.buffer,4*r,u)),r+=u;const h=a[r++];this.textVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(n.buffer,4*r,h)),r+=h;const d=a[r++];this.textIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(a.buffer,4*r,d)),r+=d,this.iconOpacityBuffer=o.Z.createVertex(e,35044,(0,s.Wg)(this.iconOpacity).buffer),this.textOpacityBuffer=o.Z.createVertex(e,35044,(0,s.Wg)(this.textOpacity).buffer),this.iconVertexArrayObject=new l.Z(e,t.getProgramAttributes(4),this.isIconDataDriven?p.vertexAttributesDD:p.vertexAttributes,{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer),this.textVertexArrayObject=new l.Z(e,t.getProgramAttributes(6),this.isTextDataDriven?p.vertexAttributesDD:p.vertexAttributes,{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)}}p.vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}],opacity:[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}]},p.vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}],opacity:[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}]};class f extends u{constructor(e){super(e),this.type=4,this.circleIndexStart=0,this.circleIndexCount=0;let t=this.bufferDataOffset;const i=new Uint32Array(e);this.circleIndexStart=i[t++],this.circleIndexCount=i[t++],this.bufferDataOffset=t}hasData(){return this.circleIndexCount>0}triangleCount(){return this.circleIndexCount/3}doDestroy(){(0,s.pC)(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose(),(0,s.pC)(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose(),(0,s.pC)(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose(),this.circleVertexArrayObject=null,this.circleVertexBuffer=null,this.circleIndexBuffer=null,this.memoryUsed=0}doPrepareForRendering(e,t,i,s){const r=new Uint32Array(i),a=new Int32Array(r.buffer),n=r[s++];this.circleVertexBuffer=o.Z.createVertex(e,35044,new Int32Array(a.buffer,4*s,n)),s+=n;const c=r[s++];this.circleIndexBuffer=o.Z.createIndex(e,35044,new Uint32Array(r.buffer,4*s,c)),s+=c,this.circleVertexArrayObject=new l.Z(e,t.getProgramAttributes(5),f.circleVertexAttributes,{geometry:this.circleVertexBuffer},this.circleIndexBuffer)}}f.circleVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};var m=i(9793);class y extends m.I{constructor(e,t,i,s,r=null){super(e,i,s,[4096,4096]),this._memCache=r,this._referenced=0,this._hasSymbolBuckets=!1,this._memoryUsedByLayerData=0,this.layerData=new Map,this.layerCount=0,this.status="loading",this.allSymbolsFadingOut=!1,this.lastOpacityUpdate=0,this.symbols=new Map,this.isCoverage=!1,this.neededForCoverage=!1,this.decluttered=!1,this.invalidating=!1,this.parentTile=null,this.childrenTiles=new Set,this._processed=!1,this._referenced=1,this.styleRepository=t,this.id=e.id,this.transforms.tileUnitsToPixels=(0,a.c)()}get hasSymbolBuckets(){return this._hasSymbolBuckets}get isFading(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<n.nN}get isHoldingForFade(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<n.nN)}get wasRequested(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}setData(e){this.changeDataImpl(e),this.requestRender(),this.ready(),this.invalidating=!1,this._processed=!0}deleteLayerData(e){let t=!1;for(const i of e)if(this.layerData.has(i)){const e=this.layerData.get(i);this._memoryUsedByLayerData-=e.memoryUsed,3===e.type&&this.symbols.has(i)&&(this.symbols.delete(i),t=!0),e.destroy(),this.layerData.delete(i),this.layerCount--}(0,s.pC)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData),t&&this.emit("symbols-changed"),this.requestRender()}processed(){return this._processed}hasData(){return this.layerCount>0}dispose(){b.delete(this),y._destroyRenderBuckets(this.layerData),this.layerData=null,this.layerCount=0,this._memoryUsedByLayerData=0,this.destroy()}release(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}retain(){++this._referenced}get referenced(){return this._referenced}getMemoryUsage(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}changeDataImpl(e){let t=!1;if(e){const i=this._createRenderBuckets(e);for(const[e,s]of i){if(this.layerData.has(e)){const t=this.layerData.get(e);this._memoryUsedByLayerData-=s.memoryUsed,t.destroy(),this.layerData.delete(e),this.layerCount--}3===s.type&&(this.symbols.set(e,s.symbols),t=!0),this._memoryUsedByLayerData+=s.memoryUsed,this.layerData.set(e,s),this.layerCount++}(0,s.pC)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;for(const[e,t]of this.layerData)3===t.type&&(this._hasSymbolBuckets=!0);t&&this.emit("symbols-changed")}attachWithContext(e){this.stage={context:e,trashDisplayObject(e){e.processDetach()},untrashDisplayObject:()=>!1}}setTransform(e,t){super.setTransform(e,t);const i=t/(e.resolution*e.pixelRatio),s=this.size[0]/this.coordRange[0]*i,a=this.size[1]/this.coordRange[1]*i,n=[0,0];e.toScreen(n,this.coords);const o=this.transforms.tileUnitsToPixels;(0,r.i)(o),(0,r.b)(o,o,n),(0,r.r)(o,o,Math.PI*e.rotation/180),(0,r.c)(o,o,[s,a,1])}static _destroyRenderBuckets(e){const t=new Set;e.forEach((e=>{t.has(e)||(e.destroy(),t.add(e))})),e.clear()}_createRenderBuckets(e){const t=new Map,i=new Map;for(const s of e){const e=this._deserializeBucket(s,i);for(const i of e.layerUIDs)t.set(i,e)}return t}_deserializeBucket(e,t){let i=t.get(e);if(i)return i;switch(new Uint32Array(e)[0]){case 1:i=new d(e);break;case 2:i=new h(e);break;case 3:i=new p(e,this);break;case 4:i=new f(e)}return t.set(e,i),i}}const b=new Map},41658:(e,t,i)=>{"use strict";i.d(t,{PF:()=>r,Ts:()=>a,Bf:()=>s,nN:()=>n});const s=!0,r=32,a=1.5,n=200},16086:(e,t,i)=>{"use strict";i.d(t,{a:()=>s,J:()=>r});class s{constructor(e){this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=e}}class r{constructor(){this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}}},17441:(e,t,i)=>{"use strict";i.d(t,{HX:()=>a,wB:()=>n,co:()=>r,C$:()=>o});var s=i(16086);function r(e,t,i,s,r,a){const n=i-r;if(n>=0)return(t>>n)+(s-(a<<n))*(e>>n);const o=-n;return t-(a-(s<<o))*(e>>o)<<o}class a{constructor(e,t,i){this._rows=Math.ceil(t/i),this._columns=Math.ceil(e/i),this._cellSize=i,this.cells=new Array(this._rows);for(let e=0;e<this._rows;e++){this.cells[e]=new Array(this._columns);for(let t=0;t<this._columns;t++)this.cells[e][t]=[]}}getCell(e,t){const i=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._rows-1),s=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._columns-1);return this.cells[i]&&this.cells[i][s]||null}getCellSpan(e,t,i,s){return[Math.min(Math.max(Math.floor(e/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(t/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(i/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(s/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function n(e,t,i,r,a,n){const o=t[r++];for(let l=0;l<o;l++){const o=new s.a(n);o.xTile=t[r++],o.yTile=t[r++],o.hash=t[r++],o.priority=t[r++];const l=t[r++];for(let e=0;e<l;e++){const e=t[r++],s=t[r++],a=t[r++],n=t[r++],l=!!t[r++],c=t[r++],u=i[r++],h=i[r++],d=t[r++],p=t[r++];o.colliders.push({xTile:e,yTile:s,dxPixels:a,dyPixels:n,hard:l,partIndex:c,width:d,height:p,minLod:u,maxLod:h})}const c=e[r++];for(let t=0;t<c;t++)o.textVertexRanges.push([e[r++],e[r++]]);const u=e[r++];for(let t=0;t<u;t++)o.iconVertexRanges.push([e[r++],e[r++]]);a.push(o)}return r}function o(e,t,i){for(const[s,r]of e.symbols)l(e,t,i,r,s)}function l(e,t,i,s,r){const a=e.layerData.get(r);if(3===a.type){for(const t of s){const s=t.unique;let r;if(t.selectedForRendering){const t=s.parts[0],a=t.startOpacity,n=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===n;const o=i?Math.floor(127*a)|n<<7:n?255:0;r=o<<24|o<<16|o<<8|o}else r=0;for(const[e,i]of t.iconVertexRanges)for(let t=e;t<e+i;t+=4)a.iconOpacity[t/4]=r;if(t.selectedForRendering){const t=s.parts[1],a=t.startOpacity,n=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===n;const o=i?Math.floor(127*a)|n<<7:n?255:0;r=o<<24|o<<16|o<<8|o}else r=0;for(const[e,i]of t.textVertexRanges)for(let t=e;t<e+i;t+=4)a.textOpacity[t/4]=r}a.lastOpacityUpdate=t,a.opacityChanged=!0}}},9793:(e,t,i)=>{"use strict";i.d(t,{I:()=>o});i(95830);var s=i(98501),r=i(5201),a=i(55955),n=i(56291);class o extends n.s{constructor(e,t,i,s=i){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:(0,a.c)(),tileMat3:(0,a.c)()},this.triangleCount=0,this.key=new r.Z(e),this.bounds=t,this.size=i,this.coordRange=s}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const i=t/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[a,n]=e.toScreenNoRotation([0,0],this.coords),o=this.size[0]/this.coordRange[0]*i,l=this.size[1]/this.coordRange[1]*i;(0,s.s)(r,o,0,0,0,l,0,a,n,1),(0,s.m)(this.transforms.dvs,e.displayViewMat3,r)}}},56469:(e,t,i)=>{"use strict";i.d(t,{hu:()=>o,tM:()=>p,RQ:()=>f,Kj:()=>h,zF:()=>d,Xv:()=>x,kG:()=>u,I0:()=>m,yK:()=>l,u_:()=>c,vP:()=>y});var s=i(33655),r=(i(77625),i(67128),i(55735),i(38256)),a=(i(34353),i(14286));(0,r.c)();class n{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function o(e,t){if(!e){t=t||"assert";const e=new Error(t);throw e.stack&&console.log(e.stack),new n(t)}}function l(e,t,i,s){let r,a=(i[0]-e[0])/t[0],n=(s[0]-e[0])/t[0];a>n&&(r=a,a=n,n=r);let o=(i[1]-e[1])/t[1],l=(s[1]-e[1])/t[1];if(o>l&&(r=o,o=l,l=r),a>l||o>n)return!1;o>a&&(a=o),l<n&&(n=l);let c=(i[2]-e[2])/t[2],u=(s[2]-e[2])/t[2];return c>u&&(r=c,c=u,u=r),!(a>u||c>n||(u<n&&(n=u),n<0))}function c(e,t,i,s){e[12]=t,e[13]=i,e[14]=s}function u(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function h(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/t)}function d(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/i)}function p(e,t,i){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}function f(e,t,i){return 2*Math.atan(i*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}function m(e,t,i=0){const r=(0,s.uZ)(e,0,v);for(let e=0;e<4;e++)t[i+e]=Math.floor(256*_(r*b[e]))}function y(e,t=0){let i=0;for(let s=0;s<4;s++)i+=e[t+s]*g[s];return i}const b=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],v=y(new Uint8ClampedArray([255,255,255,255]));function _(e){return e-Math.floor(e)}function x(e,t,i,s,r){const n=e;0===e[11]?(s[0]=2/(t*n[0]),s[1]=2/(i*n[5]),s[2]=(1+n[12])/n[0],s[3]=(1+n[13])/n[5],(0,a.s)(r,0,1)):(s[0]=-2/(t*n[0]),s[1]=-2/(i*n[5]),s[2]=(1-n[8])/n[0],s[3]=(1-n[9])/n[5],(0,a.s)(r,1,0))}},69595:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(6962);class r{constructor(e,t,i,s,r){this._context=e,this.bufferType=t,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(1,this),this._glName=this._context.gl.createBuffer(),s&&this.setData(s,r)}static createIndex(e,t,i,s){return new r(e,34963,t,i,s)}static createVertex(e,t,i){return new r(e,34962,t,i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}dispose(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}setData(e,t){if(!e)return;if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{let t=e.byteLength;(0,s.Uc)(e)&&(t/=2,this._indexType=5123),(0,s.ZY)(e)&&(t/=4,this._indexType=5125),this._size=t}const i=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this.bufferType,e,this.usage),this._context.bindVAO(i)}setSubData(e,t=0,i=0,r=e.byteLength){if(!e)return;(t<0||t>=this._size)&&console.error("offset is out of range!");let a=t,n=i,o=r,l=e.byteLength;(0,s.Uc)(e)&&(l/=2,a*=2,n*=2,o*=2),(0,s.ZY)(e)&&(l/=4,a*=4,n*=4,o*=4),void 0===r&&(r=l-1),i>=r&&console.error("end must be bigger than start!"),t+i-r>this._size&&console.error("An attempt to write beyond the end of the buffer!");const c=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const u=this._context.gl,h=ArrayBuffer.isView(e)?e.buffer:e,d=0===n&&o===e.byteLength?h:h.slice(n,o);u.bufferSubData(this.bufferType,a,d),this._context.bindVAO(c)}}const a=r},57319:(e,t,i)=>{"use strict";i.d(t,{XP:()=>n,RG:()=>l,un:()=>c,m:()=>a,UF:()=>o,_V:()=>r});i(95830);var s=i(59472);function r(e,t){return e.vertexBuffers[t].size/a(e.layout[t])}function a(e){return e[0].stride}function n(e,t,i,s,r){const a=e.gl,n=e.capabilities.instancing;e.bindBuffer(i);for(const e of s){const i=t[e.name],s=(r||(0+e.baseInstance?e.baseInstance:0))*e.stride;if(void 0===i&&console.error(`There is no location for vertex attribute '${e.name}' defined.`),e.baseInstance&&!e.divisor&&console.error(`Vertex attribute '${e.name}' uses baseInstanceOffset without divisor.`),e.count<=4)a.vertexAttribPointer(i,e.count,e.type,e.normalized,e.stride,e.offset+s),a.enableVertexAttribArray(i),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(i,e.divisor);else if(9===e.count)for(let t=0;t<3;t++)a.vertexAttribPointer(i+t,3,e.type,e.normalized,e.stride,e.offset+12*t+s),a.enableVertexAttribArray(i+t),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(i+t,e.divisor);else if(16===e.count)for(let t=0;t<4;t++)a.vertexAttribPointer(i+t,4,e.type,e.normalized,e.stride,e.offset+16*t+s),a.enableVertexAttribArray(i+t),e.divisor&&e.divisor>0&&n&&n.vertexAttribDivisor(i+t,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)}}function o(e,t,i,s){const r=e.gl,a=e.capabilities.instancing;e.bindBuffer(i);for(const e of s){const i=t[e.name];if(e.count<=4)r.disableVertexAttribArray(i),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(i,0);else if(9===e.count)for(let t=0;t<3;t++)r.disableVertexAttribArray(i+t),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(i+t,0);else if(16===e.count)for(let t=0;t<4;t++)r.disableVertexAttribArray(i+t),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(i+t,0);else console.error("Unsupported vertex attribute element count: "+e.count)}e.unbindBuffer(34962)}function l(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function c(e){if((0,s.Wi)(e))return 0;if("colorAttachment"in e)return e.glName?c(e.colorAttachment)+c(e.depthStencilAttachment):0;if("descriptor"in e)return e.glName?c(e.descriptor):0;const t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;const i="hasMipmap"in e&&e.hasMipmap?1.3:1,r=e.width*e.height;return l(t)*r*i}},74038:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(59472),r=i(57319);const a=class{constructor(e,t,i,s,r){this._context=e,this._locations=t,this._layout=i,this._buffers=s,this._indexBuffer=r,this._glName=null,this._initialized=!1,e.instanceCounter.increment(2,this)}get glName(){return this._glName}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((e,t)=>e+this._buffers[t].size),this._indexBuffer?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(e=!0){if(!this._context)return;const t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(const e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer=(0,s.O3)(this._indexBuffer)}this._context.instanceCounter.decrement(2,this),this._context=null}initialize(){if(this._initialized)return;const e=this._context.capabilities.vao;if(e){const t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}bind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const e=this._buffers,t=!!this._context.capabilities.vao,i=this._layout,s=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");const a=this._context.gl;for(const t in e){const s=e[t];s||console.error("Vertex buffer is uninitialized!");const a=i[t];a||console.error("Vertex element descriptor is empty!"),(0,r.XP)(this._context,this._locations,s,a)}s&&(t?a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,s.glName):this._context.bindBuffer(s))}unbind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const e=this._buffers,t=this._layout;e||console.error("Vertex buffer dictionary is empty!");for(const i in e){const s=e[i];s||console.error("Vertex buffer is uninitialized!");const a=t[i];(0,r.UF)(this._context,this._locations,s,a)}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}},32415:(e,t,i)=>{"use strict";i.d(t,{iC:()=>n,s9:()=>r,Br:()=>a,zS:()=>c,Ue:()=>l,Tc:()=>o,Fm:()=>h,xW:()=>u,v:()=>d,RA:()=>f,N9:()=>p});i(95830),i(5627);var s=i(8634);i(84570);function r(e,t,i="nearest",r=!1){var a;const n=!(r&&"u8"===t.pixelType),o=n?5126:5121,l=null==t.pixels||0===t.pixels.length?null:n?t.getAsRGBAFloat():t.getAsRGBA(),c=null==(a=e.capabilities.textureFloat)?void 0:a.textureFloatLinear,u={width:t.width,height:t.height,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,samplingMode:!c||"bilinear"!==i&&"cubic"!==i?9728:9729,dataType:o,wrapMode:33071,flipped:!1};return new s.Z(e,u,l)}function a(e,t){const i=4*t.size[0],r=t.size[1],a={width:i,height:r,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},n=new Float32Array(i*r*4);let o=0;for(let e=0;e<t.coefficients.length;e++)n[o++]=t.coefficients[e],e%3==2&&(n[o++]=1);return new s.Z(e,a,n)}function n(e,t){const i={width:t.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new s.Z(e,i,t)}function o(e,t,i,s=1,r=!0,a=!1){return{u_flipY:r,u_isFloatTexture:a,u_applyTransform:!!e,u_opacity:s,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:i}}function l(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function c(e,t){return{u_scale:e,u_offset:t}}function u(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function h(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function d(e,t){const i=e.gl,s=t.glName,r=i.getProgramParameter(s,i.ACTIVE_UNIFORMS),a=new Map;let n;for(let e=0;e<r;e++)n=i.getActiveUniform(s,e),n&&a.set(n.name,{location:i.getUniformLocation(s,n.name),info:n});return a}function p(e,t,i){Object.keys(i).forEach((s=>{const r=t.get(s)||t.get(s+"[0]");r&&function(e,t,i,s){if(null===s||null==i)return!1;const{info:r}=s;switch(r.type){case 5126:r.size>1?e.setUniform1fv(t,i):e.setUniform1f(t,i);break;case 35664:e.setUniform2fv(t,i);break;case 35665:e.setUniform3fv(t,i);break;case 35666:e.setUniform4fv(t,i);break;case 35675:e.setUniformMatrix3fv(t,i);break;case 35676:e.setUniformMatrix4fv(t,i);break;case 5124:r.size>1?e.setUniform1iv(t,i):e.setUniform1i(t,i);break;case 35670:e.setUniform1i(t,i?1:0);break;case 35667:case 35671:e.setUniform2iv(t,i);break;case 35668:case 35672:e.setUniform3iv(t,i);break;case 35669:case 35673:e.setUniform4iv(t,i);break;default:return!1}}(e,s,i[s],r)}))}function f(e,t,i,s){i.length===s.length&&(s.some((e=>null==e))||i.some((e=>null==e))||i.forEach(((i,r)=>{t.setUniform1i(i,r),e.bindTexture(s[r],r)})))}},99899:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Ue});var s=i(56140),r=(i(95830),i(36544)),a=(i(68055),i(79881)),n=i(51894),o=i(87566),l=(i(10923),i(57002),i(86035),i(12973)),c=i(59691),u=i(80621),h=(i(40450),i(24258)),d=i(9200),p=i(19401),f=i(90806),m=i(60263),y=i(28293),b=i(809),g=i(80882),v=i(94588),_=i(32656),x=i(39105);var w=i(27780),A=i(73032),C=i(41241),S=i(52937),B=(i(36348),i(33655)),O=i(93533),I=i(50897),k=i(17333),M=i(40920);class R{constructor(e){const t=R.checkUnsupported(e);if(t)throw t;this.spatialReference=e.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,k.jF)(this.spatialReference)||(0,w.BZ)(this.spatialReference)||(0,w.V2)(this.spatialReference),this.origin=[e.origin.x,e.origin.y],this.pixelSize=e.size[0],this.dpi=e.dpi;const i=e.lods.reduce((function(e,t,i){return t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e}),{min:1/0,minIndex:0,max:-1/0}),s=e.lods[i.minIndex],r=2**s.level;let a=s.resolution*r,n=s.scale*r;this.levels=new Array(i.max+1);for(let t=0;t<this.levels.length;t++)this.levels[t]={resolution:a,scale:n,tileSize:[a*e.size[0],a*e.size[1]]},a/=2,n/=2}clone(){return new R(this.toTileInfo())}toTileInfo(){return new M.Z({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,s){const r=this.levels[e],a=r.tileSize[0],n=r.tileSize[1];s[0]=this.origin[0]+i*a,s[2]=s[0]+a,s[3]=this.origin[1]-t*n,s[1]=s[3]-n}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=(0,C.tp)(e[0]),t[1]=(0,C.mZ)(e[1]),t[2]=(0,C.tp)(e[2]),t[3]=(0,C.mZ)(e[3])):this._isGCS&&(t[0]=(0,B.Vl)(e[0]),t[1]=(0,B.Vl)(e[1]),t[2]=(0,B.Vl)(e[2]),t[3]=(0,B.Vl)(e[3]))}getExtentGeometry(e,t,i,s=new S.Z){return this.getExtent(e,t,i,T),s.spatialReference=this.spatialReference,s.xmin=T[0],s.ymin=T[1],s.xmax=T[2],s.ymax=T[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof R)){if(R.checkUnsupported(e))return!1;e=new R(e)}if(!e.spatialReference.equals(this.spatialReference))return!1;if(e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,i=this.levels[t].resolution;let s=.5*i;return!(!(0,B.W8)(e.origin[0],this.origin[0],s)||!(0,B.W8)(e.origin[1],this.origin[1],s))&&(s=.5*i/2**t/this.pixelSize*12,(0,B.W8)(i,e.levels[t].resolution,s))}rootTilesInExtent(e,t,i){const s=this.levels[0].tileSize;if(0===s[0]||0===s[1])return[];R.computeRowColExtent(e,s,this.origin,T);let r=T[1],a=T[3],n=T[0],o=T[2];const l=o-n,c=a-r;if(l*c>i){const e=Math.floor(Math.sqrt(i));c>e&&(r=r+Math.floor(.5*c)-Math.floor(.5*e),a=r+e),l>e&&(n=n+Math.floor(.5*l)-Math.floor(.5*e),o=n+e)}const u=[];for(let e=r;e<a;e++)for(let t=n;t<o;t++)u.push([0,e,t]);return t&&(t[0]=this.origin[0]+n*s[0],t[1]=this.origin[1]-a*s[1],t[2]=this.origin[0]+o*s[0],t[3]=this.origin[1]-r*s[1]),u}static computeRowColExtent(e,t,i,s){const r=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+r-i[0])/t[0])),s[2]=Math.max(0,Math.ceil((e[2]-r-i[0])/t[0])),s[1]=Math.max(0,Math.floor((i[1]-e[3]+r)/t[1])),s[3]=Math.max(0,Math.ceil((i[1]-e[1]-r)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((function(e){return!(0,B.Y8)(e.resolution,i/2**e.level)}))}static hasGapInLevels(e){const t=e.lods.map((function(e){return e.level}));t.sort((function(e,t){return e-t}));for(let e=1;e<t.length;e++)if(t[e]!==t[0]+e)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}static checkUnsupported(e){return e?e.lods.length<1?new _.Z("tilingscheme:generic","Tiling scheme must have at least one level"):R.isPowerOfTwo(e)?R.hasGapInLevels(e)?new _.Z("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):R.tileSizeSupported(e)?null:new _.Z("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new _.Z("tilingscheme:power-of-two","Tiling scheme must be power of two"):new _.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static fromExtent(e,t){const i=e[2]-e[0],s=e[3]-e[1],r=(0,O.c9)(t),a=1.2*Math.max(i,s),n=256,o=new R(new M.Z({size:[n,n],origin:{x:e[0]-.5*(a-i),y:e[3]+.5*(a-s)},lods:[{level:0,resolution:a/n,scale:1/(n/96*.0254/(a*r))}],spatialReference:t}));return o.ensureMaxLod(20),o}static makeWebMercatorAuxiliarySphere(e){const t=new R(R.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e,t=256,i=16){const s=256/t,r=new R(new M.Z({size:[t,t],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*s,scale:295497598.570834*s}]}));return r.ensureMaxLod(i),r}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}R.WebMercatorAuxiliarySphereTileInfo=new M.Z({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:A.Z.WebMercator},spatialReference:A.Z.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),R.WebMercatorAuxiliarySphere=R.makeWebMercatorAuxiliarySphere(19);const T=(0,I.Ue)(),D=R;i(29522),i(66416),i(57680);var V=i(82550),z=i(59472),L=i(19677),U=i(82677),P=i(36654),Z=i(56469),F=i(35430);class j{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new E}}class E{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class W{constructor(e,t,i,s){this._workerFunc=e,this._callbackFunc=t,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=s.map((e=>new j(e)))}hasQuota(e){const t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}push(e){const t=this._clients[e.client];t&&(this._totalNumWorkers<this._maxTotalNumWorkers?(t.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,((e,t)=>this._taskCallback(e,t)))):t.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(e){const t=this._clients[e.client];this._totalNumWorkers--,t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,(0,Z.hu)(t.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),((e,t)=>this._taskCallback(e,t))))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}getStatsForType(e){const t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}get test(){const e=this;return{set workerFunc(t){e._workerFunc=t}}}}const q=class extends class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}}{constructor(e,t,i,s,r){super(s),this.url=e,this.options=t,this.docType=i,this.key=r,this.result=null,this.status=1,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0}};let N=class extends U.default{constructor(){super(...arguments),this.tasks=new Map,this.onLoadQueue=new Array,this.doneQueue=new Array,this.updating=!1}setup(e,t,i){this.loadQueue=new W(((e,t)=>this.startLoading(e,t)),((e,t)=>this.doneLoadingCallback(e,t)),e,t),i&&(this.taskHandle=i.registerTask(F.iQ.STREAM_DATA_LOADER,(e=>this.update(e)),(()=>this.doneQueue.length>0||this.onLoadQueue.length>0)))}destroy(){this.taskHandle&&(this.taskHandle.remove(),this.taskHandle=null),this.tasks.forEach((e=>{e.abortController&&e.abortController.abort()})),this.loadQueue.destroy(),this.loadQueue=null,this.onLoadQueue=null,this.doneQueue=null,this.tasks=null}hasDownloadSlots(e){return this.loadQueue.hasQuota(e)}request(e,t,i,s={}){const r=(0,x.createResolver)();r.__signal=(0,z.pC)(s)?s.signal:null;const a=this.createOrUpdateTask(e,t,i,s,r);return(0,x.onAbort)(s,(()=>this.cancelRequest(a,r))),r.promise}createTask(e,t,i,s,r,a){const n=new q(e,t,i,s,r);return this.updateTask(n,a),this.tasks.set(r,n),1===this.tasks.size&&this._set("updating",!0),this.loadQueue.push(n),n}cancelRequest(e,t){(0,L.e$)(e.resolvers,t),t.reject((0,x.createAbortError)()),0===e.resolvers.length&&(2===e.status&&(e.status=4,this.loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=4,this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1))}taskKey(e,t,i){return`${e}:${t}:${i}`}updateTask(e,t){e.resolvers.push(t)}createOrUpdateTask(e,t,i,s,r){const a=(0,z.pC)(s)&&s.uid||e,n=this.taskKey(a,t,i),o=this.tasks.get(n);return o?(this.updateTask(o,r),o):this.createTask(e,s,t,i,n,r)}doneLoadingCallback(e,t){this.loadQueue&&((0,Z.hu)(2===e.status),e.status=3,this.taskHandle?this.doneQueue.push({task:e,err:t}):this.doneLoading(e,t))}update(e){for(;!e.done&&this.onLoadQueue.length>0;){const t=this.onLoadQueue.shift();(0,x.throwIfAborted)(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this.doneQueue.length>0;){const t=this.doneQueue.shift();3!==t.task.status&&(t.err=t.err||(0,x.createAbortError)()),this.doneLoading(t.task,t.err),e.madeProgress()}}doneLoading(e,t){let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const s of e.resolvers)if(t)(0,x.isAbortError)(t)?s.reject(t):s.reject(new _.Z("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const t=i<=0?e.result:(0,V.d9)(e.result);s.resolve(t)}this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1)}startLoading(e,t){if(4===e.status)return!1;let i,s;switch(e.startTime=performance.now(),e.status=2,e.docType){case"binary":s="array-buffer",i=0;break;case"image":s="image";break;case"image+type":s="array-buffer";break;default:s="json"}e.abortController=(0,x.createAbortController)();const r=e.abortController.signal;e.request=(0,P.default)(e.url,{...e.options,responseType:s,timeout:i,signal:r});let a=()=>{};const n=i=>{e.duration=performance.now()-e.startTime,e.size=i instanceof ArrayBuffer?i.byteLength:e.size||0,e.result=i,this.taskHandle?this.onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},o=i=>{2===e.status&&t(e,i),a()};return"image+type"!==e.docType?(e.request.then((e=>n(e.data)),o),!0):(e.request.then((t=>{const l=t.data,c=function(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}(l);if(s="image",e.size=l.byteLength,"unknown"===c)return e.request=(0,P.default)(e.url,{responseType:s,timeout:i,signal:r}),void e.request.then((e=>n(e.data)),o);const u=new Blob([l],{type:c}),h=window.URL.createObjectURL(u);a=()=>window.URL.revokeObjectURL(h),e.request=(0,P.default)(h,{responseType:s,timeout:i,signal:r}),e.request.then((e=>n(new G(e.data,c,a))),o)}),o),!0)}get test(){return{loadQueue:this.loadQueue}}};(0,s._)([(0,a.Cb)({readOnly:!0})],N.prototype,"updating",void 0),N=(0,s._)([(0,o.j)("esri.views.3d.support.StreamDataLoader")],N);class G{constructor(e,t,i){this.image=e,this.type=t,this.release=i}get isOpaque(){return"image/jpeg"===this.type}}i(57498),i(32415);var Q=i(77625),$=i(17387);(0,B.oK)(B._3/10);const J=(0,I.Ue)();D.WebMercatorAuxiliarySphere.getExtent(0,0,0,J);(0,I.Ue)([-180,-90,180,90]);const H=(0,Q.c)(),Y=(0,Q.c)(),K=(0,Q.c)(),X=(0,Q.c)();function ee(e,t,i,s){(0,$.g)(H,i),H[s]=t[s];const r=(0,$.f)(H,H,t),a=(0,$.f)(Y,e,t),n=(0,$.d)(a,r),o=(0,$.d)(r,r);let l;l=n<=0?t:o<=n?i:(0,$.b)(H,t,(0,$.a)(r,r,n/o));const c=(0,$.f)(H,e,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}const te={planar:Object.freeze({__proto__:null,isInsideExtent:function(e,t,i=0){const s=e.extent;if(0===i)return(0,I.BD)(s,t);const r=Math.min(s[2]-s[0],s[3]-s[1]);return(0,I.Zm)(s,t,i*r)},tiltOnEdge:ee,tiltToExtentEdge:function(e,t){const i=e.elevationBounds,s=e.extent,r=.5*(i.min+i.max);K[0]=s[0],K[1]=s[1],K[2]=r,X[0]=s[2],X[1]=s[3],X[2]=r;let a=1/0,n=1/0;return t[0]<K[0]?a=ee(t,K,X,0):t[0]>X[0]&&(a=ee(t,X,K,0)),t[1]<K[1]?n=ee(t,K,X,1):t[1]>X[1]&&(n=ee(t,X,K,1)),Math.min(a,n)},checkIfTileInfoSupportedForViewSR:function(e,t,i){if(e.spatialReference.isGeographic)return new _.Z("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");const s=D.checkUnsupported(e);return s||(function(e,t){const i=e.lods,s=i[0].resolution*2**i[0].level,r=[s*e.size[0],s*e.size[1]],a=[e.origin.x,e.origin.y],n=(0,I.oJ)(t),o=(0,I.Ue)();D.computeRowColExtent(n,r,a,o);const l=(o[2]-o[0])*(o[3]-o[1]);if(l>64){const t=i[0].scale*2**i[0].level;let r=Math.max((n[3]-n[1])/e.size[1],(n[2]-n[0])/e.size[0])*t/s;const a=Math.floor(Math.log(r)/Math.log(10));return r=Math.ceil(r/10**a)*10**a,new _.Z("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(t).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+r.toLocaleString()+".",{level0Scale:t,suggestedLevel0Scale:r,requiredNumRootTiles:l,allowedNumRootTiles:64})}return null}(e,i)||(t&&!e.spatialReference.equals(t)?new _.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null))}}),spherical:Object.freeze({__proto__:null,isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0},checkIfTileInfoSupportedForViewSR:function(e,t){const i=e.lods.length-1,s=e.spatialReference,r=(0,k.jF)(s)||(0,w.BZ)(s)||(0,w.V2)(s);if(s.isWebMercator){if(!D.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new _.Z("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!r)return new _.Z("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!D.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new _.Z("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new _.Z("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}if(t&&!e.spatialReference.equals(t))return new _.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}})};Math.PI,Math.PI;function ie(e,t,i,s){let r;return r=2===s||"planar"===s?"planar":"spherical",te[r].checkIfTileInfoSupportedForViewSR(e,i,t)}async function se(e,t={}){await async function(e,t){const{basemap:i,view:s}=e;if(await i.load(t),0===i.baseLayers.length)return;const r=function(e){const t=["ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","OpenStreetMap","VectorTileLayer","WebTiledLayer"];return e.toArray().filter((e=>-1===t.indexOf(e.operationalLayerType))).map((e=>new _.Z("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})))}(i.baseLayers.concat(i.referenceLayers));if(r.length)throw r[0];const a=(0,v.sM)(i.baseLayers.getItemAt(0))();try{await a.load(t)}catch(e){const t="basemap-compatibility:unknown-error",i="Unknown basemap compatibility error",{name:s=t,message:r=i,details:a}=e;throw new _.Z(s,r,a)}!function(e,t){const i=e.tileInfo;if(!i)return;const s=t.viewingMode;if(!s)return;if(!function(e,t){return null!=e&&("2d"===t||("local"===t?!e.isGeographic:e.isWebMercator||e.isWGS84||4490===e.wkid||104971===e.wkid||104905===e.wkid||104903===e.wkid))}(i.spatialReference,s))throw new _.Z(`basemapgalleryitem:spatial-reference-unsupported-${s}`,`Basemap spatial reference is unsupported in ${s} mode`);if("global"===s){let t=ie(i,e.fullExtent,null,1);if(t&&e.compatibleTileInfo256&&!ie(e.compatibleTileInfo256,e.fullExtent,null,1)&&(t=null),t){const e=i.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new _.Z(`basemapgalleryitem:tiling-scheme-unsupported-${e}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(D.checkUnsupported(i))throw new _.Z("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const r=t.get("basemapTerrain.tilingScheme");if(r&&!r.compatibleWith(i)&&(!e.compatibleTileInfo256||!r.compatibleWith(e.compatibleTileInfo256)))throw new _.Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(a,s)}(e,t),(0,x.throwIfAborted)(t)}async function re(e,t={}){const{basemap:i,view:s}=e;if(await i.load(t),(0,x.throwIfAborted)(t),0===i.baseLayers.length)return;const r=i.baseLayers.getItemAt(0);if(!function(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"imagery-tile"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"wcs"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type}(r))return;if(i.spatialReference){if(s.spatialReference.equals(i.spatialReference))return;ae()}await r.load(t),(0,x.throwIfAborted)(t);const a=(r.get("supportedSpatialReferences")||[r.get("tileInfo.spatialReference")]).filter(Boolean);0!==a.length&&a.every((e=>!s.spatialReference.equals(e)))&&ae()}function ae(){throw new _.Z("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}let ne=class extends U.default{constructor(e){super(e),this._handles=new c.Z,this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){this._handles.add((0,u.init)(this,["basemap.loadStatus","compatibilityFunction","view.basemapTerrain?.tilingScheme","view.ready","view.spatialReference"],(()=>this.refresh())))}destroy(){this._cancelCompatibilityCheck(),this._handles.destroy(),this._handles=null,this.basemap=null,this.compatibilityFunction=null,this.view=null}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch((()=>{})),this._set("basemap",e)}refresh(){this._cancelCompatibilityCheck(),this._set("state","loading");const e=this.get("basemap.loadStatus");if("loaded"!==e&&"failed"!==e)return;if(!this.compatibilityFunction)return void("loaded"===e?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((e=>{(0,x.isAbortError)(e)||(this._set("state","error"),this._set("error",e))})),this._lastCompatibilityCheckController=t}_cancelCompatibilityCheck(){this._lastCompatibilityCheckController&&(this._lastCompatibilityCheckController.abort(),this._lastCompatibilityCheckController=null)}};(0,s._)([(0,a.Cb)()],ne.prototype,"basemap",null),(0,s._)([(0,a.Cb)()],ne.prototype,"compatibilityFunction",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],ne.prototype,"error",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],ne.prototype,"state",void 0),(0,s._)([(0,a.Cb)()],ne.prototype,"view",void 0),ne=(0,s._)([(0,o.j)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],ne);const oe=ne;var le=i(22696);const ce=y.Z.ofType(le.default);let ue=class extends U.default{constructor(e){super(e),this.basemaps=new ce}get state(){return"ready"}refresh(){}};(0,s._)([(0,a.Cb)({type:ce})],ue.prototype,"basemaps",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],ue.prototype,"state",null),ue=(0,s._)([(0,o.j)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],ue);const he=ue;var de=i(75044),pe=i(32797);const fe=y.Z.ofType(le.default),me="esri.widgets.BasemapGallery.support.PortalBasemapsSource",ye=r.Z.getLogger(me);let be=class extends(b.Z.LoadableMixin((0,de.v)(he))){constructor(e){super(e),this._handles=new c.Z,this.basemaps=new fe,this.filterFunction=null,this.portal=pe.Z.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([(0,u.init)(this,["filterFunction","loadStatus","portal.basemapGalleryGroupQuery","portal.user","query","updateBasemapsCallback"],(()=>this.refresh()))])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if("ready"!==this.state)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(i)}catch(e){if((0,x.isAbortError)(e))throw e;ye.warn(new _.Z("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:e})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&"string"!=typeof e?Object.keys(e).map((t=>`${t}:${e[t]}`)).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};(0,s._)([(0,a.Cb)({readOnly:!0,type:fe})],be.prototype,"basemaps",void 0),(0,s._)([(0,a.Cb)()],be.prototype,"filterFunction",void 0),(0,s._)([(0,a.Cb)({type:pe.Z})],be.prototype,"portal",void 0),(0,s._)([(0,a.Cb)()],be.prototype,"query",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],be.prototype,"state",null),(0,s._)([(0,a.Cb)()],be.prototype,"updateBasemapsCallback",void 0),be=(0,s._)([(0,o.j)(me)],be);const ge=be,ve=y.Z.ofType(oe);let _e=class extends b.Z{constructor(e){super(e),this._handles=new c.Z,this.activeBasemap=null,this.items=new ve,this.source=new ge,this.view=null}initialize(){const e=()=>this._recreateItems();this._handles.add([(0,u.watch)(this,["compatibilityFunction","state"],(()=>this._updateItems())),(0,u.on)(this,"source.basemaps","change",e,e)])}destroy(){this._handles.destroy(),this._handles=null}get compatibilityFunction(){return void 0===this._get("compatibilityFunction")?"3d"===this.get("view.type")?se:re:this._get("compatibilityFunction")}set compatibilityFunction(e){this._set("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||y.Z.isCollection(e)?new he({basemaps:e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new ge({portal:e}):function(e){return e&&!(e instanceof ge)&&(!!e.portal||!!e.query)}(e)?new ge(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}get state(){return this.get("view.ready")&&this.source?"ready":"disabled"}basemapEquals(e,t){return(0,g.Bj)(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(b.Z.isLoadable(this.source)?this.source.load(e):Promise.resolve()),Promise.resolve(this)}_recreateItems(){const e=this.get("source.basemaps"),{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach((e=>e.destroy())),this.items.addMany(e.map((e=>new oe({basemap:e,compatibilityFunction:i,view:t}))))}_updateItems(){this.items.forEach((e=>{e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}))}};(0,s._)([(0,a.Cb)({aliasOf:"view.map.basemap"})],_e.prototype,"activeBasemap",void 0),(0,s._)([(0,a.Cb)()],_e.prototype,"compatibilityFunction",null),(0,s._)([(0,a.Cb)({readOnly:!0,type:ve})],_e.prototype,"items",void 0),(0,s._)([(0,a.Cb)()],_e.prototype,"source",void 0),(0,s._)([(0,m.p)("source")],_e.prototype,"castSource",null),(0,s._)([(0,a.Cb)({readOnly:!0})],_e.prototype,"state",null),(0,s._)([(0,a.Cb)()],_e.prototype,"view",void 0),_e=(0,s._)([(0,o.j)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],_e);const xe=_e,we="esri-basemap-gallery esri-widget esri-widget--panel-height-only",Ae="esri-basemap-gallery--source-loading",Ce="esri-basemap-gallery__loader",Se="esri-basemap-gallery__item",Be="esri-basemap-gallery__item-container",Oe="esri-basemap-gallery__item-title",Ie="esri-basemap-gallery__item-thumbnail",ke="esri-basemap-gallery__item--selected",Me="esri-basemap-gallery__item--loading",Re="esri-basemap-gallery__item--error",Te="esri-widget__content--empty",De="esri-icon-basemap",Ve="esri-disabled",ze="esri-widget__heading";let Le=class extends f.default{constructor(e,t){super(e,t),this._handles=new c.Z,this.activeBasemap=null,this.disabled=!1,this.iconClass=De,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new xe}initialize(){const e=this._handles;this.own([(0,u.on)(this,"viewModel.items","change",(t=>{const i="basemap-gallery-item-changes",{added:s,moved:r}=t;e.remove(i),e.add([...s,...r].map((e=>e.watch("state",(()=>this.scheduleRender())))),i),this.scheduleRender()})),e,(0,u.whenOnce)(this,"source",(()=>this.viewModel.load()))])}render(){const e="loading"===this.get("source.state"),t=this.disabled||"disabled"===this.get("viewModel.state"),i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),s={[Ae]:e,[Ve]:t},r=e?(0,p.j)("div",{class:Ce,key:"esri-basemap-gallery__loader"}):null,a=e?null:i.length>0?(0,p.j)("ul",{class:Be,key:"esri-basemap-gallery__item-container",role:"menu"},i):(0,p.j)("div",{class:Te,key:"esri-basemap-gallery__empty-message"},(0,p.j)("h2",{class:ze},this.messages.noBasemaps));return(0,p.j)("div",{class:this.classes(we,s)},r,a)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||(0,l.V)("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),s=e.get("basemap.portalItem.snippet"),r=e.get("error.message")||s||i,{viewModel:a}=this,n=this.disabled||"ready"!==a.state||"ready"!==e.state?-1:0,o=a.basemapEquals(e.basemap,this.activeBasemap),c={[ke]:o,[Me]:"loading"===e.state,[Re]:"error"===e.state};return(0,p.j)("li",{"aria-selected":o.toString(),bind:this,class:this.classes(Se,c),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:n,title:r},(0,p.j)("img",{alt:"",class:Ie,src:t}),(0,p.j)("div",{class:Oe},i))}};(0,s._)([(0,n.B)("viewModel.activeBasemap")],Le.prototype,"activeBasemap",void 0),(0,s._)([(0,a.Cb)()],Le.prototype,"disabled",void 0),(0,s._)([(0,a.Cb)()],Le.prototype,"iconClass",void 0),(0,s._)([(0,a.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Le.prototype,"label",void 0),(0,s._)([(0,a.Cb)(),(0,d.H)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Le.prototype,"messages",void 0),(0,s._)([(0,n.B)("viewModel.source")],Le.prototype,"source",void 0),(0,s._)([(0,n.B)("viewModel.view")],Le.prototype,"view",void 0),(0,s._)([(0,a.Cb)()],Le.prototype,"viewModel",void 0),(0,s._)([(0,h.h)()],Le.prototype,"_handleClick",null),Le=(0,s._)([(0,o.j)("esri.widgets.BasemapGallery")],Le);const Ue=Le},97900:function(e,t,i){"use strict";function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=o(e);if(t){var r=o(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=this&&this.__decorate||function(e,t,i,s){var r,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(n=(a<3?r(n):a>3?r(t,i,n):r(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var h=i(83781),d=i(88266),p=u(i(90806)),f=u(i(81826));i(40548);var m="esri-widget basemaps-base",y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(l,e);var t,i,n,o=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).viewModel=new f.default,t._createMaps=function(){t.basemaps&&(t.basemaps.container="maps")},t._createImages=function(){t.images&&(t.images.container="images")},t.handleSwitchChange=function(e){""!=e.target.getAttribute("switched")?(t.view.map.addMany(t.viewModel.activeBasemap.baseLayers.toArray(),0),t.view.map.basemap.referenceLayers.forEach((function(e){e.visible=!1})),t.view.map.layers.filter((function(e){return t.viewModel.activeBasemap.baseLayers.includes(e)})).forEach((function(e){e.opacity=.5,e.visible=!0}))):(t.view.map.basemap.referenceLayers.forEach((function(e){e.visible=!0})),t.viewModel.activeBasemap.baseLayers.forEach((function(e){t.view.map.remove(t.view.map.findLayerById(e.id))})))},t.handleSliderChange=function(e){t.view.map.layers.filter((function(e){var i;return null===(i=t.viewModel.activeBasemap)||void 0===i?void 0:i.baseLayers.includes(e)})).toArray().forEach((function(t){t.opacity=parseFloat(e.target.getAttribute("value"))}))},t._sliderCreated=function(e){var i;null===(i=document.querySelector("#blendSlider"))||void 0===i||i.addEventListener("calciteSliderUpdate",t.handleSliderChange.bind({basemap:t.basemaps,view:t.view},{passive:!0}))},t._blendCreated=function(e){var i,s;null===(i=document.querySelector("#blendSwitch"))||void 0===i||i.addEventListener("calciteSwitchChange",t.handleSwitchChange.bind({basemap:t.basemaps,view:t.view},{passive:!0})),null===(s=document.querySelector("#blend"))||void 0===s||s.removeAttribute("switched")},t}return t=l,(i=[{key:"render",value:function(){var e=this;return document.querySelectorAll("#basemapDiv calcite-radio-group-item").forEach((function(t){null==t||t.addEventListener("calciteRadioGroupItemChange",(function(t){var i,s;(null===(i=t.target)||void 0===i?void 0:i.checked)&&e.viewModel.toggleContent(null===(s=t.target)||void 0===s?void 0:s.value)}),{passive:!0})})),d.tsx("div",{class:m},d.tsx("calcite-tabs",{layout:"center",position:"below","calcite-hydrated":""},d.tsx("calcite-tab-nav",{slot:"tab-nav",role:"tablist",layout:"center",position:"below","calcite-hydrated":""},d.tsx("calcite-tab-title",{active:!0,"aria-expanded":"true",dir:"ltr",hastext:"",id:"listTabTitle",role:"tab",tabindex:"0",layout:"center",position:"below","calcite-hydrated":""},"Base Maps"),d.tsx("calcite-tab-title",{"aria-expanded":"false",dir:"ltr",hastext:"",id:"detailsTabTitle",role:"tab",tabindex:"0",layout:"center",position:"below","calcite-hydrated":""},"Imagery")),d.tsx("calcite-tab",{"aria-expanded":"true",id:"listTab",role:"tabpanel","calcite-hydrated":""},d.tsx("div",{afterCreate:this._createMaps,id:"maps"})),d.tsx("calcite-tab",{"aria-expanded":"false",id:"detailsTab",role:"tabpanel","calcite-hydrated":""},d.tsx("label",{id:"blend"},d.tsx("calcite-switch",{afterCreate:this._blendCreated,id:"blendSwitch"})," Blend"),d.tsx("calcite-slider",{afterCreate:this._sliderCreated,id:"blendSlider",value:"0.5",max:"1",min:"0",step:"0.1"}),d.tsx("div",{afterCreate:this._createImages,id:"images"}))))}}])&&s(t.prototype,i),n&&s(t,n),l}(p.default);c([h.aliasOf("viewModel.view")],y.prototype,"view",void 0),c([h.aliasOf("viewModel.basemaps")],y.prototype,"basemaps",void 0),c([h.aliasOf("viewModel.images")],y.prototype,"images",void 0),c([h.property({type:f.default}),d.renderable()],y.prototype,"viewModel",void 0),y=c([h.subclass("app.widgets.BaseMaps")],y),t.default=y},81826:function(e,t,i){"use strict";function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=l(e);if(t){var r=l(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,i,s){var r,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(n=(a<3?r(n):a>3?r(t,i,n):r(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=h(i(82677)),p=h(i(78745)),f=i(83781),m=h(i(99899)),y=i(80621),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(c,e);var t,i,n,l=a(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).changePropertyLines=function(e){var i,s=t.view.map.allLayers.find((function(e){return"feature"===e.type&&"Property"===e.title}));if(s.loaded){var r=null===(i=null==s?void 0:s.renderer)||void 0===i?void 0:i.clone();e.title.toLowerCase().includes("dark")||e.title.toLowerCase().includes("night")||e.title.toLowerCase().includes("dark")||e.title.toLowerCase().startsWith("20")||e.title.toLowerCase().startsWith("19")?r.symbol.outline.color=new p.default([255,255,255,.5]):r.symbol.outline.color=new p.default([0,0,0,.5]),s.renderer=r}},t.toggleContent=function(e){var t,i,s,r,a,n,o,l,c,u,h;"maps"===e?(null===(t=document.querySelector("#maps"))||void 0===t||t.classList.remove("esri-hidden"),null===(i=document.querySelector("#images"))||void 0===i||i.classList.add("esri-hidden"),null===(s=document.querySelector("#mapsItem"))||void 0===s||s.setAttribute("checked",""),null===(r=document.querySelector("#imagesItem"))||void 0===r||r.removeAttribute("checked"),null===(a=document.querySelector("#blend"))||void 0===a||a.classList.add("esri-hidden"),null===(n=document.querySelector("#blendSlider"))||void 0===n||n.classList.add("esri-hidden")):(null===(o=document.querySelector("#images"))||void 0===o||o.classList.remove("esri-hidden"),null===(l=document.querySelector("#maps"))||void 0===l||l.classList.add("esri-hidden"),null===(c=document.querySelector("#imagesItem"))||void 0===c||c.setAttribute("checked",""),null===(u=document.querySelector("#mapsItem"))||void 0===u||u.removeAttribute("checked"),null===(h=document.querySelector("#blend"))||void 0===h||h.classList.remove("esri-hidden"))},y.whenDefinedOnce(o(t),"view",t.init.bind(o(t))),t}return t=c,(i=[{key:"init",value:function(e){var t=this;this.basemaps=new m.default({view:this.view}),this.view.when((function(){t.changePropertyLines(t.view.map.basemap)})),this.view.map.watch("basemap",(function(e){var i,s,r;t.changePropertyLines(e),(null===(i=document.querySelector("#images"))||void 0===i?void 0:i.classList.contains("esri-hidden"))&&(t.activeBasemap.baseLayers.forEach((function(e){t.view.map.remove(t.view.map.findLayerById(e.id))})),t.activeBasemap=t.view.map.basemap,null===(s=document.querySelector("#blendSwitch"))||void 0===s||s.removeAttribute("switched")),t.images.viewModel.items.find((function(e){return e.basemap.title===t.view.map.basemap.title}))&&(null===(r=document.querySelector("#blendSwitch"))||void 0===r?void 0:r.hasAttribute("switched"))?t.view.map.addMany(t.activeBasemap.baseLayers.toArray()):t.activeBasemap.baseLayers.forEach((function(e){t.view.map.remove(t.view.map.findLayerById(e.id))}))})),this.activeBasemap=this.view.map.basemap,this.images=new m.default({view:this.view,source:{query:{id:"492386759d264d49948bf7f83957ddb9"}}}),window.addEventListener("pagehide",(function(){t.activeBasemap.baseLayers.forEach((function(e){t.view.map.remove(t.view.map.findLayerById(e.id))}));var i=e.map.toJSON();i.initialState.viewpoint.targetGeometry=e.extent,window.localStorage.setItem("imaps",JSON.stringify(i))}),{passive:!0})}}])&&s(t.prototype,i),n&&s(t,n),c}(d.default);u([f.property()],b.prototype,"view",void 0),b=u([f.subclass("app.widgets.BaseMaps.BaseMapsViewModel")],b),t.default=b},96648:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var s=i(94015),r=i.n(s),a=i(23645),n=i.n(a)()(r());n.push([e.id,".basemaps-base{padding:0}#basemapDiv{height:100%}.basemaps-base calcite-tab{height:100%;position:absolute;top:54px;left:0;right:0;height:calc(100% - 99px)}.basemaps-base calcite-tabs{height:100%}.esri-basemap-gallery{height:100%}","",{version:3,sources:["webpack://./src/widgets/BaseMaps/styles/BaseMaps.scss"],names:[],mappings:"AAAA,eACE,SAAA,CAEF,YACE,WAAA,CAIF,2BACE,WAAA,CACA,iBAAA,CACA,QAAA,CACA,MAAA,CACA,OAAA,CACA,wBAAA,CAIF,4BACE,WAAA,CAGF,sBACE,WAAA",sourcesContent:[".basemaps-base {\n  padding: 0;\n}\n#basemapDiv {\n  height: 100%;\n}\n\n\n.basemaps-base calcite-tab {\n  height: 100%;\n  position: absolute;\n  top: 54px;\n  left: 0;\n  right: 0;\n  height: calc(100% - 99px);\n}\n\n\n.basemaps-base calcite-tabs {\n  height: 100%\n}\n\n.esri-basemap-gallery {\n  height: 100%;\n}"],sourceRoot:""}]);const o=n},40548:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var s=i(93379),r=i.n(s),a=i(96648),n={insert:"head",singleton:!1};r()(a.Z,n);const o=a.Z.locals||{}}}]);
//# sourceMappingURL=7900.js.map