{"version":3,"sources":["webpack://imaps/./node_modules/@arcgis/core/core/workers/registry.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/utils.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/RemoteClient.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/Connection.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/loaderConfig.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/WorkerFallback.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/workerFactory.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/WorkerOwner.js","webpack://imaps/./node_modules/@arcgis/core/core/workers/workers.js","webpack://imaps/./node_modules/@arcgis/core/layers/support/PromiseQueue.js","webpack://imaps/./node_modules/@arcgis/core/views/support/debugFlags.js","webpack://imaps/./node_modules/@arcgis/core/views/support/Scheduler.js"],"names":["geometryEngineWorker","CSVSourceWorker","EdgeProcessingWorker","ElevationSamplerWorker","GeoJSONSourceWorker","LercWorker","MemorySourceWorker","PBFDecoderWorker","Pipeline","PointCloudWorker","RasterWorker","SceneLayerWorker","WorkerTileHandler","FeatureServiceSnappingSourceWorker","t","HANDSHAKE","CONFIGURE","CONFIGURED","OPEN","OPENED","RESPONSE","INVOKE","ABORT","CLOSE","OPEN_PORT","ON","r","n","a","JSON","stringify","name","message","toJSON","details","stack","i","type","postMessage","port","s","o","data","transferList","result","e","parse","length","filter","ArrayBuffer","constructor","u","g","b","f","v","M","k","y","this","_timer","_cancelledJobIds","Set","_invokeMessages","_invoke","_process","bind","add","jobId","push","setTimeout","clear","has","j","_port","_outJobs","Map","_inJobs","_invokeQueue","_onInvokeMessage","_messageQueue","Array","_client","client","_onMessage","_channel","channel","scheduler","_frameTask","registerTask","_update","addEventListener","start","MessageChannel","default","port1","remoteClient","clients","set","port2","Promise","resolve","_post","_close","size","signal","reject","methodName","l","h","get","delete","abortHandle","remove","c","debugInfo","abortable","eventType","close","removeEventListener","forEach","_processMessage","_onResponseMessage","_onAbortMessage","_onCloseMessage","_onOpenPortMessage","_onOnMessage","controller","abort","destroy","_","p","indexOf","split","TypeError","call","error","promise","then","on","done","shift","madeProgress","_clients","_clientPromises","_clientIdx","invoke","isBusy","race","isArray","warn","closed","Error","getAvailableClient","all","map","openPort","numClients","async","isDebug","locale","baseUrl","packages","concat","paths","hasOwnProperty","document","createDocumentFragment","createElement","observe","attributes","setAttribute","bubbles","cancelable","createEvent","initEvent","_dispatcher","_isInitialized","_workerPostMessage","_onmessageHandler","_onmessageerrorHandler","_onerrorHandler","_workerMessageHandler","dispatchEvent","modulePath","import","URL","createObjectURL","Blob","w","assetsPath","workers","loaderUrl","workerPath","configure","esriConfig","loaderConfig","preventDefault","worker","id","Worker","event","terminate","_onOpenedMessage","m","navigator","hardwareConcurrency","open","strategy","maxNumWorkers","Math","min","callback","_tasks","unshift","super","arguments","SCHEDULER_LOG_SLOW_TASKS","prototype","REMOTE_CLIENT","SLIDE","STAGE","STREAM_DATA_LOADER","ELEVATION_QUERY","TERRAIN_SURFACE","SURFACE_GEOMETRY_UPDATES","GRAPHICS_CORE","I3S_CONTROLLER","POINT_CLOUD_LAYER","FEATURE_TILE_FETCHER","LABELER","GRAPHICS_DECONFLICTOR","FILTER_VISIBILITY","FEATURE_QUERY_ENGINE","SCALE_VISIBILITY","FRUSTUM_VISIBILITY","POINT_OF_INTEREST_FREQUENT","POINT_OF_INTEREST_INFREQUENT","FEATURE_TILE_TREE","FEATURE_TILE_TREE_ACTIVE","ELEVATION_ALIGNMENT","TEXT_TEXTURE_ATLAS","TEXTURE_UNLOAD","OVERLAY_MANAGER","LINE_OF_SIGHT_TOOL","LINE_OF_SIGHT_TOOL_INTERACTIVE","ELEVATION_PROFILE","TEST_PRIO","A","L","updating","performanceInfo","total","tasks","_budget","_state","_runQueue","_load","_idleStateCallbacks","_idleUpdatesStartFired","_maxReschedule","F","_forceTask","_debug","_debugHandle","nowFunc","N","_test","FRAME_SAFETY_BUDGET","INTERACTING_BUDGET","IDLE_BUDGET","budget","usedBudget","updateTask","_updateTask","getState","_getState","getRuntime","_getRuntime","resetRuntimes","_resetRuntimes","getRunning","_getRunning","E","idleBegin","idleEnd","state","_removeIdleStateCallbacks","forAll","frameDuration","max","elapsedFrameTime","reset","_updateLoad","_schedule","_runIdle","_runInteracting","_runAnimating","elapsed","removeUnordered","setPriority","some","SCHEDULED","IDLE","needsUpdate","schedulePriority","READY","WAITING","runtime","_run","reduce","filterInPlace","priority","now","pop","resetProgress","update","task","console","log","remaining","_recordFrameTaskTimes","record","Scheduler","_scheduler","_needsUpdateCB","_priority","_queue","processQueue","U","removeTask","schedule","reschedule","process","_begin","_didWork","_enabled","Budget","performance","enabled","Number","MAX_SAFE_INTEGER"],"mappings":"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","file":"2673.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst e={geometryEngineWorker:()=>import(\"../../geometry/geometryEngineWorker.js\"),CSVSourceWorker:()=>import(\"../../layers/graphics/sources/support/CSVSourceWorker.js\"),EdgeProcessingWorker:()=>import(\"../../views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js\"),ElevationSamplerWorker:()=>import(\"../../geometry/support/meshUtils/ElevationSamplerWorker.js\"),GeoJSONSourceWorker:()=>import(\"../../layers/graphics/sources/geojson/GeoJSONSourceWorker.js\"),LercWorker:()=>import(\"../../layers/support/LercWorker.js\"),MemorySourceWorker:()=>import(\"../../layers/graphics/sources/support/MemorySourceWorker.js\"),PBFDecoderWorker:()=>import(\"../../views/3d/support/PBFDecoderWorker.js\"),Pipeline:()=>import(\"../../views/2d/layers/features/Pipeline.js\"),PointCloudWorker:()=>import(\"../../views/3d/layers/PointCloudWorker.js\"),RasterWorker:()=>import(\"../../layers/support/RasterWorker.js\"),SceneLayerWorker:()=>import(\"../../views/3d/layers/SceneLayerWorker.js\"),WorkerTileHandler:()=>import(\"../../views/2d/engine/vectorTiles/WorkerTileHandler.js\"),FeatureServiceSnappingSourceWorker:()=>import(\"../../views/interactive/snapping/featureSources/FeatureServiceSnappingSourceWorker.js\")};export{e as registry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../has.js\";var e;!function(t){t[t.HANDSHAKE=0]=\"HANDSHAKE\",t[t.CONFIGURE=1]=\"CONFIGURE\",t[t.CONFIGURED=2]=\"CONFIGURED\",t[t.OPEN=3]=\"OPEN\",t[t.OPENED=4]=\"OPENED\",t[t.RESPONSE=5]=\"RESPONSE\",t[t.INVOKE=6]=\"INVOKE\",t[t.ABORT=7]=\"ABORT\",t[t.CLOSE=8]=\"CLOSE\",t[t.OPEN_PORT=9]=\"OPEN_PORT\",t[t.ON=10]=\"ON\"}(e||(e={}));let r=0;function n(){return r++}function s(t){return t&&\"object\"==typeof t&&(\"result\"in t||\"transferList\"in t)}function a(t){return t?\"string\"==typeof t?JSON.stringify({name:\"message\",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i(t,r,n,a){if(r.type===e.OPEN_PORT)return void t.postMessage(r,[r.port]);if(r.type!==e.INVOKE&&r.type!==e.RESPONSE)return void t.postMessage(r);let i;s(n)?(i=o(n.transferList),r.data=n.result):(i=o(a),r.data=n),i?t.postMessage(r,i):t.postMessage(r)}function f(t){if(!t)return null;const e=t.data;return e?\"string\"==typeof e?JSON.parse(e):e:null}function o(e){if(!e||!e.length)return null;if(t(\"esri-workers-arraybuffer-transfer\"))return e;const r=e.filter((t=>!u(t)));return r.length?r:null}function u(t){return t instanceof ArrayBuffer||t&&t.constructor&&\"ArrayBuffer\"===t.constructor.name}export{e as MessageType,s as isTranferableResult,n as newJobId,i as postMessage,f as receiveMessage,a as toInvokeError};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,removeMaybe as s}from\"../maybe.js\";import t from\"../Error.js\";import{on as o}from\"../events.js\";import{onAbortOrThrow as n,createAbortError as r,createAbortController as i,isPromiseLike as a,isAbortError as l}from\"../promiseUtils.js\";import{Task as h}from\"../../views/support/Scheduler.js\";import{registry as c}from\"./registry.js\";import{newJobId as _,MessageType as p,receiveMessage as u,toInvokeError as d,postMessage as m}from\"./utils.js\";const{CLOSE:g,ABORT:b,INVOKE:f,RESPONSE:v,OPEN_PORT:M,ON:k}=p;class y{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class j{constructor(s,t){this._port=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new y((e=>this._onInvokeMessage(e))),this._messageQueue=new Array,this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,e(t.scheduler)&&(this._frameTask=t.scheduler.registerTask(h.REMOTE_CLIENT,(e=>this._update(e)),(()=>this._messageQueue.length>0))),this._port.addEventListener(\"message\",this._onMessage),this._port.start()}static connect(e){const s=new MessageChannel;let t;t=\"function\"==typeof e?new e:\"default\"in e&&\"function\"==typeof e.default?new e.default:e;const o=new j(s.port1,{channel:s,client:t});return\"object\"==typeof t&&\"remoteClient\"in t&&(t.remoteClient=o),j.clients.set(o,t),s.port2}static loadWorker(e){const s=c[e];return s?s():Promise.resolve(null)}close(){this._post({type:g}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,s,o){const i=o&&o.signal,a=o&&o.transferList;if(!this._port)return Promise.reject(new t(\"worker:port-closed\",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:s}));const l=_();return new Promise(((t,o)=>{const h=n(i,(()=>{var e;const s=this._outJobs.get(l);s&&(this._outJobs.delete(l),null==(e=s.abortHandle)||e.remove(),this._post({type:b,jobId:l}),o(r()))})),c={resolve:t,reject:o,abortHandle:h,debugInfo:e};this._outJobs.set(l,c),this._post({type:f,jobId:l,methodName:e,abortable:null!=i},s,a)}))}on(e,s){const t=new MessageChannel;function o(e){s(e.data)}return this._port.postMessage({type:p.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener(\"message\",o),t.port1.start(),{remove(){t.port1.postMessage({type:p.CLOSE}),t.port1.close(),t.port1.removeEventListener(\"message\",o)}}}openPort(){const e=new MessageChannel;return this._post({type:M,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener(\"message\",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(r(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=s(this._frameTask)}_onMessage(s){e(this._frameTask)?this._messageQueue.push(s):this._processMessage(s)}_processMessage(e){const s=u(e);if(s)switch(s.type){case v:this._onResponseMessage(s);break;case f:this._invokeQueue.push(s);break;case b:this._onAbortMessage(s);break;case g:this._onCloseMessage();break;case M:this._onOpenPortMessage(s);break;case k:this._onOnMessage(s)}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t))}_onCloseMessage(){const e=this._client;this._close(),e&&\"destroy\"in e&&j.clients.get(this)===e&&e.destroy(),j.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:n}=e,r=n?i():null,h=this._inJobs;let c,_=this._client,p=_[s];try{if(!p&&s&&-1!==s.indexOf(\".\")){const e=s.split(\".\");for(let s=0;s<e.length-1;s++)_=_[e[s]],p=_[e[s+1]]}if(\"function\"!=typeof p)throw new TypeError(`${s} is not a function`);c=p.call(_,o,{client:this,signal:r?r.signal:null})}catch(u){return void this._post({type:v,jobId:t,error:d(u)})}a(c)?(h.set(t,{controller:r,promise:c}),c.then((e=>{h.has(t)&&(h.delete(t),this._post({type:v,jobId:t},e))}),(e=>{h.has(t)&&(h.delete(t),l(e)||this._post({type:v,jobId:t,error:d(e||{message:`Error encountered at method ${s}`})}))}))):this._post({type:v,jobId:t},c)}_onOpenPortMessage(e){new j(e.port,{client:this._client})}_onOnMessage(e){const{port:s}=e,t=this._client.on(e.eventType,(e=>{s.postMessage(e)})),n=o(e.port,\"message\",(e=>{u(e).type===p.CLOSE&&(n.remove(),t.remove(),s.close())}))}_onResponseMessage(e){var s;const{jobId:o,error:n,data:r}=e,i=this._outJobs;if(!i.has(o))return;const a=i.get(o);i.delete(o),null==(s=a.abortHandle)||s.remove(),n?a.reject(t.fromJSON(JSON.parse(n))):a.resolve(r)}_update(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}_post(e,s,t){return m(this._port,e,s,t)}}j.clients=new Map;export default j;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../Logger.js\";import{handlesGroup as t}from\"../handleUtils.js\";import{isPromiseLike as s,throwIfAborted as i}from\"../promiseUtils.js\";import n from\"./RemoteClient.js\";const r=e.getLogger(\"esri.core.workers.Connection\");class l{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((r,l)=>{let o=!0;const h=e=>{i(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let i=0;i<e.length;++i){const o=e[i];s(o)?this._clientPromises[i]=o.then((e=>(this._clients[i]=new n(e,t),h(r),this._clients[i])),(()=>(h(l),null))):(this._clients[i]=new n(o,t),this._clientPromises[i]=Promise.resolve(this._clients[i]),h(r))}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then((i=>i.invoke(e,t,s)))}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let i=null;if(Array.isArray(s)?(r.warn(\"invoke()\",\"The transferList parameter is deprecated, use the options object instead\"),i={transferList:s}):i=s,this.closed)return Promise.reject(new Error(\"Connection closed\"));return this.getAvailableClient().then((s=>s.invoke(e,t,i)))}on(e,s){return Promise.all(this._clientPromises).then((()=>t(this._clients.map((t=>t.on(e,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{t[i]=n.openPort(),0==--s&&e(t)}))}}))}get test(){return{numClients:this._clients.length}}}export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../has.js\";import\"../urlUtils.js\";import\"../../assets.js\";let a=null;const s={};function e(a,s){for(const e of a)if(e.name===s.name)return;a.push(s)}function r(a){var r;const t={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty(\"async\")||(t.async=!0),a.hasOwnProperty(\"isDebug\")||(t.isDebug=!1),a.baseUrl||(t.baseUrl=s.baseUrl),null==(r=s.packages)||r.forEach((a=>{e(t.packages,a)})),t}export default r;export{a as DEFAULT_LOADER_URL};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../global.js\";import{MessageType as t,receiveMessage as s}from\"./utils.js\";import r from\"./RemoteClient.js\";class n{constructor(){const e=document.createDocumentFragment();[\"addEventListener\",\"dispatchEvent\",\"removeEventListener\"].forEach((t=>{this[t]=(...s)=>e[t](...s)}))}}const a=e.MutationObserver||e.WebKitMutationObserver,o=function(){let t;if(e.process&&e.process.nextTick)t=t=>{e.process.nextTick(t)};else if(e.Promise)t=t=>{e.Promise.resolve().then(t)};else if(a){const e=[],s=document.createElement(\"div\");new a((()=>{for(;e.length>0;)e.shift()()})).observe(s,{attributes:!0}),t=t=>{e.push(t),s.setAttribute(\"queueStatus\",\"1\")}}return t}(),i=(()=>{const t=e.MessageEvent;try{new t(\"message\",{data:null})}catch{return(e,t={})=>{const{data:s,bubbles:r=!1,cancelable:n=!1}=t,a=document.createEvent(\"Event\");return a.initEvent(e,r,n),a.data=s,a}}return(e,s)=>new t(e,s)})();class d{constructor(){this._dispatcher=new n,this._isInitialized=!1,this._workerPostMessage({type:t.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(\"message\",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(\"message\",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(\"messageerror\",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(\"messageerror\",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(\"error\",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(\"error\",e)}postMessage(e){o((()=>{this._workerMessageHandler(i(\"message\",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s)}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s)}_workerPostMessage(e){o((()=>{this.dispatchEvent(i(\"message\",{data:e}))}))}async _workerMessageHandler(e){const n=s(e);if(n)switch(n.type){case t.CONFIGURE:this._isInitialized||this._workerPostMessage({type:t.CONFIGURED});break;case t.OPEN:{const{modulePath:e,jobId:s}=n;let a=await r.loadWorker(e);a||(a=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\ne));const o=r.connect(a);this._workerPostMessage({type:t.OPENED,jobId:s,data:o});break}}}}export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../has.js\";import r from\"../../config.js\";import t from\"../Logger.js\";import{makeAbsolute as o}from\"../urlUtils.js\";import{getLocale as s}from\"../../intl/locale.js\";import{getAssetUrl as a}from\"../../assets.js\";import\"../../intl.js\";import{receiveMessage as n,MessageType as i}from\"./utils.js\";import l from\"./loaderConfig.js\";import f from\"./WorkerFallback.js\";const d=t.getLogger(\"esri.core.workers\");e.add(\"esri-workers-arraybuffer-transfer\",!e(\"safari\")||e(\"safari\")>=12);const{CONFIGURED:c,CONFIGURE:u,HANDSHAKE:g}=i,m='var esriConfig,workerPath,globalId=0,outgoing=new Map,configured=!1,HANDSHAKE=0,CONFIGURE=1,CONFIGURED=2,OPEN=3,OPENED=4,RESPONSE=5,INVOKE=6,ABORT=7;function createAbortError(){var e=new Error(\"Aborted\");return e.name=\"AbortError\",e}function receiveMessage(e){return e&&e.data?\"string\"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,r,t){var o=t&&t.signal,n=globalId++;return new Promise((function(t,a){if(o){if(o.aborted)return a(createAbortError());o.addEventListener(\"abort\",(function(){outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),a(createAbortError()))}))}outgoing.set(n,{resolve:t,reject:a}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=o,data:r})}))}function messageHandler(e){var r=receiveMessage(e);if(r){var t=r.jobId;switch(r.type){case CONFIGURE:var o=r.configure;if(configured)return;configured=!0,esriConfig=o.esriConfig,workerPath=esriConfig.workers.workerPath,self.dojoConfig=o.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),\"function\"==typeof require&&\"function\"==typeof require.config&&require.config(o.loaderConfig)),self.postMessage({type:CONFIGURED});break;case OPEN:var n;function a(e){var r=n.connect(e);self.postMessage({type:OPENED,jobId:t,data:r},[r])}\"function\"==typeof define&&define.amd?require([workerPath],(function(e){(n=e.default||e).loadWorker(r.modulePath).then((function(e){return e||new Promise((function(e){require([r.modulePath],e)}))})).then(a)})):\"System\"in self&&\"function\"==typeof System.import?System.import(workerPath).then((function(e){return(n=e.default).loadWorker(r.modulePath)})).then((function(e){return e||System.import(r.modulePath)})).then(a):(self.RemoteClient||importScripts(workerPath),(n=self.RemoteClient.default||self.RemoteClient).loadWorker(r.modulePath).then(a));break;case RESPONSE:if(outgoing.has(t)){var i=outgoing.get(t);outgoing.delete(t),r.error?i.reject(JSON.parse(r.error)):i.resolve(r.data)}}}}self.addEventListener(\"message\",messageHandler),self.postMessage({type:HANDSHAKE});';let p;try{p=URL.createObjectURL(new Blob([m],{type:\"text/javascript\"}))}catch(v){}const w=\"Failed to create Worker. Fallback to execute module in main thread\";async function k(){if(!e(\"esri-workers\"))return h(new f);let r;if(p)try{r=new Worker(p)}catch(v){d.warn(w,event),r=new f}else d.warn(w,event),r=new f;return h(r)}async function h(e){return new Promise((r=>{function t(s){const a=n(s);if(a)switch(a.type){case g:b(e);break;case c:e.removeEventListener(\"message\",t),e.removeEventListener(\"error\",o),r(e)}}function o(r){r.preventDefault(),e.removeEventListener(\"message\",t),e.removeEventListener(\"error\",o),d.warn(\"Failed to create Worker. Fallback to execute module in main thread\",r),(e=new f).addEventListener(\"message\",t),e.addEventListener(\"error\",o)}e.addEventListener(\"message\",t),e.addEventListener(\"error\",o)}))}function b(t){let n;if(null!=r.default){const e={...r};delete e.default,n=JSON.parse(JSON.stringify(e))}else n=JSON.parse(JSON.stringify(r));n.assetsPath=o(n.assetsPath),n.locale=s(),n.has={\"csp-restrictions\":e(\"csp-restrictions\"),\"esri-2d-debug\":!1,\"esri-2d-update-debug\":e(\"esri-2d-update-debug\"),\"esri-2d-query-centroid-enabled\":e(\"esri-2d-query-centroid-enabled\"),\"esri-atomics\":e(\"esri-atomics\"),\"esri-shared-array-buffer\":e(\"esri-shared-array-buffer\"),\"esri-tiles-debug\":e(\"esri-tiles-debug\"),\"esri-workers-arraybuffer-transfer\":e(\"esri-workers-arraybuffer-transfer\"),\"host-webworker\":1},n.workers.loaderUrl&&(n.workers.loaderUrl=o(n.workers.loaderUrl)),n.workers.workerPath?n.workers.workerPath=o(n.workers.workerPath):n.workers.workerPath=o(a(\"esri/core/workers/RemoteClient.js\"));const i=r.workers.loaderConfig,f=l({baseUrl:null==i?void 0:i.baseUrl,locale:s(),has:{\"csp-restrictions\":e(\"csp-restrictions\"),\"dojo-test-sniff\":0,\"host-webworker\":1,...null==i?void 0:i.has},map:{...null==i?void 0:i.map},paths:{...null==i?void 0:i.paths},packages:(null==i?void 0:i.packages)||[]});t.postMessage({type:u,configure:{esriConfig:n,loaderConfig:f}})}export{k as createWorker};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../Logger.js\";import t from\"../Error.js\";import{onAbortOrThrow as o,createAbortController as s,isPromiseLike as r,isAbortError as n}from\"../promiseUtils.js\";import{workerMessages as a}from\"../../kernel.js\";import{newJobId as i,receiveMessage as l,toInvokeError as d,postMessage as h,MessageType as c}from\"./utils.js\";import{createWorker as p}from\"./workerFactory.js\";const b=e.getLogger(\"esri.core.workers\"),{ABORT:m,INVOKE:_,OPEN:u,OPENED:g,RESPONSE:j}=c;class f{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener(\"message\",this._onMessage.bind(this)),e.addEventListener(\"error\",(e=>{e.preventDefault(),b.error(e)}))}static async create(e){const t=await p();return new f(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:s}=t,r=i();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:o(s,(()=>{this._outJobs.delete(r),this._post({type:m,jobId:r})}))};this._outJobs.set(r,a),this._post({type:u,jobId:r,modulePath:e})}))}_onMessage(e){const t=l(e);if(t)switch(t.type){case g:this._onOpenedMessage(t);break;case j:this._onResponseMessage(t);break;case m:this._onAbortMessage(t);break;case _:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o))}_onInvokeMessage(e){const{methodName:t,jobId:o,data:i,abortable:l}=e,h=l?s():null,c=this._inJobs,p=a[t];let b;try{if(\"function\"!=typeof p)throw new TypeError(`${t} is not a function`);b=p.call(null,i,{signal:h?h.signal:null})}catch(m){return void this._post({type:j,jobId:o,error:d(m)})}r(b)?(c.set(o,{controller:h,promise:b}),b.then((e=>{c.has(o)&&(c.delete(o),this._post({type:j,jobId:o},e))}),(e=>{c.has(o)&&(c.delete(o),e||(e={message:\"Error encountered at method\"+t}),n(e)||this._post({type:j,jobId:o,error:d(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:j,jobId:o},b)}_onOpenedMessage(e){var t;const{jobId:o,data:s}=e,r=this._outJobs.get(o);r&&(this._outJobs.delete(o),null==(t=r.abortHandle)||t.remove(),r.resolve(s))}_onResponseMessage(e){var o;const{jobId:s,error:r,data:n}=e,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),null==(o=a.abortHandle)||o.remove(),r?a.reject(t.fromJSON(JSON.parse(r))):a.resolve(n))}_post(e,t,o){return h(this.worker,e,t,o)}}export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../has.js\";import r from\"../Error.js\";import{throwIfAborted as e,createAbortController as o}from\"../promiseUtils.js\";import n from\"./RemoteClient.js\";export{default as RemoteClient}from\"./RemoteClient.js\";import i from\"./Connection.js\";export{default as Connection}from\"./Connection.js\";import s from\"./WorkerOwner.js\";let a=t(\"esri-workers-debug\")?1:t(\"host-browser\")?navigator.hardwareConcurrency-1:0;a||(a=t(\"safari\")&&t(\"mac\")||t(\"trident\")?7:2);let l=0;const c=[];function m(){g()}function f(t,r){return u(t,{client:r})}async function u(t,r){const e=new i;return await e.open(t,r),e}async function p(o,i={}){if(\"string\"!=typeof o)throw new r(\"workers:undefined-module\",\"modulePath is missing\");let s=i.strategy||\"distributed\";if(t(\"host-webworker\")&&!t(\"esri-workers\")&&(s=\"local\"),\"local\"===s){let t=await n.loadWorker(o);t||(t=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\no)),e(i.signal);const r=i.client||t;return u([n.connect(t)],{...i,client:r})}if(await g(),e(i.signal),\"dedicated\"===s){const t=l++%a;return u([await c[t].open(o,i)],i)}if(i.maxNumWorkers&&i.maxNumWorkers>0){const t=Math.min(i.maxNumWorkers,a);if(t<a){const r=new Array(t);for(let e=0;e<t;++e){const t=l++%a;r[e]=c[t].open(o,i)}return u(r,i)}}return u(c.map((t=>t.open(o,i))),i)}function w(){h&&(d.abort(),h=null);for(let t=0;t<c.length;t++)c[t]&&c[t].terminate();c.length=0}let d,h=null;async function g(){if(h)return h;d=o();const t=[];for(let r=0;r<a;r++){const e=s.create(r).then((t=>(c[r]=t,t)));t.push(e)}return h=Promise.all(t),h}export{m as initialize,p as open,f as openWithPorts,w as terminate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as t,createAbortError as s}from\"../../core/promiseUtils.js\";class e{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(t,s){return new Promise(((e,n)=>this._tasks.push(new r(e,n,t,s))))}unshift(t,s){return new Promise(((e,n)=>this._tasks.unshift(new r(e,n,t,s))))}process(){if(0===this._tasks.length)return!1;const s=this._tasks.shift();try{t(s.signal);const e=s.callback();e&&\"object\"==typeof e&&\"then\"in e&&\"function\"==typeof e.then?e.then(s.resolve,s.reject):s.resolve(e)}catch(e){s.reject(e)}return!0}cancelAll(){const t=s();for(const s of this._tasks)s.reject(t);this._tasks.length=0}}class r{constructor(t,s,e,r){this.resolve=t,this.reject=s,this.callback=e,this.signal=r}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import e from\"../../core/Accessor.js\";let t=class extends e{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1}};r([o()],t.prototype,\"SCHEDULER_LOG_SLOW_TASKS\",void 0),t=r([s(\"esri.views.support.DebugFlags\")],t);const p=new t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isNone as t}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/PerformanceSampler.js\";import n from\"../../core/PooledArray.js\";import{when as u}from\"../../core/promiseUtils.js\";import o from\"../../core/Accessor.js\";import{init as h}from\"../../core/watchUtils.js\";import _ from\"../../layers/support/PromiseQueue.js\";import d from\"./debugFlags.js\";const l=s.getLogger(\"esri.views.support.Scheduler\");function E(e){return new L.Scheduler({nowFunc:e})}var c;!function(e){e.REMOTE_CLIENT=\"worker messages\",e.SLIDE=\"slide\",e.STAGE=\"stage\",e.STREAM_DATA_LOADER=\"stream loader\",e.ELEVATION_QUERY=\"elevation query\",e.TERRAIN_SURFACE=\"terrain\",e.SURFACE_GEOMETRY_UPDATES=\"surface geometry updates\",e.GRAPHICS_CORE=\"Graphics3D\",e.I3S_CONTROLLER=\"I3S\",e.POINT_CLOUD_LAYER=\"point cloud\",e.FEATURE_TILE_FETCHER=\"feature fetcher\",e.LABELER=\"labeler\",e.GRAPHICS_DECONFLICTOR=\"graphics deconflictor\",e.FILTER_VISIBILITY=\"Graphics3D filter visibility\",e.FEATURE_QUERY_ENGINE=\"feature query\",e.SCALE_VISIBILITY=\"Graphics3D scale visibility\",e.FRUSTUM_VISIBILITY=\"Graphics3D frustum visibility\",e.POINT_OF_INTEREST_FREQUENT=\"POI frequent\",e.POINT_OF_INTEREST_INFREQUENT=\"POI infrequent\",e.FEATURE_TILE_TREE=\"feature tile tree\",e.FEATURE_TILE_TREE_ACTIVE=\"fast feature tile tree\",e.ELEVATION_ALIGNMENT=\"elevation alignment\",e.TEXT_TEXTURE_ATLAS=\"text texture atlas\",e.TEXTURE_UNLOAD=\"texture unload\",e.OVERLAY_MANAGER=\"overlay manager\",e.LINE_OF_SIGHT_TOOL=\"line of sight tool\",e.LINE_OF_SIGHT_TOOL_INTERACTIVE=\"interactive line of sight tool\",e.ELEVATION_PROFILE=\"elevation profile\",e[e.TEST_PRIO=1]=\"TEST_PRIO\"}(c||(c={}));const T=0,p={[c.REMOTE_CLIENT]:T,[c.SLIDE]:T,[c.STREAM_DATA_LOADER]:T,[c.ELEVATION_QUERY]:T,[c.STAGE]:1,[c.TERRAIN_SURFACE]:1,[c.SURFACE_GEOMETRY_UPDATES]:1,[c.GRAPHICS_CORE]:2,[c.I3S_CONTROLLER]:2,[c.POINT_CLOUD_LAYER]:2,[c.FEATURE_TILE_FETCHER]:2,[c.LABELER]:8,[c.GRAPHICS_DECONFLICTOR]:4,[c.FILTER_VISIBILITY]:4,[c.FEATURE_QUERY_ENGINE]:8,[c.SCALE_VISIBILITY]:4,[c.FRUSTUM_VISIBILITY]:4,[c.POINT_OF_INTEREST_FREQUENT]:6,[c.POINT_OF_INTEREST_INFREQUENT]:30,[c.FEATURE_TILE_TREE]:16,[c.FEATURE_TILE_TREE_ACTIVE]:T,[c.ELEVATION_ALIGNMENT]:12,[c.TEXT_TEXTURE_ATLAS]:12,[c.TEXTURE_UNLOAD]:12,[c.OVERLAY_MANAGER]:12,[c.LINE_OF_SIGHT_TOOL]:16,[c.LINE_OF_SIGHT_TOOL_INTERACTIVE]:T};function g(e){return e in p?p[e]:\"number\"==typeof e?e:1}const m=6.5,I=1,R=30,A=1e3/30,f=100,S=.9;var L,b;!function(s){let u=class extends o{constructor(e){super(e),this.updating=!0,this.performanceInfo={total:new a(\"total\"),tasks:new Array},this._budget=null,this._state=1,this._tasks=new n,this._runQueue=new n,this._load=0,this._idleStateCallbacks=new n,this._idleUpdatesStartFired=!1,this._maxReschedule=F,this._forceTask=!1,this._debug=!1,this._debugHandle=h(d,\"SCHEDULER_LOG_SLOW_TASKS\",(e=>this._debug=e)),this._budget=new p(e.nowFunc),y.length=0;for(const t in c)N.set(c[t],this.performanceInfo.tasks.length),this.performanceInfo.tasks.push(new a(c[t])),y.push(0);let s;const r=this;this._test={get state(){return t(s)?r._state:s},set state(e){s=e},FRAME_SAFETY_BUDGET:m,INTERACTING_BUDGET:A,IDLE_BUDGET:f,get budget(){return r._budget.budget},usedBudget:0,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove()}registerTask(e,t,s){const r=g(e),i=new E(this,e,t,s,r);return this._tasks.push(i),i}registerIdleStateCallbacks(e,t){const s={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(s),2===this.state&&this._idleUpdatesStartFired&&s.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(e){r._idleUpdatesStartFired&&(s.idleEnd(),2===r._state&&e()),s.idleBegin=e},set idleEnd(e){s.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return t(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=m,s=e.frameDuration,r=I;switch(this.state){case 2:t=0,s=Math.max(f,e.frameDuration),r=R;break;case 1:s=Math.max(A,e.frameDuration)}return s-=e.elapsedFrameTime+t,2!==this.state&&s<I&&!this._forceTask?(this._forceTask=!0,!1):(s=Math.max(s,r),this._budget.reset(s,this.state),this._maxReschedule=F,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return b.SCHEDULED;let t=b.IDLE;return this._tasks.forAll((s=>{s.name===e&&s.needsUpdate&&(s.schedulePriority<=1?t=b.READY:t!==b.READY&&(t=b.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((s=>{s.name===e&&(t+=s.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t=\"\";return e.forEach(((e,s)=>{t+=e>1?` ${e}x ${s}`:` ${s}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=this._load*S+e*(1-S)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.priority,!1))),this._tasks.forAll((e=>{e.priority===T&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((s=>{if(s.needsUpdate&&0!==s.schedulePriority&&s.priority!==T)switch(e=!0,t=Math.max(t,s.priority),s.schedulePriority){case 1:s.schedulePriority=0,this._runQueue.push(s);break;default:--s.schedulePriority}})),!e)return this.updating=!1,!1;this._maxReschedule===F&&(this._maxReschedule=t),--this._maxReschedule}return this.updating=!0,!0}_run(){const e=this._budget.now();for(let s=0;s<y.length;++s)y[s]=0;do{for(;this._runQueue.length>0;){const s=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.update(this._budget)}catch(t){l.error(`Exception in task \"${r.name}\"`,t)}r.schedulePriority=r.priority;const i=this._budget.now()-s;if(r.runtime+=i,y[N.get(r.task)]+=i,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log(\"Task\",r.name,\"used\",this._budget.elapsed,\"of max\",this._budget.budget,\"ms\"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(y,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(y,this._budget.now()-e)}_recordFrameTaskTimes(e,t){for(let s=0;s<e.length;++s)this.performanceInfo.tasks[s].record(e[s]);this.performanceInfo.total.record(t)}get test(){return this._test}};e([r()],u.prototype,\"updating\",void 0),e([r()],u.prototype,\"nowFunc\",void 0),u=e([i(\"esri.views.support.Scheduler\")],u),s.Scheduler=u;let E=class extends o{constructor(e,t,s,r,i){super({}),this._scheduler=e,this.name=t,this.update=s,this._needsUpdateCB=r,this._priority=i,this.runtime=0,this._queue=new _,this.updating=!1,this.schedulePriority=this._priority}normalizeCtorArgs(){return{}}remove(){this.processQueue(U),this._scheduler.removeTask(this),this.schedule=k.schedule,this.reschedule=k.reschedule}get priority(){return this._priority}setPriority(e){this.name=e;const t=g(e);this._priority!==T&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}get task(){return this.name}set task(e){this.setPriority(e)}get needsUpdate(){return this.updating||this._needsUpdateCB()}schedule(e,t){return this.updating=!0,this._queue.push(e,t)}reschedule(e,t){return this.updating=!0,this._queue.unshift(e,t)}processQueue(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}};e([r()],E.prototype,\"updating\",void 0),E=e([i(\"esri.views.support.SchedulerTask\")],E);class p{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}s.Budget=p}(L||(L={})),function(e){e.SCHEDULED=\"s\",e.READY=\"r\",e.WAITING=\"w\",e.IDLE=\"i\"}(b||(b={}));const U=(()=>{const e=new L.Budget((()=>performance.now()));return e.enabled=!1,e})();class O{remove(){}processQueue(){}schedule(e){return u(e())}reschedule(e){return u(e())}}const k=new O,F=Number.MAX_SAFE_INTEGER,N=new Map,y=new Array;export{k as ImmediateTask,c as Task,b as TaskState,g as getTaskPriority,E as newScheduler,U as noBudget,p as taskPriorities};\n"],"sourceRoot":""}