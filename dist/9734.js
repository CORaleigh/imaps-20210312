(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[9734],{66002:(e,t,s)=>{"use strict";s.d(t,{D9:()=>n,yZ:()=>o});var r=s(93533);function o(e,t){const s=t||e.extent,o=e.width,i=(0,r.c9)(s&&s.spatialReference);return s&&o?s.width/o*i*r.hd*96:0}function i(e,t){return e/((0,r.c9)(t)*r.hd*96)}function n(e,t){const s=e.extent,r=e.width,o=i(t,s.spatialReference);return s.clone().expand(o*r/s.width)}},57212:(e,t,s)=>{"use strict";s.d(t,{i:()=>c});var r=s(68055),o=s(56885),i=s(36654),n=s(52411),l=s(66849),a=s(43223);const u=(0,r.se)(n.Z);async function c(e,t,s){t=u(t);const r=(0,l.en)(e),n={...r.query,f:"json",...t.toJSON()},c=t.outSpatialReference,d=(0,o.Ji)(t.geometries[0]),h=(0,l.lA)(n,s);return(0,i.default)(r.path+"/project",h).then((({data:{geometries:e}})=>(0,a.o)(e,d,c)))}},88676:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});const r=new(s(56274).Xn)({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"})},43223:(e,t,s)=>{"use strict";s.d(t,{o:()=>i,F:()=>o});var r=s(56885);function o(e){return{geometryType:(0,r.Ji)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,s){const o=(0,r.q9)(t);return e.map((e=>{const t=o.fromJSON(e);return t.spatialReference=s,t}))}},66849:(e,t,s)=>{"use strict";s.d(t,{lA:()=>o,cv:()=>n,en:()=>i});var r=s(10923);function o(e,t){let s={query:e};return t&&(s={...t,...s},s.query={...s.query,...t.query}),s}function i(e){return"string"==typeof e?(0,r.mN)(e):e}function n(e,t,s){const r={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){r[o]=[];for(let e=0;e<i.length;e++)r[o][e]=n(i[e])}else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(s&&s[o]);r[o]=t?e:JSON.stringify(e)}else r[o]=t?i:JSON.stringify(i);else r[o]=i}return r}},80882:(e,t,s)=>{"use strict";s.d(t,{Bj:()=>g,Df:()=>c,Bf:()=>d,se:()=>h,tR:()=>p,zb:()=>m,aL:()=>y});var r=s(36544),o=s(68055),i=s(10923),n=s(28293),l=s(93776),a=s(22696);const u=r.Z.getLogger("esri.support.basemapUtils");function c(){return{}}function d(e){for(const t in e){const s=e[t];!1===(null==s?void 0:s.destroyed)&&s.destroy(),delete e[t]}}function h(e,t){var s;let r;if("string"==typeof e){if(!(e in l.s)){const t=Object.keys(l.s).map((e=>`"${e}"`)).join(", ");return u.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(r=t[e]),r||(r=a.default.fromId(e),t&&(t[e]=r))}else r=(0,o.se)(a.default,e);return null!=(s=r)&&s.destroyed&&(u.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function p(e){let t=null;const s=_(e),r=!s.baseLayers.length;for(const e in l.s){const o=C(s,b(l.s[e]),{mustMatchReferences:r});if("equal"===o){t=e;break}"base-layers-equal"===o&&(t=e)}return t}function g(e,t){return e===t||"equal"===C(_(e),_(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(y))}function y(e){if(v(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const s=e.sourceNameToSource[t];if(v(null==s?void 0:s.sourceUrl))return!0}return!1}const f=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function v(e){if(!e)return!1;const t=new i.R9((0,i.hF)(e));return f.test(t.authority)}function _(e){return e?!e.loaded&&e.resourceInfo?b(e.resourceInfo.data):{baseLayers:S(e.baseLayers),referenceLayers:S(e.referenceLayers)}:null}function S(e){return(n.Z.isCollection(e)?e.toArray():e).map(w)}function w(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function b(e){return e?{baseLayers:x(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:x(e.baseMapLayers.filter((e=>e.isReference)))}:null}function x(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function C(e,t,s){return null!=e!=(null!=t)?"not-equal":e?R(e.baseLayers,t.baseLayers)?R(e.referenceLayers,t.referenceLayers)?"equal":s.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function R(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!M(e[s],t[s]))return!1;return!0}function M(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?(0,i.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},14443:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(73032)),a=s(95986),u=s(36654),c=s(66849);var d=s(58385),h=s(61106),p=s(52937);let g=class extends d.wq{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],g.prototype,"address",void 0),(0,r._)([(0,i.Cb)({type:Object,json:{write:!0}})],g.prototype,"attributes",void 0),(0,r._)([(0,i.Cb)({type:p.Z,json:{write:!0}})],g.prototype,"extent",void 0),(0,r._)([(0,i.Cb)({type:h.Z,json:{write:!0}})],g.prototype,"location",void 0),(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],g.prototype,"score",void 0),g=(0,r._)([(0,n.j)("esri.tasks.support.AddressCandidate")],g);const m=g;var y=s(28231);function f({data:e}){if(!e)return[];const{candidates:t,spatialReference:s}=e;return t?t.map((e=>{if(!e)return;const{extent:t,location:r}=e,o=!t||function(e){return e&&"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax}(t);return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(r)&&o?(t&&(t.spatialReference=s),r.spatialReference=s,m.fromJSON(e)):void 0})):[]}s(36348);let v=class extends d.wq{constructor(e){super(e),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};(0,r._)([(0,i.Cb)({type:[Object],json:{read:{reader:e=>e&&e.records?e.records.map((e=>e.attributes)):null},write:{writer:(e,t)=>{const s=[];Array.isArray(e)&&e.forEach((e=>{s.push({attributes:e})})),t.addresses={records:s}}}}})],v.prototype,"addresses",void 0),(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],v.prototype,"categories",void 0),(0,r._)([(0,i.Cb)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],v.prototype,"countryCode",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],v.prototype,"locationType",void 0),(0,r._)([(0,i.Cb)({type:l.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],v.prototype,"outSpatialReference",void 0),v=(0,r._)([(0,n.j)("esri.tasks.support.AddressesToLocationsParameters")],v),v.from=(0,o.se)(v);const _=v;function S(e){const{data:t}=e;if(!t)return[];const{locations:s,spatialReference:r}=t;return s?s.map((e=>{const{location:t}=e;return t&&(t.spatialReference=r),m.fromJSON(e)})):[]}let w=class extends d.wq{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"token"},write:{target:"token"}}})],w.prototype,"apiKey",void 0),(0,r._)([(0,i.Cb)({type:h.Z,json:{write:{writer:(e,t)=>{const s=e?e.clone().normalize():null,r=void 0!==s;t.location=r?s:null}}}})],w.prototype,"location",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],w.prototype,"locationType",void 0),(0,r._)([(0,i.Cb)({type:l.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],w.prototype,"outSpatialReference",void 0),w=(0,r._)([(0,n.j)("esri.tasks.support.LocationToAddressParameters")],w),w.from=(0,o.se)(w);const b=w;function x({data:e}){if(!e)return;const{address:t,location:s}=e,r=t&&t.Match_addr||"";return m.fromJSON({address:r,attributes:t||{},location:s,score:100})}let C=class extends d.wq{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};(0,r._)([(0,i.Cb)({type:Boolean,json:{write:!0}})],C.prototype,"isCollection",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],C.prototype,"magicKey",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],C.prototype,"text",void 0),C=(0,r._)([(0,n.j)("esri.tasks.support.SuggestionCandidate")],C);const R=C;var M=s(49561);function I(e){const{data:t}=e;if(!t)return[];const{suggestions:s}=t;return s?s.map((e=>new R(e))):[]}function T(e){return e?{query:{token:e}}:null}let j=class extends a.Z{constructor(e){super(e),this.apiKey=null,this.outSpatialReference=null,this.url=null}addressToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const s={...T(this.apiKey),...this.requestOptions,...t};return async function(e,t,s){t=y.Z.from(t);const r=(0,c.en)(e),{address:o,...i}=t.toJSON(),n={...o,...i,f:"json"},l=(0,c.cv)({...r.query,...n}),a=(0,c.lA)(l,s),d=`${r.path}/findAddressCandidates`;return(0,u.default)(d,a).then(f)}(this.url,e,s)}suggestLocations(e,t){const s={...T(this.apiKey),...this.requestOptions,...t};return async function(e,t,s){const r=(0,c.en)(e),o={...(t=M.Z.from(t)).toJSON(),f:"json"},i=(0,c.cv)({...r.query,...o}),n=(0,c.lA)(i,s),l=`${r.path}/suggest`;return(0,u.default)(l,n).then(I)}(this.url,e,s)}addressesToLocations(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const s={...this.requestOptions,...t};return async function(e,t,s){t=_.from(t);const r=(0,c.en)(e),o={...t.toJSON(),f:"json"},i=(0,c.cv)({...r.query,...o}),n=(0,c.lA)(i,s),l=`${r.path}/geocodeAddresses`;return(0,u.default)(l,n).then(S)}(this.url,e,s)}locationToAddress(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);const s={...T(this.apiKey),...this.requestOptions,...t};return async function(e,t,s){t=b.from(t);const r=(0,c.en)(e),o={...t.toJSON(),f:"json"},i=(0,c.cv)({...r.query,...o}),n=(0,c.lA)(i,s),l=`${r.path}/reverseGeocode`;return(0,u.default)(l,n).then(x)}(this.url,e,s)}};(0,r._)([(0,i.Cb)()],j.prototype,"apiKey",void 0),(0,r._)([(0,i.Cb)({type:l.Z})],j.prototype,"outSpatialReference",void 0),(0,r._)([(0,i.Cb)()],j.prototype,"url",void 0),j=(0,r._)([(0,n.j)("esri.tasks.Locator")],j);const L=j},61246:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var r=s(56274),o=s(56885);const i=new r.Xn({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function n(e){const{geometries:t,deviationUnit:s,maxDeviation:r}=e.toJSON(),n={maxDeviation:r};return t&&t.length&&(n.geometries=JSON.stringify({geometryType:(0,o.Ji)(t[0]),geometries:t}),n.sr=JSON.stringify(t[0].spatialReference)),i.write(s,n,"deviationUnit"),n}},20775:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});const r=new(s(56274).Xn)({preserveShape:"preserve-shape"});function o(e){const{polylines:t,lengthUnit:s,geodesic:o,calculationType:i}=e.toJSON(),n={};n.polylines=JSON.stringify(t);const l=e.polylines[0].spatialReference;return n.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON()),s&&(n.lengthUnit=s),o&&(n.geodesic=o),i&&(n.calculationType=r.toJSON(i)),n}},12923:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var r=s(56274),o=s(56885);const i=new r.Xn({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),n=new r.Xn({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function l(e){const{geometries:t,bevelRatio:s,offsetDistance:r,offsetHow:l,offsetUnit:a}=e.toJSON(),u={bevelRatio:s,offsetDistance:r};return t&&t.length&&(u.geometries=JSON.stringify({geometryType:(0,o.Ji)(t[0]),geometries:t}),u.sr=JSON.stringify(t[0].spatialReference)),l&&(u.offsetHow=i.toJSON(l)),a&&(u.offsetUnit=n.toJSON(a)),u}},39943:(e,t,s)=>{"use strict";s.d(t,{c:()=>n});var r=s(56274),o=s(56885);const i=new r.Xn({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function n(e){const{geometries1:t,geometries2:s,relation:r,relationParameter:n}=e.toJSON(),l={};if(t&&t.length){l.geometries1=JSON.stringify({geometryType:(0,o.Ji)(t[0]),geometries:t});const e=t[0].spatialReference;l.sr=e.wkid?e.wkid:JSON.stringify(e)}return s&&s.length>0&&(l.geometries2=JSON.stringify({geometryType:(0,o.Ji)(s[0]),geometries:s})),r&&(l.relation=i.toJSON(r)),n&&(l.relationParam=n),l}},41673:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});const r=new(s(56274).Xn)({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function o(e){const{extendHow:t,polylines:s,trimExtendTo:o}=e.toJSON(),i={};return i.extendHow=r.toJSON(t),s&&s.length&&(i.polylines=JSON.stringify(s),i.sr=JSON.stringify(s[0].spatialReference)),o&&(i.trimExtendTo=JSON.stringify(o)),i}},28231:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(73032),u=s(61106),c=s(52937);s(36348);let d=class extends l.wq{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};(0,r._)([(0,i.Cb)({type:Object,json:{write:!0}})],d.prototype,"address",void 0),(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"token"},write:{target:"token"}}})],d.prototype,"apiKey",void 0),(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],d.prototype,"categories",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],d.prototype,"countryCode",void 0),(0,r._)([(0,i.Cb)({type:Boolean,json:{write:!0}})],d.prototype,"forStorage",void 0),(0,r._)([(0,i.Cb)({type:u.Z,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],d.prototype,"location",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],d.prototype,"locationType",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],d.prototype,"magicKey",void 0),(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],d.prototype,"maxLocations",void 0),(0,r._)([(0,i.Cb)({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],d.prototype,"outFields",void 0),(0,r._)([(0,i.Cb)({type:a.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),(0,r._)([(0,i.Cb)({type:c.Z,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=s}}}})],d.prototype,"searchExtent",void 0),d=(0,r._)([(0,n.j)("esri.tasks.support.AddressToLocationsParameters")],d),d.from=(0,o.se)(d);const h=d},65979:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(56885);let u=class extends l.wq{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],u.prototype,"deviationUnit",void 0),(0,r._)([(0,i.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,a.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],u.prototype,"geometries",void 0),(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],u.prototype,"maxDeviation",void 0),u=(0,r._)([(0,n.j)("esri.tasks.support.GeneralizeParameters")],u),u.from=(0,o.se)(u);const c=u},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(93833),u=s(56885);s(36348);let c=class extends l.wq{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],c.prototype,"calculationType",void 0),(0,r._)([(0,i.Cb)({type:Boolean,json:{write:!0}})],c.prototype,"geodesic",void 0),(0,r._)([(0,i.Cb)({json:{write:!0}})],c.prototype,"lengthUnit",void 0),(0,r._)([(0,i.Cb)({type:[a.Z],json:{read:{reader:e=>e?e.map((e=>(0,u.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],c.prototype,"polylines",void 0),c=(0,r._)([(0,n.j)("esri.tasks.support.LengthsParameters")],c),c.from=(0,o.se)(c);const d=c},74911:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(56885);let u=class extends l.wq{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],u.prototype,"bevelRatio",void 0),(0,r._)([(0,i.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,a.im)(e))):null},write:{writer:(e,t)=>{t.geometries=e.map((e=>e.toJSON()))}}}})],u.prototype,"geometries",void 0),(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],u.prototype,"offsetDistance",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],u.prototype,"offsetHow",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],u.prototype,"offsetUnit",void 0),u=(0,r._)([(0,n.j)("esri.tasks.support.OffsetParameters")],u),u.from=(0,o.se)(u);const c=u},52411:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(56140),o=(s(95830),s(36544),s(68055),s(79881)),i=s(87566),n=(s(10923),s(57002),s(86035),s(58385)),l=s(56885);let a=class extends n.wq{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],s={};return s.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),s.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),s.geometries=JSON.stringify({geometryType:(0,l.Ji)(t),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(s.transformForward=this.transformForward),s}};(0,r._)([(0,o.Cb)()],a.prototype,"geometries",void 0),(0,r._)([(0,o.Cb)({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"transformation",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"transformForward",void 0),a=(0,r._)([(0,i.j)("esri.tasks.support.ProjectParameters")],a);const u=a},92947:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(56885);let u=class extends l.wq{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};(0,r._)([(0,i.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,a.im)(e))):null},write:{writer:(e,t)=>{t.geometries1=e.map((e=>e.toJSON()))}}}})],u.prototype,"geometries1",void 0),(0,r._)([(0,i.Cb)({json:{read:{reader:e=>e?e.map((e=>(0,a.im)(e))):null},write:{writer:(e,t)=>{t.geometries2=e.map((e=>e.toJSON()))}}}})],u.prototype,"geometries2",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],u.prototype,"relation",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],u.prototype,"relationParameter",void 0),u=(0,r._)([(0,n.j)("esri.tasks.support.RelationParameters")],u),u.from=(0,o.se)(u);const c=u},49561:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(73032),u=s(61106),c=s(52937);s(36348);let d=class extends l.wq{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"token"},write:{target:"token"}}})],d.prototype,"apiKey",void 0),(0,r._)([(0,i.Cb)({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],d.prototype,"categories",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],d.prototype,"countryCode",void 0),(0,r._)([(0,i.Cb)({type:u.Z,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],d.prototype,"location",void 0),(0,r._)([(0,i.Cb)({type:Number,json:{write:!0}})],d.prototype,"maxSuggestions",void 0),(0,r._)([(0,i.Cb)({type:a.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0),(0,r._)([(0,i.Cb)({type:c.Z,json:{write:{writer:(e,t)=>{const s=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(s)}}}})],d.prototype,"searchExtent",void 0),(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],d.prototype,"text",void 0),d=(0,r._)([(0,n.j)("esri.tasks.support.SuggestLocationsParameters")],d),d.from=(0,o.se)(d);const h=d},23986:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(56140),o=(s(95830),s(36544),s(68055)),i=s(79881),n=s(87566),l=(s(10923),s(57002),s(86035),s(58385)),a=s(93833),u=s(56885);s(36348);let c=class extends l.wq{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};(0,r._)([(0,i.Cb)({type:String,json:{write:!0}})],c.prototype,"extendHow",void 0),(0,r._)([(0,i.Cb)({type:[a.Z],json:{read:{reader:e=>e?e.map((e=>(0,u.im)(e))):null},write:{writer:(e,t)=>{t.polylines=e.map((e=>e.toJSON()))}}}})],c.prototype,"polylines",void 0),(0,r._)([(0,i.Cb)({json:{read:{reader:e=>e?(0,u.im)(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],c.prototype,"trimExtendTo",void 0),c=(0,r._)([(0,n.j)("esri.tasks.support.TrimExtendParameters")],c),c.from=(0,o.se)(c);const d=c},79734:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Et});var r=s(56140),o=s(95830),i=s(88263),n=s(36544),l=(s(68055),s(79881)),a=s(51894),u=s(87566),c=(s(10923),s(57002),s(86035),s(10180)),d=s(39105),h=s(61398),p=(s(89771),s(59691)),g=s(80621),m=s(40450),y=s(9200),f=s(30818),v=s(19401),_=s(90806),S=s(59472),w=s(32656),b=s(82677),x=s(73032),C=s(61106),R=s(35470),M=s(28293),I=s(3766),T=s(58484),j=s(48142),L=s(14071),N=s(12973),k=s(32797),E=s(50764),F=s(5674),O=s(88083),Z=s(44190),B=s(15988),A=s(69829),P=s(4338),G=s(78745),J=s(82550),D=(s(30927),s(22696)),$=s(80882);const z={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};function q(e,t=z){for(const s in t)if(t[s].indexOf(e)>-1)return s}function U(e,t,s=!0){let r=null;return"string"==typeof e&&t.indexOf(e)>-1?r=e:e instanceof D.default&&(r=(0,$.tR)(e)),s?r||"gray":r}const K=class{constructor(e){this.name=null,this.label=null,this.description=null,this.supportedBasemaps=null,this.basemapGroups=null,this.schemes=null;const{name:t,label:s,description:r,schemes:o}=e;this.name=t,this.label=s,this.description=r,this.schemes=o;const i=e.basemapGroups||z;let n=[];if(i)for(const e in i)n=n.concat(i[e]);this.supportedBasemaps=n,this.basemapGroups=i}isBasemapSupported(e){const t=U(e,this.supportedBasemaps);return!!(t&&this.supportedBasemaps.indexOf(t)>-1)}getRawSchemes(e){const{basemapId:t,basemapTheme:s}=function(e,t,s){let r=null,o=null;if(t&&(r=U(t,e,!1),r)){const e=q(r);(0,S.pC)(e)&&(o=e)}return!r&&s&&(r="dark"===s?"dark-gray":"gray",o=s),r||o||(r="gray",o="light"),{basemapId:r,basemapTheme:o}}(this.supportedBasemaps,e.basemap,e.basemapTheme);let r=s;if(t){const e=q(t,this.basemapGroups);(0,S.pC)(e)&&(r=e)}let o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");const i=this.schemes[o]||this.schemes.default;return{schemesInfo:(0,J.d9)(i[r]),basemapId:t,basemapTheme:s}}};var H=s(96071);const W=["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],V=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"];[].concat(W).concat(V);function X(e,t){return Math.ceil(function(e){const t=e.width,s=e.height;let r=e.pixelSizeAt(e.toMap((0,H.vW)(.5*t,.5*s),{exclude:[]}));if(r<=0&&(r=e.pixelSizeAt(e.toMap((0,H.vW)(.5*t,.95*s),{exclude:[]})),r<=0)){const t=e.camera.position.clone();t.z=0,r=2*e.pixelSizeAt(t)}return r}(t)*(0,H.F2)((0,H.t_)(e)))}const Q=function(e){const t=e.themeDictionary,s=new Map;for(const e in t){const r=t[e];s.set(e,new K(r))}return s}({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});function Y(e){const t=function(e){const t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:Q.get("default")});if(!t)return;const{schemesInfo:s,basemapId:r,basemapTheme:o}=t;return{primaryScheme:ee(e,s.primary),secondarySchemes:s.secondary.map((t=>ee(e,t))).filter(Boolean),basemapId:r,basemapTheme:o}}function ee(e,t){const s="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=t;return function(e,t){return{color:new G.default(e.color),outline:{color:new G.default(e.outline.color),width:e.outline.width},size:t?X(e.size,t):e.size,opacity:1}}({color:e.color,outline:{...e.outline},size:e.size},s)}case"polyline":{const e=t;return function(e,t){return{color:new G.default(e.color),width:t?X(e.width,t):e.width,opacity:1}}({color:e.color,width:e.width},s)}case"polygon":{const e=t;return function(e,t){return{color:new G.default(e.color),outline:{color:new G.default(e.outline.color),width:e.outline.width},size:t?X(e.size,t):e.size,opacity:e.opacity}}({size:e.size,color:e.color,outline:{...e.outline},opacity:e.opacity},s)}case"mesh":{const e=t;return function(e){return{color:new G.default(e.color),opacity:e.opacity}}({color:e.color,opacity:e.opacity})}}}Object.freeze({__proto__:null,getThemes:function(e){return function(e,t){const s=[];return e.forEach((e=>{e.isBasemapSupported(t)&&s.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),s}(Q,e)},getSchemes:Y,cloneScheme:function(e){if(!e)return;const t={...e};return t.color&&(t.color=new G.default(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new G.default(t.outline.color),width:t.outline.width}),t}});var te=s(35769),se=s(2041),re=s(91731),oe=s(53817),ie=s(28231),ne=s(49561);const le="Single Line Input";function ae(e,t){return e.location?function(e,t){const{source:s,spatialReference:r,location:o,sourceIndex:i,view:n}=e,{locator:l,zoomScale:a,defaultZoomScale:u}=s,c=n&&n.scale,d=t&&t.signal;return r&&(l.outSpatialReference=r),l.locationToAddress({location:o},{signal:d}).then((e=>de([e],{sourceIndex:i,scale:c,view:n,zoomScale:a,defaultZoomScale:u})))}(e,t):function(e,t){const{source:s,suggestResult:r,spatialReference:o,view:i,maxResults:n,sourceIndex:l}=e,a=s&&s.zoomScale,u=s&&s.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);const c=!r.key&&s.prefix?s.prefix:"",d=!r.key&&s.suffix?s.suffix:"",h=`${c}${r.text}${d}`,p=new ie.Z,{locator:g}=s,m=i&&i.scale,y=ce(s,i),f=t&&t.signal;if(!g)return Promise.resolve(null);s.categories&&(p.categories=s.categories),s.locationType&&(p.locationType=s.locationType),o&&(g.outSpatialReference=o);const v=i&&i.get("extent.center");v&&(p.location=v),p.maxLocations=n,y&&(p.searchExtent=(0,S.Wg)(y)),s.countryCode&&(p.countryCode=s.countryCode);const{key:_}=r;return _&&(p.magicKey=_),p.address={},p.address[s.singleLineFieldName||le]=h,s.outFields&&(p.outFields=s.outFields),g.addressToLocations(p,{signal:f}).then((e=>de(e,{key:_,scale:m,sourceIndex:l,view:i,zoomScale:a,defaultZoomScale:u})))}(e,t)}function ue(e,t){const{source:s,spatialReference:r,view:o,suggestTerm:i,maxSuggestions:n,sourceIndex:l}=e,a=new ne.Z,{locator:u}=s,c=ce(s,o),d=t&&t.signal;if(!u)return Promise.resolve(null);s.categories&&(a.categories=s.categories),u.outSpatialReference=r;const h=o&&o.get("extent.center");if(h&&(a.location=h),!i.trim())return Promise.resolve(null);const{prefix:p="",suffix:g=""}=s,m=`${p}${i}${g}`;return a.text=m,c&&(a.searchExtent=(0,S.Wg)(c)),a.maxSuggestions=n,s.countryCode&&(a.countryCode=s.countryCode),u.suggestLocations(a,{signal:d}).then((e=>function(e,t){return e.map((e=>function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)))}(e,l)))}function ce(e,t){const{filter:s,withinViewEnabled:r}=e,o=t&&t.scale,i=t&&t.extent,n=s&&s.geometry;return(0,se.vb)(n,t,o)||(r&&i?i:void 0)}function de(e,t){return e.map((e=>function(e,t){const{key:s,scale:r,sourceIndex:o,view:i,zoomScale:n,defaultZoomScale:l}=t,{attributes:a,extent:u,location:c,address:d}=e,h=new B.default({geometry:c,attributes:a}),p=u||c,g=(0,se.vb)(p,i,r),m="number"==typeof n?(0,se.LT)(g,i,n):"number"==typeof l&&"point"===p.type?(0,se.LT)(g,i,l):g,y=c?`${c.x},${c.y}`:"",f=d||y,v=h.clone();return(0,S.pC)(m)&&(v.geometry=oe.Z.fromExtent(m)),{extent:m,feature:h,target:v,key:s,name:f,sourceIndex:o}}(e,t)))}var he,pe=s(30590),ge=s(60538),me=s(14443);let ye=he=class extends te.Z{constructor(){super(...arguments),this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locator=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.zoomScale=null,this.getResults=(e,t)=>ae({source:this,...e},t),this.getSuggestions=(e,t)=>ue({source:this,...e},t)}readLocator(e,t){const{url:s}=t;return s?new me.default({url:s}):null}writeLocator(e,t){t.url=e?e.url:null}clone(){return new he({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,J.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,J.d9)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};(0,r._)([(0,l.Cb)()],ye.prototype,"categories",void 0),(0,r._)([(0,l.Cb)()],ye.prototype,"countryCode",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],ye.prototype,"defaultZoomScale",void 0),(0,r._)([(0,l.Cb)({type:me.default})],ye.prototype,"locator",void 0),(0,r._)([(0,pe.r)("locator",["url"])],ye.prototype,"readLocator",null),(0,r._)([(0,ge.c)("locator")],ye.prototype,"writeLocator",null),(0,r._)([(0,l.Cb)()],ye.prototype,"locationType",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],ye.prototype,"name",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],ye.prototype,"placeholder",void 0),(0,r._)([(0,l.Cb)()],ye.prototype,"searchTemplate",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],ye.prototype,"singleLineFieldName",void 0),(0,r._)([(0,l.Cb)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],ye.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],ye.prototype,"zoomScale",void 0),ye=he=(0,r._)([(0,u.j)("esri.widgets.Search.LocatorSearchSource")],ye);const fe=ye;var ve=s(49322);function _e(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const Se="esri.widgets.Search.SearchViewModel",we=n.Z.getLogger(Se),be="highlight",xe=M.Z.ofType({key:e=>e.layer?"layer":"locator",base:te.Z,typeMap:{layer:re.default,locator:fe}}),Ce=x.Z.WGS84,Re=/<(?:.|\s)*?>/g,Me=-1;let Ie=class extends((0,P._)(R.Z.EventedMixin(b.default))){constructor(e){super(e),this._handles=new p.Z,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new xe,this.defaultSymbol=new E.Z({url:(0,N.V)((0,o.Z)("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=1,this.popupEnabled=!0,this.popupTemplate=null,this.portal=k.Z.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new xe,this.suggestionDelay=150,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const e=await(0,L.ME)("esri/widgets/Search/t9n/Search");this.messages=e,this.defaultPopupTemplate=new T.default({title:e.searchResult,content:"{Match_addr}"})};e(),this._handles.add([(0,g.on)(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),(0,g.init)(this,["includeDefaultSources","view","portal"],(()=>this._update())),(0,I.qe)(e)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?Me:0}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:s}=this,r="function"==typeof s?s.call(null,{sources:e,defaultSources:t}):s?t.concat(e):e,o=this._get("allSources")||new xe;return o.removeAll(),o.addMany(r.filter(Boolean)),o}get locationEnabled(){return this._get("locationEnabled")||(0,ve.Zh)()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=(0,ve.Zh)();if(e&&!t){const e=new w.Z("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});we.error(e)}this._override("locationEnabled",e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:s}=this;if(t===Me)return s;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),r=this.when().then((()=>this._getResultsFromSources(s,t).then((e=>{const t={activeSourceIndex:this.activeSourceIndex,searchTerm:s.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(t,e,s);const r=this._getFirstResult(t.results),o=(s.location&&r?r.name:s.text).replace(Re,"");return this._set("searchTerm",o),(s.key&&"number"==typeof s.sourceIndex||s.location)&&this._set("selectedSuggestion",s),this._set("results",t.results),this._set("resultCount",t.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",t),this._selectFirstResult(r).then((()=>t))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=r,this.notifyChange("state"),r}searchNearby(e){if(!this.locationEnabled){const e=new w.Z("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return we.error(e),Promise.reject(e)}const t=(0,ve.nu)().then((t=>(0,ve.C2)({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,this.notifyChange("state"),t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new w.Z("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return we.error(t),Promise.reject(t)}const{view:t}=this,s=_e(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.getItemAt(s);if(!r){const e=new w.Z("select:missing-source","Cannot select without a source.",{source:r});return we.error(e),Promise.reject(e)}const o=r instanceof re.default?this._getLayerSourcePopupTemplate(r):r.popupTemplate,i=r.resultSymbol||this._getDefaultSymbol(e),n=_e(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,l=_e(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,a=_e(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,u=a?o||this.popupTemplate||this.defaultPopupTemplate:null,{feature:c}=e;if(!c){const e=new w.Z("select:missing-feature","Cannot select without a feature.",{feature:c});return we.error(e),Promise.reject(e)}const{attributes:h,geometry:p,layer:g,sourceLayer:m}=c,y=(0,se.$J)(p),f={layerViewQuery:this._getLayerView(c),elevationQuery:t&&(0,S.pC)(y)?(0,se.RH)(y,t).catch((()=>y)):Promise.resolve(y)};return(0,d.eachAlways)(f).then((o=>{const d=o.layerViewQuery.value,y=o.elevationQuery.value;i instanceof Z.default&&(i.text=e.name);const f=t&&l?e.target||e.extent:null;return((0,S.pC)(f)?this._goToSearchResult(f):Promise.resolve()).then((()=>{var o;const l=d?c:new B.default({geometry:p,symbol:i,attributes:h,layer:g,sourceLayer:m,popupTemplate:u}),f=a&&(null==(o=this.view)?void 0:o.popup),v=f&&l.getEffectivePopupTemplate(f.defaultPopupTemplateEnabled);return v&&t.popup.open({features:[l],location:y}),d&&(0,A.tl)(d)&&!v&&this._highlightFeature({graphic:l,layerView:d}),!d&&n&&t&&t.graphics.push(l),this._set("selectedResult",e),this._set("resultGraphic",l),this.emit("select-result",{result:e,source:r,sourceIndex:s}),e}))}))}suggest(e,t,s){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,s).then((()=>this._suggestImmediate(r,s).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await(0,g.whenFalseOnce)(this,"updating")}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const s=this._updatingPromise=(0,d.eachAlways)([null==e?void 0:e.load(),null==t?void 0:t.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await s,s!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const s=(0,g.whenOnce)(this,"messages");this.destroyed||(this._handles.add(s),await s,this._updateDefaultSources())}_clearSearching(){this._searching=null,this.notifyChange("state")}_convertHelperServices(){var e,t;const s=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;return s?s.map((e=>{if(!1===e.placefinding)return;const t=fe.fromJSON(e);if(function(e){return!!e&&(function(e){return/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(e)||function(e){return/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(e))}(t.get("locator.url"))){const e=t.outFields||["Addr_type","Match_addr","StAddr","City"],s=t.placeholder||this.messages.placeholder,r="number"==typeof t.defaultZoomScale?t.defaultZoomScale:2500;t.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:s,defaultZoomScale:r})}return t.singleLineFieldName?t:void 0})).filter(Boolean):[]}_getLayerSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findLayerById(e.id);if(!s)return;const o=this._getLayerJSON(e),i=re.default.fromJSON(o);return i.placeholder=t,this._getLayer(s,o).then((e=>{i.layer=e})),i})).filter(Boolean).toArray()}_getTableSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findTableById(e.id);if(!s)return;const o=this._getLayerJSON(e),i=re.default.fromJSON(o);return i.placeholder=t,this._getLayer(s,o).then((e=>{i.layer=e})),i})).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,s;const r=null==(e=this.view)?void 0:e.map,o=null==r||null==(t=r.applicationProperties)||null==(s=t.viewing)?void 0:s.search;if(!o)return[];const{enabled:i,hintText:n,layers:l,tables:a}=o;return i?[...this._getLayerSources(l,n),...this._getTableSources(a,n)]:[]}_getSubLayer(e,t){return e.load().then((()=>{if(!e.allSublayers)return Promise.reject();const s=e.allSublayers.find((e=>e.id===t.subLayer));return s?s.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(e,t){await e.load();const s=e.allSublayers.find((e=>e.id===t.subLayer));return"building-component"!==(null==s?void 0:s.type)?Promise.reject():(await s.load(),null==s.associatedLayer?Promise.reject():(await s.associatedLayer.load(),s))}_getLayer(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new w.Z("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return we.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return"function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources")}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var e;const t=null==(e=this.view)?void 0:e.popup,{resultGraphic:s}=this;if(!t||!s)return;const{selectedFeature:r}=t;r&&r===s&&t.close()}_suggestTimer(e,t){const s=null!=e?e:this.suggestionDelay;return(0,d.after)(s,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof B.default?(0,se.$J)(e.geometry):e instanceof C.Z?e:Array.isArray(e)&&2===e.length?new C.Z({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&_e(e,"key")&&_e(e,"text")&&_e(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),s="string"==typeof e?e:this.searchTerm,{selectedSuggestion:r,selectedResult:o}=this,i=!e&&r&&o,n=i&&r.key===o.key&&r.sourceIndex===o.sourceIndex,l=i&&r.location;return n||l?r:{location:(0,S.Wg)(t),text:t?"":s,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:s}=e,r=s[0],o=!!r;return o&&(t=r),o})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((t=>{const s={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(s,t),s}))}_formatSourceResponse(e,t,s){const r=t&&t.value||[],o=t&&t.error,i=this.allSources.getItemAt(s);if(o){const t={sourceIndex:s,source:i,error:o};e.errors.push(t),e.numErrors++}else{const t={sourceIndex:s,source:i,results:r};e.results.push(t),e.numResults+=r.length}}_formatResponse(e,t,s){if(t)if(e.activeSourceIndex===Me){const r=s&&_e(s,"sourceIndex")&&-1!==s.sourceIndex?s.sourceIndex:void 0;t.forEach(((t,s)=>{const o=void 0!==r?r:s;this._formatSourceResponse(e,t,o)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}_getResultsFromSources(e,t){const{allSources:s}=this,r=!e.location&&_e(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,o=[];if(!s.length){const e=new w.Z("search:no-sources-defined","At least one source is required.",{allSources:s});return we.error(e),Promise.reject(e)}return r===Me?s.forEach(((s,r)=>{o.push(this._getResultsFromSource(e,r,t))})):o.push(this._getResultsFromSource(e,r,t)),(0,d.eachAlways)(o)}_getSuggestionsFromSources(e,t){const{allSources:s,activeSourceIndex:r}=this,o=[];if(!s.length){const e=new w.Z("suggest:no-sources-defined","At least one source is required.",{allSources:s});return we.error(e),Promise.reject(e)}return r===Me?s.forEach(((s,r)=>{o.push(this._getSuggestionsFromSource(e,r,t))})):o.push(this._getSuggestionsFromSource(e,r,t)),(0,d.eachAlways)(o)}_getResultsFromSource(e,t,s){var r;const o=this.allSources.getItemAt(t),{location:i=null}=e,n=(null==(r=this.view)?void 0:r.spatialReference)||Ce,l=_e(o,"maxResults")?o.maxResults:this.maxResults,a=!!(o instanceof re.default&&_e(o,"exactMatch"))&&o.exactMatch,{view:u}=this;return o.getResults({view:u,sourceIndex:t,location:i,suggestResult:e,spatialReference:n,exactMatch:a,maxResults:l},s)}_getSuggestionsFromSource(e,t,s){const r=this.allSources.getItemAt(t),o=_e(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,i=e.length,n=_e(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(o&&e.trim()&&i>=n){var l;const o=(null==(l=this.view)?void 0:l.spatialReference)||Ce,i=_e(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:n}=this;return r.getSuggestions({view:n,sourceIndex:t,suggestTerm:e,spatialReference:o,maxSuggestions:i},s)}return Promise.resolve(null)}createDefaultSymbol(e,t){if("point"===t){const t=e;return new O.Z({color:e.color,size:t.size,outline:{color:t.outline.color,width:t.outline.width}})}if("polyline"===t){const t=e;return new j.Z({color:t.color,width:t.width})}if("polygon"===t){const t=e;return new F.default({color:t.color,outline:{color:t.outline.color,width:t.outline.width}})}}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return _e(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let s=null;return t.some((t=>t.results.some((r=>r===e&&(s=t.sourceIndex,!0))))),s}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const s=(0,d.createAbortController)();this._gotoController=s;const r={target:{target:e},options:{animate:t,signal:s.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var t,s,r;const o=null==(t=this.view)||null==(s=t.map)||null==(r=s.basemap)?void 0:r.id,i=(0,S.U2)(e,"feature","geometry","type");if((0,S.pC)(i)){const e=Y({basemap:o,geometryType:i})||Y({basemap:"topo",geometryType:i}),t=e&&e.primaryScheme;if(t)return t.color&&_e(t,"opacity")&&(t.color.a=t.opacity),this.createDefaultSymbol(t,i)}return this.defaultSymbol}_removeHighlight(){this._handles.remove(be)}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type)return Promise.resolve(null);const{layer:s}=e;return await t.when(),t.whenLayerView(s)}_highlightFeature(e){const{graphic:t,layerView:s}=e,{attributes:r,layer:o}=t,{objectIdField:i}=o,n=r&&r[i],l=s.highlight(n||t);this._handles.add(l,be)}};Ie.ALL_INDEX=Me,(0,r._)([(0,l.Cb)({readOnly:!0,value:null})],Ie.prototype,"activeSource",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"activeSourceIndex",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"allPlaceholder",null),(0,r._)([(0,l.Cb)({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],Ie.prototype,"allSources",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"autoNavigate",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"autoSelect",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"defaultPopupTemplate",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"defaultSources",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"defaultSymbol",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"includeDefaultSources",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"locationEnabled",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"maxInputLength",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"maxResults",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"maxSuggestions",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"messages",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"placeholder",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"popupEnabled",void 0),(0,r._)([(0,l.Cb)({type:T.default})],Ie.prototype,"popupTemplate",void 0),(0,r._)([(0,l.Cb)({type:k.Z})],Ie.prototype,"portal",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"resultCount",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"resultGraphic",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"results",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"selectedSuggestion",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"searchAllEnabled",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"selectedResult",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"searchTerm",null),(0,r._)([(0,l.Cb)({type:xe})],Ie.prototype,"sources",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,dependsOn:["allSources.length","updating"]})],Ie.prototype,"state",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"suggestionDelay",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"suggestionCount",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"suggestions",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],Ie.prototype,"updating",null),(0,r._)([(0,l.Cb)()],Ie.prototype,"view",void 0),(0,r._)([(0,l.Cb)()],Ie.prototype,"clear",null),Ie=(0,r._)([(0,u.j)(Se)],Ie);const Te=Ie;var je=s(24258);const Le="esri-search-result-renderer esri-widget",Ne="esri-widget__anchor",ke="esri-search-result-renderer__more-results--show-more-results",Ee="esri-search-result-renderer__more-results",Fe="esri-search-result-renderer__more-results-list",Oe="esri-search-result-renderer__more-results-item",Ze="esri-search-result-renderer__more-results-list-header";let Be=class extends _.default{constructor(e,t){super(e,t),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[ke]:this.showMoreResultsOpen};return(0,v.j)("div",{class:Le},(0,v.j)("div",{key:"esri-search-renderer__container",class:this.classes(Ee,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return(0,v.j)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const t=null==(e=this.viewModel)?void 0:e.selectedResult,s=t&&t.name||"";return(0,v.j)("div",{key:"esri-search-renderer__result-name",class:Oe},s)}renderMoreResultsLists(){var e;const t=null==(e=this.viewModel)?void 0:e.results,{resultCount:s}=this.viewModel;if(s<2)return null;const r=t.map((e=>this.renderMoreResultsList(e)));return(0,v.j)("div",{key:"esri-search-renderer__more-results-container",class:Fe},r)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:t}=this.viewModel;return t<2?null:(0,v.j)("div",{key:"esri-search-renderer__more-results-button",class:Oe},(0,v.j)("a",{class:Ne,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,t){return(0,v.j)("div",{key:`esri-search-result-renderer__header-${t}`,class:Ze},e)}renderMoreResultsList(e){var t,s;const{results:r}=e,o=r.length,i=!!o,n=null==(t=this.viewModel)?void 0:t.selectedResult,l=1===o&&r[0]===n,a=this._getSourceName(e.source,e.sourceIndex),u=(null==(s=this.viewModel)?void 0:s.results.length)>1&&!l?this.renderMoreResultsHeader(a,e.sourceIndex):null,c=i&&r.map(((e,t)=>this.renderMoreResultsListItem(e,t))),d=i&&!l?(0,v.j)("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},c):null;return i?(0,v.j)("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},u,d):null}renderMoreResultsListItem(e,t){return e!==this.get("viewModel.selectedResult")?(0,v.j)("li",{key:`esri-search-result-renderer__list-item-${t}`},(0,v.j)("a",{class:Ne,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const t=this.get("viewModel.view.popup");t&&t.reposition()}_selectResultClick(e){e.preventDefault();const t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}_getSourceName(e,t){return t===Te.ALL_INDEX?this.messages.all:e.name}};(0,r._)([(0,l.Cb)(),(0,y.H)("esri/widgets/Search/t9n/Search")],Be.prototype,"messages",void 0),(0,r._)([(0,l.Cb)()],Be.prototype,"showMoreResultsOpen",void 0),(0,r._)([(0,l.Cb)()],Be.prototype,"viewModel",void 0),(0,r._)([(0,je.h)()],Be.prototype,"_showMoreResultsClick",null),(0,r._)([(0,je.h)()],Be.prototype,"_selectResultClick",null),Be=(0,r._)([(0,u.j)("esri.widgets.Search.SearchResultRenderer")],Be);const Ae=Be,Pe="esri-search esri-widget",Ge="esri-widget__loader",Je="esri-widget__loader-text",De="esri-widget__loader-animation",$e="esri-input",ze="esri-search--multiple-sources",qe="esri-search--loading",Ue="esri-search--searching",Ke="esri-search--show-suggestions",He="esri-search--sources",We="esri-search--warning",Ve="esri-search__container",Xe="esri-search__input",Qe="esri-search__input-container",Ye="esri-search__form",et="esri-search__submit-button",tt="esri-search__sources-button",st="esri-search__clear-button",rt="esri-search__source-name",ot="esri-search__suggestions-menu",it="esri-search__suggestions-list",nt="esri-search__suggestions-list--current-location",lt="esri-search__sources-menu",at="esri-search__source",ut="esri-search__warning-menu",ct="esri-search__warning-body",dt="esri-search__warning-header",ht="esri-search__warning-text",pt="esri-search__no-value-text",gt="esri-widget--disabled",mt="esri-widget--button",yt="esri-icon-font-fallback-text",ft="esri-icon-locate-circled",vt="esri-menu",_t="esri-menu__list",St="esri-menu__list-item",wt="esri-menu__list-item--active",bt="esri-menu__list-item--focus",xt="esri-menu__header",Ct="esri-icon-search",Rt="esri-icon-down-arrow esri-search__sources-button--down",Mt="esri-icon-up-arrow esri-search__sources-button--up",It="esri-icon-close",Tt="esri-icon-notice-triangle",jt="esri-icon-search",Lt="esri-disabled",Nt=/<[a-z/][\s\S]*>/i;let kt=class extends _.default{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new p.Z,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Ae,this._relatedTarget=null,this._locateFailed=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=jt,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new Te,this.own((0,g.watch)(this,"searchTerm",(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&(this.activeMenu="none")})),(0,g.on)(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),(0,g.init)(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),(0,g.init)(this,"viewModel.defaultPopupTemplate",(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this))})))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))}blur(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))}search(e){this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();const t=(0,d.createAbortController)(),{signal:s}=t;return this._searchController=t,this.viewModel.search(e,{signal:s}).catch((e=>{if(this._searchController===t)return this.activeMenu="none",this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=(0,d.createAbortController)(),{signal:s}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:s}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&(this.activeMenu="suggestion"),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[Lt]:"disabled"===e,[gt]:this.disabled};return(0,v.j)("div",{class:this.classes(Pe,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return(0,v.j)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(et,mt),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},(0,v.j)("span",{"aria-hidden":"true",class:Ct}))}renderWarningMenu(){return(0,v.j)("div",{key:"esri-search__error-menu",class:this.classes(vt,ut)},(0,v.j)("div",{class:ct},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:s,sourceMenuButtonId:r}=this,{activeSourceIndex:o,allSources:i}=this.viewModel;return i.length>1?(0,v.j)("button",{id:r,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":s,class:this.classes(tt,mt),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:m.Se,"data-node-ref":"_sourceMenuButtonNode"},(0,v.j)("span",{"aria-hidden":"true",class:Rt}),(0,v.j)("span",{"aria-hidden":"true",class:Mt}),(0,v.j)("span",{class:rt},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:r,sourceMenuId:o,sourceMenuButtonId:i}=this,n="source"===r&&s>-1?this._buildId("source-item",s):null;return e.length>1?(0,v.j)("ul",{"aria-activedescendant":n,"aria-labelledby":i,id:o,role:"menu",bind:this,afterCreate:m.Se,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:_t,tabIndex:-1},t?this.renderSource(Te.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?(0,v.j)("div",{key:"esri-search__source-menu",class:this.classes(vt,lt)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return(0,v.j)("div",{class:Ge,key:"base-loader"},(0,v.j)("span",{"aria-hidden":"true",class:De}),(0,v.j)("span",{class:yt},e.searchButtonTitle),(0,v.j)("span",{class:Je},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:s}=this,r={[ze]:e.length>1,[qe]:"loading"===t,[Ue]:"searching"===t,[We]:"warning"===s,[He]:"source"===s,[Ke]:"suggestion"===s};return(0,v.j)("div",{class:this.classes(r,Ve),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?(0,v.j)("button",{bind:this,class:this.classes(st,mt),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},(0,v.j)("span",{"aria-hidden":"true",class:It})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:s}=this,r=t&&!s,o="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return r?(0,v.j)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(_t,it,nt)},(0,v.j)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(St,o?bt:null)},(0,v.j)("span",{"aria-hidden":"true",class:ft})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:s,messages:r,suggestionsMenuId:o,inputId:i,_activeMenuItemIndex:n}=this,{maxInputLength:l,placeholder:a,searchTerm:u,suggestionCount:c}=this.viewModel,d=!((!t||s)&&!c),h="suggestion"===e&&n>-1?this._buildId("suggestion-item",n):null;return(0,v.j)("input",{"aria-activedescendant":h,"aria-autocomplete":"list","aria-expanded":(d&&"suggestion"===e).toString(),"aria-controls":d?o:null,"aria-owns":d?o:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,placeholder:a,maxlength:l,autocomplete:"off",type:"text",class:this.classes($e,Xe),value:u,id:i,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:m.Se,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:u?"":a})}renderForm(){return(0,v.j)("form",{key:"esri-search__form",bind:this,class:Ye,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,s=e.results.length,r=e.results;return s?(0,v.j)("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(_t,it)},r.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:s,inputId:r}=this,{suggestionCount:o}=this.viewModel,i=t&&!e||o;return this._menuItemCount=0,i?(0,v.j)("div",{id:s,key:"esri-search__suggestions-menu",class:this.classes(vt,ot),role:"listbox","aria-labelledby":r,bind:this,afterCreate:m.Se,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return(0,v.j)("div",{key:"esri-search__input-container",class:Qe},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:s}=this.viewModel,{sourceIndex:r}=e,o=e.results.length,i=t.length>1&&s===Te.ALL_INDEX;return o&&i?(0,v.j)("div",{key:`esri-search__suggestion-header-${r}`,class:xt},this._getSourceName(r)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:s,messages:r}=this,{searchTerm:o}=this.viewModel;if(o){const{text:i}=e,n=i||r.untitledResult,l=Nt.test(n),a=[];if(l)a.push((0,v.j)("div",{innerHTML:n}));else{const e=this._splitResult(n,o),t=o.toLowerCase();e.forEach(((e,s)=>{e&&e.length&&(e.toLowerCase()===t?a.push((0,v.j)("strong",{key:s},e)):a.push(e))}))}const u="suggestion"===this.activeMenu&&s===t;return(0,v.j)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(St,u?bt:null)},a)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:s}=this.viewModel,r={[wt]:e===t,[bt]:"source"===this.activeMenu&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},o=s?e+1:e;return(0,v.j)("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",o),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(at,St,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,s=e?(0,h.n)(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return(0,v.j)("div",{key:"esri-search__no_results"},(0,v.j)("div",{class:dt},t.noResults),(0,v.j)("div",{class:ht},s))}renderEmptySearchWarning(){const{messages:e}=this;return(0,v.j)("div",{key:"esri-search__empty-search"},(0,v.j)("span",{"aria-hidden":"true",class:Tt}),(0,v.j)("span",{class:pt},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return(0,v.j)("div",{key:"esri-search__locate-error"},(0,v.j)("span",{"aria-hidden":"true",class:Tt}),(0,v.j)("span",{class:pt},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:s}=this,{viewModel:r}=this;return s?this.renderLocateWarning():null!=(e=r.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,t){return`${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,s="sources";e.remove(s),t.forEach((t=>e.add((0,g.watch)(t,"name",(()=>this.scheduleRender())),s)))}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;var t;this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(t=this._sourceListNode)||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=(0,d.createAbortController)(),{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning"})).then((()=>{this._searchController=null}))}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var t;if(!e)return;const s=e["data-source-index"];this.viewModel.activeSourceIndex=s,this.activeMenu="none",null==(t=this._sourceMenuButtonNode)||t.focus()}_sourcesButtonBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t,this._sourceListNode)}_inputBlur(e){const t=e&&e.relatedTarget;this._removeActiveMenu(t||this._relatedTarget,this._suggestionListNode)}_storeRelatedTarget(e){this._relatedTarget=e.relatedTarget}_clearButtonFocus(){this.activeMenu="none"}_removeActiveMenu(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var t;const s=(0,c.kK)(e);if(e.ctrlKey||e.metaKey||"Copy"===s||"ArrowLeft"===s||"ArrowRight"===s||"Shift"===s)return;if("Tab"===s||"Escape"===s||e.shiftKey&&"Tab"===s)return this._cancelSuggest(),void("Escape"===s&&(this.activeMenu="none"));const r="Home"===s||"End"===s||"ArrowUp"===s||"ArrowDown"===s,o=null==(t=this._suggestionListNode)?void 0:t.getElementsByTagName("li");if(null!=o&&o.length){if("suggestion"!==this.activeMenu&&(this.activeMenu="suggestion"),r)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(s,o,this._suggestionListNode);const t=o[this._activeMenuItemIndex];if("Enter"===s&&t){const e=t["data-suggestion"];return void(e?(this._focus(),this.search(e)):t["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}handleItemNavigation(e,t,s){const r=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&(0,m._q)(t[this._activeMenuItemIndex],s)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_handleInputClick(){this.activeMenu="suggestion"}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const t=(0,c.kK)(e);if(" "!==t&&"Enter"!==t)"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault();else{e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t)}}_handleSourceMenuKeyup(e){var t;const s=(0,c.kK)(e),r="ArrowUp"===s||"ArrowDown"===s||"End"===s||"Home"===s;var o;if(r&&e.preventDefault(),"Escape"===s)return this.activeMenu="none",void(null==(o=this._sourceMenuButtonNode)||o.focus());const i=null==(t=this._sourceListNode)?void 0:t.getElementsByTagName("li");return i&&0!==i.length&&r?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(s,i,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(e){const{messages:t}=this,s=this.viewModel,{allSources:r}=s,o=r.getItemAt(e);return e===Te.ALL_INDEX?t.all:o&&o.name||t.untitledSource}_splitResult(e,t){const s=(0,i.Qs)(t);return e.replace(new RegExp(`(^|)(${s})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};(0,r._)([(0,l.Cb)()],kt.prototype,"_activeMenuItemIndex",void 0),(0,r._)([(0,l.Cb)()],kt.prototype,"displayedSearchTerm",null),(0,r._)([(0,l.Cb)({readOnly:!0})],kt.prototype,"inputId",null),(0,r._)([(0,l.Cb)({readOnly:!0})],kt.prototype,"suggestionsMenuId",null),(0,r._)([(0,l.Cb)({readOnly:!0})],kt.prototype,"sourceMenuId",null),(0,r._)([(0,l.Cb)({readOnly:!0})],kt.prototype,"sourceMenuButtonId",null),(0,r._)([(0,l.Cb)()],kt.prototype,"activeMenu",void 0),(0,r._)([(0,a.B)("viewModel.activeSource")],kt.prototype,"activeSource",void 0),(0,r._)([(0,a.B)("viewModel.activeSourceIndex")],kt.prototype,"activeSourceIndex",void 0),(0,r._)([(0,a.B)("viewModel.allPlaceholder")],kt.prototype,"allPlaceholder",void 0),(0,r._)([(0,a.B)("viewModel.allSources")],kt.prototype,"allSources",void 0),(0,r._)([(0,a.B)("viewModel.autoNavigate")],kt.prototype,"autoNavigate",void 0),(0,r._)([(0,a.B)("viewModel.autoSelect")],kt.prototype,"autoSelect",void 0),(0,r._)([(0,a.B)("viewModel.defaultSources")],kt.prototype,"defaultSources",void 0),(0,r._)([(0,l.Cb)()],kt.prototype,"disabled",void 0),(0,r._)([(0,a.B)("viewModel.goToOverride")],kt.prototype,"goToOverride",void 0),(0,r._)([(0,l.Cb)()],kt.prototype,"iconClass",void 0),(0,r._)([(0,a.B)("viewModel.includeDefaultSources")],kt.prototype,"includeDefaultSources",void 0),(0,r._)([(0,l.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],kt.prototype,"label",void 0),(0,r._)([(0,a.B)("viewModel.locationEnabled")],kt.prototype,"locationEnabled",void 0),(0,r._)([(0,a.B)("viewModel.maxResults")],kt.prototype,"maxResults",void 0),(0,r._)([(0,a.B)("viewModel.maxSuggestions")],kt.prototype,"maxSuggestions",void 0),(0,r._)([(0,l.Cb)(),(0,y.H)("esri/widgets/Search/t9n/Search")],kt.prototype,"messages",void 0),(0,r._)([(0,l.Cb)(),(0,y.H)("esri/t9n/common")],kt.prototype,"messagesCommon",void 0),(0,r._)([(0,a.B)("viewModel.minSuggestCharacters")],kt.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,a.B)("viewModel.popupEnabled")],kt.prototype,"popupEnabled",void 0),(0,r._)([(0,a.B)("viewModel.popupTemplate")],kt.prototype,"popupTemplate",void 0),(0,r._)([(0,a.B)("viewModel.portal")],kt.prototype,"portal",void 0),(0,r._)([(0,a.B)("viewModel.resultGraphic")],kt.prototype,"resultGraphic",void 0),(0,r._)([(0,a.B)("viewModel.resultGraphicEnabled")],kt.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,a.B)("viewModel.results")],kt.prototype,"results",void 0),(0,r._)([(0,a.B)("viewModel.searchAllEnabled")],kt.prototype,"searchAllEnabled",void 0),(0,r._)([(0,a.B)("viewModel.searchTerm")],kt.prototype,"searchTerm",void 0),(0,r._)([(0,a.B)("viewModel.selectedResult")],kt.prototype,"selectedResult",void 0),(0,r._)([(0,a.B)("viewModel.sources")],kt.prototype,"sources",void 0),(0,r._)([(0,a.B)("viewModel.suggestions")],kt.prototype,"suggestions",void 0),(0,r._)([(0,a.B)("viewModel.suggestionsEnabled")],kt.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,a.B)("viewModel.view")],kt.prototype,"view",void 0),(0,r._)([(0,f.s)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),(0,l.Cb)({type:Te})],kt.prototype,"viewModel",void 0),(0,r._)([(0,a.B)("viewModel.clear")],kt.prototype,"clear",null),kt=(0,r._)([(0,u.j)("esri.widgets.Search")],kt);const Et=kt},91731:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var r=s(56140),o=(s(95830),s(82550)),i=s(36544),n=(s(68055),s(79881)),l=s(87566),a=(s(10923),s(57002),s(86035),s(35769)),u=s(59472),c=s(32656),d=s(53817),h=s(21979),p=s(61398),g=(s(89771),s(93533)),m=s(2041);const y=/https?:\/\/services.*\.arcgis\.com/i,f=/(?:\{([^}]+)\})/g,v=i.Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function _(e,t){const{source:s,spatialReference:r,view:o,suggestTerm:i,maxSuggestions:n,sourceIndex:l}=e,{layer:a,filter:u}=s,d=t&&t.signal,h=S(s,o);return b(a).then((()=>{if(!x(a))return[];const e=C(s),t=s.searchFields||[e],o=[];s.suggestionTemplate?s.suggestionTemplate.replace(f,((e,t)=>(o.push(t),e))):o.push(e);const p=w(o);-1!==o.indexOf(a.objectIdField)||p||o.push(a.objectIdField);const g=M(a,e),m=p||R(a,o),y=R(a,t);if(!g)throw v.error("invalid-field: displayField is invalid."),new c.Z("getSuggestions():invalid-field","displayField is invalid.");if(!m)throw v.error("invalid-field: outField is invalid."),new c.Z("getSuggestions():invalid-field","outField is invalid.");if(!y)throw v.error("invalid-field: search field is invalid."),new c.Z("getSuggestions():invalid-field","search field is invalid.");const _=a.createQuery(),{orderByFields:S}=s;if(S&&(_.orderByFields=S),_.outSpatialReference=r,_.returnGeometry=!1,_.num=n,_.outFields=o,h&&(_.geometry=h),!i.trim())return[];const{prefix:b="",suffix:T=""}=s,N=j(I(`${b}${i}${T}`),a,t,u,!1);return N?(_.where=N,a.queryFeatures(_,{signal:d}).then((t=>function(e,t,s,r){return e.features.map((e=>function(e,t,s,r){const o=e.sourceLayer,{attributes:i}=e,{objectIdField:n}=o,l=i[n];return{text:L(e,t.suggestionTemplate,r),key:l,sourceIndex:s}}(e,t,s,r)))}(t,s,l,e)))):[]}))}function S(e,t){const{filter:s,withinViewEnabled:r}=e,o=t&&t.extent;return s&&s.geometry||(r&&o?o:void 0)}function w(e){return e&&-1!==e.indexOf("*")}async function b(e){e&&await e.load()}function x(e){var t,s,r;return null!=(t=null==e||null==(s=e.capabilities)||null==(r=s.query)?void 0:r.supportsPagination)&&t}function C(e){return e.displayField||e.layer.displayField||function(e){let t="";if(e){const{fields:s}=e;s&&s.some((e=>"string"===e.type&&(t=e.name,!0)))}return t}(e.layer)}function R(e,t){return!(!e||!t)&&t.every((t=>M(e,t)))}function M(e,t){return!!e.getField(t)}function I(e){return e.replace(/\'/g,"''")}function T(e,t){const s=t&&t.where;return s?`(${e}) AND (${s})`:e}function j(e,t,s,r,o){const{definitionExpression:i}=t;let n="";if(e){const i=y.test(t.url)&&function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(e)?"N":"";s&&s.forEach((s=>{const l=t.getField(s),a="function"==typeof t.getFieldDomain&&t.getFieldDomain(s),u=(a&&"coded-value"===a.type?function(e,t,s){let r=null;const{codedValues:o}=e;return o&&o.some((e=>{const o=e.name,i=s?o:o.toLowerCase();return(s?t:t.toLowerCase())===i&&(r=e.code.toString(),!0)})),r}(a,e,o):null)||e||null;if(null!==u){const e=function(e,t,s,r,o){const i=t.type,n=t.name;if("string"===i||"date"===i||"global-id"===i)return T(o?`${n} = ${s}'${e}'`:`UPPER(${n}) LIKE ${s}'%${e.toUpperCase()}%'`,r);if("oid"===i||"small-integer"===i||"integer"===i||"single"===i||"double"===i){const t=Number(e);return isNaN(t)?null:T(`${n} = ${t}`,r)}return T(`${n} = ${e}`,r)}(u,l,i,r,o);e&&(n+=function(e,t){return e?` OR (${t})`:`(${t})`}(n,e))}}))}return i?`(${i}) AND (${n})`:n}function L(e,t,s){const r=e.sourceLayer,{attributes:o}=e,i="function"==typeof r.getFieldDomain&&r.getFieldDomain(s);if(t)return(0,p.n)(t,o);if(s&&o){const e=r.getField(s),t=function(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}(o,s);return null==t?"":i&&"coded-value"===i.type?function(e,t){let s=null;const{codedValues:r}=e;return r&&r.length&&r.some((e=>e.code===t&&(s=e.name,!0))),s}(i,t):"date"===(null==e?void 0:e.type)?(0,h.p6)(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return""}function N(e,t,s,r,i,n,l){return e.features.map((e=>function(e,t,s,r,i,n,l){const a=e.clone(),c=e.sourceLayer,h=c&&c.objectIdField,p=h&&e.attributes[h],g=L(e,s.searchTemplate,i),y=(0,m.vb)(a.geometry,t,n),f="number"==typeof l?(0,m.LT)((0,o.d9)(y),t,l):y,v=e.clone();return(0,u.pC)(f)&&(v.geometry=d.Z.fromExtent(f)),{extent:f,target:v,feature:a,key:p,name:g,sourceIndex:r}}(e,t,s,r,i,n,l)))}var k;let E=k=class extends a.Z{constructor(){super(...arguments),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>function(e,t){const{exactMatch:s=!1,location:r,maxResults:o,spatialReference:i,source:n,sourceIndex:l,suggestResult:a,view:u}=e,{layer:d,filter:h,zoomScale:p}=n,m=u&&u.scale,y=S(n,u),f=t&&t.signal;return b(d).then((()=>{const e=d.popupTemplate;return e?e.getRequiredFields(d.fields):null})).then((e=>{var t,_;const{objectIdField:S,returnZ:b}=d,T=C(n);if(!M(d,T))throw v.error("invalid-field: displayField is invalid."),new c.Z("getResults():invalid-field","displayField is invalid.");const L=e&&e.length?e:[T],k=n.outFields||L,E=w(k);if(-1!==k.indexOf(S)||E||k.push(S),!E&&!R(d,k))throw v.error("invalid-field: outField is invalid."),new c.Z("getResults():invalid-field","outField is invalid.");const F=d.createQuery(),{orderByFields:O}=n;if(O&&(F.orderByFields=O),i){F.outSpatialReference=i;const e=1/(0,g.c9)(i);e&&(F.maxAllowableOffset=e)}const Z="mesh"===d.geometryType||"multipatch"===d.geometryType,B=(null==(t=d.capabilities)||null==(_=t.data)?void 0:_.supportsZ)&&!Z;if(F.returnZ=B&&!1!==b,F.returnGeometry=!0,F.multipatchOption=Z?"xyFootprint":null,k&&(F.outFields=k),r)F.geometry=r;else if(a.key)F.objectIds=[parseInt(a.key,10)];else{const e=n.searchFields||[T];if(!R(d,e))throw v.error("invalid-field: search field is invalid."),new c.Z("getResults():invalid-field","search field is invalid.");if(x(d)&&(F.num=o),y&&(F.geometry=y),!a.text.trim())return[];const{prefix:t="",suffix:r=""}=n,i=j(I(`${t}${a.text}${r}`),d,e,h,s);if(!i)return[];F.where=i}return d.queryFeatures(F,{signal:f}).then((e=>N(e,u,n,l,T,m,p)))}))}({source:this,...e},t),this.getSuggestions=(e,t)=>_({source:this,...e},t)}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}))}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name")}clone(){return new k({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,o.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,o.d9)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){const e=this.layer;let t="";return e&&e.fields&&e.fields.some((e=>"string"===e.type&&(t=e.name,!0))),t}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return s&&s.alias||t})).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};(0,r._)([(0,n.Cb)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],E.prototype,"displayField",void 0),(0,r._)([(0,n.Cb)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],E.prototype,"exactMatch",void 0),(0,r._)([(0,n.Cb)({value:null})],E.prototype,"layer",null),(0,r._)([(0,n.Cb)()],E.prototype,"name",null),(0,r._)([(0,n.Cb)({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0),(0,r._)([(0,n.Cb)()],E.prototype,"searchFields",void 0),(0,r._)([(0,n.Cb)()],E.prototype,"searchTemplate",void 0),(0,r._)([(0,n.Cb)()],E.prototype,"suggestionTemplate",void 0),E=k=(0,r._)([(0,l.j)("esri.widgets.Search.LayerSearchSource")],E);const F=E},35769:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(56140),o=(s(95830),s(36544),s(68055),s(79881)),i=s(87566),n=(s(10923),s(57002),s(86035),s(58385)),l=s(35326);let a=class extends((0,l.I)(n.wq)){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};(0,r._)([(0,o.Cb)()],a.prototype,"autoNavigate",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"filter",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"getResults",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"getSuggestions",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"maxResults",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"maxSuggestions",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"minSuggestCharacters",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"outFields",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"placeholder",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"popupEnabled",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"popupTemplate",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"prefix",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"resultGraphicEnabled",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"resultSymbol",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"suggestionsEnabled",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"suffix",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"withinViewEnabled",void 0),(0,r._)([(0,o.Cb)()],a.prototype,"zoomScale",void 0),a=(0,r._)([(0,i.j)("esri.widgets.Search.SearchSource")],a);const u=a},2041:(e,t,s)=>{"use strict";s.d(t,{vb:()=>d,$J:()=>c,RH:()=>u,LT:()=>h});var r=s(59472),o=s(36544),i=s(32656),n=s(52937),l=(s(36348),s(66002));const a=o.Z.getLogger("esri.widgets.Search.support.geometryUtils");function u(e,t){if(!t)return a.error("missing-parameter: view is missing."),Promise.reject(new i.Z("searchgeometryutils:missing-parameter","view is missing."));if(!e)return a.error("missing-parameter: point is missing."),Promise.reject(new i.Z("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);const s=t.get("map.ground");return s&&s.layers.length?s.queryElevation(e).then((e=>e.geometry)):Promise.resolve(e)}function c(e){if((0,r.Wi)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function d(e,t,s){return(0,r.Wi)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?p(e,t,s):void 0}function h(e,t,s){return(0,r.Wi)(e)||(0,r.Wi)(t)?null:p(e.center,t,s)}function p(e,t,s){const r=e.hasZ?e.z:void 0;return t&&t.map?(s?(0,l.D9)(t,s):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new n.Z({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}},49322:(e,t,s)=>{"use strict";s.d(t,{nu:()=>m,C2:()=>y,Zh:()=>g});var r=s(95830),o=s(34926),i=s(36544),n=s(32656),l=(s(10923),s(39718),s(41241)),a=s(61106),u=(s(52937),s(3470),s(53817),s(93833),s(36348),s(36654),s(32797)),c=s(52411),d=(s(88676),s(61246),s(65979),s(20775),s(63685),s(12923),s(74911),s(57212));s(39943),s(92947),s(41673),s(23986);const h=i.Z.getLogger("esri.widgets.support.geolocationUtils"),p={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function g(){return function(){const e=(0,r.Z)("esri-geolocation");return e||h.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){const e=window.isSecureContext;return e||h.warn("insecure-context","Geolocation requires a secure origin."),e}()}function m(e){return e||(e=p),new Promise(((t,s)=>{setTimeout((()=>s(new n.Z("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(t,s,e)}))}function y(e,t){const{position:s,view:r}=e;return function(e,t,s){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve((0,l.$)(e)):function(e){if(o.default.geometryServiceUrl)return Promise.resolve(o.default.geometryServiceUrl);const t=u.Z.getDefault();return t.load(e).catch((()=>{})).then((()=>t.get("helperServices.geometry.url")))}(s).then((t=>{if(!t)throw new n.Z("geometry-service:missing-url","Geometry service URL is missing");const o=new c.Z({geometries:[e],outSR:r});return(0,d.i)(t,o,s).then((e=>e[0]))}))}(function(e){const t=e&&e.coords;return t?new a.Z({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){const t=e&&e.coords||{},s={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:s,timestamp:e.timestamp}:e}(s)),r,t)}}}]);
//# sourceMappingURL=9734.js.map