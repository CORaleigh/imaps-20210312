self.webpackChunkRemoteClient([152,210],{122:function(e,t,r){"use strict";r.d(t,"a",(function(){return q})),r.d(t,"b",(function(){return G}));var s=r(4),n=r(16),o=r(3),a=r(48),i=r(2),c=r(41);const l=i.a.getLogger("esri.core.workers.Connection");var u=r(104),d=r(10),h=r(19),p=r(25),f=r(67),g=r(78);r(118);const b={};var m=r(1);class y{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}const O=m.a.MutationObserver||m.a.WebKitMutationObserver,w=function(){let e;if(m.a.process&&m.a.process.nextTick)e=e=>{m.a.process.nextTick(e)};else if(m.a.Promise)e=e=>{m.a.Promise.resolve().then(e)};else if(O){const t=[],r=document.createElement("div");new O((()=>{for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=e=>{t.push(e),r.setAttribute("queueStatus","1")}}return e}(),j=(()=>{const e=m.a.MessageEvent;try{new e("message",{data:null})}catch{return(e,t={})=>{const{data:r,bubbles:s=!1,cancelable:n=!1}=t,o=document.createEvent("Event");return o.initEvent(e,s,n),o.data=r,o}}return(t,r)=>new e(t,r)})();var v=class{constructor(){this._dispatcher=new y,this._isInitialized=!1,this._workerPostMessage({type:d.a.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){w((()=>{this._workerMessageHandler(j("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){w((()=>{this.dispatchEvent(j("message",{data:e}))}))}async _workerMessageHandler(e){const t=Object(d.d)(e);if(t)switch(t.type){case d.a.CONFIGURE:this._isInitialized||this._workerPostMessage({type:d.a.CONFIGURED});break;case d.a.OPEN:{const{modulePath:e,jobId:r}=t;let s=await a.default.loadWorker(e);s||(s=await import(e));const n=a.default.connect(s);this._workerPostMessage({type:d.a.OPENED,jobId:r,data:n});break}}}};const _=i.a.getLogger("esri.core.workers");s.a.add("esri-workers-arraybuffer-transfer",!Object(s.a)("safari")||Object(s.a)("safari")>=12);const{CONFIGURED:k,CONFIGURE:E,HANDSHAKE:P}=d.a;let N;try{N=URL.createObjectURL(new Blob(['var esriConfig,workerPath,globalId=0,outgoing=new Map,configured=!1,HANDSHAKE=0,CONFIGURE=1,CONFIGURED=2,OPEN=3,OPENED=4,RESPONSE=5,INVOKE=6,ABORT=7;function createAbortError(){var e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,r,t){var o=t&&t.signal,n=globalId++;return new Promise((function(t,a){if(o){if(o.aborted)return a(createAbortError());o.addEventListener("abort",(function(){outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),a(createAbortError()))}))}outgoing.set(n,{resolve:t,reject:a}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=o,data:r})}))}function messageHandler(e){var r=receiveMessage(e);if(r){var t=r.jobId;switch(r.type){case CONFIGURE:var o=r.configure;if(configured)return;configured=!0,esriConfig=o.esriConfig,workerPath=esriConfig.workers.workerPath,self.dojoConfig=o.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(o.loaderConfig)),self.postMessage({type:CONFIGURED});break;case OPEN:var n;function a(e){var r=n.connect(e);self.postMessage({type:OPENED,jobId:t,data:r},[r])}"function"==typeof define&&define.amd?require([workerPath],(function(e){(n=e.default||e).loadWorker(r.modulePath).then((function(e){return e||new Promise((function(e){require([r.modulePath],e)}))})).then(a)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((function(e){return(n=e.default).loadWorker(r.modulePath)})).then((function(e){return e||System.import(r.modulePath)})).then(a):(self.RemoteClient||importScripts(workerPath),(n=self.RemoteClient.default||self.RemoteClient).loadWorker(r.modulePath).then(a));break;case RESPONSE:if(outgoing.has(t)){var i=outgoing.get(t);outgoing.delete(t),r.error?i.reject(JSON.parse(r.error)):i.resolve(r.data)}}}}self.addEventListener("message",messageHandler),self.postMessage({type:HANDSHAKE});'],{type:"text/javascript"}))}catch(e){}const R="Failed to create Worker. Fallback to execute module in main thread";async function S(e){return new Promise((t=>{function r(o){const a=Object(d.d)(o);if(a)switch(a.type){case P:!function(e){let t;if(null!=h.a.default){const e={...h.a};delete e.default,t=JSON.parse(JSON.stringify(e))}else t=JSON.parse(JSON.stringify(h.a));t.assetsPath=Object(p.y)(t.assetsPath),t.locale=Object(f.b)(),t.has={"csp-restrictions":Object(s.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(s.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(s.a)("esri-2d-query-centroid-enabled"),"esri-atomics":Object(s.a)("esri-atomics"),"esri-shared-array-buffer":Object(s.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(s.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(s.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Object(p.y)(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Object(p.y)(t.workers.workerPath):t.workers.workerPath=Object(p.y)(Object(g.a)("esri/core/workers/RemoteClient.js"));const r=h.a.workers.loaderConfig,n=function(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=b.baseUrl),null==(t=b.packages)||t.forEach((e=>{!function(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}(r.packages,e)})),r}({baseUrl:null==r?void 0:r.baseUrl,locale:Object(f.b)(),has:{"csp-restrictions":Object(s.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==r?void 0:r.has},map:{...null==r?void 0:r.map},paths:{...null==r?void 0:r.paths},packages:(null==r?void 0:r.packages)||[]});e.postMessage({type:E,configure:{esriConfig:t,loaderConfig:n}})}(e);break;case k:e.removeEventListener("message",r),e.removeEventListener("error",n),t(e)}}function n(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",n),_.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new v).addEventListener("message",r),e.addEventListener("error",n)}e.addEventListener("message",r),e.addEventListener("error",n)}))}const M=i.a.getLogger("esri.core.workers"),{ABORT:I,INVOKE:L,OPEN:C,OPENED:x,RESPONSE:A}=d.a;class H{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),M.error(e)}))}static async create(e){const t=await async function(){if(!Object(s.a)("esri-workers"))return S(new v);let e;if(N)try{e=new Worker(N)}catch(t){_.warn(R,event),e=new v}else _.warn(R,event),e=new v;return S(e)}();return new H(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,s=Object(d.b)();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:Object(o.p)(r,(()=>{this._outJobs.delete(s),this._post({type:I,jobId:s})}))};this._outJobs.set(s,a),this._post({type:C,jobId:s,modulePath:e})}))}_onMessage(e){const t=Object(d.d)(e);if(t)switch(t.type){case x:this._onOpenedMessage(t);break;case A:this._onResponseMessage(t);break;case I:this._onAbortMessage(t);break;case L:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,s=t.get(r);s&&(s.controller&&s.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:s,abortable:n}=e,a=n?Object(o.d)():null,i=this._inJobs,c=u.e[t];let l;try{if("function"!=typeof c)throw new TypeError(t+" is not a function");l=c.call(null,s,{signal:a?a.signal:null})}catch(e){return void this._post({type:A,jobId:r,error:Object(d.e)(e)})}Object(o.n)(l)?(i.set(r,{controller:a,promise:l}),l.then((e=>{i.has(r)&&(i.delete(r),this._post({type:A,jobId:r},e))}),(e=>{i.has(r)&&(i.delete(r),e||(e={message:"Error encountered at method"+t}),Object(o.l)(e)||this._post({type:A,jobId:r,error:Object(d.e)(e||{message:"Error encountered at method "+t})}))}))):this._post({type:A,jobId:r},l)}_onOpenedMessage(e){var t;const{jobId:r,data:s}=e,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),null==(t=n.abortHandle)||t.remove(),n.resolve(s))}_onResponseMessage(e){var t;const{jobId:r,error:s,data:o}=e,a=this._outJobs.get(r);a&&(this._outJobs.delete(r),null==(t=a.abortHandle)||t.remove(),s?a.reject(n.a.fromJSON(JSON.parse(s))):a.resolve(o))}_post(e,t,r){return Object(d.c)(this.worker,e,t,r)}}var J=H;let F=Object(s.a)("esri-workers-debug")?1:Object(s.a)("host-browser")?navigator.hardwareConcurrency-1:0;F||(F=Object(s.a)("safari")&&Object(s.a)("mac")||Object(s.a)("trident")?7:2);let U=0;const D=[];function G(e,t){return T(e,{client:t})}async function T(e,t){const r=new class{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((r,s)=>{let n=!0;const i=e=>{Object(o.t)(t.signal),n&&(n=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let n=0;n<e.length;++n){const c=e[n];Object(o.n)(c)?this._clientPromises[n]=c.then((e=>(this._clients[n]=new a.default(e,t),i(r),this._clients[n])),(()=>(i(s),null))):(this._clients[n]=new a.default(c,t),this._clientPromises[n]=Promise.resolve(this._clients[n]),i(r))}}))}broadcast(e,t,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then((s=>s.invoke(e,t,r)))}return s}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,r){let s=null;return Array.isArray(r)?(l.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((r=>r.invoke(e,t,s)))}on(e,t){return Promise.all(this._clientPromises).then((()=>Object(c.a)(this._clients.map((r=>r.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then((n=>{t[s]=n.openPort(),0==--r&&e(t)}))}))}get test(){return{numClients:this._clients.length}}};return await r.open(e,t),r}async function q(e,t={}){if("string"!=typeof e)throw new n.a("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(Object(s.a)("host-webworker")&&!Object(s.a)("esri-workers")&&(r="local"),"local"===r){let r=await a.default.loadWorker(e);r||(r=await import(e)),Object(o.t)(t.signal);const s=t.client||r;return T([a.default.connect(r)],{...t,client:s})}if(await async function(){if(z)return z;W=Object(o.d)();const e=[];for(let t=0;t<F;t++){const r=J.create(t).then((e=>(D[t]=e,e)));e.push(r)}return z=Promise.all(e),z}(),Object(o.t)(t.signal),"dedicated"===r){const r=U++%F;return T([await D[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,F);if(r<F){const s=new Array(r);for(let n=0;n<r;++n){const r=U++%F;s[n]=D[r].open(e,t)}return T(s,t)}}return T(D.map((r=>r.open(e,t))),t)}let W,z=null},72:function(e,t,r){"use strict";r.r(t);var s=r(14),n=(r(4),r(0)),o=(r(2),r(5),r(15)),a=r(55),i=r(54),c=r(18),l=r(53),u=(r(25),r(35),r(36),r(52)),d=r(57),h=r(63),p=r(59),f=r(65),g=r(82);const b=new a.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let m=class extends u.a{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=d.a.fromJSON(t.spatialReference),s=[];for(let t=0;t<e.length;t++){const o=e[t],a=f.a.fromJSON(o),i=o.geometry&&o.geometry.spatialReference;Object(n.h)(a.geometry)&&!i&&(a.geometry.spatialReference=r),s.push(a)}return s}writeGeometryType(e,t,r,s){if(e)return void b.write(e,t,r,s);const{features:o}=this;if(o)for(const e of o)if(e&&Object(n.h)(e.geometry))return void b.write(e.geometry.type,t,r,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,s=Object(h.a)(e);return!r&&t.spatialReference&&(s.spatialReference=d.a.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)e&&Object(n.h)(e.geometry)&&e.geometry.spatialReference&&(t.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const s=t.features[r];if(s.geometry){const t=e&&e[r];s.geometry=t&&t.toJSON()||s.geometry}}return t}quantize(e){const{scale:[t,r],translate:[s,o]}=e,a=this.features,i=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((o-e)/r)));for(let e=0,t=a.length;e<t;e++)i(Object(n.n)(a[e].geometry))||(a.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[s,o],scale:[a,i]}=r,c=this._getHydrationFunction(e,(e=>e*a+s),(e=>o-e*i));for(const{geometry:e}of t)Object(n.h)(e)&&c(e);return this.transform=null,this}_quantizePoints(e,t,r){let s,n;const o=[];for(let a=0,i=e.length;a<i;a++){const i=e[a];if(a>0){const e=t(i[0]),a=r(i[1]);e===s&&a===n||(o.push([e-s,a-n]),s=e,n=a)}else s=t(i[0]),n=r(i[1]),o.push([s,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const s=Object(h.g)(e)?e.rings:e.paths,n=[];for(let e=0,o=s.length;e<o;e++){const o=s[e],a=this._quantizePoints(o,t,r);a&&n.push(a)}return n.length>0?(Object(h.g)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{const s=this._quantizePoints(e.points,t,r);return s.length>0?(e.points=s,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const s=Object(h.g)(e)?e.rings:e.paths;let n,o;for(let e=0,a=s.length;e<a;e++){const a=s[e];for(let e=0,s=a.length;e<s;e++){const s=a[e];e>0?(n+=s[0],o+=s[1]):(n=s[0],o=s[1]),s[0]=t(n),s[1]=r(o)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const s=e.points;let n,o;for(let e=0,a=s.length;e<a;e++){const a=s[e];e>0?(n+=a[0],o+=a[1]):(n=a[0],o=a[1]),a[0]=t(n),a[1]=r(o)}}:void 0}};Object(s.a)([Object(o.b)({type:String,json:{write:!0}})],m.prototype,"displayFieldName",void 0),Object(s.a)([Object(o.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"exceededTransferLimit",void 0),Object(s.a)([Object(o.b)({type:[f.a],json:{write:!0}})],m.prototype,"features",void 0),Object(s.a)([Object(i.a)("features")],m.prototype,"readFeatures",null),Object(s.a)([Object(o.b)({type:[g.a],json:{write:!0}})],m.prototype,"fields",void 0),Object(s.a)([Object(o.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:b.read}}})],m.prototype,"geometryType",void 0),Object(s.a)([Object(l.a)("geometryType")],m.prototype,"writeGeometryType",null),Object(s.a)([Object(o.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"hasM",void 0),Object(s.a)([Object(o.b)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],m.prototype,"hasZ",void 0),Object(s.a)([Object(o.b)({types:p.a,json:{write:!0}})],m.prototype,"queryGeometry",void 0),Object(s.a)([Object(i.a)("queryGeometry")],m.prototype,"readQueryGeometry",null),Object(s.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"spatialReference",void 0),Object(s.a)([Object(l.a)("spatialReference")],m.prototype,"writeSpatialReference",null),Object(s.a)([Object(o.b)({json:{write:!0}})],m.prototype,"transform",void 0),m=Object(s.a)([Object(c.a)("esri.tasks.support.FeatureSet")],m),m.prototype.toJSON.isDefaultToJSON=!0,m||(m={});var y=m;t.default=y}});