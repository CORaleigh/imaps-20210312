self.webpackChunkRemoteClient([151],{343:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return h})),n.d(t,"fetchSymbolFromStyle",(function(){return j})),n.d(t,"resolveWebStyleSymbol",(function(){return p})),n.d(t,"styleNameFromItem",(function(){return w}));var r=n(16),o=n(25),a=n(76),s=n(58),l=n(223),c=n(88),i=n(268),u=n(224),m=n(81),y=n(423),f=n(4);function b(e){return!!Object(f.a)("enable-feature:"+e)}const d={};function h(e,t,n){return e.styleUrl?function(e,t){return O(e,t).then((t=>({data:t.data,baseUrl:Object(o.E)(e),styleUrl:e})))}(e.styleUrl,n):e.styleName?function(e,t,n){const o=t.portal||c.a.getDefault();let a;const s=`${o.url} - ${o.user&&o.user.username} - ${e}`;return d[s]||(d[s]=function(e,t,n){return t.load(n).then((()=>{const r=new l.a({disableExtraQuery:!0,query:`owner:${N} AND type:${$} AND typekeywords:"${e}"`});return t.queryItems(r,n)})).then((({results:t})=>{let o=null;const a=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===a))&&e.type===$&&e.owner===N){o=e;break}if(!o)throw new r.a("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return o.load(n)}))}(e,o,n).then((e=>(a=e,e.fetchData()))).then((t=>({data:t,baseUrl:a.itemUrl,styleName:e})))),d[s]}(e.styleName,t,n):Promise.reject(new r.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function p(e,t,n,a){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){const r=S.replace(/\{SymbolName\}/gi,e.name);return O(r,n).then((e=>{const n=g(e.data);return Object(m.f)(n,{portal:t.portal,url:Object(o.I)(Object(o.E)(r)),origin:"portal-item"})}))}(e,t,a):h(e,t,a).then((r=>j(r,e.name,t,n,a))):Promise.reject(new r.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function j(e,t,n,s,l){const c=e.data,f={portal:n.portal,url:Object(o.I)(e.baseUrl),origin:"portal-item"},d=c.items.find((e=>e.name===t));if(!d){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new r.a("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let h=Object(a.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!b("force-wosr"))for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}(d,s),f),p=d.thumbnail&&d.thumbnail.href;const j=d.thumbnail&&d.thumbnail.imageData;Object(y.b)()&&(h=Object(y.a)(h),p=Object(y.a)(p));const w={portal:n.portal,url:Object(o.I)(Object(o.E)(h)),origin:"portal-item"};return O(h,l).then((r=>{const o="cimRef"===s?g(r.data):r.data,l=Object(m.f)(o,w);if(l&&Object(m.h)(l)){if(p){const e=Object(a.a)(p,f);l.thumbnail=new u.a({url:e})}else j&&(l.thumbnail=new u.a({url:"data:image/png;base64,"+j}));e.styleUrl?l.styleOrigin=new i.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new i.a({portal:n.portal,styleName:e.styleName,name:t}))}return l}))}function g(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function w(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function O(e,t){const n={responseType:"json",query:{f:"json"},...t};return Object(s.default)(Object(o.B)(e),n)}const N="esri_en",$="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},423:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(1);function o(e){return e=e||r.a.location.hostname,u.some((t=>{var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function a(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(s)||null!=t.match(c)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(i)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const s=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,c=/^[\w-]*\.mapsdevext.arcgis.com$/,i=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,s,l,/^jsapps.esri.com$/,c,i]}});