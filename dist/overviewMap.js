(self.webpackChunkimaps=self.webpackChunkimaps||[]).push([[555,192,3215,6194],{94850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var n,i=r(56140),o=(r(95830),r(36544)),s=r(79881),a=r(60263),l=r(87566),u=(r(10923),r(57002),r(86035),r(82677)),c=r(35470),p=r(22696),d=r(94588),h=r(82550),y=r(68055),m=r(60538),f=r(32656),g=r(39105),b=r(58385),v=r(83477),w=r(78745),_=r(3277),x=r(32105),C=r(809),M=r(1721),S=r(9870);let O=n=class extends b.wq{constructor(e){super(e),this.type="none"}clone(){return new n({type:this.type})}};var I;(0,i._)([(0,S.J)({none:"none",stayAbove:"stay-above"})],O.prototype,"type",void 0),O=n=(0,i._)([(0,l.j)("esri.ground.NavigationConstraint")],O);const T=o.Z.getLogger("esri.Ground");let k=I=class extends((0,b.eC)(C.Z)){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new v.Z;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"!==e.type&&"base-elevation"!==e.type&&T.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>{e.item.parent=null}))}initialize(){this.when().catch((e=>{T.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",(0,x.Z)(e,this._get("layers")))}writeLayers(e,t,r,n){const i=[];e?(n={...n,layerContainerType:"ground"},e.forEach((e=>{if("write"in e){const t={};(0,d.sM)(e)().write(t,n)&&i.push(t)}else n&&n.messages&&n.messages.push(new f.Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))})),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),(0,g.resolve)(this)}loadAll(){return(0,M.GZ)(this,(e=>{e(this.layers)}))}async queryElevation(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,g.throwIfAborted)(t);const i=new n,o=this.layers.filter(L).toArray();return i.queryAll(o,e,t)}async createElevationSampler(e,t){await this.load({signal:null==t?void 0:t.signal});const{ElevationQuery:n}=await Promise.all([r.e(8157),r.e(7333),r.e(3549)]).then(r.bind(r,93549));(0,g.throwIfAborted)(t);const i=new n,o=this.layers.filter(L).toArray();return i.createSamplerAll(o,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:(0,h.d9)(this.surfaceColor),navigationConstraint:(0,h.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new I({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):(0,g.resolve)(null)}_loadLayersFromJSON(e,t,n){const i=t&&t.origin||"web-scene",o=t&&t.portal||null,s=t&&t.url||null;return r.e(7254).then(r.bind(r,87254)).then((({populateOperationalLayers:t})=>{(0,g.throwIfAborted)(n);const r=[];if(e.layers&&Array.isArray(e.layers)){const n={context:{origin:i,url:s,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};r.push(t(this.layers,e.layers,n))}return(0,g.eachAlways)(r)})).then((()=>{}))}};function L(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}(0,i._)([(0,s.Cb)({json:{read:!1}})],k.prototype,"layers",null),(0,i._)([(0,m.c)("layers")],k.prototype,"writeLayers",null),(0,i._)([(0,s.Cb)({readOnly:!0})],k.prototype,"resourceInfo",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:y.z8,read:{reader:_.b,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,_.a)(e)},target:"transparency"}}})],k.prototype,"opacity",void 0),(0,i._)([(0,s.Cb)({type:w.default,json:{type:[y.z8],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],k.prototype,"surfaceColor",void 0),(0,i._)([(0,s.Cb)({type:O,json:{write:!0}})],k.prototype,"navigationConstraint",void 0),k=I=(0,i._)([(0,l.j)("esri.Ground")],k);const U=k;var R=r(78452),j=r(80882);const q=o.Z.getLogger("esri.support.groundUtils"),P={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var N=r(90921),D=r(16137);const Z=o.Z.getLogger("esri.Map");let F=class extends((0,D.Q)((0,N.K)(c.Z.EventedMixin(u.default)))){constructor(e){super(e),this.allLayers=new R.Z({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:e=>e.layers}),this.allTables=this._createTablesFlattener(this),this.basemap=null,this.ground=new U,this._basemapCache=(0,j.Df)()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),(0,j.Bf)(this._basemapCache),this._basemapCache=null}castBasemap(e){return(0,j.se)(e,this._basemapCache)}castGround(e){return function(e){let t;return"string"==typeof e?e in P?t=new U({resourceInfo:{data:{layers:[P[e]]}}}):q.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`):t=(0,y.se)(U,e),t}(e)||(Z.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(e){return this.allLayers.find((t=>t.id===e))}findTableById(e){return this.allTables.find((t=>t.id===e))}_createTablesFlattener(e){return new R.Z({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:e=>e&&"group"===e.type?this._createTablesFlattener(e):null,itemFilterFunction:e=>this._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)})}_isMapOrGroupLayer(e){return e&&(e===this||this._isGroupLayer(e))}_isGroupLayer(e){return e&&"group"===e.type}};(0,i._)([(0,s.Cb)({readOnly:!0,dependsOn:[],autoTracked:!1})],F.prototype,"allLayers",void 0),(0,i._)([(0,s.Cb)({readOnly:!0})],F.prototype,"allTables",void 0),(0,i._)([(0,s.Cb)({type:p.default})],F.prototype,"basemap",void 0),(0,i._)([(0,a.p)("basemap")],F.prototype,"castBasemap",null),(0,i._)([(0,s.Cb)({type:U,nonNullable:!0})],F.prototype,"ground",void 0),(0,i._)([(0,a.p)("ground")],F.prototype,"castGround",null),F=(0,i._)([(0,l.j)("esri.Map")],F);const E=F},65984:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n,i=r(56140),o=(r(95830),r(59472)),s=(r(36544),r(79881)),a=r(60263),l=r(87566),u=(r(10923),r(57002),r(86035),r(58385)),c=r(56885),p=r(36348),d=r(68055),h=r(30590),y=r(60538),m=r(61106),f=r(33655),g=r(17154);let b=n=class extends u.wq{constructor(...e){super(...e),this.position=new m.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,n){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){const i={position:e};return null!=t&&(i.heading=t),null!=r&&(i.tilt=r),null!=n&&(i.fov=n),i}return e}writePosition(e,t,r,n){const i=e.clone();i.x=(0,d.q9)(e.x||0),i.y=(0,d.q9)(e.y||0),i.z=e.hasZ?(0,d.q9)(e.z||0):e.z,t[r]=i.write(null,n)}readPosition(e,t){const r=new m.Z;return r.read(e,t),r.x=(0,d.q9)(r.x||0),r.y=(0,d.q9)(r.y||0),r.z=r.hasZ?(0,d.q9)(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new n({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};(0,i._)([(0,s.Cb)({type:m.Z,json:{write:{isRequired:!0}}})],b.prototype,"position",void 0),(0,i._)([(0,y.c)("position")],b.prototype,"writePosition",null),(0,i._)([(0,h.r)("position")],b.prototype,"readPosition",null),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,a.p)((e=>g.LU.normalize((0,d.q9)(e))))],b.prototype,"heading",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,a.p)((e=>(0,f.uZ)((0,d.q9)(e),-180,180)))],b.prototype,"tilt",void 0),(0,i._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],b.prototype,"fov",void 0),b=n=(0,i._)([(0,l.j)("esri.Camera")],b);const v=b;var w;let _=w=class extends u.wq{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new w({rotation:this.rotation,scale:this.scale,targetGeometry:(0,o.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,o.pC)(this.camera)?this.camera.clone():null})}};function x(){return{enabled:!this.camera}}(0,i._)([(0,s.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:x}}}}})],_.prototype,"rotation",void 0),(0,i._)([(0,a.p)("rotation")],_.prototype,"castRotation",null),(0,i._)([(0,s.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:x}}}}})],_.prototype,"scale",void 0),(0,i._)([(0,s.Cb)({types:p.qM,json:{read:c.im,write:!0,origins:{"web-scene":{read:c.im,write:{overridePolicy:x}}}}})],_.prototype,"targetGeometry",void 0),(0,i._)([(0,s.Cb)({type:v,json:{write:!0}})],_.prototype,"camera",void 0),_=w=(0,i._)([(0,l.j)("esri.Viewpoint")],_);const C=_},42738:(e,t,r)=>{"use strict";r.d(t,{a:()=>o,b:()=>c,f:()=>p,i:()=>i,m:()=>s,r:()=>a,s:()=>l,t:()=>u});var n=r(60418);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function o(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5];let l=r*o-n*i;return l?(l=1/l,e[0]=o*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*a-o*s)*l,e[5]=(n*s-r*a)*l,e):null}function s(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=r[0],c=r[1],p=r[2],d=r[3],h=r[4],y=r[5];return e[0]=n*u+o*c,e[1]=i*u+s*c,e[2]=n*p+o*d,e[3]=i*p+s*d,e[4]=n*h+o*y+a,e[5]=i*h+s*y+l,e}function a(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+o*u,e[1]=i*c+s*u,e[2]=n*-u+o*c,e[3]=i*-u+s*c,e[4]=a,e[5]=l,e}function l(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n*u,e[1]=i*u,e[2]=o*c,e[3]=s*c,e[4]=a,e[5]=l,e}function u(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=n*u+o*c+a,e[5]=i*u+s*c+l,e}function c(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function p(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}let h=s,y=d;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,r,n,i,o,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=s,e},invert:o,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:s,rotate:a,scale:l,translate:u,fromRotation:c,fromScaling:p,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},subtract:d,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){const r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=t[0],c=t[1],p=t[2],d=t[3],h=t[4],y=t[5];return Math.abs(r-u)<=n.E*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=n.E*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-p)<=n.E*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-d)<=n.E*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-h)<=n.E*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(l-y)<=n.E*Math.max(1,Math.abs(l),Math.abs(y))},mul:h,sub:y})},75384:(e,t,r)=>{"use strict";function n(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}r.d(t,{a:()=>i,c:()=>n});Object.freeze({__proto__:null,create:n,clone:i,fromValues:function(e,t,r,n,i,o){return[e,t,r,n,i,o]},createView:function(e,t){return new Float64Array(e,t,6)}})},98501:(e,t,r)=>{"use strict";r.d(t,{a:()=>l,b:()=>d,c:()=>c,f:()=>i,i:()=>s,j:()=>p,m:()=>a,n:()=>h,r:()=>u,s:()=>o});var n=r(60418);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function o(e,t,r,n,i,o,s,a,l,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=u,e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],h=r[1],y=r[2],m=r[3],f=r[4],g=r[5],b=r[6],v=r[7],w=r[8];return e[0]=d*n+h*s+y*u,e[1]=d*i+h*a+y*c,e[2]=d*o+h*l+y*p,e[3]=m*n+f*s+g*u,e[4]=m*i+f*a+g*c,e[5]=m*o+f*l+g*p,e[6]=b*n+v*s+w*u,e[7]=b*i+v*a+w*c,e[8]=b*o+v*l+w*p,e}function l(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],h=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=d*n+h*s+u,e[7]=d*i+h*a+c,e[8]=d*o+h*l+p,e}function u(e,t,r){const n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=Math.sin(r),h=Math.cos(r);return e[0]=h*n+d*s,e[1]=h*i+d*a,e[2]=h*o+d*l,e[3]=h*s-d*n,e[4]=h*a-d*i,e[5]=h*l-d*o,e[6]=u,e[7]=c,e[8]=p,e}function c(e,t,r){const n=r[0],i=r[1],o=r[2];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function p(e,t,r){const n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function d(e,t){const r=t[0],n=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],c=t[10],p=c*s-a*u,d=-c*o+a*l,h=u*o-s*l,y=r*p+n*d+i*h;if(!y)return null;const m=1/y;return e[0]=p*m,e[1]=(-c*n+i*u)*m,e[2]=(a*n-i*s)*m,e[3]=d*m,e[4]=(c*r-i*l)*m,e[5]=(-a*r+i*o)*m,e[6]=h*m,e[7]=(-u*r+n*l)*m,e[8]=(s*r-n*o)*m,e}function h(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],h=t[11],y=t[12],m=t[13],f=t[14],g=t[15],b=r*a-n*s,v=r*l-i*s,w=r*u-o*s,_=n*l-i*a,x=n*u-o*a,C=i*u-o*l,M=c*m-p*y,S=c*f-d*y,O=c*g-h*y,I=p*f-d*m,T=p*g-h*m,k=d*g-h*f;let L=b*k-v*T+w*I+_*O-x*S+C*M;return L?(L=1/L,e[0]=(a*k-l*T+u*I)*L,e[1]=(l*O-s*k-u*S)*L,e[2]=(s*T-a*O+u*M)*L,e[3]=(i*T-n*k-o*I)*L,e[4]=(r*k-i*O+o*S)*L,e[5]=(n*O-r*T-o*M)*L,e[6]=(m*C-f*x+g*_)*L,e[7]=(f*w-y*C-g*v)*L,e[8]=(y*x-m*w+g*b)*L,e):null}function y(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}let m=a,f=y;Object.freeze({__proto__:null,fromMat4:i,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:o,identity:s,transpose:function(e,t){if(e===t){const r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=c*s-a*u,d=-c*o+a*l,h=u*o-s*l;let y=r*p+n*d+i*h;return y?(y=1/y,e[0]=p*y,e[1]=(-c*n+i*u)*y,e[2]=(a*n-i*s)*y,e[3]=d*y,e[4]=(c*r-i*l)*y,e[5]=(-a*r+i*o)*y,e[6]=h*y,e[7]=(-u*r+n*l)*y,e[8]=(s*r-n*o)*y,e):null},adjoint:function(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=s*c-a*u,e[1]=i*u-n*c,e[2]=n*a-i*s,e[3]=a*l-o*c,e[4]=r*c-i*l,e[5]=i*o-r*a,e[6]=o*u-s*l,e[7]=n*l-r*u,e[8]=r*s-n*o,e},determinant:function(e){const t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*(u*o-s*l)+r*(-u*i+s*a)+n*(l*i-o*a)},multiply:a,translate:l,rotate:u,scale:c,scaleByVec2:p,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){const r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,p=n*a,d=i*s,h=i*a,y=i*l,m=o*s,f=o*a,g=o*l;return e[0]=1-p-y,e[3]=c-g,e[6]=d+f,e[1]=c+g,e[4]=1-u-y,e[7]=h-m,e[2]=d-f,e[5]=h+m,e[8]=1-u-p,e},normalFromMat4Legacy:d,normalFromMat4:h,projection:function(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},subtract:y,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){const r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],p=e[8],d=t[0],h=t[1],y=t[2],m=t[3],f=t[4],g=t[5],b=t[6],v=t[7],w=t[8];return Math.abs(r-d)<=n.E*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=n.E*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-y)<=n.E*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-m)<=n.E*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-f)<=n.E*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(l-g)<=n.E*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-b)<=n.E*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-v)<=n.E*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(p-w)<=n.E*Math.max(1,Math.abs(p),Math.abs(w))},mul:m,sub:f})},14286:(e,t,r)=>{"use strict";r.d(t,{a:()=>c,b:()=>S,c:()=>i,d:()=>a,e:()=>g,f:()=>v,g:()=>b,h:()=>s,i:()=>d,j:()=>h,k:()=>C,l:()=>y,m:()=>w,n:()=>f,o:()=>_,p:()=>p,q:()=>m,s:()=>o,t:()=>x});var n=r(60418);function i(e,t){return e[0]=t[0],e[1]=t[1],e}function o(e,t,r){return e[0]=t,e[1]=r,e}function s(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function p(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function d(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function h(e,t){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function y(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function m(e){const t=e[0],r=e[1];return t*t+r*r}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e}function g(e,t){const r=t[0],n=t[1];let i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function b(e,t){return e[0]*t[0]+e[1]*t[1]}function v(e,t,r){const n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function w(e,t,r,n){const i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function _(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function x(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function C(e,t){return e[0]===t[0]&&e[1]===t[1]}const M=y,S=a,O=l,I=u,T=d,k=h,L=m;Object.freeze({__proto__:null,copy:i,set:o,add:s,subtract:a,multiply:l,divide:u,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:c,scaleAndAdd:p,distance:d,squaredDistance:h,length:y,squaredLength:m,negate:f,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:g,dot:b,cross:v,lerp:w,random:function(e,t){t=t||1;const r=2*(0,n.R)()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},transformMat2:_,transformMat2d:x,transformMat3:function(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},transformMat4:function(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},rotate:function(e,t,r,n){const i=t[0]-r[0],o=t[1]-r[1],s=Math.sin(n),a=Math.cos(n);return e[0]=i*a-o*s+r[0],e[1]=i*s+o*a+r[1],e},angle:function(e,t){const r=e[0],n=e[1],i=t[0],o=t[1];let s=r*r+n*n;s>0&&(s=1/Math.sqrt(s));let a=i*i+o*o;a>0&&(a=1/Math.sqrt(a));const l=(r*i+n*o)*s*a;return l>1?0:l<-1?Math.PI:Math.acos(l)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:C,equals:function(e,t){const r=e[0],i=e[1],o=t[0],s=t[1];return Math.abs(r-o)<=n.E*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=n.E*Math.max(1,Math.abs(i),Math.abs(s))},len:M,sub:S,mul:O,div:I,dist:T,sqrDist:k,sqrLen:L})},55735:(e,t,r)=>{"use strict";function n(){return[0,0]}function i(e,t){return[e,t]}function o(e){const t=[0,0],r=Math.min(2,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function s(e,t){return new Float64Array(e,t,2)}function a(){return i(1,1)}function l(){return i(1,0)}function u(){return i(0,1)}r.d(t,{a:()=>n,c:()=>s,d:()=>o,f:()=>i});const c=a(),p=l(),d=u();Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1]]},fromValues:i,fromArray:o,createView:s,zeros:function(){return[0,0]},ones:a,unitX:l,unitY:u,ZEROS:[0,0],ONES:c,UNIT_X:p,UNIT_Y:d})},78452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(56140),i=r(79881),o=r(87566),s=r(83477),a=r(59691);let l=class extends s.Z{constructor(e){super(e),this._handles=new a.Z,this.root=null}initialize(){this._handles.add(this.rootCollectionNames.map((e=>this.watch("root."+e,(()=>this.updateCollections()),!0)))),this.updateCollections()}destroy(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}updateCollections(){this._collections=this.rootCollectionNames.map((e=>this.get("root."+e))).filter((e=>null!=e)),this.refresh()}refresh(){const e=this._handles;e.remove("collections");const t=new Array;let r=0;for(const e of this._collections)r=this._processCollection(t,r,e);this.splice(r,this.length);for(const r of t)e.add(r.on("after-changes",(()=>this.refresh())),"collections")}_createNewInstance(e){return new s.Z(e)}_processCollection(e,t,r){return r?(e.push(r),r.forEach((r=>{if(r){if(!this.itemFilterFunction||this.itemFilterFunction(r)){const e=this.indexOf(r,t);e>=0?e!==t&&this.reorder(r,t):this.add(r,t),++t}this.getChildrenFunction&&(t=this._processCollection(e,t,this.getChildrenFunction(r)))}})),t):t}};(0,n._)([(0,i.Cb)()],l.prototype,"rootCollectionNames",void 0),(0,n._)([(0,i.Cb)()],l.prototype,"root",void 0),(0,n._)([(0,i.Cb)()],l.prototype,"getChildrenFunction",void 0),(0,n._)([(0,i.Cb)()],l.prototype,"itemFilterFunction",void 0),l=(0,n._)([(0,o.j)("esri.core.CollectionFlattener")],l);const u=l},77204:(e,t,r)=>{"use strict";r.d(t,{r:()=>c,p:()=>u});var n=r(56140),i=r(79881),o=r(87566),s=r(82677),a=r(59691),l=r(45671);const u=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new a.Z}get updatingHandles(){return this._get("updatingHandles")||new l.t}};return(0,n._)([(0,i.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,n._)([(0,i.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,n._)([(0,o.j)("esri.core.HandleOwner")],t),t};let c=class extends(u(s.default)){};c=(0,n._)([(0,o.j)("esri.core.HandleOwner")],c)},59351:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>i,UI:()=>o,q6:()=>s});var n=r(39105);function i(e,t,r){return(0,n.eachAlways)(e.map(((e,n)=>t.apply(r,[e,n]))))}function o(e,t,r){return(0,n.eachAlways)(e.map(((e,n)=>t.apply(r,[e,n])))).then((e=>e.map((e=>e.value))))}function s(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}},94588:(e,t,r)=>{"use strict";r.d(t,{Bg:()=>n,sM:()=>i});r(95830);function n(e){}function i(e){return()=>e}},19048:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n,i=r(56140),o=(r(95830),r(36544),r(68055),r(79881)),s=r(56274),a=r(30590),l=r(15307),u=r(87566),c=r(60538),p=(r(10923),r(57002),r(86035),r(19677)),d=r(58385),h=r(93533);const y=(0,s.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();(0,p.e$)(m,"orthometric");const f=(0,s.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let g=n=class extends d.wq{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return y.write(e,t,r)}readHeightModel(e,t,r){return y.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new l.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){return f.read(e)||(r&&r.messages&&r.messages.push(b(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,h.$C)(e)||f.read(e)||(r&&r.messages&&r.messages.push(b(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new n({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,h.cM)(t);return new n({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new n;return t.read(e,{origin:"web-scene"}),t}};function b(e,t){return new l.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,i._)([(0,o.Cb)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],g.prototype,"heightModel",void 0),(0,i._)([(0,c.c)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),(0,i._)([(0,a.r)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),(0,i._)([(0,o.Cb)({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:f.jsonValues,write:f.write}}}})],g.prototype,"heightUnit",void 0),(0,i._)([(0,a.r)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),(0,i._)([(0,a.r)("service","heightUnit")],g.prototype,"readHeightUnitService",null),(0,i._)([(0,o.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),(0,i._)([(0,a.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null),g=n=(0,i._)([(0,u.j)("esri.geometry.HeightModelInfo")],g);const v=g},50897:(e,t,r)=>{"use strict";r.d(t,{Gv:()=>_,SO:()=>d,d9:()=>o,r3:()=>b,BD:()=>h,Qn:()=>y,Zm:()=>f,jE:()=>m,Ue:()=>i,cS:()=>w,Ho:()=>u,oJ:()=>a,al:()=>s,Cb:()=>p,kK:()=>g,vk:()=>v,HH:()=>l,bf:()=>c});r(95830);var n=r(52937);function i(e=x){return[e[0],e[1],e[2],e[3]]}function o(e){return[e[0],e[1],e[2],e[3]]}function s(e,t,r,n,o=i()){return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o}function a(e,t=i()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new n.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function u(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function c(e){return e[0]>=e[2]?0:e[2]-e[0]}function p(e){return e[1]>=e[3]?0:e[3]-e[1]}function d(e){return c(e)*p(e)}function h(e,t){return m(e,t[0],t[1])}function y(e,t){return m(e,t.x,t.y)}function m(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function f(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function g(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function b(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function v(e,t,r=e){return r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r}function w(e){return e?function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}(e,_):i(_)}const _=[1/0,1/0,-1/0,-1/0],x=[0,0,0,0]},91535:(e,t,r)=>{"use strict";r.d(t,{aX:()=>I,or:()=>T});var n=r(34926),i=r(59472),o=r(36544),s=r(32656),a=r(39105),l=r(27780),u=r(73032),c=r(41241),p=r(53817),d=r(93833),h=r(10923),y=r(56885),m=(r(36348),r(54721));async function f(e,t,r){const n="string"==typeof e?(0,h.mN)(e):e,i=t[0].spatialReference,o=(0,y.Ji)(t[0]),s={...r,query:{...n.query,f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify(g(t))}};return function(e,t,r){const n=(0,y.q9)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}((await(0,m.default)(n.path+"/simplify",s)).data,o,i)}function g(e){return{geometryType:(0,y.Ji)(e[0]),geometries:e.map((e=>e.toJSON()))}}const b=o.Z.getLogger("esri.geometry.support.normalizeUtils"),v={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new d.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator}),minus180Line:new d.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d.Z({paths:[[[180,-180],[180,180]]],spatialReference:u.Z.WGS84}),minus180Line:new d.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:u.Z.WGS84})}};function w(e){return"polygon"===e.type}function _(e){return"polyline"===e[0].type}function x(e){return w(e)?e.rings:e.paths}function C(e,t){return Math.ceil((e-t)/(2*t))}function M(e,t){const r=x(e);for(const e of r)for(const r of e)r[0]+=t;return e}function S(e,t,r){if(t){const t=function(e,t){if(!(e instanceof d.Z||e instanceof p.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw b.error(e),new s.Z(e)}const r=x(e),n=[];for(const e of r){const r=[];n.push(r),r.push([e[0][0],e[0][1]]);for(let n=0;n<e.length-1;n++){const i=e[n][0],o=e[n][1],s=e[n+1][0],a=e[n+1][1],l=Math.sqrt((s-i)*(s-i)+(a-o)*(a-o)),u=(a-o)/l,c=(s-i)/l,p=l/t;if(p>1){for(let e=1;e<=p-1;e++){const n=e*t,s=c*n+i,a=u*n+o;r.push([s,a])}const e=(l+Math.floor(p-1)*t)/2,n=c*e+i,s=u*e+o;r.push([n,s])}r.push([s,a])}}return w(e)?new p.Z({rings:n,spatialReference:e.spatialReference}):new d.Z({paths:n,spatialReference:e.spatialReference})}(e,1e6);e=(0,c.Sx)(t,!0)}return r&&(e=M(e,r)),e}function O(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=C(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=C(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=C(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=C(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}async function I(e,t,r){if(!Array.isArray(e))return I([e],t);const o=t?t.url:n.Z.geometryServiceUrl;let s,u,g,b,w,T,k,L,U=0;const R=[],j=[];for(const t of e)if((0,i.Wi)(t))j.push(t);else if(s||(s=t.spatialReference,u=(0,l.C5)(s),g=s.isWebMercator,T=g?102100:4326,b=v[T].maxX,w=v[T].minX,k=v[T].plus180Line,L=v[T].minus180Line),u)if("mesh"===t.type)j.push(t);else if("point"===t.type)j.push(O(t.clone(),b,w));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>O(e,b,w))),j.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,u);j.push(e.rings?new p.Z(e):e)}else if(t.extent){const e=t.extent,r=C(e.xmin,w)*(2*b);let n=0===r?t.clone():M(t.clone(),r);e.offset(r,0),e.intersects(k)&&e.xmax!==b?(U=e.xmax>U?e.xmax:U,n=S(n,g),R.push(n),j.push("cut")):e.intersects(L)&&e.xmin!==w?(U=e.xmax*(2*b)>U?e.xmax*(2*b):U,n=S(n,g,360),R.push(n),j.push("cut")):j.push(n)}else j.push(t.clone());else j.push(t);let q=C(U,b),P=-90;const N=q,D=new d.Z;for(;q>0;){const e=360*q-180;D.addPath([[e,P],[e,-1*P]]),P*=-1,q--}if(R.length>0&&N>0){const t=function(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],o=t.geometries[n],s=x(o);for(let e=0;e<s.length;e++){const t=s[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*C(r,180);for(let r=0;r<t.length;r++){const t=o.getPoint(e,r);o.setPoint(e,r,t.clone().offset(n,0))}return!0}}))}if(i===r){if("polygon"===e[0].type)for(const t of x(o))e[i]=e[i].addRing(t);else if(_(e))for(const t of x(o))e[i]=e[i].addPath(t)}else r=i,e[i]=o}return e}(R,await async function(e,t,r,n){const i="string"==typeof e?(0,h.mN)(e):e,o=t[0].spatialReference,s={...n,query:{...i.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:(0,y.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await(0,m.default)(i.path+"/cut",s),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map((e=>{const t=(0,y.im)(e);return t.spatialReference=o,t}))}}(o,R,D,r)),n=[],s=[];for(let r=0;r<j.length;r++){const o=j[r];if("cut"!==o)s.push(o);else{const o=t.shift(),a=e[r];(0,i.pC)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&o.rings.length>=a.rings.length?(n.push(o),s.push("simplify")):s.push(g?(0,c.$)(o):o)}}if(!n.length)return s;const a=await f(o,n,r),l=[];for(let e=0;e<s.length;e++){const t=s[e];"simplify"!==t?l.push(t):l.push(g?(0,c.$)(a.shift()):a.shift())}return l}const Z=[];for(let e=0;e<j.length;e++){const t=j[e];if("cut"!==t)Z.push(t);else{const e=R.shift();Z.push(!0===g?(0,c.$)(e):e)}}return(0,a.resolve)(Z)}function T(e,t){const r=(0,l.C5)(t);if(r){const[t,n]=r.valid,i=n-t;if(e<t)for(;e<t;)e+=i;if(e>n)for(;e>n;)e-=i}return e}},56700:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(56140),i=(r(95830),r(34926)),o=r(36544),s=(r(68055),r(79881)),a=r(87566),l=r(32656),u=r(10923),c=(r(57002),r(86035),r(73032)),p=r(52937),d=(r(36348),r(35470)),h=r(35326),y=r(54721),m=r(809);let f=0;const g=o.Z.getLogger("esri.layers.Layer");let b=class extends(d.Z.EventedMixin((0,h.I)(m.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new p.Z(-180,-90,180,90,c.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+f++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=c.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e,n=await r.e(956).then(r.bind(r,50956));try{return await n.fromUrl(t)}catch(e){throw g.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",e),e}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},n=await r.e(1204).then(r.bind(r,1204));try{return await n.fromItem(t)}catch(e){const r=t&&t.portalItem,n=r&&r.id||"unset",o=r&&r.portal&&r.portal.url||i.Z.portalUrl;throw g.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",e),e}}initialize(){this.when().catch((e=>{var t,r;o.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(t=this.title)?t:"no title"}', id: '${null!=(r=this.id)?r:"no id"}')`,{error:e})}))}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const e=this.url;return e?(0,u.mN)(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,y.default)(e,{query:{f:"json"},responseType:"json"})).data;throw new l.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,n._)([(0,s.Cb)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,n._)([(0,s.Cb)({type:p.Z})],b.prototype,"fullExtent",void 0),(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["attributionDataUrl"]})],b.prototype,"hasAttributionData",null),(0,n._)([(0,s.Cb)({type:String})],b.prototype,"id",void 0),(0,n._)([(0,s.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,n._)([(0,s.Cb)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,n._)([(0,s.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,n._)([(0,s.Cb)()],b.prototype,"parent",void 0),(0,n._)([(0,s.Cb)({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null),(0,n._)([(0,s.Cb)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,n._)([(0,s.Cb)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,n._)([(0,s.Cb)({type:c.Z})],b.prototype,"spatialReference",void 0),(0,n._)([(0,s.Cb)({type:String})],b.prototype,"title",void 0),(0,n._)([(0,s.Cb)({type:String,readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,n._)([(0,s.Cb)()],b.prototype,"url",void 0),(0,n._)([(0,s.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0),b=(0,n._)([(0,a.j)("esri.layers.Layer")],b);const v=b},70834:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n,i=r(56140),o=(r(95830),r(36544),r(68055)),s=r(79881),a=r(56274),l=r(9870),u=r(30590),c=r(87566),p=(r(10923),r(57002),r(86035),r(58385)),d=r(6585),h=r(88210);const y=new a.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=n=class extends p.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch(e){}return r?y.fromJSON(r.fieldValueType):null}clone(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,i._)([(0,s.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,i._)([(0,s.Cb)()],m.prototype,"description",void 0),(0,i._)([(0,u.r)("description")],m.prototype,"readDescription",null),(0,i._)([(0,s.Cb)({types:d.V5,json:{read:{reader:d.im},write:!0}})],m.prototype,"domain",void 0),(0,i._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,i._)([(0,s.Cb)({type:o.z8,json:{write:!0}})],m.prototype,"length",void 0),(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,i._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,i._)([(0,l.J)(h.v)],m.prototype,"type",void 0),(0,i._)([(0,s.Cb)()],m.prototype,"valueType",void 0),(0,i._)([(0,u.r)("valueType",["description"])],m.prototype,"readValueType",null),m=n=(0,i._)([(0,c.j)("esri.layers.support.Field")],m);const f=m},97849:(e,t,r)=>{"use strict";r.d(t,{ld:()=>p,B5:()=>u,M8:()=>h,h3:()=>b,G:()=>g,Qc:()=>c,Nm:()=>y,XG:()=>m,a7:()=>d,wH:()=>f});var n=r(59472),i=r(10923),o=r(37704);const s=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function u(e){return!!a.test(e)}function c(e){const t=(0,i.mN)(e),r=t.path.match(a)||t.path.match(l);if(!r)return null;const[,n,o,s,u]=r,c=o.indexOf("/");return{title:p(-1!==c?o.slice(c+1):o),serverType:s,sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:n}}}function p(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d(e,t){const r=[];if(e){const t=c(e);(0,n.pC)(t)&&t.title&&r.push(t.title)}if(t){const e=p(t);r.push(e)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function h(e){if(!e)return!1;const t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function y(e,t){return e?(0,i.Qj)((0,i.Hu)(e,t)):e}function m(e,t,r){if(!t)return{url:t};t=(0,i.Hu)(t,r);const o=c((0,i.mN)(t).path);let s;return(0,n.pC)(o)&&(null!=o.sublayer&&null==e.layerId&&(s=o.sublayer),t=o.url.path),{url:(0,i.Qj)(t),layerId:s}}function f(e,t,r,n,s){(0,o.w)(t,n,"url",s),n.url&&null!=e.layerId&&(n.url=(0,i.v_)(n.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;const t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),o=-1!==t.indexOf("/wmsserver");return r&&(n||i||o)}function b(e){if(!e)return!1;const t=new i.R9((0,i.hF)(e)).authority.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},88210:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});const n=new(r(56274).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},80192:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(56140),i=(r(95830),r(82550)),o=r(59472),s=r(36544),a=r(68055),l=r(79881),u=r(30590),c=r(87566),p=r(32656),d=r(10923),h=(r(57002),r(86035),r(39105)),y=r(58385),m=r(52937),f=r(12973),g=r(809),b=r(32797),v=r(60263),w=r(82677);const _=s.Z.getLogger("esri.portal.PortalItemResource");let x=class extends w.default{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){(0,o.pC)(e)&&(0,d.YP)(e)?_.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if((0,o.Wi)(r))throw new p.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,signal:(0,o.U2)(t,"signal")})}async update(e,t){return(await r.e(5510).then(r.bind(r,85510))).addOrUpdateResource(this,"update",e,t)}hasPath(){return(0,o.pC)(this.path)}normalizePath(e,t){return(0,o.Wi)(e)?e:(e=e.replace(/^\/+/,""),(0,o.pC)(t)&&(0,d.YP)(e)&&(e=(0,d.PF)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,n._)([(0,l.Cb)()],x.prototype,"portalItem",void 0),(0,n._)([(0,l.Cb)({type:String,value:null})],x.prototype,"path",null),(0,n._)([(0,v.p)("path")],x.prototype,"_castPath",null),(0,n._)([(0,l.Cb)({type:String,readOnly:!0,dependsOn:["portalItem","path"]})],x.prototype,"url",null),(0,n._)([(0,l.Cb)({type:String,readOnly:!0,dependsOn:["portalItem","path"]})],x.prototype,"itemRelativeUrl",null),x=(0,n._)([(0,c.j)("esri.portal.PortalItemResource")],x);const C=x;let M=class extends w.default{constructor(e){super(e),this.created=null,this.rating=null}};(0,n._)([(0,l.Cb)()],M.prototype,"created",void 0),(0,n._)([(0,l.Cb)()],M.prototype,"rating",void 0),M=(0,n._)([(0,c.j)("esri.portal.PortalRating")],M);const S=M;var O;let I=O=class extends((0,y.eC)(g.Z)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return(0,a.TJ)(O,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return"Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Geoenrichment Service"===e?r="GeoEnrichment Service":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r}readExtent(e){return e&&e.length?new m.Z(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,n=!1,i=!1,o=!1,s=!1,a=!1,l=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(n=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(i=t.indexOf("Table")>-1,o=t.indexOf("Route Layer")>-1,s=t.indexOf("Markup")>-1,a=-1!==t.indexOf("Spatiotemporal"),l=-1!==t.indexOf("UtilityNetwork"),r=a&&i?"spatiotemporaltable":i?"table":o?"routelayer":s?"markup":a?"spatiotemporal":n?"featureshosted":l?"utilitynetwork":"features"):r="map service"===e||"wms"===e||"wmts"===e?n||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e?t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers":"knowledge graph service"===e?"knowledgegraph":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"maps",r?(0,f.V)("esri/images/portal/"+r+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=b.Z.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:(0,o.pC)(e)?e.signal:null}):{})).then((e=>{this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),(0,h.resolve)(this)}addRating(e){const t={method:"post",query:{}};return e instanceof S&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new S({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,i.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,i.d9)(this.categories),created:(0,i.d9)(this.created),culture:this.culture,description:this.description,extent:(0,i.d9)(this.extent),groupCategories:(0,i.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,i.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,i.d9)(this.screenshots),size:this.size,snippet:this.snippet,tags:(0,i.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,i.d9)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new O({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",e).then((e=>null!=e.rating?(e.created=new Date(e.created),new S(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:e,...t},O)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then((()=>this.reload()))})):(0,h.reject)(new p.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if("string"==typeof t)(0,d.HK)(t)?n.query={data:t}:n.query={url:(0,d.hF)(t)},(0,o.pC)(r)&&(n.query.filename=r);else{const e=new FormData;(0,o.pC)(r)?e.append("file",t,r):e.append("file",t),n.body=e}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,n).then((()=>this.reload()))})):(0,h.reject)(new p.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await r.e(5510).then(r.bind(r,85510))).fetchResources(this,e,t)}async addResource(e,t,n){const i=await r.e(5510).then(r.bind(r,85510));return e.portalItem=this,i.addOrUpdateResource(e,"add",t,n)}async removeResource(e,t){const n=await r.e(5510).then(r.bind(r,85510));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new p.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n.removeResource(this,e,t)}async removeAllResources(e){return(await r.e(5510).then(r.bind(r,85510))).removeAllResources(this,e)}resourceFromPath(e){return new C({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return(0,i.yd)(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new O({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};(0,n._)([(0,l.Cb)({type:["private","shared","org","public"]})],I.prototype,"access",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"accessInformation",void 0),(0,n._)([(0,l.Cb)({json:{read:{source:"appProxies"}}})],I.prototype,"applicationProxies",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"avgRating",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"categories",void 0),(0,n._)([(0,l.Cb)({type:Date})],I.prototype,"created",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"culture",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"description",void 0),(0,n._)([(0,l.Cb)({dependsOn:["type","typeKeywords"],readOnly:!0})],I.prototype,"displayName",null),(0,n._)([(0,l.Cb)({type:m.Z})],I.prototype,"extent",void 0),(0,n._)([(0,u.r)("extent")],I.prototype,"readExtent",null),(0,n._)([(0,l.Cb)()],I.prototype,"groupCategories",void 0),(0,n._)([(0,l.Cb)({dependsOn:["type","typeKeywords"],readOnly:!0})],I.prototype,"iconUrl",null),(0,n._)([(0,l.Cb)()],I.prototype,"id",void 0),(0,n._)([(0,l.Cb)({dependsOn:["type"],readOnly:!0})],I.prototype,"isLayer",null),(0,n._)([(0,l.Cb)()],I.prototype,"itemControl",void 0),(0,n._)([(0,l.Cb)({dependsOn:["portal.restUrl","id"],readOnly:!0})],I.prototype,"itemUrl",null),(0,n._)([(0,l.Cb)()],I.prototype,"licenseInfo",void 0),(0,n._)([(0,l.Cb)({type:Date})],I.prototype,"modified",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"name",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"numComments",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"numRatings",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"numViews",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"owner",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"ownerFolder",void 0),(0,n._)([(0,l.Cb)({type:b.Z})],I.prototype,"portal",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"screenshots",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"size",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"snippet",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"sourceJSON",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"tags",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"thumbnail",void 0),(0,n._)([(0,l.Cb)({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],I.prototype,"thumbnailUrl",null),(0,n._)([(0,l.Cb)()],I.prototype,"title",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"typeKeywords",void 0),(0,n._)([(0,l.Cb)()],I.prototype,"url",void 0),(0,n._)([(0,l.Cb)({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],I.prototype,"userItemUrl",null),I=O=(0,n._)([(0,c.j)("esri.portal.PortalItem")],I);const T=I},99322:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>d,JN:()=>c,$o:()=>p});var n=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),o=r(87566),s=(r(10923),r(57002),r(86035),r(83477)),a=r(32105),l=r(15988);const u=s.Z.ofType(l.default);let c=class extends u{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new u(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};(0,n._)([(0,i.Cb)()],c.prototype,"owner",null),c=(0,n._)([(0,o.j)("esri.support.GraphicsCollection")],c);const p=(e="graphics")=>({type:c,cast:a.R,set(t){const r=(0,a.Z)(t,this._get(e),c);r.owner=this,this._set(e,r)}});const d=c},90921:(e,t,r)=>{"use strict";r.d(t,{K:()=>y});var n=r(56140),i=(r(95830),r(36544)),o=(r(68055),r(79881)),s=r(87566),a=(r(10923),r(57002),r(86035),r(39105)),l=r(83477),u=r(32105),c=r(56700);function p(e){return e&&"group"===e.type}function d(e,t,r){let n,i;if(e)for(let o=0,s=e.length;o<s;o++){if(n=e.getItemAt(o),n[t]===r)return n;if(p(n)&&(i=d(n.layers,t,r),i))return i}}const h=i.Z.getLogger("esri.support.LayersMixin"),y=e=>{let t=class extends e{constructor(...e){super(...e),this.layers=new l.Z;const t=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||h.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on("before-add",(e=>{var t;(t=e.item).parent&&"remove"in t.parent&&t.parent.remove(t)})),this.layers.on("after-add",(e=>t(e.item))),this.layers.on("after-remove",(e=>r(e.item)))}destroy(){const e=this.layers.removeAll();for(const t of e)this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,u.Z)(e,this._get("layers")))}add(e,t){const r=this.layers;t=r.getNextIndex(t),e instanceof c.Z?e.parent===this?this.reorder(e,t):r.add(e,t):(0,a.isPromiseLike)(e)?e.then((e=>{this.destroyed||this.add(e,t)})):h.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,t){const r=this.layers;t=r.getNextIndex(t),e.slice().forEach((e=>{e.parent!==this?(r.add(e,t),t+=1):this.reorder(e,t)}))}findLayerById(e){return d(this.layers,"id",e)}findLayerByUid(e){return d(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return(0,n._)([(0,o.Cb)()],t.prototype,"layers",null),t=(0,n._)([(0,s.j)("esri.support.LayersMixin")],t),t}},16137:(e,t,r)=>{"use strict";r.d(t,{Q:()=>d});var n=r(56140),i=(r(95830),r(36544)),o=(r(68055),r(79881)),s=r(87566),a=(r(10923),r(57002),r(86035),r(83477)),l=r(32105);const u=i.Z.getLogger("esri.support.TablesMixin");function c(e){return e&&"group"===e.type}function p(e,t,r){if(e)for(let n=0,i=e.length;n<i;n++){const i=e.getItemAt(n);if(i[t]===r)return i;if(c(i)){const e=p(i.tables,t,r);if(e)return e}}}const d=e=>{let t=class extends e{constructor(...e){super(...e),this.tables=new a.Z,this.tables.on("after-add",(e=>{const t=e.item;t.parent&&t.parent!==this&&"tables"in t.parent&&t.parent.tables.remove(t),t.parent=this,"feature"!==t.type&&u.error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(e=>{e.item.parent=null}))}destroy(){const e=this.tables.removeAll();for(const t of e)t.destroy();this.tables.destroy()}set tables(e){this._set("tables",(0,l.Z)(e,this._get("tables")))}findTableById(e){return p(this.tables,"id",e)}findTableByUid(e){return p(this.tables,"uid",e)}};return(0,n._)([(0,o.Cb)()],t.prototype,"tables",null),t=(0,n._)([(0,s.j)("esri.support.TablesMixin")],t),t}},80882:(e,t,r)=>{"use strict";r.d(t,{Bj:()=>y,Df:()=>c,Bf:()=>p,se:()=>d,tR:()=>h,zb:()=>m,aL:()=>f});var n=r(36544),i=r(68055),o=r(10923),s=r(83477),a=r(93776),l=r(22696);const u=n.Z.getLogger("esri.support.basemapUtils");function c(){return{}}function p(e){for(const t in e){const r=e[t];!1===(null==r?void 0:r.destroyed)&&r.destroy(),delete e[t]}}function d(e,t){var r;let n;if("string"==typeof e){if(!(e in a.s)){const t=Object.keys(a.s).map((e=>`"${e}"`)).join(", ");return u.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`),null}t&&(n=t[e]),n||(n=l.default.fromId(e),t&&(t[e]=n))}else n=(0,i.se)(l.default,e);return null!=(r=n)&&r.destroyed&&(u.warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function h(e){let t=null;const r=v(e),n=!r.baseLayers.length;for(const e in a.s){const i=M(r,x(a.s[e]),{mustMatchReferences:n});if("equal"===i){t=e;break}"base-layers-equal"===i&&(t=e)}return t}function y(e,t){return e===t||"equal"===M(v(e),v(t),{mustMatchReferences:!0})}function m(e){return!(null==e||!e.baseLayers.concat(e.referenceLayers).some(f))}function f(e){if(b(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(b(null==r?void 0:r.sourceUrl))return!0}return!1}const g=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function b(e){if(!e)return!1;const t=new o.R9((0,o.hF)(e));return g.test(t.authority)}function v(e){return e?!e.loaded&&e.resourceInfo?x(e.resourceInfo.data):{baseLayers:w(e.baseLayers),referenceLayers:w(e.referenceLayers)}:null}function w(e){return(s.Z.isCollection(e)?e.toArray():e).map(_)}function _(e){return{type:e.type,url:I("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function x(e){return e?{baseLayers:C(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:C(e.baseMapLayers.filter((e=>e.isReference)))}:null}function C(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:I(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)))}function M(e,t,r){return null!=e!=(null!=t)?"not-equal":e?S(e.baseLayers,t.baseLayers)?S(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function S(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!O(e[r],t[r]))return!1;return!0}function O(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function I(e){return e?(0,o.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},95986:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(56140),i=(r(95830),r(36544),r(68055),r(79881)),o=r(87566),s=r(10923),a=(r(57002),r(86035),r(82677));let l=class extends a.default{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return"string"!=typeof e?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?(0,s.mN)(e):null}_encode(e,t,r){const n={};for(const i in e){if("declaredClass"===i)continue;const o=e[i];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){n[i]=[];for(let e=0;e<o.length;e++)n[i][e]=this._encode(o[e])}else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(r&&r[i]);n[i]=t?e:JSON.stringify(e)}else n[i]=t?o:JSON.stringify(o);else n[i]=o}return n}};(0,n._)([(0,i.Cb)({readOnly:!0,dependsOn:["url"]})],l.prototype,"parsedUrl",null),(0,n._)([(0,i.Cb)()],l.prototype,"requestOptions",void 0),(0,n._)([(0,i.Cb)({type:String})],l.prototype,"url",void 0),l=(0,n._)([(0,o.j)("esri.tasks.Task")],l);const u=l},76194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(56140),i=(r(95830),r(59472)),o=(r(36544),r(68055),r(79881)),s=r(56274),a=r(30590),l=r(87566),u=r(60538),c=(r(10923),r(57002),r(86035),r(58385)),p=r(73032),d=r(56885),h=r(36348),y=r(15988),m=r(70834);const f=new s.Xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let g=class extends c.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=p.Z.fromJSON(t.spatialReference),n=[];for(let t=0;t<e.length;t++){const o=e[t],s=y.default.fromJSON(o),a=o.geometry&&o.geometry.spatialReference;(0,i.pC)(s.geometry)&&!a&&(s.geometry.spatialReference=r),n.push(s)}return n}writeGeometryType(e,t,r,n){if(e)return void f.write(e,t,r,n);const{features:o}=this;if(o)for(const e of o)if(e&&(0,i.pC)(e.geometry))return void f.write(e.geometry.type,t,r,n)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=(0,d.im)(e);return!r&&t.spatialReference&&(n.spatialReference=p.Z.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)e&&(0,i.pC)(e.geometry)&&e.geometry.spatialReference&&(t.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const t=e&&e[r];n.geometry=t&&t.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,o]}=e,s=this.features,a=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-n)/t)),(e=>Math.round((o-e)/r)));for(let e=0,t=s.length;e<t;e++)a((0,i.Wg)(s[e].geometry))||(s.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,o],scale:[s,a]}=r,l=this._getHydrationFunction(e,(e=>e*s+n),(e=>o-e*a));for(const{geometry:e}of t)(0,i.pC)(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let n,i;const o=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=r(a[1]);e===n&&s===i||(o.push([e-n,s-i]),n=e,i=s)}else n=t(a[0]),i=r(a[1]),o.push([n,i])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const n=(0,d.oU)(e)?e.rings:e.paths,i=[];for(let e=0,o=n.length;e<o;e++){const o=n[e],s=this._quantizePoints(o,t,r);s&&i.push(s)}return i.length>0?((0,d.oU)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{let n;return n=this._quantizePoints(e.points,t,r),n.length>0?(e.points=n,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?e=>{const n=(0,d.oU)(e)?e.rings:e.paths;let i,o;for(let e=0,s=n.length;e<s;e++){const s=n[e];for(let e=0,n=s.length;e<n;e++){const n=s[e];e>0?(i+=n[0],o+=n[1]):(i=n[0],o=n[1]),n[0]=t(i),n[1]=r(o)}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?e=>{const n=e.points;let i,o;for(let e=0,s=n.length;e<s;e++){const s=n[e];e>0?(i+=s[0],o+=s[1]):(i=s[0],o=s[1]),s[0]=t(i),s[1]=r(o)}}:void 0}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],g.prototype,"displayFieldName",void 0),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,o.Cb)({type:[y.default],json:{write:!0}})],g.prototype,"features",void 0),(0,n._)([(0,a.r)("features")],g.prototype,"readFeatures",null),(0,n._)([(0,o.Cb)({type:[m.Z],json:{write:!0}})],g.prototype,"fields",void 0),(0,n._)([(0,o.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],g.prototype,"geometryType",void 0),(0,n._)([(0,u.c)("geometryType")],g.prototype,"writeGeometryType",null),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasM",void 0),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasZ",void 0),(0,n._)([(0,o.Cb)({types:h.qM,json:{write:!0}})],g.prototype,"queryGeometry",void 0),(0,n._)([(0,a.r)("queryGeometry")],g.prototype,"readQueryGeometry",null),(0,n._)([(0,o.Cb)({type:p.Z,json:{write:!0}})],g.prototype,"spatialReference",void 0),(0,n._)([(0,u.c)("spatialReference")],g.prototype,"writeSpatialReference",null),(0,n._)([(0,o.Cb)({json:{write:!0}})],g.prototype,"transform",void 0),g=(0,n._)([(0,l.j)("esri.tasks.support.FeatureSet")],g),g.prototype.toJSON.isDefaultToJSON=!0,g||(g={});const b=g},17154:(e,t,r)=>{"use strict";r.d(t,{jE:()=>u,c5:()=>g,LU:()=>v,Q4:()=>b,tB:()=>c,T:()=>a,u1:()=>s,pG:()=>h,ZA:()=>p,_F:()=>l});var n=r(33655),i=r(77625),o=r(17387);function s(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],n=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,r),n))}function a(e,t,r){r=r||e;const n=(0,o.d)(e,t);(0,o.s)(r,e[0]-n*t[0],e[1]-n*t[1],e[2]-n*t[2]),(0,o.n)(r,r)}function l(e,t,r){Math.abs(e[0])>Math.abs(e[1])?(0,o.s)(t,0,1,0):(0,o.s)(t,1,0,0),(0,o.c)(r,e,t),(0,o.n)(t,t),(0,o.c)(t,r,e),(0,o.n)(r,r)}function u(e,t){const r=(0,o.l)(e),i=(0,n.Kt)(e[2]/r),s=Math.atan2(e[1]/r,e[0]/r);return(0,o.s)(t,r,i,s),t}function c(e,t,r){const n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2];let s=n*n+i*i+o*o;return s?(s=1/Math.sqrt(s),e[0]=n*s,e[1]=i*s,e[2]=o*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}function p(e,t,r,n=(0,i.c)()){const s=(0,o.l)(e),a=(0,o.l)(t),l=(0,o.d)(e,t)/(s*a);if(l<.9999999999999999){const i=Math.acos(l),u=((1-r)*s+r*a)/Math.sin(i),c=u/s*Math.sin((1-r)*i),p=u/a*Math.sin(r*i);return(0,o.a)(w,e,c),(0,o.a)(_,t,p),(0,o.b)(n,w,_)}return(0,o.e)(n,e,t,r)}class d{constructor(e,t){this.min=e,this.max=t,this.range=t-e}ndiff(e,t=0){return Math.ceil((e-t)/this.range)*this.range+t}_normalize(e,t,r,n=0,i=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),i&&r===t&&(r=e),r+n}normalize(e,t=0,r=!1){return this._normalize(this.min,this.max,e,t,r)}clamp(e,t=0){return(0,n.uZ)(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+this.ndiff(e-t,r)}minimalMonotonic(e,t,r){return this._normalize(e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}}function h(e,t,r,n){(0,o.f)(y,t,e),(0,o.f)(m,r,e),(0,o.c)(n,y,m),(0,o.n)(n,n),n[3]=-(0,o.d)(e,n)}const y=(0,i.c)(),m=(0,i.c)();function f(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}const g=f(new d(0,2*Math.PI)),b=f(new d(-Math.PI,Math.PI)),v=f(new d(0,360)),w=((0,i.c)(),(0,i.c)()),_=(0,i.c)()},94535:(e,t,r)=>{"use strict";r.d(t,{M:()=>s,e:()=>a});var n=r(2992),i=r(46539),o=r(16853);const s={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class a extends i.a{constructor(e=s.maximumClickDelay,t=s.movementUntilMouseDrag,r=s.movementUntilPenDrag,i=s.movementUntilTouchDrag,o=s.holdDelay,a=n.Z){super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=t,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=i,this.holdDelay=o,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(e=>{this._handlePointerLoss(e,"pointer-up")})),this.registerIncoming("pointer-capture-lost",(e=>{this._handlePointerLoss(e,"pointer-capture-lost")})),this.registerIncoming("pointer-cancel",(e=>{this._handlePointerLoss(e,"pointer-cancel")})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((e=>{null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null)})),super.onUninstall()}_handlePointerDown(e){const t=e.data,r=t.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const t=this._pointerState.get(r);if(t){if(!t.isDragging){const r=t.previousEvent;this._pointerHold.emit(r,void 0,e.modifiers),t.holdEmitted=!0}t.holdTimeout=null}}),this.holdDelay));const i={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,i),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(e)}_createPointerDragData(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}_handlePointerMove(e){const t=e.data,r=t.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,t),void 0,n.modifiers):(0,o.WI)(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this.startDragging(e),n.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;case"mouse":default:return this.movementUntilMouseDrag}}startDragging(e){const t=e.data,r=t.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,t)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))}))}_handlePointerLoss(e,t){const r=e.data,n=r.native.pointerId,i=this._pointerState.get(n);i&&(null!=i.holdTimeout&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",i,"pointer-up"===t?r:i.previousEvent),void 0,i.modifiers):"pointer-up"===t&&i.downButton===r.native.button&&e.timestamp-i.startTimestamp<=this.maximumClickDelay&&!i.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),0===this._pointerState.size&&this._moveHandle.pause())}}},16853:(e,t,r)=>{"use strict";r.d(t,{WI:()=>o,y_:()=>s,nk:()=>i});var n=r(96071);function i(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function o(e,t){const r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}function s(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:(0,n.vW)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){const[r,n]=e,[i,o]=[n.x-r.x,n.y-r.y];return t.radius=Math.sqrt(i*i+o*o)/2,t.center.x=(r.x+n.x)/2,t.center.y=(r.y+n.y)/2,t}let r=0,i=0;for(let t=0;t<e.length;t++)r+=e[t].x,i+=e[t].y;r/=e.length,i/=e.length;const o=e.map((e=>e.x-r)),s=e.map((e=>e.y-i));let a=0,l=0,u=0,c=0,p=0,d=0,h=0;for(let e=0;e<o.length;e++){const t=o[e],r=s[e],n=t*t,i=r*r;a+=n,l+=i,u+=t*r,c+=n*t,p+=i*r,d+=t*i,h+=r*n}const y=.5*(c+d),m=.5*(p+h),f=a*l-u*u,g=(y*l-m*u)/f,b=(a*m-u*y)/f,v=(0,n.vW)(g+r,b+i);return{radius:Math.sqrt(g*g+b*b+(a+l)/e.length),center:v}}},45671:(e,t,r)=>{"use strict";r.d(t,{t:()=>d});var n=r(56140),i=r(95844),o=r(79881),s=r(87566),a=r(74386),l=r(3059),u=r(82677),c=r(59691),p=r(80621);let d=class extends u.default{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new c.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,n=0){const i=0!=(1&n),o=++this.handleId;i||this.installSyncUpdatingWatch(e,t,o);const s=0!=(2&n)?(0,p.init)(e,t,r,i):e.watch(t,r,i);return this.handles.add(s,o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionPropertyChange(e,t,r,n=0){const i=0!=(2&n),o=++this.handleId;return this.handles.add([(0,p.on)(e,t,"after-changes",this.createSyncUpdatingCallback()),(0,p.on)(e,t,"change",r,i?e=>{r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:()=>{this.handles.remove(o)}}}addOnCollectionChange(e,t,r=0){const n=0!=(2&r),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(i)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(h)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const n=this.createSyncUpdatingCallback(),o=(0,l.QU)((()=>(0,i.$z)(e,t)),n);return this.handles.add(o,r),o}createSyncUpdatingCallback(){return()=>{this.handles.remove(h),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,a.Os)((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(h))})),h)}}};(0,n._)([(0,o.Cb)({readOnly:!0})],d.prototype,"updating",void 0),d=(0,n._)([(0,s.j)("esri.views.support.WatchUpdatingTracking")],d);const h=-42},29155:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n,i=r(56140),o=(r(95830),r(82550)),s=(r(36544),r(68055),r(79881)),a=r(87566),l=(r(10923),r(57002),r(86035),r(58385)),u=r(78745);let c=n=class extends l.wq{constructor(e){super(e),this.color=new u.default([0,0,0,1])}clone(){return new n((0,o.d9)({color:this.color}))}};(0,i._)([(0,s.Cb)({type:u.default,json:{write:!0}})],c.prototype,"color",void 0),c=n=(0,i._)([(0,a.j)("esri.webmap.background.ColorBackground")],c);const p=c}},0,[[84893,3666,1518,2673,8157,7333,2551,7383,5988,6814,5666,3533,2696,5287,1397],[91397,3666,1518,2673,8157,7333,2551,7383,5988,6814,5666,3533,2696,5287,1397],[81610,3666,1518,2673,8157,7333,2551,7383,5988,6814,5666,3533,2696,5287,1397]]]);
//# sourceMappingURL=overviewMap.js.map